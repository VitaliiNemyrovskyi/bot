{"version":3,"file":"694.js","mappings":"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","sources":["./src/app/components/lightweight-chart/lightweight-chart.component.ts","./src/app/components/lightweight-chart/lightweight-chart.component.html","./src/app/components/ui/dropdown/dropdown.component.ts","./src/app/components/ui/dropdown/dropdown.component.html","./src/app/components/ui/select/select.component.ts","./src/app/components/ui/select/select.component.html","./src/app/services/bybit-websocket.service.ts","./src/app/services/bybit.service.ts","./node_modules/rxjs/dist/esm/internal/Scheduler.js","./node_modules/rxjs/dist/esm/internal/observable/dom/WebSocketSubject.js","./node_modules/rxjs/dist/esm/internal/observable/dom/webSocket.js","./node_modules/rxjs/dist/esm/internal/observable/timer.js","./node_modules/rxjs/dist/esm/internal/operators/timeout.js","./node_modules/rxjs/dist/esm/internal/scheduler/Action.js","./node_modules/rxjs/dist/esm/internal/scheduler/AsyncAction.js","./node_modules/rxjs/dist/esm/internal/scheduler/AsyncScheduler.js","./node_modules/rxjs/dist/esm/internal/scheduler/async.js","./node_modules/rxjs/dist/esm/internal/scheduler/intervalProvider.js","./node_modules/rxjs/dist/esm/internal/util/isDate.js","./node_modules/fancy-canvas/canvas-element-bitmap-size.mjs","./node_modules/fancy-canvas/canvas-rendering-target.mjs","./node_modules/fancy-canvas/device-pixel-ratio.mjs","./node_modules/fancy-canvas/index.mjs","./node_modules/fancy-canvas/size.mjs","./node_modules/lightweight-charts/dist/lightweight-charts.development.mjs"],"sourcesContent":["import { Component, OnInit, OnDestroy, AfterViewInit, ViewChild, ElementRef, Input, Output, EventEmitter, effect, computed } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { createChart, CandlestickData, ColorType, CandlestickSeries, ISeriesApi, IChartApi, Time, UTCTimestamp } from 'lightweight-charts';\nimport { ThemeService } from '../../services/theme.service';\nimport { BybitService } from '../../services/bybit.service';\nimport { Subscription } from 'rxjs';\nimport { TranslationService } from '../../services/translation.service';\nimport { SelectComponent, SelectOption } from '../ui/select/select.component';\nimport { DropdownComponent, DropdownOption } from '../ui/dropdown/dropdown.component';\nimport { ButtonComponent } from '../ui/button/button.component';\n\n/**\n * Grid trading bot configuration for chart visualization\n */\nexport interface GridConfig {\n  symbol: string;\n  upperBound: number;\n  lowerBound: number;\n  gridCount: number;\n  gridSpacing: number;\n  strategyType: string;\n}\n\n/**\n * Chart data format for initial data input\n */\nexport interface ChartData {\n  time: string;\n  open: number;\n  high: number;\n  low: number;\n  close: number;\n  volume?: number;\n}\n\n/**\n * Lightweight Chart Component - Real-time candlestick chart visualization\n *\n * This component provides a professional-grade candlestick chart using the lightweight-charts\n * library (v5). It displays real-time cryptocurrency market data with:\n * - Real-time candlestick updates via WebSocket\n * - Historical data loading via REST API\n * - Grid line visualization for trading strategies\n * - Theme switching (light/dark mode)\n * - Automatic reconnection and fallback handling\n *\n * The component follows the pattern:\n * 1. Fetch initial historical data (REST API)\n * 2. Subscribe to real-time updates (WebSocket)\n * 3. On first emission: setData() to load all candles\n * 4. On subsequent emissions: update() to modify last candle only\n *\n * @example\n * ```html\n * <app-lightweight-chart\n *   [symbol]=\"'BTCUSDT'\"\n *   [chartHeight]=\"600\"\n *   [gridConfig]=\"gridConfig\"\n *   (symbolChange)=\"onSymbolChange($event)\">\n * </app-lightweight-chart>\n * ```\n *\n * @see {@link BybitService} for data source\n * @see WEBSOCKET_DATA_FLOW.md for complete data flow documentation\n */\n@Component({\n  selector: 'app-lightweight-chart',\n  standalone: true,\n  imports: [CommonModule, FormsModule, SelectComponent, DropdownComponent, ButtonComponent],\n  templateUrl: './lightweight-chart.component.html',\n  styleUrl: './lightweight-chart.component.scss'\n})\nexport class LightweightChartComponent implements OnInit, AfterViewInit, OnDestroy {\n  @ViewChild('chartContainer', { static: false }) chartContainer!: ElementRef;\n\n  // Core chart inputs\n  @Input() symbol: string = 'BTCUSDT';\n  @Input() initialData: ChartData[] = [];\n  @Input() gridConfig?: GridConfig;\n  @Input() chartHeight: number = 600;\n\n  // Trading dashboard integration inputs\n  @Input() showCredentialSelector: boolean = false;\n  @Input() showSymbolSelector: boolean = false;\n  @Input() showMarketTypeSelector: boolean = false;\n  @Input() showEnvironmentBadge: boolean = false;\n  @Input() credentialOptions: DropdownOption[] = [];\n  @Input() symbolOptions: DropdownOption[] = [];\n  @Input() isLoadingSymbols: boolean = false;\n  @Input() environment: 'TESTNET' | 'MAINNET' = 'TESTNET';\n\n  // Outputs\n  @Output() symbolChange = new EventEmitter<string>();\n  @Output() credentialChange = new EventEmitter<string>();\n  @Output() marketTypeChange = new EventEmitter<string>();\n\n  // Internal state for selectors\n  selectedCredentialId: string = '';\n  selectedMarketType: string = 'spot';\n\n  // Market type options\n  marketTypeOptions: DropdownOption[] = [\n    { value: 'spot', label: 'Spot' },\n    { value: 'linear', label: 'Futures (USDT)' },\n    { value: 'inverse', label: 'Futures (Inverse)' }\n  ];\n\n  private chart: IChartApi | null = null;\n  private candlestickSeries: ISeriesApi<'Candlestick'> | null = null;\n  private gridLines: any[] = [];\n  private dataSubscription?: Subscription;\n\n  // Component state\n  loading = false;\n  error: string | null = null;\n  currentSymbol = this.symbol;\n\n  // WebSocket connection status\n  connectionStatus: 'disconnected' | 'connecting' | 'connected' = 'disconnected';\n  connectionStatusText = 'Disconnected';\n\n  // Chart configuration\n  showVolume = false;\n  showGrid = true;\n  chartType: 'candlestick' | 'line' = 'candlestick';\n\n  // Theme integration\n  readonly currentTheme = this.themeService.currentTheme;\n  readonly isDark = computed(() => this.currentTheme() === 'dark');\n\n  constructor(\n    private themeService: ThemeService,\n    private bybitService: BybitService,\n    private translationService: TranslationService\n  ) {\n    // React to theme changes\n    effect(() => {\n      const isDark = this.isDark();\n      if (this.chart) {\n        this.updateChartTheme(isDark);\n      }\n    });\n\n    // Subscribe to WebSocket connection status\n    this.bybitService.getWebSocketConnectionState().subscribe(status => {\n      this.connectionStatus = status;\n      switch (status) {\n        case 'disconnected':\n          this.connectionStatusText = this.translate('chart.disconnected');\n          break;\n        case 'connecting':\n          this.connectionStatusText = this.translate('chart.connecting');\n          break;\n        case 'connected':\n          this.connectionStatusText = this.translate('chart.live');\n          break;\n      }\n    });\n  }\n\n  translate(key: string): string {\n    return this.translationService.translate(key);\n  }\n\n  ngOnInit(): void {\n    this.currentSymbol = this.symbol;\n  }\n\n  ngAfterViewInit(): void {\n    setTimeout(() => {\n      this.initializeChart();\n    }, 100);\n  }\n\n  ngOnDestroy(): void {\n    // Clean up subscription\n    if (this.dataSubscription) {\n      this.dataSubscription.unsubscribe();\n    }\n\n    // Unsubscribe from WebSocket data\n    if (this.symbol) {\n      const symbol = this.getSymbolForApi();\n      this.bybitService.unsubscribeFromRealtimeKline(symbol, '1');\n    }\n\n    // Clean up chart\n    if (this.chart) {\n      this.chart.remove();\n      this.chart = null;\n    }\n  }\n\n  private initializeChart(): void {\n    console.log('=== CHART INITIALIZATION START ===');\n    console.log('Chart container:', this.chartContainer?.nativeElement);\n\n    if (!this.chartContainer?.nativeElement) {\n      this.error = this.translate('chart.containerNotFound');\n      console.error('Chart container not found!');\n      return;\n    }\n\n    try {\n      this.loading = true;\n      this.error = null;\n      console.log('Loading state set to true, starting chart creation...');\n\n      const isDark = this.isDark();\n      const container = this.chartContainer.nativeElement;\n\n      // Ensure container has dimensions\n      if (container.clientWidth === 0 || container.clientHeight === 0) {\n        container.style.width = '100%';\n        container.style.height = this.chartHeight + 'px';\n      }\n\n      this.chart = createChart(container, {\n        width: container.clientWidth || 800,\n        height: this.chartHeight,\n        // this.translateService.currentLanguage(),\n        // hide_side_toolbar: false,\n        // hide_top_toolbar: false,\n        // hide_legend: false,\n        layout: {\n          background: {\n            type: ColorType.Solid,\n            color: isDark ? '#1e1e1e' : '#ffffff',\n          },\n          textColor: isDark ? '#d1d4dc' : '#191919',\n        },\n        grid: {\n          vertLines: {\n            color: isDark ? 'rgba(197, 203, 206, 0.1)' : 'rgba(197, 203, 206, 0.5)',\n          },\n          horzLines: {\n            color: isDark ? 'rgba(197, 203, 206, 0.1)' : 'rgba(197, 203, 206, 0.5)',\n          },\n        },\n        crosshair: {\n          mode: 1,\n        },\n        rightPriceScale: {\n          borderColor: isDark ? 'rgba(197, 203, 206, 0.1)' : 'rgba(197, 203, 206, 1)',\n        },\n        timeScale: {\n          borderColor: isDark ? 'rgba(197, 203, 206, 0.1)' : 'rgba(197, 203, 206, 1)',\n          timeVisible: true,\n          secondsVisible: false,\n        },\n      });\n\n      // Add candlestick series using lightweight-charts v5 API\n      try {\n        console.log('Creating candlestick series...');\n\n        // In v5, use addSeries() with CandlestickSeries type\n        this.candlestickSeries = this.chart.addSeries(CandlestickSeries, {\n          upColor: '#26a69a',\n          downColor: '#ef5350',\n          borderVisible: false,\n          wickUpColor: '#26a69a',\n          wickDownColor: '#ef5350',\n        });\n\n        console.log('Candlestick series created successfully:', this.candlestickSeries);\n\n        // Load real market data from Bybit\n        this.loadMarketData();\n      } catch (seriesError) {\n        console.error('Failed to add candlestick series:', seriesError);\n        this.error = this.translate('chart.failedToCreateSeries') + ': ' + (seriesError as Error).message;\n        return;\n      }\n\n      // Add grid lines if grid config is provided\n      if (this.gridConfig && this.showGrid) {\n        this.addGridLines();\n      }\n\n      // Handle resize\n      this.setupResizeHandler();\n\n      this.loading = false;\n    } catch (error) {\n      this.loading = false;\n      this.error = this.translate('chart.failedToInitialize') + ': ' + (error as Error).message;\n      console.error('Chart initialization error:', error);\n    }\n  }\n\n  private updateChartTheme(isDark: boolean): void {\n    if (!this.chart) return;\n\n    this.chart.applyOptions({\n      layout: {\n        background: {\n          type: ColorType.Solid,\n          color: isDark ? '#1e1e1e' : '#ffffff',\n        },\n        textColor: isDark ? '#d1d4dc' : '#191919',\n      },\n      grid: {\n        vertLines: {\n          color: isDark ? 'rgba(197, 203, 206, 0.1)' : 'rgba(197, 203, 206, 0.5)',\n        },\n        horzLines: {\n          color: isDark ? 'rgba(197, 203, 206, 0.1)' : 'rgba(197, 203, 206, 0.5)',\n        },\n      },\n      rightPriceScale: {\n        borderColor: isDark ? 'rgba(197, 203, 206, 0.1)' : 'rgba(197, 203, 206, 1)',\n      },\n      timeScale: {\n        borderColor: isDark ? 'rgba(197, 203, 206, 0.1)' : 'rgba(197, 203, 206, 1)',\n      },\n    });\n  }\n\n  private loadMarketData(): void {\n    if (!this.candlestickSeries) {\n      console.error('No series available to load data');\n      return;\n    }\n\n    // Show loading state\n    this.loading = true;\n    this.error = null;\n\n    // Get the symbol for the API call\n    const symbol = this.getSymbolForApi();\n    console.log(`Loading real-time market data for symbol: ${symbol}`);\n\n    // Clean up existing subscription\n    if (this.dataSubscription) {\n      this.dataSubscription.unsubscribe();\n    }\n\n    // Track if this is the first data load\n    let isFirstLoad = true;\n\n    // Subscribe to real-time Bybit data (REST + WebSocket)\n    console.log('[CHART] Subscribing to real-time kline data...');\n    this.dataSubscription = this.bybitService.getRealTimeKlineData(symbol, '1').subscribe({\n      next: (data) => {\n        try {\n          console.log(`[CHART] Received ${data.length} data points from Bybit (real-time)`);\n          console.log('[CHART] First load:', isFirstLoad);\n          console.log('[CHART] Last 3 candles:', data.slice(-3));\n\n          // Validate data before setting\n          if (!data || data.length === 0) {\n            throw new Error('No data received from Bybit');\n          }\n\n          // Convert data to proper Time format for lightweight-charts\n          const formattedData: CandlestickData<Time>[] = data.map(item => ({\n            time: (typeof item.time === 'number' ? item.time : parseInt(item.time)) as UTCTimestamp,\n            open: item.open,\n            high: item.high,\n            low: item.low,\n            close: item.close,\n          }));\n\n          console.log('[CHART] Formatted data, last candle:', formattedData[formattedData.length - 1]);\n\n          if (this.candlestickSeries) {\n            if (isFirstLoad) {\n              // First load: set all data\n              console.log('[CHART] Setting initial chart data with', formattedData.length, 'candles');\n              this.candlestickSeries.setData(formattedData);\n              isFirstLoad = false;\n\n              // Auto-fit the chart to show all data\n              if (this.chart) {\n                this.chart.timeScale().fitContent();\n              }\n\n              console.log('[CHART] Initial data loaded successfully, waiting for updates...');\n            } else {\n              // Subsequent updates: update the last candle\n              const lastCandle = formattedData[formattedData.length - 1];\n              console.log('[CHART] *** UPDATING CHART WITH NEW CANDLE ***:', {\n                time: new Date((lastCandle.time as number) * 1000).toISOString(),\n                open: lastCandle.open,\n                high: lastCandle.high,\n                low: lastCandle.low,\n                close: lastCandle.close\n              });\n\n              this.candlestickSeries.update(lastCandle);\n              console.log('[CHART] *** CHART UPDATE COMPLETED ***');\n            }\n          } else {\n            console.error('[CHART] No candlestick series available!');\n          }\n\n          // Hide loading state\n          this.loading = false;\n        } catch (error) {\n          console.error('[CHART] Error processing real-time market data:', error);\n          this.error = this.translate('chart.failedToProcess') + ': ' + (error as Error).message;\n          this.loading = false;\n        }\n      },\n      error: (error) => {\n        console.error('[CHART] Error loading real-time market data from Bybit:', error);\n        this.error = this.translate('chart.failedToLoadData');\n        this.loading = false;\n\n        // Fallback to REST API only\n        this.loadFallbackData(symbol);\n      }\n    });\n\n    console.log('[CHART] Subscription created successfully');\n  }\n\n  /**\n   * Fallback method to load data using REST API only\n   */\n  private loadFallbackData(symbol: string): void {\n    console.log('Loading fallback data using REST API only...');\n\n    this.dataSubscription = this.bybitService.getKlineData(symbol).subscribe({\n      next: (data) => {\n        try {\n          console.log(`Received ${data.length} fallback data points`);\n\n          if (!data || data.length === 0) {\n            throw new Error('No fallback data received');\n          }\n\n          // Convert data to proper Time format for lightweight-charts\n          const formattedData: CandlestickData<Time>[] = data.map(item => ({\n            time: (typeof item.time === 'number' ? item.time : parseInt(item.time)) as UTCTimestamp,\n            open: item.open,\n            high: item.high,\n            low: item.low,\n            close: item.close,\n          }));\n\n          if (this.candlestickSeries) {\n            this.candlestickSeries.setData(formattedData);\n          }\n\n          if (this.chart) {\n            this.chart.timeScale().fitContent();\n          }\n\n          this.loading = false;\n          this.error = this.translate('chart.usingFallback');\n        } catch (error) {\n          console.error('Error processing fallback data:', error);\n          this.error = this.translate('chart.failedToLoadAny') + ': ' + (error as Error).message;\n          this.loading = false;\n        }\n      },\n      error: (error) => {\n        console.error('Error loading fallback data:', error);\n        this.error = this.translate('chart.failedAllSources');\n        this.loading = false;\n      }\n    });\n  }\n\n  /**\n   * Convert component symbol format to Bybit API format\n   */\n  private getSymbolForApi(): string {\n    if (!this.symbol) {\n      return 'BTCUSDT';\n    }\n\n    // Remove slash if present (BTC/USDT -> BTCUSDT)\n    const apiSymbol = this.symbol.replace('/', '');\n\n    // Ensure it ends with USDT for spot trading\n    if (!apiSymbol.endsWith('USDT')) {\n      return apiSymbol + 'USDT';\n    }\n\n    return apiSymbol;\n  }\n\n  private loadData(data: ChartData[]): void {\n    if (!this.candlestickSeries) return;\n\n    const formattedData: CandlestickData<Time>[] = data.map(item => ({\n      time: (typeof item.time === 'number' ? item.time : parseInt(item.time)) as UTCTimestamp,\n      open: item.open,\n      high: item.high,\n      low: item.low,\n      close: item.close,\n    }));\n\n    this.candlestickSeries.setData(formattedData);\n  }\n\n  private addGridLines(): void {\n    if (!this.chart || !this.gridConfig) return;\n\n    try {\n      // Clear existing grid lines\n      this.gridLines.forEach(line => {\n        try {\n          this.candlestickSeries?.removePriceLine(line);\n        } catch (e) {\n          console.warn('Failed to remove grid line:', e);\n        }\n      });\n      this.gridLines = [];\n\n      const { upperBound, lowerBound, gridCount } = this.gridConfig;\n      const priceStep = (upperBound - lowerBound) / (gridCount - 1);\n\n      for (let i = 0; i < gridCount; i++) {\n        const price = lowerBound + (i * priceStep);\n\n        try {\n          // Use price lines instead of line series for grid\n          const priceLine = this.candlestickSeries?.createPriceLine({\n            price: price,\n            color: this.isDark() ? 'rgba(255, 82, 82, 0.3)' : 'rgba(255, 82, 82, 0.5)',\n            lineWidth: 1,\n            lineStyle: 2, // Dashed line\n            axisLabelVisible: false,\n            title: `Grid ${i + 1}`,\n          });\n\n          if (priceLine) {\n            this.gridLines.push(priceLine);\n          }\n        } catch (lineError) {\n          console.warn('Failed to add grid line:', lineError);\n        }\n      }\n    } catch (error) {\n      console.error('Error adding grid lines:', error);\n    }\n  }\n\n  private setupResizeHandler(): void {\n    const resizeObserver = new ResizeObserver(entries => {\n      if (this.chart && entries.length > 0) {\n        const { width, height } = entries[0].contentRect;\n        this.chart.applyOptions({ width, height: this.chartHeight });\n      }\n    });\n\n    if (this.chartContainer?.nativeElement) {\n      resizeObserver.observe(this.chartContainer.nativeElement);\n    }\n  }\n\n  // Public methods\n  updateSymbol(): void {\n    if (this.currentSymbol && this.currentSymbol.trim()) {\n      // Unsubscribe from old symbol\n      if (this.symbol) {\n        const oldSymbol = this.getSymbolForApi();\n        this.bybitService.unsubscribeFromRealtimeKline(oldSymbol, '1');\n      }\n\n      // Update symbol and reload data\n      this.symbol = this.currentSymbol.trim();\n      this.symbolChange.emit(this.symbol);\n      this.loadMarketData(); // Load real-time market data from Bybit\n    }\n  }\n\n  /**\n   * Handle symbol selection from dropdown\n   */\n  onSymbolSelect(symbol: string): void {\n    console.log('Symbol selected from dropdown:', symbol);\n    this.currentSymbol = symbol;\n    this.updateSymbol();\n  }\n\n  /**\n   * Handle credential change from dropdown\n   */\n  onCredentialChange(credentialId: string): void {\n    console.log('Credential changed in chart:', credentialId);\n    this.selectedCredentialId = credentialId;\n    this.credentialChange.emit(credentialId);\n  }\n\n  /**\n   * Handle market type change from dropdown\n   */\n  onMarketTypeChange(marketType: string): void {\n    console.log('Market type changed:', marketType);\n    this.selectedMarketType = marketType;\n    this.marketTypeChange.emit(marketType);\n  }\n\n  toggleGrid(): void {\n    this.showGrid = !this.showGrid;\n    if (this.showGrid && this.gridConfig) {\n      this.addGridLines();\n    } else {\n      this.gridLines.forEach(line => {\n        try {\n          this.candlestickSeries?.removePriceLine(line);\n        } catch (e) {\n          console.warn('Failed to remove grid line:', e);\n        }\n      });\n      this.gridLines = [];\n    }\n  }\n\n  toggleTheme(): void {\n    this.themeService.toggleTheme();\n  }\n\n  updateGridConfig(config: GridConfig): void {\n    this.gridConfig = config;\n    if (this.showGrid) {\n      this.addGridLines();\n    }\n  }\n\n  retry(): void {\n    this.error = null;\n    this.initializeChart();\n  }\n}\n","<div class=\"lightweight-chart-container\" [class.dark-theme]=\"isDark()\">\n  <!-- Chart Header with Controls -->\n  <div class=\"chart-header\">\n    <div class=\"chart-title-section\">\n      <h3 class=\"chart-title\">\n        {{ currentSymbol }} Chart\n        @if (showEnvironmentBadge && environment === 'TESTNET') {\n          <span class=\"testnet-badge\">TESTNET - Live Market Data</span>\n        }\n      </h3>\n    </div>\n\n    <div class=\"chart-controls-section\">\n      <!-- Credential Selector (if enabled) -->\n      @if (showCredentialSelector && credentialOptions && credentialOptions.length > 0) {\n        <ui-dropdown\n          [options]=\"credentialOptions\"\n          [(ngModel)]=\"selectedCredentialId\"\n          (ngModelChange)=\"onCredentialChange($event)\"\n          placeholder=\"Select API Key\"\n          size=\"small\"\n          width=\"medium\"\n          [searchable]=\"false\"\n          class=\"credential-select\">\n        </ui-dropdown>\n\n        <ui-dropdown\n            [options]=\"marketTypeOptions\"\n            [(ngModel)]=\"selectedMarketType\"\n            (ngModelChange)=\"onMarketTypeChange($event)\"\n            placeholder=\"Market Type\"\n            size=\"small\"\n            [searchable]=\"false\"\n            class=\"market-type-select\">\n        </ui-dropdown>\n      }\n\n      <!-- Symbol Selector (if enabled) -->\n      @if (showSymbolSelector && symbolOptions && symbolOptions.length > 0) {\n        <ui-dropdown\n          [options]=\"symbolOptions\"\n          [(ngModel)]=\"currentSymbol\"\n          (ngModelChange)=\"onSymbolSelect($event)\"\n          placeholder=\"Select Symbol\"\n          size=\"small\"\n          [searchable]=\"true\"\n          [disabled]=\"isLoadingSymbols\"\n          class=\"symbol-select\">\n        </ui-dropdown>\n      } @else {\n        <!-- Manual Symbol Input (fallback) -->\n        <div class=\"symbol-input-group\">\n          <input\n            type=\"text\"\n            class=\"symbol-input\"\n            [(ngModel)]=\"currentSymbol\"\n            [placeholder]=\"translate('chart.enterSymbol')\"\n            (keyup.enter)=\"updateSymbol()\"\n          />\n          <ui-button variant=\"primary\" size=\"small\" (clicked)=\"updateSymbol()\">\n            {{ translate('button.load') }}\n          </ui-button>\n        </div>\n      }\n    </div>\n  </div>\n\n  <!-- Chart Container -->\n  <div class=\"chart-wrapper\">\n    <!-- Loading Overlay -->\n    @if (loading) {\n      <div class=\"loading-overlay\">\n        <div class=\"loading-spinner\"></div>\n        <p>{{ translate('chart.loading') }}</p>\n      </div>\n    }\n\n    <!-- Error Overlay -->\n    @if (error) {\n      <div class=\"error-overlay\">\n        <div class=\"error-content\">\n          <h3>{{ translate('chart.error') }}</h3>\n          <p>{{ error }}</p>\n          <ui-button variant=\"primary\" size=\"medium\" (clicked)=\"retry()\">\n            {{ translate('button.retry') }}\n          </ui-button>\n        </div>\n      </div>\n    }\n\n    <!-- Chart Container -->\n    <div\n      #chartContainer\n      class=\"chart-container\"\n      [style.height.px]=\"chartHeight\"\n    ></div>\n  </div>\n\n  <!-- Chart Info -->\n  <div class=\"chart-info\">\n    <div class=\"symbol-info\">\n      <span class=\"symbol-name\">{{ symbol }}</span>\n      @if (gridConfig) {\n        <span class=\"grid-info\">\n          {{ translate('chart.grid') }}: {{ gridConfig.gridCount }} {{ translate('chart.levels') }} ({{ gridConfig.lowerBound | number:'1.2-2' }} - {{ gridConfig.upperBound | number:'1.2-2' }})\n        </span>\n      }\n    </div>\n  </div>\n</div>\n","import { Component, Input, Output, EventEmitter, forwardRef, signal, computed, effect, ElementRef, ViewChild } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\nimport { ThemeService } from '../../../services/theme.service';\n\nexport interface DropdownOption {\n  value: string;\n  label: string;\n  disabled?: boolean;\n  icon?: string;\n}\n\n/**\n * Custom Dropdown Component\n *\n * Features:\n * - Theme support (light/dark mode)\n * - Built-in search functionality\n * - Keyboard navigation (Arrow keys, Enter, Escape)\n * - Reactive Forms support (ControlValueAccessor)\n * - Customizable styling\n * - Disabled state support\n * - Icon support for options\n *\n * @example\n * ```html\n * <ui-dropdown\n *   [options]=\"options\"\n *   [(ngModel)]=\"selectedValue\"\n *   [searchable]=\"true\"\n *   placeholder=\"Select an option\"\n *   (selectionChange)=\"onSelect($event)\">\n * </ui-dropdown>\n * ```\n */\n@Component({\n  selector: 'ui-dropdown',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  templateUrl: './dropdown.component.html',\n  styleUrl: './dropdown.component.scss',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => DropdownComponent),\n      multi: true\n    }\n  ]\n})\nexport class DropdownComponent implements ControlValueAccessor {\n  @ViewChild('searchInput') searchInput?: ElementRef<HTMLInputElement>;\n\n  @Input() options: DropdownOption[] = [];\n  @Input() placeholder: string = 'Select an option';\n  @Input() searchable: boolean = true;\n  @Input() disabled: boolean = false;\n  @Input() size: 'small' | 'medium' | 'large' = 'medium';\n  @Input() width: 'normal' | 'medium' | 'wide' = 'normal';\n  @Input() searchPlaceholder: string = 'Search...';\n\n  @Output() selectionChange = new EventEmitter<string>();\n\n  // Internal state\n  isOpen = signal<boolean>(false);\n  searchQuery = signal<string>('');\n  selectedValue = signal<string | null>(null);\n  highlightedIndex = signal<number>(-1);\n\n  // Theme integration\n  readonly currentTheme = this.themeService.currentTheme;\n  readonly isDark = computed(() => this.currentTheme() === 'dark');\n\n  // Filtered options based on search\n  filteredOptions = computed(() => {\n    const query = this.searchQuery().toLowerCase();\n    if (!query) return this.options;\n\n    return this.options.filter(option =>\n      option.label.toLowerCase().includes(query) ||\n      option.value.toLowerCase().includes(query)\n    );\n  });\n\n  // Selected option display\n  selectedOption = computed(() => {\n    const value = this.selectedValue();\n    return this.options.find(opt => opt.value === value);\n  });\n\n  // ControlValueAccessor\n  private onChange: (value: any) => void = () => {};\n  private onTouched: () => void = () => {};\n\n  constructor(\n    private themeService: ThemeService,\n    private elementRef: ElementRef\n  ) {\n    // Close dropdown when clicking outside\n    effect((onCleanup) => {\n      if (this.isOpen()) {\n        const clickHandler = (event: MouseEvent) => {\n          if (!this.elementRef.nativeElement.contains(event.target)) {\n            this.close();\n          }\n        };\n\n        setTimeout(() => {\n          document.addEventListener('click', clickHandler);\n        });\n\n        onCleanup(() => {\n          document.removeEventListener('click', clickHandler);\n        });\n      }\n    });\n  }\n\n  // ControlValueAccessor methods\n  writeValue(value: any): void {\n    this.selectedValue.set(value);\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  // Dropdown actions\n  toggle(): void {\n    if (this.disabled) return;\n\n    if (this.isOpen()) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  open(): void {\n    if (this.disabled) return;\n    this.isOpen.set(true);\n    this.searchQuery.set('');\n    this.highlightedIndex.set(-1);\n\n    // Focus search input after dropdown opens\n    if (this.searchable) {\n      setTimeout(() => {\n        this.searchInput?.nativeElement.focus();\n      }, 100);\n    }\n  }\n\n  close(): void {\n    this.isOpen.set(false);\n    this.searchQuery.set('');\n    this.highlightedIndex.set(-1);\n    this.onTouched();\n  }\n\n  selectOption(option: DropdownOption): void {\n    if (option.disabled) return;\n\n    this.selectedValue.set(option.value);\n    this.onChange(option.value);\n    this.selectionChange.emit(option.value);\n    this.close();\n  }\n\n  // Search functionality\n  onSearchChange(query: string): void {\n    this.searchQuery.set(query);\n    this.highlightedIndex.set(0); // Reset highlight to first result\n  }\n\n  // Keyboard navigation\n  onKeyDown(event: KeyboardEvent): void {\n    const filtered = this.filteredOptions();\n\n    switch (event.key) {\n      case 'ArrowDown':\n        event.preventDefault();\n        if (!this.isOpen()) {\n          this.open();\n        } else {\n          const nextIndex = Math.min(this.highlightedIndex() + 1, filtered.length - 1);\n          this.highlightedIndex.set(nextIndex);\n          this.scrollToHighlighted();\n        }\n        break;\n\n      case 'ArrowUp':\n        event.preventDefault();\n        if (this.isOpen()) {\n          const prevIndex = Math.max(this.highlightedIndex() - 1, 0);\n          this.highlightedIndex.set(prevIndex);\n          this.scrollToHighlighted();\n        }\n        break;\n\n      case 'Enter':\n        event.preventDefault();\n        if (this.isOpen()) {\n          const highlighted = filtered[this.highlightedIndex()];\n          if (highlighted) {\n            this.selectOption(highlighted);\n          }\n        } else {\n          this.open();\n        }\n        break;\n\n      case 'Escape':\n        event.preventDefault();\n        this.close();\n        break;\n\n      case 'Tab':\n        this.close();\n        break;\n    }\n  }\n\n  private scrollToHighlighted(): void {\n    setTimeout(() => {\n      const highlightedEl = this.elementRef.nativeElement.querySelector('.option.highlighted');\n      if (highlightedEl) {\n        highlightedEl.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n      }\n    });\n  }\n\n  // Utility methods\n  isSelected(option: DropdownOption): boolean {\n    return this.selectedValue() === option.value;\n  }\n\n  isHighlighted(index: number): boolean {\n    return this.highlightedIndex() === index;\n  }\n\n  onOptionHover(index: number): void {\n    this.highlightedIndex.set(index);\n  }\n\n  clearSelection(event: Event): void {\n    event.stopPropagation();\n    this.selectedValue.set(null);\n    this.onChange(null);\n    this.selectionChange.emit('');\n  }\n}\n","<div class=\"dropdown-wrapper\" [class.dropdown-disabled]=\"disabled\">\n  <!-- Dropdown Trigger -->\n  <button\n    type=\"button\"\n    class=\"dropdown-trigger\"\n    [class.dropdown-open]=\"isOpen()\"\n    [class.dropdown-small]=\"size === 'small'\"\n    [class.dropdown-medium]=\"size === 'medium'\"\n    [class.dropdown-large]=\"size === 'large'\"\n    [class.width-normal]=\"width === 'normal'\"\n    [class.width-medium]=\"width === 'medium'\"\n    [class.width-wide]=\"width === 'wide'\"\n    [class.dropdown-dark]=\"isDark()\"\n    [disabled]=\"disabled\"\n    (click)=\"toggle()\"\n    (keydown)=\"onKeyDown($event)\"\n    [attr.aria-expanded]=\"isOpen()\"\n    [attr.aria-haspopup]=\"true\">\n    <span class=\"dropdown-value\">\n      @if (selectedOption()) {\n        <span class=\"dropdown-selected\">\n          @if (selectedOption()?.icon) {\n            <span class=\"dropdown-icon\">{{ selectedOption()?.icon }}</span>\n          }\n          {{ selectedOption()?.label }}\n        </span>\n      } @else {\n        <span class=\"dropdown-placeholder\">{{ placeholder }}</span>\n      }\n    </span>\n    <span class=\"dropdown-arrow\" [class.dropdown-arrow-up]=\"isOpen()\">▼</span>\n    @if (selectedValue() && !disabled) {\n      <button\n        type=\"button\"\n        class=\"dropdown-clear\"\n        (click)=\"clearSelection($event)\"\n        aria-label=\"Clear selection\">\n        ✕\n      </button>\n    }\n  </button>\n\n  <!-- Dropdown Panel -->\n  @if (isOpen()) {\n    <div class=\"dropdown-panel\" [class.dropdown-dark]=\"isDark()\">\n      <!-- Search Input -->\n      @if (searchable) {\n        <div class=\"dropdown-search\">\n          <input\n            #searchInput\n            type=\"text\"\n            class=\"dropdown-search-input\"\n            [placeholder]=\"searchPlaceholder\"\n            [(ngModel)]=\"searchQuery\"\n            (ngModelChange)=\"onSearchChange($event)\"\n            (keydown)=\"onKeyDown($event)\"\n            autocomplete=\"off\">\n        </div>\n      }\n\n      <!-- Options List -->\n      <div class=\"dropdown-options\">\n        @if (filteredOptions().length === 0) {\n          <div class=\"dropdown-empty\">No options found</div>\n        } @else {\n          @for (option of filteredOptions(); track option.value; let i = $index) {\n            <div\n              class=\"option\"\n              [class.option-selected]=\"isSelected(option)\"\n              [class.option-highlighted]=\"isHighlighted(i)\"\n              [class.option-disabled]=\"option.disabled\"\n              (click)=\"selectOption(option)\"\n              (mouseenter)=\"onOptionHover(i)\"\n              role=\"option\"\n              [attr.aria-selected]=\"isSelected(option)\">\n              @if (option.icon) {\n                <span class=\"option-icon\">{{ option.icon }}</span>\n              }\n              <span class=\"option-label\">{{ option.label }}</span>\n            </div>\n          }\n        }\n      </div>\n    </div>\n  }\n</div>\n","import { Component, Input, forwardRef } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n\nexport interface SelectOption {\n  value: any;\n  label: string;\n  disabled?: boolean;\n}\n\n@Component({\n  selector: 'ui-select',\n  standalone: true,\n  imports: [CommonModule],\n  templateUrl: './select.component.html',\n  styleUrls: ['./select.component.css'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => SelectComponent),\n      multi: true\n    }\n  ]\n})\nexport class SelectComponent implements ControlValueAccessor {\n  @Input() options: SelectOption[] = [];\n  @Input() placeholder: string = 'Select an option';\n  @Input() label: string = '';\n  @Input() error: string = '';\n  @Input() disabled: boolean = false;\n  @Input() size: 'small' | 'medium' | 'large' = 'medium';\n  @Input() fullWidth: boolean = false;\n  @Input() multiple: boolean = false;\n\n  value: any = null;\n  touched: boolean = false;\n\n  private onChange = (value: any) => {};\n  private onTouched = () => {};\n\n  writeValue(value: any): void {\n    this.value = value;\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  onSelectionChange(event: Event): void {\n    const target = event.target as HTMLSelectElement;\n\n    if (this.multiple) {\n      const selectedOptions = Array.from(target.selectedOptions).map(option => option.value);\n      this.value = selectedOptions;\n    } else {\n      this.value = target.value;\n    }\n\n    this.onChange(this.value);\n  }\n\n  onBlur(): void {\n    this.touched = true;\n    this.onTouched();\n  }\n\n  getSelectClasses(): string {\n    const classes = ['select'];\n\n    classes.push(`select-${this.size}`);\n\n    if (this.error) {\n      classes.push('select-error');\n    }\n\n    if (this.fullWidth) {\n      classes.push('select-full-width');\n    }\n\n    return classes.join(' ');\n  }\n\n  getWrapperClasses(): string {\n    const classes = ['select-wrapper'];\n\n    if (this.fullWidth) {\n      classes.push('select-wrapper-full-width');\n    }\n\n    return classes.join(' ');\n  }\n\n  isSelected(optionValue: any): boolean {\n    if (this.multiple && Array.isArray(this.value)) {\n      return this.value.includes(optionValue);\n    }\n    return this.value === optionValue;\n  }\n}","<div [class]=\"getWrapperClasses()\">\n  <label *ngIf=\"label\" class=\"select-label\">{{ label }}</label>\n  <div class=\"select-container\">\n    <select\n      [class]=\"getSelectClasses()\"\n      [disabled]=\"disabled\"\n      [multiple]=\"multiple\"\n      [value]=\"value\"\n      (change)=\"onSelectionChange($event)\"\n      (blur)=\"onBlur()\"\n    >\n      <option *ngIf=\"!multiple && placeholder\" value=\"\" disabled [selected]=\"!value\">\n        {{ placeholder }}\n      </option>\n      <option\n        *ngFor=\"let option of options\"\n        [value]=\"option.value\"\n        [disabled]=\"option.disabled\"\n        [selected]=\"isSelected(option.value)\"\n      >\n        {{ option.label }}\n      </option>\n    </select>\n    <span class=\"select-arrow\">\n      <svg width=\"12\" height=\"8\" viewBox=\"0 0 12 8\" fill=\"none\">\n        <path d=\"M1 1.5L6 6.5L11 1.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n      </svg>\n    </span>\n  </div>\n  <div *ngIf=\"error\" class=\"select-error-text\">{{ error }}</div>\n</div>","import { Injectable, OnDestroy } from '@angular/core';\nimport { BehaviorSubject, Observable, Subject, timer, EMPTY, Subscription } from 'rxjs';\nimport { webSocket, WebSocketSubject } from 'rxjs/webSocket';\nimport { catchError, retry, takeUntil, map, filter } from 'rxjs/operators';\n\n/**\n * Bybit WebSocket V5 kline/candlestick data structure\n * Raw format received from WebSocket stream\n */\nexport interface BybitWsKlineData {\n  start: number; // Bybit V5 uses 'start' for the candle start time (milliseconds)\n  end: number;   // Bybit V5 uses 'end' for the candle end time (milliseconds)\n  interval: string;\n  open: string;\n  close: string;\n  high: string;\n  low: string;\n  volume: string;\n  turnover: string;\n  confirm: boolean; // true means this kline is closed\n  timestamp: number; // Message timestamp\n}\n\nexport interface BybitWsTickerData {\n  symbol: string;\n  lastPrice: string;\n  highPrice24h: string;\n  lowPrice24h: string;\n  prevPrice24h: string;\n  volume24h: string;\n  turnover24h: string;\n  price24hPcnt: string;\n  usdIndexPrice: string;\n}\n\nexport interface BybitWsOrderbookData {\n  symbol: string;\n  bids: [string, string][]; // [price, size]\n  asks: [string, string][]; // [price, size]\n  ts: number;\n  u: number; // update id\n}\n\nexport interface BybitWsTradeData {\n  symbol: string;\n  execId: string;\n  price: string;\n  size: string;\n  side: 'Buy' | 'Sell';\n  time: number;\n  isBlockTrade: boolean;\n}\n\nexport interface BybitWsMessage {\n  topic: string;\n  type: string;\n  data: BybitWsKlineData[] | BybitWsTickerData[] | BybitWsOrderbookData | BybitWsTradeData[];\n  cs: number;\n  ts: number;\n}\n\nexport interface CandlestickData {\n  time: number;\n  open: number;\n  high: number;\n  low: number;\n  close: number;\n  volume?: number;\n}\n\nexport interface TickerData {\n  symbol: string;\n  lastPrice: number;\n  highPrice24h: number;\n  lowPrice24h: number;\n  prevPrice24h: number;\n  volume24h: number;\n  turnover24h: number;\n  price24hPcnt: number;\n  usdIndexPrice: number;\n  timestamp: number;\n}\n\nexport interface OrderbookData {\n  symbol: string;\n  bids: { price: number; size: number }[];\n  asks: { price: number; size: number }[];\n  timestamp: number;\n}\n\nexport interface TradeData {\n  symbol: string;\n  execId: string;\n  price: number;\n  size: number;\n  side: 'Buy' | 'Sell';\n  timestamp: number;\n  isBlockTrade: boolean;\n}\n\n/**\n * Bybit WebSocket Service - Low-level WebSocket connection manager\n *\n * This service manages the WebSocket connection to Bybit V5 public API, handling:\n * - Connection lifecycle (connect, disconnect, reconnect)\n * - Subscription management for multiple data streams\n * - Message routing and transformation\n * - Heartbeat/ping mechanism to keep connection alive\n * - Auto-reconnection on connection failure\n * - Data caching for latest values\n *\n * The service maintains a single WebSocket connection and multiplexes multiple\n * subscriptions through it, providing separate Observable streams for each subscription.\n *\n * @example\n * ```typescript\n * // Subscribe to kline data\n * this.wsService.subscribeToKline('BTCUSDT', '1').subscribe(candle => {\n *   console.log('New candle:', candle);\n * });\n *\n * // Check connection state\n * this.wsService.getConnectionState().subscribe(state => {\n *   console.log('Connection state:', state);\n * });\n *\n * // Clean up on destroy\n * this.wsService.unsubscribeFromKline('BTCUSDT', '1');\n * ```\n *\n * @see {@link BybitService} for high-level API combining REST and WebSocket\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class BybitWebSocketService implements OnDestroy {\n  // WebSocket URLs for different environments\n  private readonly WS_URLS = {\n    mainnet: 'wss://stream.bybit.com/v5/public/spot',\n    testnet: 'wss://stream-testnet.bybit.com/v5/public/spot'\n  };\n\n  private currentEnvironment: 'mainnet' | 'testnet' = 'mainnet';\n  private socket$: WebSocketSubject<any> | null = null;\n  private destroy$ = new Subject<void>();\n  private pingTimer?: Subscription;\n\n  // Connection state\n  private connectionState$ = new BehaviorSubject<'disconnected' | 'connecting' | 'connected'>('disconnected');\n\n  // Data streams\n  private klineData$ = new Subject<CandlestickData>();\n  private tickerData$ = new Subject<TickerData>();\n  private orderbookData$ = new Subject<OrderbookData>();\n  private tradeData$ = new Subject<TradeData>();\n\n  // Subscription management\n  private subscriptions = new Map<string, Subject<any>>();\n  private dataCache = new Map<string, any>(); // Cache latest data for each stream\n\n  constructor() {\n    console.log('BybitWebSocketService initialized');\n  }\n\n  ngOnDestroy(): void {\n    this.stopPing();\n    this.disconnect();\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  /**\n   * Get connection state as observable\n   */\n  getConnectionState(): Observable<'disconnected' | 'connecting' | 'connected'> {\n    return this.connectionState$.asObservable();\n  }\n\n  /**\n   * Set WebSocket environment (mainnet or testnet)\n   * Will disconnect and reconnect if already connected\n   */\n  setEnvironment(environment: 'MAINNET' | 'TESTNET'): void {\n    const normalizedEnv = environment.toLowerCase() as 'mainnet' | 'testnet';\n\n    if (this.currentEnvironment === normalizedEnv) {\n      console.log(`Already using ${normalizedEnv} WebSocket`);\n      return;\n    }\n\n    console.log(`Switching WebSocket from ${this.currentEnvironment} to ${normalizedEnv}`);\n    this.currentEnvironment = normalizedEnv;\n\n    // If currently connected, disconnect and reconnect with new environment\n    if (this.socket$ && !this.socket$.closed) {\n      const activeSubscriptions = this.getActiveSubscriptions();\n      console.log('Reconnecting with active subscriptions:', activeSubscriptions);\n\n      this.disconnect();\n\n      // Give a moment for clean disconnect\n      setTimeout(() => {\n        this.connect();\n      }, 500);\n    }\n  }\n\n  /**\n   * Get current environment\n   */\n  getCurrentEnvironment(): 'mainnet' | 'testnet' {\n    return this.currentEnvironment;\n  }\n\n  /**\n   * Connect to Bybit WebSocket\n   */\n  private connect(): void {\n    if (this.socket$ && !this.socket$.closed) {\n      console.log('WebSocket already connected');\n      return;\n    }\n\n    const wsUrl = this.WS_URLS[this.currentEnvironment];\n    console.log(`Connecting to Bybit WebSocket (${this.currentEnvironment}):`, wsUrl);\n    this.connectionState$.next('connecting');\n\n    this.socket$ = webSocket({\n      url: wsUrl,\n      openObserver: {\n        next: () => {\n          console.log(`✅ Connected to Bybit V5 WebSocket (${this.currentEnvironment}):`, wsUrl);\n          this.connectionState$.next('connected');\n          this.startPing(); // Start ping immediately after connection\n        }\n      },\n      closeObserver: {\n        next: (event) => {\n          console.log('❌ Disconnected from Bybit WebSocket:', event);\n          this.connectionState$.next('disconnected');\n        }\n      }\n    });\n\n    // Handle incoming messages\n    this.socket$.pipe(\n      takeUntil(this.destroy$),\n      catchError(error => {\n        console.error('WebSocket error:', error);\n        this.connectionState$.next('disconnected');\n\n        // Auto-reconnect after 5 seconds\n        timer(5000).pipe(takeUntil(this.destroy$)).subscribe(() => {\n          console.log('Attempting to reconnect...');\n          this.connect();\n        });\n\n        return EMPTY;\n      })\n    ).subscribe((message: BybitWsMessage) => {\n      this.handleMessage(message);\n    });\n  }\n\n  /**\n   * Disconnect from WebSocket\n   */\n  disconnect(): void {\n    this.stopPing();\n    if (this.socket$) {\n      this.socket$.complete();\n      this.socket$ = null;\n    }\n    this.subscriptions.clear();\n    this.connectionState$.next('disconnected');\n    console.log('🔌 WebSocket disconnected');\n  }\n\n  /**\n   * Subscribe to kline data for a specific symbol and interval\n   */\n  subscribeToKline(symbol: string, interval: string = '1'): Observable<CandlestickData> {\n    const topic = `kline.${interval}.${symbol}`;\n    const subscriptionKey = `${symbol}_${interval}`;\n\n    console.log(`[WS SERVICE] subscribeToKline called - topic: ${topic}, key: ${subscriptionKey}`);\n\n    // Create or get existing subject for this subscription\n    if (!this.subscriptions.has(subscriptionKey)) {\n      console.log(`[WS SERVICE] Creating new Subject for ${subscriptionKey}`);\n      this.subscriptions.set(subscriptionKey, new Subject<CandlestickData>());\n    } else {\n      console.log(`[WS SERVICE] Reusing existing Subject for ${subscriptionKey}`);\n    }\n\n    // Connect if not already connected\n    if (!this.socket$ || this.socket$.closed) {\n      console.log('[WS SERVICE] WebSocket not connected, initiating connection...');\n      this.connect();\n    } else {\n      console.log('[WS SERVICE] WebSocket already connected');\n    }\n\n    // Wait for connection and then subscribe\n    console.log('[WS SERVICE] Setting up connection state listener...');\n    this.connectionState$.pipe(\n      filter(state => {\n        console.log(`[WS SERVICE] Connection state changed: ${state}`);\n        return state === 'connected';\n      }),\n      takeUntil(this.destroy$)\n    ).subscribe(() => {\n      console.log(`[WS SERVICE] Connection established, sending subscription for ${topic}`);\n      this.sendSubscription(topic);\n    });\n\n    const observable = this.subscriptions.get(subscriptionKey)!.asObservable();\n    console.log(`[WS SERVICE] Returning observable for ${subscriptionKey}`);\n\n    // Add logging to the returned observable\n    return new Observable<CandlestickData>(observer => {\n      console.log(`[WS SERVICE] Observer subscribed to ${subscriptionKey}`);\n\n      const subscription = observable.subscribe({\n        next: (value) => {\n          console.log(`[WS SERVICE] Passing data through observable for ${subscriptionKey}:`, value);\n          observer.next(value);\n        },\n        error: (err) => {\n          console.error(`[WS SERVICE] Error in observable for ${subscriptionKey}:`, err);\n          observer.error(err);\n        },\n        complete: () => {\n          console.log(`[WS SERVICE] Observable completed for ${subscriptionKey}`);\n          observer.complete();\n        }\n      });\n\n      return () => {\n        console.log(`[WS SERVICE] Observer unsubscribed from ${subscriptionKey}`);\n        subscription.unsubscribe();\n      };\n    });\n  }\n\n  /**\n   * Unsubscribe from kline data\n   */\n  unsubscribeFromKline(symbol: string, interval: string = '1'): void {\n    const topic = `kline.${interval}.${symbol}`;\n    const subscriptionKey = `${symbol}_${interval}`;\n\n    console.log(`Unsubscribing from kline data: ${topic}`);\n\n    // Send unsubscribe message\n    if (this.socket$ && !this.socket$.closed) {\n      this.sendUnsubscription(topic);\n    }\n\n    // Clean up subscription\n    const subject = this.subscriptions.get(subscriptionKey);\n    if (subject) {\n      subject.complete();\n      this.subscriptions.delete(subscriptionKey);\n    }\n  }\n\n  /**\n   * Send subscription message\n   */\n  private sendSubscription(topic: string): void {\n    if (!this.socket$ || this.socket$.closed) {\n      console.error('Cannot subscribe: WebSocket not connected');\n      return;\n    }\n\n    const subscribeMessage = {\n      op: 'subscribe',\n      args: [topic]\n    };\n\n    console.log('Sending subscription:', subscribeMessage);\n    this.socket$.next(subscribeMessage);\n  }\n\n  /**\n   * Send unsubscription message\n   */\n  private sendUnsubscription(topic: string): void {\n    if (!this.socket$ || this.socket$.closed) {\n      console.error('Cannot unsubscribe: WebSocket not connected');\n      return;\n    }\n\n    const unsubscribeMessage = {\n      op: 'unsubscribe',\n      args: [topic]\n    };\n\n    console.log('Sending unsubscription:', unsubscribeMessage);\n    this.socket$.next(unsubscribeMessage);\n  }\n\n  /**\n   * Handle incoming WebSocket messages (Bybit V5 format)\n   */\n  private handleMessage(message: any): void {\n    try {\n      // Handle pong responses\n      if (message.op === 'pong') {\n        console.log('🏓 Received pong from Bybit WebSocket');\n        return;\n      }\n\n      // Handle subscription confirmations\n      if (message.success !== undefined) {\n        if (message.success) {\n          console.log('✅ Subscription confirmed:', message);\n          if (message.conn_id) {\n            console.log('📡 Connection ID:', message.conn_id);\n          }\n        } else {\n          console.error('❌ Subscription failed:', message);\n        }\n        return;\n      }\n\n      // Handle data updates by topic\n      if (message.topic && message.data) {\n        console.log('[WS SERVICE] Received data message:', {\n          topic: message.topic,\n          type: message.type,\n          dataLength: Array.isArray(message.data) ? message.data.length : 1,\n          timestamp: message.ts\n        });\n\n        if (message.topic.startsWith('kline.')) {\n          console.log('[WS SERVICE] Routing to kline handler, raw data:', JSON.stringify(message.data).substring(0, 500));\n          this.handleKlineData(message);\n        } else if (message.topic.startsWith('tickers.')) {\n          this.handleTickerData(message);\n        } else if (message.topic.startsWith('orderbook.')) {\n          this.handleOrderbookData(message);\n        } else if (message.topic.startsWith('publicTrade.')) {\n          this.handleTradeData(message);\n        } else {\n          console.log('📨 Unknown topic:', message.topic, message);\n        }\n      } else if (message.type === 'error') {\n        console.error('❌ WebSocket error message:', message);\n      } else {\n        console.log('📨 Received message:', message);\n      }\n    } catch (error) {\n      console.error('Error handling WebSocket message:', error, message);\n    }\n  }\n\n  /**\n   * Handle kline data from WebSocket\n   */\n  private handleKlineData(message: BybitWsMessage): void {\n    try {\n      console.log('[WS SERVICE] Received kline message:', message.topic);\n\n      const topicParts = message.topic.split('.');\n      if (topicParts.length < 3) {\n        console.error('[WS SERVICE] Invalid kline topic format:', message.topic);\n        return;\n      }\n\n      const interval = topicParts[1];\n      const symbol = topicParts[2];\n      const subscriptionKey = `${symbol}_${interval}`;\n\n      console.log(`[WS SERVICE] Looking for subscription: ${subscriptionKey}`);\n      console.log('[WS SERVICE] Active subscriptions:', Array.from(this.subscriptions.keys()));\n\n      // Find the subscription subject\n      const subject = this.subscriptions.get(subscriptionKey);\n      if (!subject) {\n        console.warn(`[WS SERVICE] No subscription found for ${subscriptionKey}`);\n        console.warn('[WS SERVICE] Available subscriptions:', this.getActiveSubscriptions());\n        return;\n      }\n\n      console.log(`[WS SERVICE] Found subject for ${subscriptionKey}, processing data...`);\n\n      // Process each kline data point\n      const klineDataArray = Array.isArray(message.data) ? message.data : [message.data];\n      console.log(`[WS SERVICE] Processing ${klineDataArray.length} kline data points`);\n\n      klineDataArray.forEach((klineData: any) => {\n        const candlestick: CandlestickData = {\n          time: Math.floor(klineData.start / 1000), // Use start time, not closeTime\n          open: parseFloat(klineData.open),\n          high: parseFloat(klineData.high),\n          low: parseFloat(klineData.low),\n          close: parseFloat(klineData.close),\n          volume: parseFloat(klineData.volume)\n        };\n\n        console.log(`[WS SERVICE] Emitting kline update for ${symbol} (${interval}):`, {\n          time: new Date(candlestick.time * 1000).toISOString(),\n          open: candlestick.open,\n          high: candlestick.high,\n          low: candlestick.low,\n          close: candlestick.close,\n          volume: candlestick.volume,\n          confirmed: klineData.confirm\n        });\n\n        console.log(`[WS SERVICE] Calling subject.next() for ${subscriptionKey}`);\n        subject.next(candlestick);\n        console.log(`[WS SERVICE] subject.next() completed for ${subscriptionKey}`);\n      });\n    } catch (error) {\n      console.error('[WS SERVICE] Error processing kline data:', error, message);\n    }\n  }\n\n  /**\n   * Get list of active subscriptions\n   */\n  getActiveSubscriptions(): string[] {\n    return Array.from(this.subscriptions.keys());\n  }\n\n  /**\n   * Check if WebSocket is connected\n   */\n  isConnected(): boolean {\n    return this.connectionState$.value === 'connected';\n  }\n\n  /**\n   * Ping to keep connection alive (Bybit V5 format)\n   */\n  private ping(): void {\n    if (this.socket$ && !this.socket$.closed) {\n      this.socket$.next({ op: 'ping' });\n      console.log('🏓 Sent ping to Bybit WebSocket');\n    }\n  }\n\n  /**\n   * Start periodic ping to keep connection alive (Bybit V5 requires ping every 20s)\n   */\n  private startPing(): void {\n    // Clear any existing ping timer\n    if (this.pingTimer) {\n      this.pingTimer.unsubscribe();\n    }\n\n    // Start pinging every 20 seconds as per Bybit documentation\n    this.pingTimer = timer(20000, 20000) // First ping after 20s, then every 20s\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(() => {\n        if (this.isConnected()) {\n          this.ping();\n        }\n      });\n  }\n\n  /**\n   * Stop ping timer\n   */\n  private stopPing(): void {\n    if (this.pingTimer) {\n      this.pingTimer.unsubscribe();\n      this.pingTimer = undefined;\n    }\n  }\n\n  /**\n   * Subscribe to ticker data for a specific symbol (Bybit V5 format)\n   */\n  subscribeToTicker(symbol: string): Observable<TickerData> {\n    const topic = `tickers.${symbol}`;\n    const subscriptionKey = `ticker_${symbol}`;\n\n    console.log(`📊 Subscribing to ticker data: ${topic}`);\n\n    if (!this.subscriptions.has(subscriptionKey)) {\n      this.subscriptions.set(subscriptionKey, new Subject<TickerData>());\n    }\n\n    if (!this.socket$ || this.socket$.closed) {\n      this.connect();\n    }\n\n    this.connectionState$.pipe(\n      filter(state => state === 'connected'),\n      takeUntil(this.destroy$)\n    ).subscribe(() => {\n      this.sendSubscription(topic);\n    });\n\n    return this.subscriptions.get(subscriptionKey)!.asObservable();\n  }\n\n  /**\n   * Subscribe to orderbook data for a specific symbol (Bybit V5 format)\n   */\n  subscribeToOrderbook(symbol: string, depth: number = 50): Observable<OrderbookData> {\n    const topic = `orderbook.${depth}.${symbol}`;\n    const subscriptionKey = `orderbook_${symbol}_${depth}`;\n\n    console.log(`📈 Subscribing to orderbook data: ${topic}`);\n\n    if (!this.subscriptions.has(subscriptionKey)) {\n      this.subscriptions.set(subscriptionKey, new Subject<OrderbookData>());\n    }\n\n    if (!this.socket$ || this.socket$.closed) {\n      this.connect();\n    }\n\n    this.connectionState$.pipe(\n      filter(state => state === 'connected'),\n      takeUntil(this.destroy$)\n    ).subscribe(() => {\n      this.sendSubscription(topic);\n    });\n\n    return this.subscriptions.get(subscriptionKey)!.asObservable();\n  }\n\n  /**\n   * Subscribe to trade data for a specific symbol (Bybit V5 format)\n   */\n  subscribeToTrades(symbol: string): Observable<TradeData> {\n    const topic = `publicTrade.${symbol}`;\n    const subscriptionKey = `trades_${symbol}`;\n\n    console.log(`💰 Subscribing to trade data: ${topic}`);\n\n    if (!this.subscriptions.has(subscriptionKey)) {\n      this.subscriptions.set(subscriptionKey, new Subject<TradeData>());\n    }\n\n    if (!this.socket$ || this.socket$.closed) {\n      this.connect();\n    }\n\n    this.connectionState$.pipe(\n      filter(state => state === 'connected'),\n      takeUntil(this.destroy$)\n    ).subscribe(() => {\n      this.sendSubscription(topic);\n    });\n\n    return this.subscriptions.get(subscriptionKey)!.asObservable();\n  }\n\n  /**\n   * Handle ticker data from WebSocket\n   */\n  private handleTickerData(message: BybitWsMessage): void {\n    try {\n      const topicParts = message.topic.split('.');\n      if (topicParts.length < 2) {\n        console.error('Invalid ticker topic format:', message.topic);\n        return;\n      }\n\n      const symbol = topicParts[1];\n      const subscriptionKey = `ticker_${symbol}`;\n      const subject = this.subscriptions.get(subscriptionKey);\n\n      if (!subject) {\n        console.warn(`No ticker subscription found for ${subscriptionKey}`);\n        return;\n      }\n\n      const rawData: any = Array.isArray(message.data) ? message.data[0] : message.data;\n      if (!rawData) return;\n\n      const tickerData: TickerData = {\n        symbol: rawData.symbol || symbol,\n        lastPrice: parseFloat(rawData.lastPrice || '0'),\n        highPrice24h: parseFloat(rawData.highPrice24h || '0'),\n        lowPrice24h: parseFloat(rawData.lowPrice24h || '0'),\n        prevPrice24h: parseFloat(rawData.prevPrice24h || '0'),\n        volume24h: parseFloat(rawData.volume24h || '0'),\n        turnover24h: parseFloat(rawData.turnover24h || '0'),\n        price24hPcnt: parseFloat(rawData.price24hPcnt || '0'),\n        usdIndexPrice: parseFloat(rawData.usdIndexPrice || '0'),\n        timestamp: message.ts\n      };\n\n      this.dataCache.set(subscriptionKey, tickerData);\n      subject.next(tickerData);\n\n      console.log(`📈 Ticker update for ${symbol}:`, {\n        lastPrice: tickerData.lastPrice,\n        change24h: tickerData.price24hPcnt\n      });\n    } catch (error) {\n      console.error('Error processing ticker data:', error, message);\n    }\n  }\n\n  /**\n   * Handle orderbook data from WebSocket\n   */\n  private handleOrderbookData(message: BybitWsMessage): void {\n    try {\n      const topicParts = message.topic.split('.');\n      if (topicParts.length < 3) {\n        console.error('Invalid orderbook topic format:', message.topic);\n        return;\n      }\n\n      const depth = topicParts[1];\n      const symbol = topicParts[2];\n      const subscriptionKey = `orderbook_${symbol}_${depth}`;\n      const subject = this.subscriptions.get(subscriptionKey);\n\n      if (!subject) {\n        console.warn(`No orderbook subscription found for ${subscriptionKey}`);\n        return;\n      }\n\n      const rawData = message.data as BybitWsOrderbookData;\n      if (!rawData) return;\n\n      const orderbookData: OrderbookData = {\n        symbol: rawData.symbol,\n        bids: rawData.bids.map(([price, size]) => ({\n          price: parseFloat(price),\n          size: parseFloat(size)\n        })),\n        asks: rawData.asks.map(([price, size]) => ({\n          price: parseFloat(price),\n          size: parseFloat(size)\n        })),\n        timestamp: rawData.ts\n      };\n\n      this.dataCache.set(subscriptionKey, orderbookData);\n      subject.next(orderbookData);\n\n      console.log(`📊 Orderbook update for ${symbol}:`, {\n        bestBid: orderbookData.bids[0]?.price,\n        bestAsk: orderbookData.asks[0]?.price,\n        spread: orderbookData.asks[0]?.price - orderbookData.bids[0]?.price\n      });\n    } catch (error) {\n      console.error('Error processing orderbook data:', error, message);\n    }\n  }\n\n  /**\n   * Handle trade data from WebSocket\n   */\n  private handleTradeData(message: BybitWsMessage): void {\n    try {\n      const topicParts = message.topic.split('.');\n      if (topicParts.length < 2) {\n        console.error('Invalid trade topic format:', message.topic);\n        return;\n      }\n\n      const symbol = topicParts[1];\n      const subscriptionKey = `trades_${symbol}`;\n      const subject = this.subscriptions.get(subscriptionKey);\n\n      if (!subject) {\n        console.warn(`No trade subscription found for ${subscriptionKey}`);\n        return;\n      }\n\n      const tradesArray = Array.isArray(message.data) ? message.data : [message.data];\n\n      tradesArray.forEach((rawTrade: any) => {\n        const tradeData: TradeData = {\n          symbol: rawTrade.symbol,\n          execId: rawTrade.execId,\n          price: parseFloat(rawTrade.price),\n          size: parseFloat(rawTrade.size),\n          side: rawTrade.side,\n          timestamp: rawTrade.time,\n          isBlockTrade: rawTrade.isBlockTrade\n        };\n\n        this.dataCache.set(`${subscriptionKey}_${rawTrade.execId}`, tradeData);\n        subject.next(tradeData);\n\n        console.log(`💹 Trade for ${symbol}:`, {\n          price: tradeData.price,\n          size: tradeData.size,\n          side: tradeData.side\n        });\n      });\n    } catch (error) {\n      console.error('Error processing trade data:', error, message);\n    }\n  }\n\n  /**\n   * Unsubscribe from ticker data\n   */\n  unsubscribeFromTicker(symbol: string): void {\n    const topic = `tickers.${symbol}`;\n    const subscriptionKey = `ticker_${symbol}`;\n\n    if (this.socket$ && !this.socket$.closed) {\n      this.sendUnsubscription(topic);\n    }\n\n    const subject = this.subscriptions.get(subscriptionKey);\n    if (subject) {\n      subject.complete();\n      this.subscriptions.delete(subscriptionKey);\n    }\n  }\n\n  /**\n   * Unsubscribe from orderbook data\n   */\n  unsubscribeFromOrderbook(symbol: string, depth: number = 50): void {\n    const topic = `orderbook.${depth}.${symbol}`;\n    const subscriptionKey = `orderbook_${symbol}_${depth}`;\n\n    if (this.socket$ && !this.socket$.closed) {\n      this.sendUnsubscription(topic);\n    }\n\n    const subject = this.subscriptions.get(subscriptionKey);\n    if (subject) {\n      subject.complete();\n      this.subscriptions.delete(subscriptionKey);\n    }\n  }\n\n  /**\n   * Unsubscribe from trade data\n   */\n  unsubscribeFromTrades(symbol: string): void {\n    const topic = `publicTrade.${symbol}`;\n    const subscriptionKey = `trades_${symbol}`;\n\n    if (this.socket$ && !this.socket$.closed) {\n      this.sendUnsubscription(topic);\n    }\n\n    const subject = this.subscriptions.get(subscriptionKey);\n    if (subject) {\n      subject.complete();\n      this.subscriptions.delete(subscriptionKey);\n    }\n  }\n\n  /**\n   * Get cached data for a subscription\n   */\n  getCachedData(subscriptionKey: string): any {\n    return this.dataCache.get(subscriptionKey);\n  }\n\n  /**\n   * Clear cache for a specific subscription or all cache\n   */\n  clearCache(subscriptionKey?: string): void {\n    if (subscriptionKey) {\n      this.dataCache.delete(subscriptionKey);\n    } else {\n      this.dataCache.clear();\n    }\n  }\n}","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Observable, throwError, of, combineLatest, BehaviorSubject } from 'rxjs';\nimport { catchError, map, timeout, startWith, take, switchMap } from 'rxjs/operators';\nimport { BybitWebSocketService, TickerData, OrderbookData, TradeData } from './bybit-websocket.service';\n\n/**\n * Bybit API kline/candlestick data structure\n * Represents the raw response format from Bybit V5 REST API\n */\nexport interface BybitKlineData {\n  symbol: string;\n  category: string;\n  list: string[][]; // [timestamp, open, high, low, close, volume, turnover]\n}\n\n/**\n * Bybit API response wrapper for kline endpoint\n */\nexport interface BybitKlineResponse {\n  retCode: number;\n  retMsg: string;\n  result: BybitKlineData;\n  time: number;\n}\n\n/**\n * Normalized candlestick data format used throughout the application\n * Compatible with lightweight-charts library\n */\nexport interface CandlestickData {\n  time: string | number; // Support both string (YYYY-MM-DD) and number (timestamp)\n  open: number;\n  high: number;\n  low: number;\n  close: number;\n  volume?: number;\n}\n\n/**\n * Bybit Service - Main integration layer for Bybit exchange\n *\n * This service provides a high-level API for interacting with Bybit exchange,\n * combining both REST API and WebSocket real-time data streams. It handles:\n * - Historical kline/candlestick data retrieval\n * - Real-time market data subscriptions\n * - Data transformation and normalization\n * - Error handling and fallback mechanisms\n *\n * @example\n * ```typescript\n * // Get real-time candlestick data\n * this.bybitService.getRealTimeKlineData('BTCUSDT', '1').subscribe(candles => {\n *   console.log('Received candles:', candles);\n * });\n *\n * // Get available symbols\n * this.bybitService.getSymbols().subscribe(symbols => {\n *   console.log('Available symbols:', symbols);\n * });\n * ```\n *\n * @see {@link BybitWebSocketService} for WebSocket connection management\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class BybitService {\n  private readonly baseUrl = 'https://api.bybit.com';\n  private readonly timeout = 10000; // 10 seconds timeout\n\n  constructor(\n    private http: HttpClient,\n    private webSocketService: BybitWebSocketService\n  ) {}\n\n  /**\n   * Fetch historical kline/candlestick data from Bybit REST API\n   *\n   * Retrieves historical market data for a specified trading pair and time interval.\n   * Data is automatically transformed to application format and validated for correctness.\n   *\n   * @param symbol - Trading pair symbol (e.g., 'BTCUSDT', 'ETHUSDT')\n   * @param interval - Time interval for candles: '1', '5', '15', '30', '60', '240', 'D'\n   * @param limit - Number of candles to retrieve (max 1000, default 720)\n   * @returns Observable<CandlestickData[]> - Stream of candlestick data, sorted in ascending time order\n   *\n   * @throws Error if API returns error code or invalid data\n   * @example\n   * ```typescript\n   * // Get 100 hourly candles for Bitcoin\n   * this.bybitService.getKlineData('BTCUSDT', '60', 100).subscribe(candles => {\n   *   console.log('First candle:', candles[0]);\n   *   console.log('Latest candle:', candles[candles.length - 1]);\n   * });\n   * ```\n   */\n  getKlineData(\n    symbol: string = 'BTCUSDT',\n    interval: string = '60',\n    limit: number = 24*30\n  ): Observable<CandlestickData[]> {\n    console.log(`Fetching Bybit data for ${symbol}, interval: ${interval}, limit: ${limit}`);\n\n    const params = {\n      category: 'spot',\n      symbol: symbol,\n      interval: interval,\n      limit: limit.toString()\n    };\n\n    const url = `${this.baseUrl}/v5/market/kline`;\n\n    return this.http.get<BybitKlineResponse>(url, { params }).pipe(\n      timeout(this.timeout),\n      map(response => this.transformBybitData(response)),\n      catchError(error => this.handleError(error, symbol))\n    );\n  }\n\n  /**\n   * Get available trading symbols from Bybit\n   */\n  getSymbols(): Observable<string[]> {\n    const url = `${this.baseUrl}/v5/market/instruments-info`;\n    const params = {\n      category: 'spot',\n      limit: '100'\n    };\n\n    return this.http.get<any>(url, { params }).pipe(\n      timeout(this.timeout),\n      map(response => {\n        if (response.retCode === 0 && response.result?.list) {\n          return response.result.list\n            .filter((item: any) => item.symbol.endsWith('USDT'))\n            .map((item: any) => item.symbol)\n            .slice(0, 20); // Limit to top 20 USDT pairs\n        }\n        return ['BTCUSDT', 'ETHUSDT', 'ADAUSDT', 'DOTUSDT', 'MATICUSDT']; // Fallback\n      }),\n      catchError(error => {\n        console.error('Failed to fetch symbols from Bybit:', error);\n        return of(['BTCUSDT', 'ETHUSDT', 'ADAUSDT', 'DOTUSDT', 'MATICUSDT']); // Fallback\n      })\n    );\n  }\n\n  /**\n   * Transform Bybit API response to our CandlestickData format\n   */\n  private transformBybitData(response: BybitKlineResponse): CandlestickData[] {\n    console.log('Bybit API response:', response);\n\n    if (response.retCode !== 0 || !response.result?.list) {\n      throw new Error(`Bybit API error: ${response.retMsg || 'Invalid response'}`);\n    }\n\n    const data = response.result.list.map(item => {\n      const [timestamp, open, high, low, close, volume] = item;\n\n      // Always use Unix timestamp in seconds for lightweight-charts\n      // This ensures proper ordering for all time intervals\n      const timestampMs = parseInt(timestamp);\n      const timestampSeconds = Math.floor(timestampMs / 1000);\n\n      return {\n        time: timestampSeconds, // Use Unix timestamp in seconds\n        open: parseFloat(open),\n        high: parseFloat(high),\n        low: parseFloat(low),\n        close: parseFloat(close),\n        volume: parseFloat(volume),\n        originalTimestamp: timestampMs // Keep original for debugging\n      };\n    });\n\n    // Sort by time to ensure ascending order\n    const sortedData = data.sort((a, b) => (a.time as number) - (b.time as number));\n\n    // Remove duplicates based on time\n    const uniqueData = sortedData.filter((item, index, arr) => {\n      if (index === 0) return true;\n      return item.time !== arr[index - 1].time;\n    });\n\n    // Remove the temporary originalTimestamp property\n    const finalData = uniqueData.map(({ originalTimestamp, ...rest }) => rest);\n\n    console.log(`Transformed ${finalData.length} data points from Bybit (removed ${data.length - finalData.length} duplicates)`);\n    console.log('First data point:', finalData[0]);\n    console.log('Last data point:', finalData[finalData.length - 1]);\n\n    // Validate data order\n    for (let i = 1; i < finalData.length; i++) {\n      const current = finalData[i].time as number;\n      const previous = finalData[i - 1].time as number;\n\n      if (current <= previous) {\n        console.warn(`Data ordering issue at index ${i}: current=${current}, previous=${previous}`);\n        console.warn('Current item:', finalData[i]);\n        console.warn('Previous item:', finalData[i - 1]);\n      }\n    }\n\n    return finalData;\n  }\n\n  /**\n   * Handle HTTP errors and provide fallback data\n   */\n  private handleError(error: HttpErrorResponse, symbol: string): Observable<CandlestickData[]> {\n    console.error('Bybit API Error:', error);\n\n    // Return fallback data when API fails\n    console.log('Returning fallback data due to API error');\n    return of(this.generateFallbackData(symbol));\n  }\n\n  /**\n   * Generate fallback data when Bybit API is unavailable\n   */\n  private generateFallbackData(symbol: string): CandlestickData[] {\n    console.log(`Generating fallback data for ${symbol}`);\n\n    const data: CandlestickData[] = [];\n    let currentPrice = this.getBasePrice(symbol);\n\n    // Generate 30 days of fallback data\n    for (let i = 29; i >= 0; i--) {\n      const date = new Date();\n      date.setDate(date.getDate() - i);\n      const time = date.toISOString().split('T')[0];\n\n      // Generate realistic OHLC data\n      const open = currentPrice;\n      const volatility = 0.03;\n      const dailyRange = currentPrice * volatility;\n\n      const high = open + (Math.random() * dailyRange);\n      const low = open - (Math.random() * dailyRange);\n      const closeVariation = (Math.random() - 0.5) * dailyRange * 0.5;\n      const close = Math.max(low, Math.min(high, open + closeVariation));\n\n      currentPrice = close;\n\n      data.push({\n        time,\n        open: Math.round(open * 100) / 100,\n        high: Math.round(high * 100) / 100,\n        low: Math.round(low * 100) / 100,\n        close: Math.round(close * 100) / 100,\n        volume: Math.round(Math.random() * 1000000)\n      });\n    }\n\n    return data;\n  }\n\n  /**\n   * Get base price for different symbols\n   */\n  private getBasePrice(symbol: string): number {\n    const basePrices: { [key: string]: number } = {\n      'BTCUSDT': 45000,\n      'ETHUSDT': 2500,\n      'ADAUSDT': 0.5,\n      'DOTUSDT': 15,\n      'MATICUSDT': 0.8,\n      'BNBUSDT': 300,\n      'SOLUSDT': 100,\n      'XRPUSDT': 0.6,\n      'DOGEUSDT': 0.1,\n      'AVAXUSDT': 25\n    };\n\n    return basePrices[symbol] || 100; // Default fallback price\n  }\n\n  /**\n   * Check if Bybit API is accessible\n   */\n  checkApiHealth(): Observable<boolean> {\n    const url = `${this.baseUrl}/v5/market/time`;\n\n    return this.http.get<any>(url).pipe(\n      timeout(5000),\n      map(response => response.retCode === 0),\n      catchError(() => of(false))\n    );\n  }\n\n  /**\n   * Get real-time kline data using WebSocket\n   * This method combines initial REST API data with real-time WebSocket updates\n   * @param symbol Trading pair symbol (e.g., 'BTCUSDT')\n   * @param interval Time interval ('1', '5', '15', '30', '60', '240', 'D')\n   * @returns Observable<CandlestickData[]> - Emits initial data then real-time updates\n   */\n  getRealTimeKlineData(\n    symbol: string = 'BTCUSDT',\n    interval: string = '1'\n  ): Observable<CandlestickData[]> {\n    console.log(`[BYBIT SERVICE] Starting real-time kline data for ${symbol}, interval: ${interval}`);\n\n    // First get initial historical data via REST API\n    const initialData$ = this.getKlineData(symbol, interval, 100).pipe(\n      take(1),\n      catchError(error => {\n        console.error('[BYBIT SERVICE] Failed to get initial data, using fallback:', error);\n        return of(this.generateFallbackData(symbol));\n      })\n    );\n\n    // Then subscribe to real-time updates via WebSocket\n    const realtimeUpdates$ = this.webSocketService.subscribeToKline(symbol, interval);\n\n    // Combine initial data with real-time updates using merge strategy\n    return initialData$.pipe(\n      switchMap(initialData => {\n        console.log(`[BYBIT SERVICE] Initial data loaded: ${initialData.length} candles`);\n        console.log('[BYBIT SERVICE] Setting up real-time update stream...');\n\n        const dataSubject = new BehaviorSubject<CandlestickData[]>(initialData);\n\n        // Subscribe to real-time updates and emit through the subject\n        const subscription = realtimeUpdates$.subscribe({\n          next: (newCandle) => {\n            console.log('[BYBIT SERVICE] Received WebSocket candle update:', {\n              time: new Date(newCandle.time * 1000).toISOString(),\n              close: newCandle.close,\n              volume: newCandle.volume\n            });\n\n            const currentData = dataSubject.value;\n            const updatedData = this.updateCandlestickData(currentData, newCandle);\n\n            console.log(`[BYBIT SERVICE] Emitting updated data array with ${updatedData.length} candles`);\n            dataSubject.next(updatedData);\n          },\n          error: (error) => {\n            console.error('[BYBIT SERVICE] WebSocket error:', error);\n          },\n          complete: () => {\n            console.log('[BYBIT SERVICE] WebSocket stream completed');\n          }\n        });\n\n        // Return the subject as observable and clean up subscription on unsubscribe\n        return new Observable<CandlestickData[]>(observer => {\n          const subjectSubscription = dataSubject.subscribe(observer);\n\n          return () => {\n            console.log('[BYBIT SERVICE] Cleaning up real-time kline subscription');\n            subscription.unsubscribe();\n            subjectSubscription.unsubscribe();\n          };\n        });\n      })\n    );\n  }\n\n  /**\n   * Subscribe to real-time kline updates only (no initial data)\n   * @param symbol Trading pair symbol\n   * @param interval Time interval\n   * @returns Observable<CandlestickData> - Emits individual candle updates\n   */\n  subscribeToRealtimeKline(\n    symbol: string = 'BTCUSDT',\n    interval: string = '1'\n  ): Observable<CandlestickData> {\n    console.log(`Subscribing to real-time updates for ${symbol}, interval: ${interval}`);\n    return this.webSocketService.subscribeToKline(symbol, interval);\n  }\n\n  /**\n   * Unsubscribe from real-time kline data\n   * @param symbol Trading pair symbol\n   * @param interval Time interval\n   */\n  unsubscribeFromRealtimeKline(symbol: string, interval: string = '1'): void {\n    console.log(`Unsubscribing from real-time updates for ${symbol}, interval: ${interval}`);\n    this.webSocketService.unsubscribeFromKline(symbol, interval);\n  }\n\n  /**\n   * Get WebSocket connection state\n   */\n  getWebSocketConnectionState(): Observable<'disconnected' | 'connecting' | 'connected'> {\n    return this.webSocketService.getConnectionState();\n  }\n\n  /**\n   * Check if WebSocket is connected\n   */\n  isWebSocketConnected(): boolean {\n    return this.webSocketService.isConnected();\n  }\n\n  /**\n   * Get list of active WebSocket subscriptions\n   */\n  getActiveSubscriptions(): string[] {\n    return this.webSocketService.getActiveSubscriptions();\n  }\n\n  /**\n   * Update candlestick data array with new candle\n   * This handles both new candles and updates to the current candle\n   */\n  private updateCandlestickData(\n    currentData: CandlestickData[],\n    newCandle: CandlestickData\n  ): CandlestickData[] {\n    if (currentData.length === 0) {\n      return [newCandle];\n    }\n\n    const updatedData = [...currentData];\n    const lastCandle = updatedData[updatedData.length - 1];\n\n    // Convert time to number for comparison\n    const lastCandleTime = typeof lastCandle.time === 'number' ? lastCandle.time : parseInt(lastCandle.time);\n    const newCandleTime = typeof newCandle.time === 'number' ? newCandle.time : parseInt(newCandle.time);\n\n    // Check if this is an update to the current candle or a new candle\n    if (lastCandleTime === newCandleTime) {\n      // Update the current candle\n      updatedData[updatedData.length - 1] = newCandle;\n      console.log(`📊 Updated current candle at ${new Date(newCandleTime * 1000).toISOString()}`);\n    } else if (newCandleTime > lastCandleTime) {\n      // Add new candle and limit the array size\n      updatedData.push(newCandle);\n\n      // Keep only the last 1000 candles to prevent memory issues\n      if (updatedData.length > 1000) {\n        updatedData.shift();\n      }\n\n      console.log(`📊 Added new candle at ${new Date(newCandleTime * 1000).toISOString()}`);\n    } else {\n      console.warn('Received candle with older timestamp, ignoring:', newCandle);\n    }\n\n    return updatedData;\n  }\n\n  /**\n   * Convert WebSocket interval format to REST API format if needed\n   */\n  private convertIntervalFormat(interval: string): string {\n    // Bybit WebSocket and REST API use the same interval format\n    // But we can add conversion logic here if needed\n    const intervalMap: { [key: string]: string } = {\n      '1m': '1',\n      '5m': '5',\n      '15m': '15',\n      '30m': '30',\n      '1h': '60',\n      '4h': '240',\n      '1d': 'D'\n    };\n\n    return intervalMap[interval] || interval;\n  }\n\n  /**\n   * Subscribe to real-time ticker data\n   * @param symbol Trading pair symbol\n   * @returns Observable<TickerData> - Emits ticker updates\n   */\n  subscribeToRealtimeTicker(symbol: string = 'BTCUSDT'): Observable<any> {\n    console.log(`Subscribing to real-time ticker for ${symbol}`);\n    return this.webSocketService.subscribeToTicker(symbol);\n  }\n\n  /**\n   * Subscribe to real-time orderbook data\n   * @param symbol Trading pair symbol\n   * @param depth Orderbook depth (1, 50, 200)\n   * @returns Observable<OrderbookData> - Emits orderbook updates\n   */\n  subscribeToRealtimeOrderbook(symbol: string = 'BTCUSDT', depth: number = 50): Observable<any> {\n    console.log(`Subscribing to real-time orderbook for ${symbol}, depth: ${depth}`);\n    return this.webSocketService.subscribeToOrderbook(symbol, depth);\n  }\n\n  /**\n   * Subscribe to real-time trade data\n   * @param symbol Trading pair symbol\n   * @returns Observable<TradeData> - Emits individual trades\n   */\n  subscribeToRealtimeTrades(symbol: string = 'BTCUSDT'): Observable<any> {\n    console.log(`Subscribing to real-time trades for ${symbol}`);\n    return this.webSocketService.subscribeToTrades(symbol);\n  }\n\n  /**\n   * Unsubscribe from real-time ticker data\n   */\n  unsubscribeFromRealtimeTicker(symbol: string): void {\n    console.log(`Unsubscribing from real-time ticker for ${symbol}`);\n    this.webSocketService.unsubscribeFromTicker(symbol);\n  }\n\n  /**\n   * Unsubscribe from real-time orderbook data\n   */\n  unsubscribeFromRealtimeOrderbook(symbol: string, depth: number = 50): void {\n    console.log(`Unsubscribing from real-time orderbook for ${symbol}`);\n    this.webSocketService.unsubscribeFromOrderbook(symbol, depth);\n  }\n\n  /**\n   * Unsubscribe from real-time trade data\n   */\n  unsubscribeFromRealtimeTrades(symbol: string): void {\n    console.log(`Unsubscribing from real-time trades for ${symbol}`);\n    this.webSocketService.unsubscribeFromTrades(symbol);\n  }\n\n  /**\n   * Get cached data from WebSocket service\n   * @param subscriptionKey Key for cached data\n   * @returns Cached data or null\n   */\n  getCachedWebSocketData(subscriptionKey: string): any {\n    return this.webSocketService.getCachedData(subscriptionKey);\n  }\n\n  /**\n   * Clear WebSocket cache\n   * @param subscriptionKey Optional specific key to clear\n   */\n  clearWebSocketCache(subscriptionKey?: string): void {\n    this.webSocketService.clearCache(subscriptionKey);\n  }\n\n  /**\n   * Get comprehensive market data stream combining multiple data types\n   * @param symbol Trading pair symbol\n   * @returns Observable with combined market data\n   */\n  getComprehensiveMarketStream(symbol: string = 'BTCUSDT'): Observable<any> {\n    console.log(`Starting comprehensive market stream for ${symbol}`);\n\n    return combineLatest([\n      this.subscribeToRealtimeKline(symbol, '1'),\n      this.subscribeToRealtimeTicker(symbol),\n      this.subscribeToRealtimeOrderbook(symbol, 50)\n    ]).pipe(\n      map(([kline, ticker, orderbook]) => ({\n        symbol,\n        timestamp: Date.now(),\n        kline,\n        ticker,\n        orderbook,\n        spread: orderbook?.asks?.[0]?.price - orderbook?.bids?.[0]?.price || 0\n      }))\n    );\n  }\n\n  /**\n   * Set WebSocket environment (mainnet or testnet)\n   * Delegates to the underlying WebSocketService\n   */\n  setWebSocketEnvironment(environment: 'MAINNET' | 'TESTNET'): void {\n    this.webSocketService.setEnvironment(environment);\n  }\n\n  /**\n   * Get current WebSocket environment\n   */\n  getWebSocketEnvironment(): 'mainnet' | 'testnet' {\n    return this.webSocketService.getCurrentEnvironment();\n  }\n}\n","import { dateTimestampProvider } from './scheduler/dateTimestampProvider';\nexport class Scheduler {\n    constructor(schedulerActionCtor, now = Scheduler.now) {\n        this.schedulerActionCtor = schedulerActionCtor;\n        this.now = now;\n    }\n    schedule(work, delay = 0, state) {\n        return new this.schedulerActionCtor(this, work).schedule(state, delay);\n    }\n}\nScheduler.now = dateTimestampProvider.now;\n","import { Subject, AnonymousSubject } from '../../Subject';\nimport { Subscriber } from '../../Subscriber';\nimport { Observable } from '../../Observable';\nimport { Subscription } from '../../Subscription';\nimport { ReplaySubject } from '../../ReplaySubject';\nconst DEFAULT_WEBSOCKET_CONFIG = {\n    url: '',\n    deserializer: (e) => JSON.parse(e.data),\n    serializer: (value) => JSON.stringify(value),\n};\nconst WEBSOCKETSUBJECT_INVALID_ERROR_OBJECT = 'WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }';\nexport class WebSocketSubject extends AnonymousSubject {\n    constructor(urlConfigOrSource, destination) {\n        super();\n        this._socket = null;\n        if (urlConfigOrSource instanceof Observable) {\n            this.destination = destination;\n            this.source = urlConfigOrSource;\n        }\n        else {\n            const config = (this._config = Object.assign({}, DEFAULT_WEBSOCKET_CONFIG));\n            this._output = new Subject();\n            if (typeof urlConfigOrSource === 'string') {\n                config.url = urlConfigOrSource;\n            }\n            else {\n                for (const key in urlConfigOrSource) {\n                    if (urlConfigOrSource.hasOwnProperty(key)) {\n                        config[key] = urlConfigOrSource[key];\n                    }\n                }\n            }\n            if (!config.WebSocketCtor && WebSocket) {\n                config.WebSocketCtor = WebSocket;\n            }\n            else if (!config.WebSocketCtor) {\n                throw new Error('no WebSocket constructor can be found');\n            }\n            this.destination = new ReplaySubject();\n        }\n    }\n    lift(operator) {\n        const sock = new WebSocketSubject(this._config, this.destination);\n        sock.operator = operator;\n        sock.source = this;\n        return sock;\n    }\n    _resetState() {\n        this._socket = null;\n        if (!this.source) {\n            this.destination = new ReplaySubject();\n        }\n        this._output = new Subject();\n    }\n    multiplex(subMsg, unsubMsg, messageFilter) {\n        const self = this;\n        return new Observable((observer) => {\n            try {\n                self.next(subMsg());\n            }\n            catch (err) {\n                observer.error(err);\n            }\n            const subscription = self.subscribe({\n                next: (x) => {\n                    try {\n                        if (messageFilter(x)) {\n                            observer.next(x);\n                        }\n                    }\n                    catch (err) {\n                        observer.error(err);\n                    }\n                },\n                error: (err) => observer.error(err),\n                complete: () => observer.complete(),\n            });\n            return () => {\n                try {\n                    self.next(unsubMsg());\n                }\n                catch (err) {\n                    observer.error(err);\n                }\n                subscription.unsubscribe();\n            };\n        });\n    }\n    _connectSocket() {\n        const { WebSocketCtor, protocol, url, binaryType } = this._config;\n        const observer = this._output;\n        let socket = null;\n        try {\n            socket = protocol ? new WebSocketCtor(url, protocol) : new WebSocketCtor(url);\n            this._socket = socket;\n            if (binaryType) {\n                this._socket.binaryType = binaryType;\n            }\n        }\n        catch (e) {\n            observer.error(e);\n            return;\n        }\n        const subscription = new Subscription(() => {\n            this._socket = null;\n            if (socket && socket.readyState === 1) {\n                socket.close();\n            }\n        });\n        socket.onopen = (evt) => {\n            const { _socket } = this;\n            if (!_socket) {\n                socket.close();\n                this._resetState();\n                return;\n            }\n            const { openObserver } = this._config;\n            if (openObserver) {\n                openObserver.next(evt);\n            }\n            const queue = this.destination;\n            this.destination = Subscriber.create((x) => {\n                if (socket.readyState === 1) {\n                    try {\n                        const { serializer } = this._config;\n                        socket.send(serializer(x));\n                    }\n                    catch (e) {\n                        this.destination.error(e);\n                    }\n                }\n            }, (err) => {\n                const { closingObserver } = this._config;\n                if (closingObserver) {\n                    closingObserver.next(undefined);\n                }\n                if (err && err.code) {\n                    socket.close(err.code, err.reason);\n                }\n                else {\n                    observer.error(new TypeError(WEBSOCKETSUBJECT_INVALID_ERROR_OBJECT));\n                }\n                this._resetState();\n            }, () => {\n                const { closingObserver } = this._config;\n                if (closingObserver) {\n                    closingObserver.next(undefined);\n                }\n                socket.close();\n                this._resetState();\n            });\n            if (queue && queue instanceof ReplaySubject) {\n                subscription.add(queue.subscribe(this.destination));\n            }\n        };\n        socket.onerror = (e) => {\n            this._resetState();\n            observer.error(e);\n        };\n        socket.onclose = (e) => {\n            if (socket === this._socket) {\n                this._resetState();\n            }\n            const { closeObserver } = this._config;\n            if (closeObserver) {\n                closeObserver.next(e);\n            }\n            if (e.wasClean) {\n                observer.complete();\n            }\n            else {\n                observer.error(e);\n            }\n        };\n        socket.onmessage = (e) => {\n            try {\n                const { deserializer } = this._config;\n                observer.next(deserializer(e));\n            }\n            catch (err) {\n                observer.error(err);\n            }\n        };\n    }\n    _subscribe(subscriber) {\n        const { source } = this;\n        if (source) {\n            return source.subscribe(subscriber);\n        }\n        if (!this._socket) {\n            this._connectSocket();\n        }\n        this._output.subscribe(subscriber);\n        subscriber.add(() => {\n            const { _socket } = this;\n            if (this._output.observers.length === 0) {\n                if (_socket && (_socket.readyState === 1 || _socket.readyState === 0)) {\n                    _socket.close();\n                }\n                this._resetState();\n            }\n        });\n        return subscriber;\n    }\n    unsubscribe() {\n        const { _socket } = this;\n        if (_socket && (_socket.readyState === 1 || _socket.readyState === 0)) {\n            _socket.close();\n        }\n        this._resetState();\n        super.unsubscribe();\n    }\n}\n","import { WebSocketSubject } from './WebSocketSubject';\nexport function webSocket(urlConfigOrSource) {\n    return new WebSocketSubject(urlConfigOrSource);\n}\n","import { Observable } from '../Observable';\nimport { async as asyncScheduler } from '../scheduler/async';\nimport { isScheduler } from '../util/isScheduler';\nimport { isValidDate } from '../util/isDate';\nexport function timer(dueTime = 0, intervalOrScheduler, scheduler = asyncScheduler) {\n    let intervalDuration = -1;\n    if (intervalOrScheduler != null) {\n        if (isScheduler(intervalOrScheduler)) {\n            scheduler = intervalOrScheduler;\n        }\n        else {\n            intervalDuration = intervalOrScheduler;\n        }\n    }\n    return new Observable((subscriber) => {\n        let due = isValidDate(dueTime) ? +dueTime - scheduler.now() : dueTime;\n        if (due < 0) {\n            due = 0;\n        }\n        let n = 0;\n        return scheduler.schedule(function () {\n            if (!subscriber.closed) {\n                subscriber.next(n++);\n                if (0 <= intervalDuration) {\n                    this.schedule(undefined, intervalDuration);\n                }\n                else {\n                    subscriber.complete();\n                }\n            }\n        }, due);\n    });\n}\n","import { asyncScheduler } from '../scheduler/async';\nimport { isValidDate } from '../util/isDate';\nimport { operate } from '../util/lift';\nimport { innerFrom } from '../observable/innerFrom';\nimport { createErrorClass } from '../util/createErrorClass';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { executeSchedule } from '../util/executeSchedule';\nexport const TimeoutError = createErrorClass((_super) => function TimeoutErrorImpl(info = null) {\n    _super(this);\n    this.message = 'Timeout has occurred';\n    this.name = 'TimeoutError';\n    this.info = info;\n});\nexport function timeout(config, schedulerArg) {\n    const { first, each, with: _with = timeoutErrorFactory, scheduler = schedulerArg !== null && schedulerArg !== void 0 ? schedulerArg : asyncScheduler, meta = null, } = (isValidDate(config) ? { first: config } : typeof config === 'number' ? { each: config } : config);\n    if (first == null && each == null) {\n        throw new TypeError('No timeout provided.');\n    }\n    return operate((source, subscriber) => {\n        let originalSourceSubscription;\n        let timerSubscription;\n        let lastValue = null;\n        let seen = 0;\n        const startTimer = (delay) => {\n            timerSubscription = executeSchedule(subscriber, scheduler, () => {\n                try {\n                    originalSourceSubscription.unsubscribe();\n                    innerFrom(_with({\n                        meta,\n                        lastValue,\n                        seen,\n                    })).subscribe(subscriber);\n                }\n                catch (err) {\n                    subscriber.error(err);\n                }\n            }, delay);\n        };\n        originalSourceSubscription = source.subscribe(createOperatorSubscriber(subscriber, (value) => {\n            timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.unsubscribe();\n            seen++;\n            subscriber.next((lastValue = value));\n            each > 0 && startTimer(each);\n        }, undefined, undefined, () => {\n            if (!(timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.closed)) {\n                timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.unsubscribe();\n            }\n            lastValue = null;\n        }));\n        !seen && startTimer(first != null ? (typeof first === 'number' ? first : +first - scheduler.now()) : each);\n    });\n}\nfunction timeoutErrorFactory(info) {\n    throw new TimeoutError(info);\n}\n","import { Subscription } from '../Subscription';\nexport class Action extends Subscription {\n    constructor(scheduler, work) {\n        super();\n    }\n    schedule(state, delay = 0) {\n        return this;\n    }\n}\n","import { Action } from './Action';\nimport { intervalProvider } from './intervalProvider';\nimport { arrRemove } from '../util/arrRemove';\nexport class AsyncAction extends Action {\n    constructor(scheduler, work) {\n        super(scheduler, work);\n        this.scheduler = scheduler;\n        this.work = work;\n        this.pending = false;\n    }\n    schedule(state, delay = 0) {\n        var _a;\n        if (this.closed) {\n            return this;\n        }\n        this.state = state;\n        const id = this.id;\n        const scheduler = this.scheduler;\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        this.pending = true;\n        this.delay = delay;\n        this.id = (_a = this.id) !== null && _a !== void 0 ? _a : this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    }\n    requestAsyncId(scheduler, _id, delay = 0) {\n        return intervalProvider.setInterval(scheduler.flush.bind(scheduler, this), delay);\n    }\n    recycleAsyncId(_scheduler, id, delay = 0) {\n        if (delay != null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        if (id != null) {\n            intervalProvider.clearInterval(id);\n        }\n        return undefined;\n    }\n    execute(state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        const error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    }\n    _execute(state, _delay) {\n        let errored = false;\n        let errorValue;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = e ? e : new Error('Scheduled action threw falsy error');\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    }\n    unsubscribe() {\n        if (!this.closed) {\n            const { id, scheduler } = this;\n            const { actions } = scheduler;\n            this.work = this.state = this.scheduler = null;\n            this.pending = false;\n            arrRemove(actions, this);\n            if (id != null) {\n                this.id = this.recycleAsyncId(scheduler, id, null);\n            }\n            this.delay = null;\n            super.unsubscribe();\n        }\n    }\n}\n","import { Scheduler } from '../Scheduler';\nexport class AsyncScheduler extends Scheduler {\n    constructor(SchedulerAction, now = Scheduler.now) {\n        super(SchedulerAction, now);\n        this.actions = [];\n        this._active = false;\n    }\n    flush(action) {\n        const { actions } = this;\n        if (this._active) {\n            actions.push(action);\n            return;\n        }\n        let error;\n        this._active = true;\n        do {\n            if ((error = action.execute(action.state, action.delay))) {\n                break;\n            }\n        } while ((action = actions.shift()));\n        this._active = false;\n        if (error) {\n            while ((action = actions.shift())) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    }\n}\n","import { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\nexport const asyncScheduler = new AsyncScheduler(AsyncAction);\nexport const async = asyncScheduler;\n","export const intervalProvider = {\n    setInterval(handler, timeout, ...args) {\n        const { delegate } = intervalProvider;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setInterval) {\n            return delegate.setInterval(handler, timeout, ...args);\n        }\n        return setInterval(handler, timeout, ...args);\n    },\n    clearInterval(handle) {\n        const { delegate } = intervalProvider;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearInterval) || clearInterval)(handle);\n    },\n    delegate: undefined,\n};\n","export function isValidDate(value) {\n    return value instanceof Date && !isNaN(value);\n}\n","import { equalSizes, size } from \"./size.mjs\";\nimport { createObservable as createDevicePixelRatioObservable } from \"./device-pixel-ratio.mjs\";\nvar DevicePixelContentBoxBinding = /** @class */ (function () {\n    function DevicePixelContentBoxBinding(canvasElement, transformBitmapSize, options) {\n        var _a;\n        this._canvasElement = null;\n        this._bitmapSizeChangedListeners = [];\n        this._suggestedBitmapSize = null;\n        this._suggestedBitmapSizeChangedListeners = [];\n        // devicePixelRatio approach\n        this._devicePixelRatioObservable = null;\n        // ResizeObserver approach\n        this._canvasElementResizeObserver = null;\n        this._canvasElement = canvasElement;\n        this._canvasElementClientSize = size({\n            width: this._canvasElement.clientWidth,\n            height: this._canvasElement.clientHeight,\n        });\n        this._transformBitmapSize = transformBitmapSize !== null && transformBitmapSize !== void 0 ? transformBitmapSize : (function (size) { return size; });\n        this._allowResizeObserver = (_a = options === null || options === void 0 ? void 0 : options.allowResizeObserver) !== null && _a !== void 0 ? _a : true;\n        this._chooseAndInitObserver();\n        // we MAY leave the constuctor without any bitmap size observation mechanics initialized\n    }\n    DevicePixelContentBoxBinding.prototype.dispose = function () {\n        var _a, _b;\n        if (this._canvasElement === null) {\n            throw new Error('Object is disposed');\n        }\n        (_a = this._canvasElementResizeObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\n        this._canvasElementResizeObserver = null;\n        (_b = this._devicePixelRatioObservable) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._devicePixelRatioObservable = null;\n        this._suggestedBitmapSizeChangedListeners.length = 0;\n        this._bitmapSizeChangedListeners.length = 0;\n        this._canvasElement = null;\n    };\n    Object.defineProperty(DevicePixelContentBoxBinding.prototype, \"canvasElement\", {\n        get: function () {\n            if (this._canvasElement === null) {\n                throw new Error('Object is disposed');\n            }\n            return this._canvasElement;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DevicePixelContentBoxBinding.prototype, \"canvasElementClientSize\", {\n        get: function () {\n            return this._canvasElementClientSize;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(DevicePixelContentBoxBinding.prototype, \"bitmapSize\", {\n        get: function () {\n            return size({\n                width: this.canvasElement.width,\n                height: this.canvasElement.height,\n            });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Use this function to change canvas element client size until binding is disposed\n     * @param clientSize New client size for bound HTMLCanvasElement\n     */\n    DevicePixelContentBoxBinding.prototype.resizeCanvasElement = function (clientSize) {\n        this._canvasElementClientSize = size(clientSize);\n        this.canvasElement.style.width = \"\".concat(this._canvasElementClientSize.width, \"px\");\n        this.canvasElement.style.height = \"\".concat(this._canvasElementClientSize.height, \"px\");\n        this._invalidateBitmapSize();\n    };\n    DevicePixelContentBoxBinding.prototype.subscribeBitmapSizeChanged = function (listener) {\n        this._bitmapSizeChangedListeners.push(listener);\n    };\n    DevicePixelContentBoxBinding.prototype.unsubscribeBitmapSizeChanged = function (listener) {\n        this._bitmapSizeChangedListeners = this._bitmapSizeChangedListeners.filter(function (l) { return l !== listener; });\n    };\n    Object.defineProperty(DevicePixelContentBoxBinding.prototype, \"suggestedBitmapSize\", {\n        get: function () {\n            return this._suggestedBitmapSize;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    DevicePixelContentBoxBinding.prototype.subscribeSuggestedBitmapSizeChanged = function (listener) {\n        this._suggestedBitmapSizeChangedListeners.push(listener);\n    };\n    DevicePixelContentBoxBinding.prototype.unsubscribeSuggestedBitmapSizeChanged = function (listener) {\n        this._suggestedBitmapSizeChangedListeners = this._suggestedBitmapSizeChangedListeners.filter(function (l) { return l !== listener; });\n    };\n    DevicePixelContentBoxBinding.prototype.applySuggestedBitmapSize = function () {\n        if (this._suggestedBitmapSize === null) {\n            // nothing to apply\n            return;\n        }\n        var oldSuggestedSize = this._suggestedBitmapSize;\n        this._suggestedBitmapSize = null;\n        this._resizeBitmap(oldSuggestedSize);\n        this._emitSuggestedBitmapSizeChanged(oldSuggestedSize, this._suggestedBitmapSize);\n    };\n    DevicePixelContentBoxBinding.prototype._resizeBitmap = function (newSize) {\n        var oldSize = this.bitmapSize;\n        if (equalSizes(oldSize, newSize)) {\n            return;\n        }\n        this.canvasElement.width = newSize.width;\n        this.canvasElement.height = newSize.height;\n        this._emitBitmapSizeChanged(oldSize, newSize);\n    };\n    DevicePixelContentBoxBinding.prototype._emitBitmapSizeChanged = function (oldSize, newSize) {\n        var _this = this;\n        this._bitmapSizeChangedListeners.forEach(function (listener) { return listener.call(_this, oldSize, newSize); });\n    };\n    DevicePixelContentBoxBinding.prototype._suggestNewBitmapSize = function (newSize) {\n        var oldSuggestedSize = this._suggestedBitmapSize;\n        var finalNewSize = size(this._transformBitmapSize(newSize, this._canvasElementClientSize));\n        var newSuggestedSize = equalSizes(this.bitmapSize, finalNewSize) ? null : finalNewSize;\n        if (oldSuggestedSize === null && newSuggestedSize === null) {\n            return;\n        }\n        if (oldSuggestedSize !== null && newSuggestedSize !== null\n            && equalSizes(oldSuggestedSize, newSuggestedSize)) {\n            return;\n        }\n        this._suggestedBitmapSize = newSuggestedSize;\n        this._emitSuggestedBitmapSizeChanged(oldSuggestedSize, newSuggestedSize);\n    };\n    DevicePixelContentBoxBinding.prototype._emitSuggestedBitmapSizeChanged = function (oldSize, newSize) {\n        var _this = this;\n        this._suggestedBitmapSizeChangedListeners.forEach(function (listener) { return listener.call(_this, oldSize, newSize); });\n    };\n    DevicePixelContentBoxBinding.prototype._chooseAndInitObserver = function () {\n        var _this = this;\n        if (!this._allowResizeObserver) {\n            this._initDevicePixelRatioObservable();\n            return;\n        }\n        isDevicePixelContentBoxSupported()\n            .then(function (isSupported) {\n            return isSupported ?\n                _this._initResizeObserver() :\n                _this._initDevicePixelRatioObservable();\n        });\n    };\n    // devicePixelRatio approach\n    DevicePixelContentBoxBinding.prototype._initDevicePixelRatioObservable = function () {\n        var _this = this;\n        if (this._canvasElement === null) {\n            // it looks like we are already dead\n            return;\n        }\n        var win = canvasElementWindow(this._canvasElement);\n        if (win === null) {\n            throw new Error('No window is associated with the canvas');\n        }\n        this._devicePixelRatioObservable = createDevicePixelRatioObservable(win);\n        this._devicePixelRatioObservable.subscribe(function () { return _this._invalidateBitmapSize(); });\n        this._invalidateBitmapSize();\n    };\n    DevicePixelContentBoxBinding.prototype._invalidateBitmapSize = function () {\n        var _a, _b;\n        if (this._canvasElement === null) {\n            // it looks like we are already dead\n            return;\n        }\n        var win = canvasElementWindow(this._canvasElement);\n        if (win === null) {\n            return;\n        }\n        var ratio = (_b = (_a = this._devicePixelRatioObservable) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : win.devicePixelRatio;\n        var canvasRects = this._canvasElement.getClientRects();\n        var newSize = \n        // eslint-disable-next-line no-negated-condition\n        canvasRects[0] !== undefined ?\n            predictedBitmapSize(canvasRects[0], ratio) :\n            size({\n                width: this._canvasElementClientSize.width * ratio,\n                height: this._canvasElementClientSize.height * ratio,\n            });\n        this._suggestNewBitmapSize(newSize);\n    };\n    // ResizeObserver approach\n    DevicePixelContentBoxBinding.prototype._initResizeObserver = function () {\n        var _this = this;\n        if (this._canvasElement === null) {\n            // it looks like we are already dead\n            return;\n        }\n        this._canvasElementResizeObserver = new ResizeObserver(function (entries) {\n            var entry = entries.find(function (entry) { return entry.target === _this._canvasElement; });\n            if (!entry || !entry.devicePixelContentBoxSize || !entry.devicePixelContentBoxSize[0]) {\n                return;\n            }\n            var entrySize = entry.devicePixelContentBoxSize[0];\n            var newSize = size({\n                width: entrySize.inlineSize,\n                height: entrySize.blockSize,\n            });\n            _this._suggestNewBitmapSize(newSize);\n        });\n        this._canvasElementResizeObserver.observe(this._canvasElement, { box: 'device-pixel-content-box' });\n    };\n    return DevicePixelContentBoxBinding;\n}());\nexport function bindTo(canvasElement, target) {\n    if (target.type === 'device-pixel-content-box') {\n        return new DevicePixelContentBoxBinding(canvasElement, target.transform, target.options);\n    }\n    throw new Error('Unsupported binding target');\n}\nfunction canvasElementWindow(canvasElement) {\n    // According to DOM Level 2 Core specification, ownerDocument should never be null for HTMLCanvasElement\n    // see https://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#node-ownerDoc\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    return canvasElement.ownerDocument.defaultView;\n}\nfunction isDevicePixelContentBoxSupported() {\n    return new Promise(function (resolve) {\n        var ro = new ResizeObserver(function (entries) {\n            resolve(entries.every(function (entry) { return 'devicePixelContentBoxSize' in entry; }));\n            ro.disconnect();\n        });\n        ro.observe(document.body, { box: 'device-pixel-content-box' });\n    })\n        .catch(function () { return false; });\n}\nfunction predictedBitmapSize(canvasRect, ratio) {\n    return size({\n        width: Math.round(canvasRect.left * ratio + canvasRect.width * ratio) -\n            Math.round(canvasRect.left * ratio),\n        height: Math.round(canvasRect.top * ratio + canvasRect.height * ratio) -\n            Math.round(canvasRect.top * ratio),\n    });\n}\n","/**\n * @experimental\n */\nvar CanvasRenderingTarget2D = /** @class */ (function () {\n    function CanvasRenderingTarget2D(context, mediaSize, bitmapSize) {\n        if (mediaSize.width === 0 || mediaSize.height === 0) {\n            throw new TypeError('Rendering target could only be created on a media with positive width and height');\n        }\n        this._mediaSize = mediaSize;\n        // !Number.isInteger(bitmapSize.width) || !Number.isInteger(bitmapSize.height)\n        if (bitmapSize.width === 0 || bitmapSize.height === 0) {\n            throw new TypeError('Rendering target could only be created using a bitmap with positive integer width and height');\n        }\n        this._bitmapSize = bitmapSize;\n        this._context = context;\n    }\n    CanvasRenderingTarget2D.prototype.useMediaCoordinateSpace = function (f) {\n        try {\n            this._context.save();\n            // do not use resetTransform to support old versions of Edge\n            this._context.setTransform(1, 0, 0, 1, 0, 0);\n            this._context.scale(this._horizontalPixelRatio, this._verticalPixelRatio);\n            return f({\n                context: this._context,\n                mediaSize: this._mediaSize,\n            });\n        }\n        finally {\n            this._context.restore();\n        }\n    };\n    CanvasRenderingTarget2D.prototype.useBitmapCoordinateSpace = function (f) {\n        try {\n            this._context.save();\n            // do not use resetTransform to support old versions of Edge\n            this._context.setTransform(1, 0, 0, 1, 0, 0);\n            return f({\n                context: this._context,\n                mediaSize: this._mediaSize,\n                bitmapSize: this._bitmapSize,\n                horizontalPixelRatio: this._horizontalPixelRatio,\n                verticalPixelRatio: this._verticalPixelRatio,\n            });\n        }\n        finally {\n            this._context.restore();\n        }\n    };\n    Object.defineProperty(CanvasRenderingTarget2D.prototype, \"_horizontalPixelRatio\", {\n        get: function () {\n            return this._bitmapSize.width / this._mediaSize.width;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CanvasRenderingTarget2D.prototype, \"_verticalPixelRatio\", {\n        get: function () {\n            return this._bitmapSize.height / this._mediaSize.height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return CanvasRenderingTarget2D;\n}());\nexport { CanvasRenderingTarget2D };\n/**\n * @experimental\n */\nexport function createCanvasRenderingTarget2D(binding, contextOptions) {\n    var mediaSize = binding.canvasElementClientSize;\n    var bitmapSize = binding.bitmapSize;\n    var context = binding.canvasElement.getContext('2d', contextOptions);\n    if (context === null) {\n        throw new Error('Could not get 2d drawing context from bound canvas element. Has the canvas already been set to a different context mode?');\n    }\n    return new CanvasRenderingTarget2D(context, mediaSize, bitmapSize);\n}\n/**\n * @experimental\n */\nexport function tryCreateCanvasRenderingTarget2D(binding, contextOptions) {\n    var mediaSize = binding.canvasElementClientSize;\n    if (mediaSize.width === 0 || mediaSize.height === 0) {\n        return null;\n    }\n    var bitmapSize = binding.bitmapSize;\n    if (bitmapSize.width === 0 || bitmapSize.height === 0) {\n        return null;\n    }\n    var context = binding.canvasElement.getContext('2d', contextOptions);\n    if (context === null) {\n        return null;\n    }\n    return new CanvasRenderingTarget2D(context, mediaSize, bitmapSize);\n}\n","var Observable = /** @class */ (function () {\n    function Observable(win) {\n        var _this = this;\n        this._resolutionListener = function () { return _this._onResolutionChanged(); };\n        this._resolutionMediaQueryList = null;\n        this._observers = [];\n        this._window = win;\n        this._installResolutionListener();\n    }\n    Observable.prototype.dispose = function () {\n        this._uninstallResolutionListener();\n        this._window = null;\n    };\n    Object.defineProperty(Observable.prototype, \"value\", {\n        get: function () {\n            return this._window.devicePixelRatio;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Observable.prototype.subscribe = function (next) {\n        var _this = this;\n        var observer = { next: next };\n        this._observers.push(observer);\n        return {\n            unsubscribe: function () {\n                _this._observers = _this._observers.filter(function (o) { return o !== observer; });\n            },\n        };\n    };\n    Observable.prototype._installResolutionListener = function () {\n        if (this._resolutionMediaQueryList !== null) {\n            throw new Error('Resolution listener is already installed');\n        }\n        var dppx = this._window.devicePixelRatio;\n        this._resolutionMediaQueryList = this._window.matchMedia(\"all and (resolution: \".concat(dppx, \"dppx)\"));\n        // IE and some versions of Edge do not support addEventListener/removeEventListener, and we are going to use the deprecated addListener/removeListener\n        this._resolutionMediaQueryList.addListener(this._resolutionListener);\n    };\n    Observable.prototype._uninstallResolutionListener = function () {\n        if (this._resolutionMediaQueryList !== null) {\n            // IE and some versions of Edge do not support addEventListener/removeEventListener, and we are going to use the deprecated addListener/removeListener\n            this._resolutionMediaQueryList.removeListener(this._resolutionListener);\n            this._resolutionMediaQueryList = null;\n        }\n    };\n    Observable.prototype._reinstallResolutionListener = function () {\n        this._uninstallResolutionListener();\n        this._installResolutionListener();\n    };\n    Observable.prototype._onResolutionChanged = function () {\n        var _this = this;\n        this._observers.forEach(function (observer) { return observer.next(_this._window.devicePixelRatio); });\n        this._reinstallResolutionListener();\n    };\n    return Observable;\n}());\nexport function createObservable(win) {\n    return new Observable(win);\n}\n","export { size, equalSizes } from \"./size.mjs\";\nexport { bindTo as bindCanvasElementBitmapSizeTo, } from \"./canvas-element-bitmap-size.mjs\";\nexport { CanvasRenderingTarget2D, createCanvasRenderingTarget2D, tryCreateCanvasRenderingTarget2D, } from \"./canvas-rendering-target.mjs\";\n","export function size(_a) {\n    var width = _a.width, height = _a.height;\n    if (width < 0) {\n        throw new Error('Negative width is not allowed for Size');\n    }\n    if (height < 0) {\n        throw new Error('Negative height is not allowed for Size');\n    }\n    return {\n        width: width,\n        height: height,\n    };\n}\nexport function equalSizes(first, second) {\n    return (first.width === second.width) &&\n        (first.height === second.height);\n}\n","/*!\n * @license\n * TradingView Lightweight Charts™ v5.0.8\n * Copyright (c) 2025 TradingView, Inc.\n * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0\n */\nimport { size as size$1, bindCanvasElementBitmapSizeTo, equalSizes, tryCreateCanvasRenderingTarget2D } from 'fancy-canvas';\n\nconst customStyleDefaults$1 = {\n    color: '#2196f3',\n};\nconst seriesOptionsDefaults = {\n    title: '',\n    visible: true,\n    lastValueVisible: true,\n    priceLineVisible: true,\n    priceLineSource: 0 /* PriceLineSource.LastBar */,\n    priceLineWidth: 1,\n    priceLineColor: '',\n    priceLineStyle: 2 /* LineStyle.Dashed */,\n    baseLineVisible: true,\n    baseLineWidth: 1,\n    baseLineColor: '#B2B5BE',\n    baseLineStyle: 0 /* LineStyle.Solid */,\n    priceFormat: {\n        type: 'price',\n        precision: 2,\n        minMove: 0.01,\n    },\n};\n\n/**\n * Represents the possible line types.\n */\nvar LineType;\n(function (LineType) {\n    /**\n     * A line.\n     */\n    LineType[LineType[\"Simple\"] = 0] = \"Simple\";\n    /**\n     * A stepped line.\n     */\n    LineType[LineType[\"WithSteps\"] = 1] = \"WithSteps\";\n    /**\n     * A curved line.\n     */\n    LineType[LineType[\"Curved\"] = 2] = \"Curved\";\n})(LineType || (LineType = {}));\n/**\n * Represents the possible line styles.\n */\nvar LineStyle;\n(function (LineStyle) {\n    /**\n     * A solid line.\n     */\n    LineStyle[LineStyle[\"Solid\"] = 0] = \"Solid\";\n    /**\n     * A dotted line.\n     */\n    LineStyle[LineStyle[\"Dotted\"] = 1] = \"Dotted\";\n    /**\n     * A dashed line.\n     */\n    LineStyle[LineStyle[\"Dashed\"] = 2] = \"Dashed\";\n    /**\n     * A dashed line with bigger dashes.\n     */\n    LineStyle[LineStyle[\"LargeDashed\"] = 3] = \"LargeDashed\";\n    /**\n     * A dotted line with more space between dots.\n     */\n    LineStyle[LineStyle[\"SparseDotted\"] = 4] = \"SparseDotted\";\n})(LineStyle || (LineStyle = {}));\nfunction setLineStyle(ctx, style) {\n    const dashPatterns = {\n        [0 /* LineStyle.Solid */]: [],\n        [1 /* LineStyle.Dotted */]: [ctx.lineWidth, ctx.lineWidth],\n        [2 /* LineStyle.Dashed */]: [2 * ctx.lineWidth, 2 * ctx.lineWidth],\n        [3 /* LineStyle.LargeDashed */]: [6 * ctx.lineWidth, 6 * ctx.lineWidth],\n        [4 /* LineStyle.SparseDotted */]: [ctx.lineWidth, 4 * ctx.lineWidth],\n    };\n    const dashPattern = dashPatterns[style];\n    ctx.setLineDash(dashPattern);\n}\nfunction drawHorizontalLine(ctx, y, left, right) {\n    ctx.beginPath();\n    const correction = (ctx.lineWidth % 2) ? 0.5 : 0;\n    ctx.moveTo(left, y + correction);\n    ctx.lineTo(right, y + correction);\n    ctx.stroke();\n}\nfunction drawVerticalLine(ctx, x, top, bottom) {\n    ctx.beginPath();\n    const correction = (ctx.lineWidth % 2) ? 0.5 : 0;\n    ctx.moveTo(x + correction, top);\n    ctx.lineTo(x + correction, bottom);\n    ctx.stroke();\n}\nfunction strokeInPixel(ctx, drawFunction) {\n    ctx.save();\n    if (ctx.lineWidth % 2) {\n        ctx.translate(0.5, 0.5);\n    }\n    drawFunction();\n    ctx.restore();\n}\n\n/**\n * Checks an assertion. Throws if the assertion is failed.\n *\n * @param condition - Result of the assertion evaluation\n * @param message - Text to include in the exception message\n */\nfunction assert(condition, message) {\n    if (!condition) {\n        throw new Error('Assertion failed' + (message ? ': ' + message : ''));\n    }\n}\nfunction ensureDefined(value) {\n    if (value === undefined) {\n        throw new Error('Value is undefined');\n    }\n    return value;\n}\nfunction ensureNotNull(value) {\n    if (value === null) {\n        throw new Error('Value is null');\n    }\n    return value;\n}\nfunction ensure(value) {\n    return ensureNotNull(ensureDefined(value));\n}\n/**\n * Compile time check for never\n */\nfunction ensureNever(value) { }\n\nclass Delegate {\n    constructor() {\n        this._private__listeners = [];\n    }\n    _internal_subscribe(callback, linkedObject, singleshot) {\n        const listener = {\n            _internal_callback: callback,\n            _internal_linkedObject: linkedObject,\n            _internal_singleshot: singleshot === true,\n        };\n        this._private__listeners.push(listener);\n    }\n    _internal_unsubscribe(callback) {\n        const index = this._private__listeners.findIndex((listener) => callback === listener._internal_callback);\n        if (index > -1) {\n            this._private__listeners.splice(index, 1);\n        }\n    }\n    _internal_unsubscribeAll(linkedObject) {\n        this._private__listeners = this._private__listeners.filter((listener) => listener._internal_linkedObject !== linkedObject);\n    }\n    _internal_fire(param1, param2, param3) {\n        const listenersSnapshot = [...this._private__listeners];\n        this._private__listeners = this._private__listeners.filter((listener) => !listener._internal_singleshot);\n        listenersSnapshot.forEach((listener) => listener._internal_callback(param1, param2, param3));\n    }\n    _internal_hasListeners() {\n        return this._private__listeners.length > 0;\n    }\n    _internal_destroy() {\n        this._private__listeners = [];\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction merge(dst, ...sources) {\n    for (const src of sources) {\n        // eslint-disable-next-line no-restricted-syntax\n        for (const i in src) {\n            if (src[i] === undefined ||\n                !Object.prototype.hasOwnProperty.call(src, i) ||\n                ['__proto__', 'constructor', 'prototype'].includes(i)) {\n                continue;\n            }\n            if ('object' !== typeof src[i] || dst[i] === undefined || Array.isArray(src[i])) {\n                dst[i] = src[i];\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                merge(dst[i], src[i]);\n            }\n        }\n    }\n    return dst;\n}\nfunction isNumber(value) {\n    return (typeof value === 'number') && (isFinite(value));\n}\nfunction isInteger(value) {\n    return (typeof value === 'number') && ((value % 1) === 0);\n}\nfunction isString(value) {\n    return typeof value === 'string';\n}\nfunction isBoolean(value) {\n    return typeof value === 'boolean';\n}\nfunction clone(object) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const o = object;\n    if (!o || 'object' !== typeof o) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return o;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    let c;\n    if (Array.isArray(o)) {\n        c = [];\n    }\n    else {\n        c = {};\n    }\n    let p;\n    let v;\n    // eslint-disable-next-line no-restricted-syntax\n    for (p in o) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access,@typescript-eslint/no-unsafe-call,no-prototype-builtins\n        if (o.hasOwnProperty(p)) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n            v = o[p];\n            if (v && 'object' === typeof v) {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n                c[p] = clone(v);\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n                c[p] = v;\n            }\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n    return c;\n}\nfunction notNull(t) {\n    return t !== null;\n}\nfunction undefinedIfNull(t) {\n    return (t === null) ? undefined : t;\n}\n\n/**\n * Default font family.\n * Must be used to generate font string when font is not specified.\n */\nconst defaultFontFamily = `-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif`;\n/**\n * Generates a font string, which can be used to set in canvas' font property.\n * If no family provided, {@link defaultFontFamily} will be used.\n *\n * @param size - Font size in pixels.\n * @param family - Optional font family.\n * @param style - Optional font style.\n * @returns The font string.\n */\nfunction makeFont(size, family, style) {\n    if (style !== undefined) {\n        style = `${style} `;\n    }\n    else {\n        style = '';\n    }\n    if (family === undefined) {\n        family = defaultFontFamily;\n    }\n    return `${style}${size}px ${family}`;\n}\n\nclass PriceAxisRendererOptionsProvider {\n    constructor(chartModel) {\n        this._private__rendererOptions = {\n            _internal_borderSize: 1 /* RendererConstants.BorderSize */,\n            _internal_tickLength: 5 /* RendererConstants.TickLength */,\n            _internal_fontSize: NaN,\n            _internal_font: '',\n            _internal_fontFamily: '',\n            _internal_color: '',\n            _internal_paneBackgroundColor: '',\n            _internal_paddingBottom: 0,\n            _internal_paddingInner: 0,\n            _internal_paddingOuter: 0,\n            _internal_paddingTop: 0,\n            _internal_baselineOffset: 0,\n        };\n        this._private__chartModel = chartModel;\n    }\n    _internal_options() {\n        const rendererOptions = this._private__rendererOptions;\n        const currentFontSize = this._private__fontSize();\n        const currentFontFamily = this._private__fontFamily();\n        if (rendererOptions._internal_fontSize !== currentFontSize || rendererOptions._internal_fontFamily !== currentFontFamily) {\n            rendererOptions._internal_fontSize = currentFontSize;\n            rendererOptions._internal_fontFamily = currentFontFamily;\n            rendererOptions._internal_font = makeFont(currentFontSize, currentFontFamily);\n            rendererOptions._internal_paddingTop = 2.5 / 12 * currentFontSize; // 2.5 px for 12px font\n            rendererOptions._internal_paddingBottom = rendererOptions._internal_paddingTop;\n            rendererOptions._internal_paddingInner = currentFontSize / 12 * rendererOptions._internal_tickLength;\n            rendererOptions._internal_paddingOuter = currentFontSize / 12 * rendererOptions._internal_tickLength;\n            rendererOptions._internal_baselineOffset = 0;\n        }\n        rendererOptions._internal_color = this._private__textColor();\n        rendererOptions._internal_paneBackgroundColor = this._private__paneBackgroundColor();\n        return this._private__rendererOptions;\n    }\n    _private__textColor() {\n        return this._private__chartModel._internal_options()['layout'].textColor;\n    }\n    _private__paneBackgroundColor() {\n        return this._private__chartModel._internal_backgroundTopColor();\n    }\n    _private__fontSize() {\n        return this._private__chartModel._internal_options()['layout'].fontSize;\n    }\n    _private__fontFamily() {\n        return this._private__chartModel._internal_options()['layout'].fontFamily;\n    }\n}\n\nfunction normalizeRgbComponent(component) {\n    if (component < 0) {\n        return 0;\n    }\n    if (component > 255) {\n        return 255;\n    }\n    // NaN values are treated as 0\n    return (Math.round(component) || 0);\n}\nfunction normalizeAlphaComponent(component) {\n    if (component <= 0 || component > 1) {\n        return Math.min(Math.max(component, 0), 1);\n    }\n    // limit the precision of all numbers to at most 4 digits in fractional part\n    return (Math.round(component * 10000) / 10000);\n}\nfunction rgbaToGrayscale(rgbValue) {\n    // Originally, the NTSC RGB to YUV formula\n    // perfected by @eugene-korobko's black magic\n    const redComponentGrayscaleWeight = 0.199;\n    const greenComponentGrayscaleWeight = 0.687;\n    const blueComponentGrayscaleWeight = 0.114;\n    return (redComponentGrayscaleWeight * rgbValue[0] +\n        greenComponentGrayscaleWeight * rgbValue[1] +\n        blueComponentGrayscaleWeight * rgbValue[2]);\n}\n/**\n * For colors which fall within the sRGB space, the browser can\n * be used to convert the color string into a rgb /rgba string.\n *\n * For other colors, it will be returned as specified (i.e. for\n * newer formats like display-p3)\n *\n * See: https://www.w3.org/TR/css-color-4/#serializing-sRGB-values\n */\nfunction getRgbStringViaBrowser(color) {\n    const element = document.createElement('div');\n    element.style.display = 'none';\n    // We append to the body as it is the most reliable way to get a color reading\n    // appending to the chart container or similar element can result in the following\n    // getComputedStyle returning empty strings on each check.\n    document.body.appendChild(element);\n    element.style.color = color;\n    const computed = window.getComputedStyle(element).color;\n    document.body.removeChild(element);\n    return computed;\n}\nclass ColorParser {\n    constructor(customParsers, initialCache) {\n        this._private__rgbaCache = new Map();\n        this._private__customParsers = customParsers;\n        if (initialCache) {\n            this._private__rgbaCache = initialCache;\n        }\n    }\n    /**\n     * We fallback to RGBA here since supporting alpha transformations\n     * on wider color gamuts would currently be a lot of extra code\n     * for very little benefit due to actual usage.\n     */\n    _internal_applyAlpha(color, alpha) {\n        // special case optimization\n        if (color === 'transparent') {\n            return color;\n        }\n        const originRgba = this._private__parseColor(color);\n        const originAlpha = originRgba[3];\n        return `rgba(${originRgba[0]}, ${originRgba[1]}, ${originRgba[2]}, ${alpha * originAlpha})`;\n    }\n    _internal_generateContrastColors(background) {\n        const rgba = this._private__parseColor(background);\n        return {\n            _internal_background: `rgb(${rgba[0]}, ${rgba[1]}, ${rgba[2]})`, // no alpha\n            _internal_foreground: rgbaToGrayscale(rgba) > 160 ? 'black' : 'white',\n        };\n    }\n    _internal_colorStringToGrayscale(background) {\n        return rgbaToGrayscale(this._private__parseColor(background));\n    }\n    _internal_gradientColorAtPercent(topColor, bottomColor, percent) {\n        const [topR, topG, topB, topA] = this._private__parseColor(topColor);\n        const [bottomR, bottomG, bottomB, bottomA] = this._private__parseColor(bottomColor);\n        const resultRgba = [\n            normalizeRgbComponent((topR + percent * (bottomR - topR))),\n            normalizeRgbComponent((topG + percent * (bottomG - topG))),\n            normalizeRgbComponent((topB + percent * (bottomB - topB))),\n            normalizeAlphaComponent((topA + percent * (bottomA - topA))),\n        ];\n        return `rgba(${resultRgba[0]}, ${resultRgba[1]}, ${resultRgba[2]}, ${resultRgba[3]})`;\n    }\n    _private__parseColor(color) {\n        const cached = this._private__rgbaCache.get(color);\n        if (cached) {\n            return cached;\n        }\n        const computed = getRgbStringViaBrowser(color);\n        const match = computed.match(/^rgba?\\s*\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d*\\.?\\d+))?\\)$/);\n        if (!match) {\n            if (this._private__customParsers.length) {\n                for (const parser of this._private__customParsers) {\n                    const result = parser(color);\n                    if (result) {\n                        this._private__rgbaCache.set(color, result);\n                        return result;\n                    }\n                }\n            }\n            throw new Error(`Failed to parse color: ${color}`);\n        }\n        const rgba = [\n            parseInt(match[1], 10),\n            parseInt(match[2], 10),\n            parseInt(match[3], 10),\n            (match[4] ? parseFloat(match[4]) : 1),\n        ];\n        this._private__rgbaCache.set(color, rgba);\n        return rgba;\n    }\n}\n\nclass CompositeRenderer {\n    constructor() {\n        this._private__renderers = [];\n    }\n    _internal_setRenderers(renderers) {\n        this._private__renderers = renderers;\n    }\n    _internal_draw(target, isHovered, hitTestData) {\n        this._private__renderers.forEach((r) => {\n            r._internal_draw(target, isHovered, hitTestData);\n        });\n    }\n}\n\nclass BitmapCoordinatesPaneRenderer {\n    _internal_draw(target, isHovered, hitTestData) {\n        target.useBitmapCoordinateSpace((scope) => this._internal__drawImpl(scope, isHovered, hitTestData));\n    }\n}\n\nclass PaneRendererMarks extends BitmapCoordinatesPaneRenderer {\n    constructor() {\n        super(...arguments);\n        this._internal__data = null;\n    }\n    _internal_setData(data) {\n        this._internal__data = data;\n    }\n    _internal__drawImpl({ context: ctx, horizontalPixelRatio, verticalPixelRatio }) {\n        if (this._internal__data === null || this._internal__data._internal_visibleRange === null) {\n            return;\n        }\n        const visibleRange = this._internal__data._internal_visibleRange;\n        const data = this._internal__data;\n        const tickWidth = Math.max(1, Math.floor(horizontalPixelRatio));\n        const correction = (tickWidth % 2) / 2;\n        const draw = (radiusMedia) => {\n            ctx.beginPath();\n            for (let i = visibleRange.to - 1; i >= visibleRange.from; --i) {\n                const point = data._internal_items[i];\n                const centerX = Math.round(point._internal_x * horizontalPixelRatio) + correction; // correct x coordinate only\n                const centerY = point._internal_y * verticalPixelRatio;\n                const radius = radiusMedia * verticalPixelRatio + correction;\n                ctx.moveTo(centerX, centerY);\n                ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);\n            }\n            ctx.fill();\n        };\n        if (data._internal_lineWidth > 0) {\n            ctx.fillStyle = data._internal_backColor;\n            draw(data._internal_radius + data._internal_lineWidth);\n        }\n        ctx.fillStyle = data._internal_lineColor;\n        draw(data._internal_radius);\n    }\n}\n\nfunction createEmptyMarkerData() {\n    return {\n        _internal_items: [{\n                _internal_x: 0,\n                _internal_y: 0,\n                _internal_time: 0,\n                _internal_price: 0,\n            }],\n        _internal_lineColor: '',\n        _internal_backColor: '',\n        _internal_radius: 0,\n        _internal_lineWidth: 0,\n        _internal_visibleRange: null,\n    };\n}\nconst rangeForSinglePoint = { from: 0, to: 1 };\nclass CrosshairMarksPaneView {\n    constructor(chartModel, crosshair, pane) {\n        this._private__compositeRenderer = new CompositeRenderer();\n        this._private__markersRenderers = [];\n        this._private__markersData = [];\n        this._private__invalidated = true;\n        this._private__chartModel = chartModel;\n        this._private__crosshair = crosshair;\n        this._private__pane = pane;\n        this._private__compositeRenderer._internal_setRenderers(this._private__markersRenderers);\n    }\n    _internal_update(updateType) {\n        this._private__createMarkerRenderersIfNeeded();\n        this._private__invalidated = true;\n    }\n    _internal_renderer() {\n        if (this._private__invalidated) {\n            this._private__updateImpl();\n            this._private__invalidated = false;\n        }\n        return this._private__compositeRenderer;\n    }\n    _private__createMarkerRenderersIfNeeded() {\n        const serieses = this._private__pane._internal_orderedSources();\n        if (serieses.length !== this._private__markersRenderers.length) {\n            this._private__markersData = serieses.map(createEmptyMarkerData);\n            this._private__markersRenderers = this._private__markersData.map((data) => {\n                const res = new PaneRendererMarks();\n                res._internal_setData(data);\n                return res;\n            });\n            this._private__compositeRenderer._internal_setRenderers(this._private__markersRenderers);\n        }\n    }\n    _private__updateImpl() {\n        const forceHidden = this._private__crosshair._internal_options().mode === 2 /* CrosshairMode.Hidden */ || !this._private__crosshair._internal_visible();\n        const serieses = this._private__pane._internal_orderedSeries();\n        const timePointIndex = this._private__crosshair._internal_appliedIndex();\n        const timeScale = this._private__chartModel._internal_timeScale();\n        this._private__createMarkerRenderersIfNeeded();\n        serieses.forEach((s, index) => {\n            const data = this._private__markersData[index];\n            const seriesData = s._internal_markerDataAtIndex(timePointIndex);\n            const firstValue = s._internal_firstValue();\n            if (forceHidden || seriesData === null || !s._internal_visible() || firstValue === null) {\n                data._internal_visibleRange = null;\n                return;\n            }\n            data._internal_lineColor = seriesData._internal_backgroundColor;\n            data._internal_radius = seriesData._internal_radius;\n            data._internal_lineWidth = seriesData._internal_borderWidth;\n            data._internal_items[0]._internal_price = seriesData._internal_price;\n            data._internal_items[0]._internal_y = s._internal_priceScale()._internal_priceToCoordinate(seriesData._internal_price, firstValue._internal_value);\n            data._internal_backColor = seriesData._internal_borderColor ?? this._private__chartModel._internal_backgroundColorAtYPercentFromTop(data._internal_items[0]._internal_y / s._internal_priceScale()._internal_height());\n            data._internal_items[0]._internal_time = timePointIndex;\n            data._internal_items[0]._internal_x = timeScale._internal_indexToCoordinate(timePointIndex);\n            data._internal_visibleRange = rangeForSinglePoint;\n        });\n    }\n}\n\nclass CrosshairRenderer extends BitmapCoordinatesPaneRenderer {\n    constructor(data) {\n        super();\n        this._private__data = data;\n    }\n    _internal__drawImpl({ context: ctx, bitmapSize, horizontalPixelRatio, verticalPixelRatio }) {\n        if (this._private__data === null) {\n            return;\n        }\n        const vertLinesVisible = this._private__data._internal_vertLine._internal_visible;\n        const horzLinesVisible = this._private__data._internal_horzLine._internal_visible;\n        if (!vertLinesVisible && !horzLinesVisible) {\n            return;\n        }\n        const x = Math.round(this._private__data._internal_x * horizontalPixelRatio);\n        const y = Math.round(this._private__data._internal_y * verticalPixelRatio);\n        ctx.lineCap = 'butt';\n        if (vertLinesVisible && x >= 0) {\n            ctx.lineWidth = Math.floor(this._private__data._internal_vertLine._internal_lineWidth * horizontalPixelRatio);\n            ctx.strokeStyle = this._private__data._internal_vertLine._internal_color;\n            ctx.fillStyle = this._private__data._internal_vertLine._internal_color;\n            setLineStyle(ctx, this._private__data._internal_vertLine._internal_lineStyle);\n            drawVerticalLine(ctx, x, 0, bitmapSize.height);\n        }\n        if (horzLinesVisible && y >= 0) {\n            ctx.lineWidth = Math.floor(this._private__data._internal_horzLine._internal_lineWidth * verticalPixelRatio);\n            ctx.strokeStyle = this._private__data._internal_horzLine._internal_color;\n            ctx.fillStyle = this._private__data._internal_horzLine._internal_color;\n            setLineStyle(ctx, this._private__data._internal_horzLine._internal_lineStyle);\n            drawHorizontalLine(ctx, y, 0, bitmapSize.width);\n        }\n    }\n}\n\nclass CrosshairPaneView {\n    constructor(source, pane) {\n        this._private__invalidated = true;\n        this._private__rendererData = {\n            _internal_vertLine: {\n                _internal_lineWidth: 1,\n                _internal_lineStyle: 0,\n                _internal_color: '',\n                _internal_visible: false,\n            },\n            _internal_horzLine: {\n                _internal_lineWidth: 1,\n                _internal_lineStyle: 0,\n                _internal_color: '',\n                _internal_visible: false,\n            },\n            _internal_x: 0,\n            _internal_y: 0,\n        };\n        this._private__renderer = new CrosshairRenderer(this._private__rendererData);\n        this._private__source = source;\n        this._private__pane = pane;\n    }\n    _internal_update() {\n        this._private__invalidated = true;\n    }\n    _internal_renderer(pane) {\n        if (this._private__invalidated) {\n            this._private__updateImpl();\n            this._private__invalidated = false;\n        }\n        return this._private__renderer;\n    }\n    _private__updateImpl() {\n        const visible = this._private__source._internal_visible();\n        const crosshairOptions = this._private__pane._internal_model()._internal_options().crosshair;\n        const data = this._private__rendererData;\n        if (crosshairOptions.mode === 2 /* CrosshairMode.Hidden */) {\n            data._internal_horzLine._internal_visible = false;\n            data._internal_vertLine._internal_visible = false;\n            return;\n        }\n        data._internal_horzLine._internal_visible = visible && this._private__source._internal_horzLineVisible(this._private__pane);\n        data._internal_vertLine._internal_visible = visible && this._private__source._internal_vertLineVisible();\n        data._internal_horzLine._internal_lineWidth = crosshairOptions.horzLine.width;\n        data._internal_horzLine._internal_lineStyle = crosshairOptions.horzLine.style;\n        data._internal_horzLine._internal_color = crosshairOptions.horzLine.color;\n        data._internal_vertLine._internal_lineWidth = crosshairOptions.vertLine.width;\n        data._internal_vertLine._internal_lineStyle = crosshairOptions.vertLine.style;\n        data._internal_vertLine._internal_color = crosshairOptions.vertLine.color;\n        data._internal_x = this._private__source._internal_appliedX();\n        data._internal_y = this._private__source._internal_appliedY();\n    }\n}\n\n/**\n * Fills rectangle's inner border (so, all the filled area is limited by the [x, x + width]*[y, y + height] region)\n * ```\n * (x, y)\n * O***********************|*****\n * |        border         |  ^\n * |   *****************   |  |\n * |   |               |   |  |\n * | b |               | b |  h\n * | o |               | o |  e\n * | r |               | r |  i\n * | d |               | d |  g\n * | e |               | e |  h\n * | r |               | r |  t\n * |   |               |   |  |\n * |   *****************   |  |\n * |        border         |  v\n * |***********************|*****\n * |                       |\n * |<------- width ------->|\n * ```\n *\n * @param ctx - Context to draw on\n * @param x - Left side of the target rectangle\n * @param y - Top side of the target rectangle\n * @param width - Width of the target rectangle\n * @param height - Height of the target rectangle\n * @param borderWidth - Width of border to fill, must be less than width and height of the target rectangle\n */\nfunction fillRectInnerBorder(ctx, x, y, width, height, borderWidth) {\n    // horizontal (top and bottom) edges\n    ctx.fillRect(x + borderWidth, y, width - borderWidth * 2, borderWidth);\n    ctx.fillRect(x + borderWidth, y + height - borderWidth, width - borderWidth * 2, borderWidth);\n    // vertical (left and right) edges\n    ctx.fillRect(x, y, borderWidth, height);\n    ctx.fillRect(x + width - borderWidth, y, borderWidth, height);\n}\nfunction clearRect(ctx, x, y, w, h, clearColor) {\n    ctx.save();\n    ctx.globalCompositeOperation = 'copy';\n    ctx.fillStyle = clearColor;\n    ctx.fillRect(x, y, w, h);\n    ctx.restore();\n}\nfunction changeBorderRadius(borderRadius, offset) {\n    return borderRadius.map((x) => x === 0 ? x : x + offset);\n}\nfunction drawRoundRect(\n// eslint:disable-next-line:max-params\nctx, x, y, w, h, radii) {\n    /**\n     * As of May 2023, all of the major browsers now support ctx.roundRect() so we should\n     * be able to switch to the native version soon.\n     */\n    ctx.beginPath();\n    if (ctx.roundRect) {\n        ctx.roundRect(x, y, w, h, radii);\n        return;\n    }\n    /*\n     * Deprecate the rest in v5.\n     */\n    ctx.lineTo(x + w - radii[1], y);\n    if (radii[1] !== 0) {\n        ctx.arcTo(x + w, y, x + w, y + radii[1], radii[1]);\n    }\n    ctx.lineTo(x + w, y + h - radii[2]);\n    if (radii[2] !== 0) {\n        ctx.arcTo(x + w, y + h, x + w - radii[2], y + h, radii[2]);\n    }\n    ctx.lineTo(x + radii[3], y + h);\n    if (radii[3] !== 0) {\n        ctx.arcTo(x, y + h, x, y + h - radii[3], radii[3]);\n    }\n    ctx.lineTo(x, y + radii[0]);\n    if (radii[0] !== 0) {\n        ctx.arcTo(x, y, x + radii[0], y, radii[0]);\n    }\n}\n/**\n * Draws a rounded rect with a border.\n *\n * This function assumes that the colors will be solid, without\n * any alpha. (This allows us to fix a rendering artefact.)\n *\n * @param outerBorderRadius - The radius of the border (outer edge)\n */\n// eslint-disable-next-line max-params\nfunction drawRoundRectWithBorder(ctx, left, top, width, height, backgroundColor, borderWidth = 0, outerBorderRadius = [0, 0, 0, 0], borderColor = '') {\n    ctx.save();\n    if (!borderWidth || !borderColor || borderColor === backgroundColor) {\n        drawRoundRect(ctx, left, top, width, height, outerBorderRadius);\n        ctx.fillStyle = backgroundColor;\n        ctx.fill();\n        ctx.restore();\n        return;\n    }\n    const halfBorderWidth = borderWidth / 2;\n    const radii = changeBorderRadius(outerBorderRadius, -halfBorderWidth);\n    drawRoundRect(ctx, left + halfBorderWidth, top + halfBorderWidth, width - borderWidth, height - borderWidth, radii);\n    if (backgroundColor !== 'transparent') {\n        ctx.fillStyle = backgroundColor;\n        ctx.fill();\n    }\n    if (borderColor !== 'transparent') {\n        ctx.lineWidth = borderWidth;\n        ctx.strokeStyle = borderColor;\n        ctx.closePath();\n        ctx.stroke();\n    }\n    ctx.restore();\n}\n// eslint-disable-next-line max-params\nfunction clearRectWithGradient(ctx, x, y, w, h, topColor, bottomColor) {\n    ctx.save();\n    ctx.globalCompositeOperation = 'copy';\n    const gradient = ctx.createLinearGradient(0, 0, 0, h);\n    gradient.addColorStop(0, topColor);\n    gradient.addColorStop(1, bottomColor);\n    ctx.fillStyle = gradient;\n    ctx.fillRect(x, y, w, h);\n    ctx.restore();\n}\n\nclass PriceAxisViewRenderer {\n    constructor(data, commonData) {\n        this._internal_setData(data, commonData);\n    }\n    _internal_setData(data, commonData) {\n        this._private__data = data;\n        this._private__commonData = commonData;\n    }\n    _internal_height(rendererOptions, useSecondLine) {\n        if (!this._private__data._internal_visible) {\n            return 0;\n        }\n        return rendererOptions._internal_fontSize + rendererOptions._internal_paddingTop + rendererOptions._internal_paddingBottom;\n    }\n    _internal_draw(target, rendererOptions, textWidthCache, align) {\n        if (!this._private__data._internal_visible || this._private__data._internal_text.length === 0) {\n            return;\n        }\n        const textColor = this._private__data._internal_color;\n        const backgroundColor = this._private__commonData._internal_background;\n        const geometry = target.useBitmapCoordinateSpace((scope) => {\n            const ctx = scope.context;\n            ctx.font = rendererOptions._internal_font;\n            const geom = this._private__calculateGeometry(scope, rendererOptions, textWidthCache, align);\n            const gb = geom._internal_bitmap;\n            /*\n             draw label. backgroundColor will always be a solid color (no alpha) [see generateContrastColors in color.ts].\n             Therefore we can draw the rounded label using simplified code (drawRoundRectWithBorder) that doesn't need to ensure the background and the border don't overlap.\n            */\n            if (geom._internal_alignRight) {\n                drawRoundRectWithBorder(ctx, gb._internal_xOutside, gb._internal_yTop, gb._internal_totalWidth, gb._internal_totalHeight, backgroundColor, gb._internal_horzBorder, [gb._internal_radius, 0, 0, gb._internal_radius], backgroundColor);\n            }\n            else {\n                drawRoundRectWithBorder(ctx, gb._internal_xInside, gb._internal_yTop, gb._internal_totalWidth, gb._internal_totalHeight, backgroundColor, gb._internal_horzBorder, [0, gb._internal_radius, gb._internal_radius, 0], backgroundColor);\n            }\n            // draw tick\n            if (this._private__data._internal_tickVisible) {\n                ctx.fillStyle = textColor;\n                ctx.fillRect(gb._internal_xInside, gb._internal_yMid, gb._internal_xTick - gb._internal_xInside, gb._internal_tickHeight);\n            }\n            // draw separator\n            if (this._private__data._internal_borderVisible) {\n                ctx.fillStyle = rendererOptions._internal_paneBackgroundColor;\n                ctx.fillRect(geom._internal_alignRight ? gb._internal_right - gb._internal_horzBorder : 0, gb._internal_yTop, gb._internal_horzBorder, gb._internal_yBottom - gb._internal_yTop);\n            }\n            return geom;\n        });\n        target.useMediaCoordinateSpace(({ context: ctx }) => {\n            const gm = geometry._internal_media;\n            ctx.font = rendererOptions._internal_font;\n            ctx.textAlign = geometry._internal_alignRight ? 'right' : 'left';\n            ctx.textBaseline = 'middle';\n            ctx.fillStyle = textColor;\n            ctx.fillText(this._private__data._internal_text, gm._internal_xText, (gm._internal_yTop + gm._internal_yBottom) / 2 + gm._internal_textMidCorrection);\n        });\n    }\n    _private__calculateGeometry(scope, rendererOptions, textWidthCache, align) {\n        const { context: ctx, bitmapSize, mediaSize, horizontalPixelRatio, verticalPixelRatio } = scope;\n        const tickSize = (this._private__data._internal_tickVisible || !this._private__data._internal_moveTextToInvisibleTick) ? rendererOptions._internal_tickLength : 0;\n        const horzBorder = this._private__data._internal_separatorVisible ? rendererOptions._internal_borderSize : 0;\n        const paddingTop = rendererOptions._internal_paddingTop + this._private__commonData._internal_additionalPaddingTop;\n        const paddingBottom = rendererOptions._internal_paddingBottom + this._private__commonData._internal_additionalPaddingBottom;\n        const paddingInner = rendererOptions._internal_paddingInner;\n        const paddingOuter = rendererOptions._internal_paddingOuter;\n        const text = this._private__data._internal_text;\n        const actualTextHeight = rendererOptions._internal_fontSize;\n        const textMidCorrection = textWidthCache._internal_yMidCorrection(ctx, text);\n        const textWidth = Math.ceil(textWidthCache._internal_measureText(ctx, text));\n        const totalHeight = actualTextHeight + paddingTop + paddingBottom;\n        const totalWidth = rendererOptions._internal_borderSize + paddingInner + paddingOuter + textWidth + tickSize;\n        const tickHeightBitmap = Math.max(1, Math.floor(verticalPixelRatio));\n        let totalHeightBitmap = Math.round(totalHeight * verticalPixelRatio);\n        if (totalHeightBitmap % 2 !== tickHeightBitmap % 2) {\n            totalHeightBitmap += 1;\n        }\n        const horzBorderBitmap = horzBorder > 0 ? Math.max(1, Math.floor(horzBorder * horizontalPixelRatio)) : 0;\n        const totalWidthBitmap = Math.round(totalWidth * horizontalPixelRatio);\n        // tick overlaps scale border\n        const tickSizeBitmap = Math.round(tickSize * horizontalPixelRatio);\n        const yMid = this._private__commonData._internal_fixedCoordinate ?? this._private__commonData._internal_coordinate;\n        const yMidBitmap = Math.round(yMid * verticalPixelRatio) - Math.floor(verticalPixelRatio * 0.5);\n        const yTopBitmap = Math.floor(yMidBitmap + tickHeightBitmap / 2 - totalHeightBitmap / 2);\n        const yBottomBitmap = yTopBitmap + totalHeightBitmap;\n        const alignRight = align === 'right';\n        const xInside = alignRight ? mediaSize.width - horzBorder : horzBorder;\n        const xInsideBitmap = alignRight ? bitmapSize.width - horzBorderBitmap : horzBorderBitmap;\n        let xOutsideBitmap;\n        let xTickBitmap;\n        let xText;\n        if (alignRight) {\n            // 2               1\n            //\n            //              6  5\n            //\n            // 3               4\n            xOutsideBitmap = xInsideBitmap - totalWidthBitmap;\n            xTickBitmap = xInsideBitmap - tickSizeBitmap;\n            xText = xInside - tickSize - paddingInner - horzBorder;\n        }\n        else {\n            // 1               2\n            //\n            // 6  5\n            //\n            // 4               3\n            xOutsideBitmap = xInsideBitmap + totalWidthBitmap;\n            xTickBitmap = xInsideBitmap + tickSizeBitmap;\n            xText = xInside + tickSize + paddingInner;\n        }\n        return {\n            _internal_alignRight: alignRight,\n            _internal_bitmap: {\n                _internal_yTop: yTopBitmap,\n                _internal_yMid: yMidBitmap,\n                _internal_yBottom: yBottomBitmap,\n                _internal_totalWidth: totalWidthBitmap,\n                _internal_totalHeight: totalHeightBitmap,\n                // TODO: it is better to have different horizontal and vertical radii\n                _internal_radius: 2 * horizontalPixelRatio,\n                _internal_horzBorder: horzBorderBitmap,\n                _internal_xOutside: xOutsideBitmap,\n                _internal_xInside: xInsideBitmap,\n                _internal_xTick: xTickBitmap,\n                _internal_tickHeight: tickHeightBitmap,\n                _internal_right: bitmapSize.width,\n            },\n            _internal_media: {\n                _internal_yTop: yTopBitmap / verticalPixelRatio,\n                _internal_yBottom: yBottomBitmap / verticalPixelRatio,\n                _internal_xText: xText,\n                _internal_textMidCorrection: textMidCorrection,\n            },\n        };\n    }\n}\n\nclass PriceAxisView {\n    constructor(ctor) {\n        this._private__commonRendererData = {\n            _internal_coordinate: 0,\n            _internal_background: '#000',\n            _internal_additionalPaddingBottom: 0,\n            _internal_additionalPaddingTop: 0,\n        };\n        this._private__axisRendererData = {\n            _internal_text: '',\n            _internal_visible: false,\n            _internal_tickVisible: true,\n            _internal_moveTextToInvisibleTick: false,\n            _internal_borderColor: '',\n            _internal_color: '#FFF',\n            _internal_borderVisible: false,\n            _internal_separatorVisible: false,\n        };\n        this._private__paneRendererData = {\n            _internal_text: '',\n            _internal_visible: false,\n            _internal_tickVisible: false,\n            _internal_moveTextToInvisibleTick: true,\n            _internal_borderColor: '',\n            _internal_color: '#FFF',\n            _internal_borderVisible: true,\n            _internal_separatorVisible: true,\n        };\n        this._private__invalidated = true;\n        this._private__axisRenderer = new (ctor || PriceAxisViewRenderer)(this._private__axisRendererData, this._private__commonRendererData);\n        this._private__paneRenderer = new (ctor || PriceAxisViewRenderer)(this._private__paneRendererData, this._private__commonRendererData);\n    }\n    _internal_text() {\n        this._private__updateRendererDataIfNeeded();\n        return this._private__axisRendererData._internal_text;\n    }\n    _internal_coordinate() {\n        this._private__updateRendererDataIfNeeded();\n        return this._private__commonRendererData._internal_coordinate;\n    }\n    _internal_update() {\n        this._private__invalidated = true;\n    }\n    _internal_height(rendererOptions, useSecondLine = false) {\n        return Math.max(this._private__axisRenderer._internal_height(rendererOptions, useSecondLine), this._private__paneRenderer._internal_height(rendererOptions, useSecondLine));\n    }\n    _internal_getFixedCoordinate() {\n        return this._private__commonRendererData._internal_fixedCoordinate || 0;\n    }\n    _internal_setFixedCoordinate(value) {\n        this._private__commonRendererData._internal_fixedCoordinate = value;\n    }\n    _internal_isVisible() {\n        this._private__updateRendererDataIfNeeded();\n        return this._private__axisRendererData._internal_visible || this._private__paneRendererData._internal_visible;\n    }\n    _internal_isAxisLabelVisible() {\n        this._private__updateRendererDataIfNeeded();\n        return this._private__axisRendererData._internal_visible;\n    }\n    _internal_renderer(priceScale) {\n        this._private__updateRendererDataIfNeeded();\n        // force update tickVisible state from price scale options\n        // because we don't have and we can't have price axis in other methods\n        // (like paneRenderer or any other who call _updateRendererDataIfNeeded)\n        this._private__axisRendererData._internal_tickVisible = this._private__axisRendererData._internal_tickVisible && priceScale._internal_options().ticksVisible;\n        this._private__paneRendererData._internal_tickVisible = this._private__paneRendererData._internal_tickVisible && priceScale._internal_options().ticksVisible;\n        this._private__axisRenderer._internal_setData(this._private__axisRendererData, this._private__commonRendererData);\n        this._private__paneRenderer._internal_setData(this._private__paneRendererData, this._private__commonRendererData);\n        return this._private__axisRenderer;\n    }\n    _internal_paneRenderer() {\n        this._private__updateRendererDataIfNeeded();\n        this._private__axisRenderer._internal_setData(this._private__axisRendererData, this._private__commonRendererData);\n        this._private__paneRenderer._internal_setData(this._private__paneRendererData, this._private__commonRendererData);\n        return this._private__paneRenderer;\n    }\n    _private__updateRendererDataIfNeeded() {\n        if (this._private__invalidated) {\n            this._private__axisRendererData._internal_tickVisible = true;\n            this._private__paneRendererData._internal_tickVisible = false;\n            this._internal__updateRendererData(this._private__axisRendererData, this._private__paneRendererData, this._private__commonRendererData);\n        }\n    }\n}\n\nclass CrosshairPriceAxisView extends PriceAxisView {\n    constructor(source, priceScale, valueProvider) {\n        super();\n        this._private__source = source;\n        this._private__priceScale = priceScale;\n        this._private__valueProvider = valueProvider;\n    }\n    _internal__updateRendererData(axisRendererData, paneRendererData, commonRendererData) {\n        axisRendererData._internal_visible = false;\n        if (this._private__source._internal_options().mode === 2 /* CrosshairMode.Hidden */) {\n            return;\n        }\n        const options = this._private__source._internal_options().horzLine;\n        if (!options.labelVisible) {\n            return;\n        }\n        const firstValue = this._private__priceScale._internal_firstValue();\n        if (!this._private__source._internal_visible() || this._private__priceScale._internal_isEmpty() || (firstValue === null)) {\n            return;\n        }\n        const colors = this._private__priceScale._internal_colorParser()._internal_generateContrastColors(options.labelBackgroundColor);\n        commonRendererData._internal_background = colors._internal_background;\n        axisRendererData._internal_color = colors._internal_foreground;\n        const additionalPadding = 2 / 12 * this._private__priceScale._internal_fontSize();\n        commonRendererData._internal_additionalPaddingTop = additionalPadding;\n        commonRendererData._internal_additionalPaddingBottom = additionalPadding;\n        const value = this._private__valueProvider(this._private__priceScale);\n        commonRendererData._internal_coordinate = value._internal_coordinate;\n        axisRendererData._internal_text = this._private__priceScale._internal_formatPrice(value._internal_price, firstValue);\n        axisRendererData._internal_visible = true;\n    }\n}\n\nconst optimizationReplacementRe = /[1-9]/g;\nconst radius$1 = 2;\nclass TimeAxisViewRenderer {\n    constructor() {\n        this._private__data = null;\n    }\n    _internal_setData(data) {\n        this._private__data = data;\n    }\n    _internal_draw(target, rendererOptions) {\n        if (this._private__data === null || this._private__data._internal_visible === false || this._private__data._internal_text.length === 0) {\n            return;\n        }\n        const textWidth = target.useMediaCoordinateSpace(({ context: ctx }) => {\n            ctx.font = rendererOptions._internal_font;\n            return Math.round(rendererOptions._internal_widthCache._internal_measureText(ctx, ensureNotNull(this._private__data)._internal_text, optimizationReplacementRe));\n        });\n        if (textWidth <= 0) {\n            return;\n        }\n        const horzMargin = rendererOptions._internal_paddingHorizontal;\n        const labelWidth = textWidth + 2 * horzMargin;\n        const labelWidthHalf = labelWidth / 2;\n        const timeScaleWidth = this._private__data._internal_width;\n        let coordinate = this._private__data._internal_coordinate;\n        let x1 = Math.floor(coordinate - labelWidthHalf) + 0.5;\n        if (x1 < 0) {\n            coordinate = coordinate + Math.abs(0 - x1);\n            x1 = Math.floor(coordinate - labelWidthHalf) + 0.5;\n        }\n        else if (x1 + labelWidth > timeScaleWidth) {\n            coordinate = coordinate - Math.abs(timeScaleWidth - (x1 + labelWidth));\n            x1 = Math.floor(coordinate - labelWidthHalf) + 0.5;\n        }\n        const x2 = x1 + labelWidth;\n        const y1 = 0;\n        const y2 = Math.ceil(y1 +\n            rendererOptions._internal_borderSize +\n            rendererOptions._internal_tickLength +\n            rendererOptions._internal_paddingTop +\n            rendererOptions._internal_fontSize +\n            rendererOptions._internal_paddingBottom);\n        target.useBitmapCoordinateSpace(({ context: ctx, horizontalPixelRatio, verticalPixelRatio }) => {\n            const data = ensureNotNull(this._private__data);\n            ctx.fillStyle = data._internal_background;\n            const x1scaled = Math.round(x1 * horizontalPixelRatio);\n            const y1scaled = Math.round(y1 * verticalPixelRatio);\n            const x2scaled = Math.round(x2 * horizontalPixelRatio);\n            const y2scaled = Math.round(y2 * verticalPixelRatio);\n            const radiusScaled = Math.round(radius$1 * horizontalPixelRatio);\n            ctx.beginPath();\n            ctx.moveTo(x1scaled, y1scaled);\n            ctx.lineTo(x1scaled, y2scaled - radiusScaled);\n            ctx.arcTo(x1scaled, y2scaled, x1scaled + radiusScaled, y2scaled, radiusScaled);\n            ctx.lineTo(x2scaled - radiusScaled, y2scaled);\n            ctx.arcTo(x2scaled, y2scaled, x2scaled, y2scaled - radiusScaled, radiusScaled);\n            ctx.lineTo(x2scaled, y1scaled);\n            ctx.fill();\n            if (data._internal_tickVisible) {\n                const tickX = Math.round(data._internal_coordinate * horizontalPixelRatio);\n                const tickTop = y1scaled;\n                const tickBottom = Math.round((tickTop + rendererOptions._internal_tickLength) * verticalPixelRatio);\n                ctx.fillStyle = data._internal_color;\n                const tickWidth = Math.max(1, Math.floor(horizontalPixelRatio));\n                const tickOffset = Math.floor(horizontalPixelRatio * 0.5);\n                ctx.fillRect(tickX - tickOffset, tickTop, tickWidth, tickBottom - tickTop);\n            }\n        });\n        target.useMediaCoordinateSpace(({ context: ctx }) => {\n            const data = ensureNotNull(this._private__data);\n            const yText = y1 +\n                rendererOptions._internal_borderSize +\n                rendererOptions._internal_tickLength +\n                rendererOptions._internal_paddingTop +\n                rendererOptions._internal_fontSize / 2;\n            ctx.font = rendererOptions._internal_font;\n            ctx.textAlign = 'left';\n            ctx.textBaseline = 'middle';\n            ctx.fillStyle = data._internal_color;\n            const textYCorrection = rendererOptions._internal_widthCache._internal_yMidCorrection(ctx, 'Apr0');\n            ctx.translate(x1 + horzMargin, yText + textYCorrection);\n            ctx.fillText(data._internal_text, 0, 0);\n        });\n    }\n}\n\nclass CrosshairTimeAxisView {\n    constructor(crosshair, model, valueProvider) {\n        this._private__invalidated = true;\n        this._private__renderer = new TimeAxisViewRenderer();\n        this._private__rendererData = {\n            _internal_visible: false,\n            _internal_background: '#4c525e',\n            _internal_color: 'white',\n            _internal_text: '',\n            _internal_width: 0,\n            _internal_coordinate: NaN,\n            _internal_tickVisible: true,\n        };\n        this._private__crosshair = crosshair;\n        this._private__model = model;\n        this._private__valueProvider = valueProvider;\n    }\n    _internal_update() {\n        this._private__invalidated = true;\n    }\n    _internal_renderer() {\n        if (this._private__invalidated) {\n            this._private__updateImpl();\n            this._private__invalidated = false;\n        }\n        this._private__renderer._internal_setData(this._private__rendererData);\n        return this._private__renderer;\n    }\n    _private__updateImpl() {\n        const data = this._private__rendererData;\n        data._internal_visible = false;\n        if (this._private__crosshair._internal_options().mode === 2 /* CrosshairMode.Hidden */) {\n            return;\n        }\n        const options = this._private__crosshair._internal_options().vertLine;\n        if (!options.labelVisible) {\n            return;\n        }\n        const timeScale = this._private__model._internal_timeScale();\n        if (timeScale._internal_isEmpty()) {\n            return;\n        }\n        data._internal_width = timeScale._internal_width();\n        const value = this._private__valueProvider();\n        if (value === null) {\n            return;\n        }\n        data._internal_coordinate = value._internal_coordinate;\n        const currentTime = timeScale._internal_indexToTimeScalePoint(this._private__crosshair._internal_appliedIndex());\n        data._internal_text = timeScale._internal_formatDateTime(ensureNotNull(currentTime));\n        data._internal_visible = true;\n        const colors = this._private__model._internal_colorParser()._internal_generateContrastColors(options.labelBackgroundColor);\n        data._internal_background = colors._internal_background;\n        data._internal_color = colors._internal_foreground;\n        data._internal_tickVisible = timeScale._internal_options().ticksVisible;\n    }\n}\n\nclass DataSource {\n    constructor() {\n        this._internal__priceScale = null;\n        this._private__zorder = 0;\n    }\n    _internal_zorder() {\n        return this._private__zorder;\n    }\n    _internal_setZorder(zorder) {\n        this._private__zorder = zorder;\n    }\n    _internal_priceScale() {\n        return this._internal__priceScale;\n    }\n    _internal_setPriceScale(priceScale) {\n        this._internal__priceScale = priceScale;\n    }\n    _internal_labelPaneViews(pane) {\n        return [];\n    }\n    _internal_timeAxisViews() {\n        return [];\n    }\n    _internal_visible() {\n        return true;\n    }\n}\n\n/**\n * Represents the crosshair mode.\n */\nvar CrosshairMode;\n(function (CrosshairMode) {\n    /**\n     * This mode allows crosshair to move freely on the chart.\n     */\n    CrosshairMode[CrosshairMode[\"Normal\"] = 0] = \"Normal\";\n    /**\n     * This mode sticks crosshair's horizontal line to the price value of a single-value series or to the close price of OHLC-based series.\n     */\n    CrosshairMode[CrosshairMode[\"Magnet\"] = 1] = \"Magnet\";\n    /**\n     * This mode disables rendering of the crosshair.\n     */\n    CrosshairMode[CrosshairMode[\"Hidden\"] = 2] = \"Hidden\";\n    /**\n     * This mode sticks crosshair's horizontal line to the price value of a single-value series or to the open/high/low/close price of OHLC-based series.\n     */\n    CrosshairMode[CrosshairMode[\"MagnetOHLC\"] = 3] = \"MagnetOHLC\";\n})(CrosshairMode || (CrosshairMode = {}));\nclass Crosshair extends DataSource {\n    constructor(model, options) {\n        super();\n        this._private__pane = null;\n        this._private__price = NaN;\n        this._private__index = 0;\n        this._private__visible = false; // initially the crosshair should not be visible, until the user interacts.\n        this._private__priceAxisViews = new Map();\n        this._private__subscribed = false;\n        this._private__crosshairPaneViewCache = new WeakMap();\n        this._private__markersPaneViewCache = new WeakMap();\n        this._private__x = NaN;\n        this._private__y = NaN;\n        this._private__originX = NaN;\n        this._private__originY = NaN;\n        this._private__model = model;\n        this._private__options = options;\n        const valuePriceProvider = (rawPriceProvider, rawCoordinateProvider) => {\n            return (priceScale) => {\n                const coordinate = rawCoordinateProvider();\n                const rawPrice = rawPriceProvider();\n                if (priceScale === ensureNotNull(this._private__pane)._internal_defaultPriceScale()) {\n                    // price must be defined\n                    return { _internal_price: rawPrice, _internal_coordinate: coordinate };\n                }\n                else {\n                    // always convert from coordinate\n                    const firstValue = ensureNotNull(priceScale._internal_firstValue());\n                    const price = priceScale._internal_coordinateToPrice(coordinate, firstValue);\n                    return { _internal_price: price, _internal_coordinate: coordinate };\n                }\n            };\n        };\n        const valueTimeProvider = (rawIndexProvider, rawCoordinateProvider) => {\n            return () => {\n                const time = this._private__model._internal_timeScale()._internal_indexToTime(rawIndexProvider());\n                const coordinate = rawCoordinateProvider();\n                if (!time || !Number.isFinite(coordinate)) {\n                    return null;\n                }\n                return {\n                    _internal_time: time,\n                    _internal_coordinate: coordinate,\n                };\n            };\n        };\n        // for current position always return both price and coordinate\n        this._private__currentPosPriceProvider = valuePriceProvider(() => this._private__price, () => this._private__y);\n        const currentPosTimeProvider = valueTimeProvider(() => this._private__index, () => this._internal_appliedX());\n        this._private__timeAxisView = new CrosshairTimeAxisView(this, model, currentPosTimeProvider);\n    }\n    _internal_options() {\n        return this._private__options;\n    }\n    _internal_saveOriginCoord(x, y) {\n        this._private__originX = x;\n        this._private__originY = y;\n    }\n    _internal_clearOriginCoord() {\n        this._private__originX = NaN;\n        this._private__originY = NaN;\n    }\n    _internal_originCoordX() {\n        return this._private__originX;\n    }\n    _internal_originCoordY() {\n        return this._private__originY;\n    }\n    _internal_setPosition(index, price, pane) {\n        if (!this._private__subscribed) {\n            this._private__subscribed = true;\n        }\n        this._private__visible = true;\n        this._private__tryToUpdateViews(index, price, pane);\n    }\n    _internal_appliedIndex() {\n        return this._private__index;\n    }\n    _internal_appliedX() {\n        return this._private__x;\n    }\n    _internal_appliedY() {\n        return this._private__y;\n    }\n    _internal_visible() {\n        return this._private__visible;\n    }\n    _internal_clearPosition() {\n        this._private__visible = false;\n        this._private__setIndexToLastSeriesBarIndex();\n        this._private__price = NaN;\n        this._private__x = NaN;\n        this._private__y = NaN;\n        this._private__pane = null;\n        this._internal_clearOriginCoord();\n        this._internal_updateAllViews();\n    }\n    _internal_paneViews(pane) {\n        let crosshairPaneView = this._private__crosshairPaneViewCache.get(pane);\n        if (!crosshairPaneView) {\n            crosshairPaneView = new CrosshairPaneView(this, pane);\n            this._private__crosshairPaneViewCache.set(pane, crosshairPaneView);\n        }\n        let markersPaneView = this._private__markersPaneViewCache.get(pane);\n        if (!markersPaneView) {\n            markersPaneView = new CrosshairMarksPaneView(this._private__model, this, pane);\n            this._private__markersPaneViewCache.set(pane, markersPaneView);\n        }\n        return [crosshairPaneView, markersPaneView];\n    }\n    _internal_horzLineVisible(pane) {\n        return pane === this._private__pane && this._private__options.horzLine.visible;\n    }\n    _internal_vertLineVisible() {\n        return this._private__options.vertLine.visible;\n    }\n    _internal_priceAxisViews(pane, priceScale) {\n        if (!this._private__visible || this._private__pane !== pane) {\n            this._private__priceAxisViews.clear();\n        }\n        const views = [];\n        if (this._private__pane === pane) {\n            views.push(this._private__createPriceAxisViewOnDemand(this._private__priceAxisViews, priceScale, this._private__currentPosPriceProvider));\n        }\n        return views;\n    }\n    _internal_timeAxisViews() {\n        return this._private__visible ? [this._private__timeAxisView] : [];\n    }\n    _internal_pane() {\n        return this._private__pane;\n    }\n    _internal_updateAllViews() {\n        this._private__model._internal_panes().forEach((pane) => {\n            this._private__crosshairPaneViewCache.get(pane)?._internal_update();\n            this._private__markersPaneViewCache.get(pane)?._internal_update();\n        });\n        this._private__priceAxisViews.forEach((value) => value._internal_update());\n        this._private__timeAxisView._internal_update();\n    }\n    _private__priceScaleByPane(pane) {\n        if (pane && !pane._internal_defaultPriceScale()._internal_isEmpty()) {\n            return pane._internal_defaultPriceScale();\n        }\n        return null;\n    }\n    _private__tryToUpdateViews(index, price, pane) {\n        if (this._private__tryToUpdateData(index, price, pane)) {\n            this._internal_updateAllViews();\n        }\n    }\n    _private__tryToUpdateData(newIndex, newPrice, newPane) {\n        const oldX = this._private__x;\n        const oldY = this._private__y;\n        const oldPrice = this._private__price;\n        const oldIndex = this._private__index;\n        const oldPane = this._private__pane;\n        const priceScale = this._private__priceScaleByPane(newPane);\n        this._private__index = newIndex;\n        this._private__x = isNaN(newIndex) ? NaN : this._private__model._internal_timeScale()._internal_indexToCoordinate(newIndex);\n        this._private__pane = newPane;\n        const firstValue = priceScale !== null ? priceScale._internal_firstValue() : null;\n        if (priceScale !== null && firstValue !== null) {\n            this._private__price = newPrice;\n            this._private__y = priceScale._internal_priceToCoordinate(newPrice, firstValue);\n        }\n        else {\n            this._private__price = NaN;\n            this._private__y = NaN;\n        }\n        return (oldX !== this._private__x || oldY !== this._private__y || oldIndex !== this._private__index ||\n            oldPrice !== this._private__price || oldPane !== this._private__pane);\n    }\n    _private__setIndexToLastSeriesBarIndex() {\n        const lastIndexes = this._private__model._internal_serieses()\n            .map((s) => s._internal_bars()._internal_lastIndex())\n            .filter(notNull);\n        const lastBarIndex = (lastIndexes.length === 0) ? null : Math.max(...lastIndexes);\n        this._private__index = lastBarIndex !== null ? lastBarIndex : NaN;\n    }\n    _private__createPriceAxisViewOnDemand(map, priceScale, valueProvider) {\n        let view = map.get(priceScale);\n        if (view === undefined) {\n            view = new CrosshairPriceAxisView(this, priceScale, valueProvider);\n            map.set(priceScale, view);\n        }\n        return view;\n    }\n}\n\nfunction isDefaultPriceScale(priceScaleId) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n    return priceScaleId === \"left\" /* DefaultPriceScaleId.Left */ || priceScaleId === \"right\" /* DefaultPriceScaleId.Right */;\n}\n\nfunction mergePaneInvalidation(beforeValue, newValue) {\n    if (beforeValue === undefined) {\n        return newValue;\n    }\n    const level = Math.max(beforeValue._internal_level, newValue._internal_level);\n    const autoScale = beforeValue._internal_autoScale || newValue._internal_autoScale;\n    return { _internal_level: level, _internal_autoScale: autoScale };\n}\nclass InvalidateMask {\n    constructor(globalLevel) {\n        this._private__invalidatedPanes = new Map();\n        this._private__timeScaleInvalidations = [];\n        this._private__globalLevel = globalLevel;\n    }\n    _internal_invalidatePane(paneIndex, invalidation) {\n        const prevValue = this._private__invalidatedPanes.get(paneIndex);\n        const newValue = mergePaneInvalidation(prevValue, invalidation);\n        this._private__invalidatedPanes.set(paneIndex, newValue);\n    }\n    _internal_fullInvalidation() {\n        return this._private__globalLevel;\n    }\n    _internal_invalidateForPane(paneIndex) {\n        const paneInvalidation = this._private__invalidatedPanes.get(paneIndex);\n        if (paneInvalidation === undefined) {\n            return {\n                _internal_level: this._private__globalLevel,\n            };\n        }\n        return {\n            _internal_level: Math.max(this._private__globalLevel, paneInvalidation._internal_level),\n            _internal_autoScale: paneInvalidation._internal_autoScale,\n        };\n    }\n    _internal_setFitContent() {\n        this._internal_stopTimeScaleAnimation();\n        // modifies both bar spacing and right offset\n        this._private__timeScaleInvalidations = [{ _internal_type: 0 /* TimeScaleInvalidationType.FitContent */ }];\n    }\n    _internal_applyRange(range) {\n        this._internal_stopTimeScaleAnimation();\n        // modifies both bar spacing and right offset\n        this._private__timeScaleInvalidations = [{ _internal_type: 1 /* TimeScaleInvalidationType.ApplyRange */, _internal_value: range }];\n    }\n    _internal_setTimeScaleAnimation(animation) {\n        this._private__removeTimeScaleAnimation();\n        this._private__timeScaleInvalidations.push({ _internal_type: 5 /* TimeScaleInvalidationType.Animation */, _internal_value: animation });\n    }\n    _internal_stopTimeScaleAnimation() {\n        this._private__removeTimeScaleAnimation();\n        this._private__timeScaleInvalidations.push({ _internal_type: 6 /* TimeScaleInvalidationType.StopAnimation */ });\n    }\n    _internal_resetTimeScale() {\n        this._internal_stopTimeScaleAnimation();\n        // modifies both bar spacing and right offset\n        this._private__timeScaleInvalidations = [{ _internal_type: 4 /* TimeScaleInvalidationType.Reset */ }];\n    }\n    _internal_setBarSpacing(barSpacing) {\n        this._internal_stopTimeScaleAnimation();\n        this._private__timeScaleInvalidations.push({ _internal_type: 2 /* TimeScaleInvalidationType.ApplyBarSpacing */, _internal_value: barSpacing });\n    }\n    _internal_setRightOffset(offset) {\n        this._internal_stopTimeScaleAnimation();\n        this._private__timeScaleInvalidations.push({ _internal_type: 3 /* TimeScaleInvalidationType.ApplyRightOffset */, _internal_value: offset });\n    }\n    _internal_timeScaleInvalidations() {\n        return this._private__timeScaleInvalidations;\n    }\n    _internal_merge(other) {\n        for (const tsInvalidation of other._private__timeScaleInvalidations) {\n            this._private__applyTimeScaleInvalidation(tsInvalidation);\n        }\n        this._private__globalLevel = Math.max(this._private__globalLevel, other._private__globalLevel);\n        other._private__invalidatedPanes.forEach((invalidation, index) => {\n            this._internal_invalidatePane(index, invalidation);\n        });\n    }\n    static _internal_light() {\n        return new InvalidateMask(2 /* InvalidationLevel.Light */);\n    }\n    static _internal_full() {\n        return new InvalidateMask(3 /* InvalidationLevel.Full */);\n    }\n    _private__applyTimeScaleInvalidation(invalidation) {\n        switch (invalidation._internal_type) {\n            case 0 /* TimeScaleInvalidationType.FitContent */:\n                this._internal_setFitContent();\n                break;\n            case 1 /* TimeScaleInvalidationType.ApplyRange */:\n                this._internal_applyRange(invalidation._internal_value);\n                break;\n            case 2 /* TimeScaleInvalidationType.ApplyBarSpacing */:\n                this._internal_setBarSpacing(invalidation._internal_value);\n                break;\n            case 3 /* TimeScaleInvalidationType.ApplyRightOffset */:\n                this._internal_setRightOffset(invalidation._internal_value);\n                break;\n            case 4 /* TimeScaleInvalidationType.Reset */:\n                this._internal_resetTimeScale();\n                break;\n            case 5 /* TimeScaleInvalidationType.Animation */:\n                this._internal_setTimeScaleAnimation(invalidation._internal_value);\n                break;\n            case 6 /* TimeScaleInvalidationType.StopAnimation */:\n                this._private__removeTimeScaleAnimation();\n        }\n    }\n    _private__removeTimeScaleAnimation() {\n        const index = this._private__timeScaleInvalidations.findIndex((inv) => inv._internal_type === 5 /* TimeScaleInvalidationType.Animation */);\n        if (index !== -1) {\n            this._private__timeScaleInvalidations.splice(index, 1);\n        }\n    }\n}\n\nclass FormatterBase {\n    formatTickmarks(prices) {\n        return prices.map((price) => this.format(price));\n    }\n}\n\nconst formatterOptions = {\n    _internal_decimalSign: '.'};\n/**\n * @param value - The number of convert.\n * @param length - The length. Must be between 0 and 16 inclusive.\n */\nfunction numberToStringWithLeadingZero(value, length) {\n    if (!isNumber(value)) {\n        return 'n/a';\n    }\n    if (!isInteger(length)) {\n        throw new TypeError('invalid length');\n    }\n    if (length < 0 || length > 16) {\n        throw new TypeError('invalid length');\n    }\n    if (length === 0) {\n        return value.toString();\n    }\n    const dummyString = '0000000000000000';\n    return (dummyString + value.toString()).slice(-length);\n}\nclass PriceFormatter extends FormatterBase {\n    constructor(priceScale, minMove) {\n        super();\n        if (!minMove) {\n            minMove = 1;\n        }\n        if (!isNumber(priceScale) || !isInteger(priceScale)) {\n            priceScale = 100;\n        }\n        if (priceScale < 0) {\n            throw new TypeError('invalid base');\n        }\n        this._private__priceScale = priceScale;\n        this._private__minMove = minMove;\n        this._private__calculateDecimal();\n    }\n    format(price) {\n        // \\u2212 is unicode's minus sign https://www.fileformat.info/info/unicode/char/2212/index.htm\n        // we should use it because it has the same width as plus sign +\n        const sign = price < 0 ? '\\u2212' : '';\n        price = Math.abs(price);\n        return sign + this._private__formatAsDecimal(price);\n    }\n    _private__calculateDecimal() {\n        // check if this._base is power of 10\n        // for double fractional _fractionalLength if for the main fractional only\n        this._internal__fractionalLength = 0;\n        if (this._private__priceScale > 0 && this._private__minMove > 0) {\n            let base = this._private__priceScale;\n            while (base > 1) {\n                base /= 10;\n                this._internal__fractionalLength++;\n            }\n        }\n    }\n    _private__formatAsDecimal(price) {\n        const base = this._private__priceScale / this._private__minMove;\n        let intPart = Math.floor(price);\n        let fracString = '';\n        const fracLength = this._internal__fractionalLength !== undefined ? this._internal__fractionalLength : NaN;\n        if (base > 1) {\n            let fracPart = +(Math.round(price * base) - intPart * base).toFixed(this._internal__fractionalLength);\n            if (fracPart >= base) {\n                fracPart -= base;\n                intPart += 1;\n            }\n            fracString = formatterOptions._internal_decimalSign + numberToStringWithLeadingZero(+fracPart.toFixed(this._internal__fractionalLength) * this._private__minMove, fracLength);\n        }\n        else {\n            // should round int part to min move\n            intPart = Math.round(intPart * base) / base;\n            // if min move > 1, fractional part is always = 0\n            if (fracLength > 0) {\n                fracString = formatterOptions._internal_decimalSign + numberToStringWithLeadingZero(0, fracLength);\n            }\n        }\n        return intPart.toFixed(0) + fracString;\n    }\n}\n\nclass PercentageFormatter extends PriceFormatter {\n    constructor(priceScale = 100) {\n        super(priceScale);\n    }\n    format(price) {\n        return `${super.format(price)}%`;\n    }\n}\n\nclass VolumeFormatter extends FormatterBase {\n    constructor(precision) {\n        super();\n        this._private__precision = precision;\n    }\n    format(vol) {\n        let sign = '';\n        if (vol < 0) {\n            sign = '-';\n            vol = -vol;\n        }\n        if (vol < 995) {\n            return sign + this._private__formatNumber(vol);\n        }\n        else if (vol < 999995) {\n            return sign + this._private__formatNumber(vol / 1000) + 'K';\n        }\n        else if (vol < 999999995) {\n            vol = 1000 * Math.round(vol / 1000);\n            return sign + this._private__formatNumber(vol / 1000000) + 'M';\n        }\n        else {\n            vol = 1000000 * Math.round(vol / 1000000);\n            return sign + this._private__formatNumber(vol / 1000000000) + 'B';\n        }\n    }\n    _private__formatNumber(value) {\n        let res;\n        const priceScale = Math.pow(10, this._private__precision);\n        value = Math.round(value * priceScale) / priceScale;\n        if (value >= 1e-15 && value < 1) {\n            res = value.toFixed(this._private__precision).replace(/\\.?0+$/, ''); // regex removes trailing zeroes\n        }\n        else {\n            res = String(value);\n        }\n        return res.replace(/(\\.[1-9]*)0+$/, (e, p1) => p1);\n    }\n}\n\nconst defaultReplacementRe = /[2-9]/g;\nclass TextWidthCache {\n    constructor(size = 50) {\n        this._private__actualSize = 0;\n        this._private__usageTick = 1;\n        this._private__oldestTick = 1;\n        this._private__tick2Labels = {};\n        this._private__cache = new Map();\n        this._private__maxSize = size;\n    }\n    _internal_reset() {\n        this._private__actualSize = 0;\n        this._private__cache.clear();\n        this._private__usageTick = 1;\n        this._private__oldestTick = 1;\n        this._private__tick2Labels = {};\n    }\n    _internal_measureText(ctx, text, optimizationReplacementRe) {\n        return this._private__getMetrics(ctx, text, optimizationReplacementRe).width;\n    }\n    _internal_yMidCorrection(ctx, text, optimizationReplacementRe) {\n        const metrics = this._private__getMetrics(ctx, text, optimizationReplacementRe);\n        // if actualBoundingBoxAscent/actualBoundingBoxDescent are not supported we use 0 as a fallback\n        return ((metrics.actualBoundingBoxAscent || 0) - (metrics.actualBoundingBoxDescent || 0)) / 2;\n    }\n    _private__getMetrics(ctx, text, optimizationReplacementRe) {\n        const re = optimizationReplacementRe || defaultReplacementRe;\n        const cacheString = String(text).replace(re, '0');\n        if (this._private__cache.has(cacheString)) {\n            return ensureDefined(this._private__cache.get(cacheString))._internal_metrics;\n        }\n        if (this._private__actualSize === this._private__maxSize) {\n            const oldestValue = this._private__tick2Labels[this._private__oldestTick];\n            delete this._private__tick2Labels[this._private__oldestTick];\n            this._private__cache.delete(oldestValue);\n            this._private__oldestTick++;\n            this._private__actualSize--;\n        }\n        ctx.save();\n        ctx.textBaseline = 'middle';\n        const metrics = ctx.measureText(cacheString);\n        ctx.restore();\n        if (metrics.width === 0 && !!text.length) {\n            // measureText can return 0 in FF depending on a canvas size, don't cache it\n            return metrics;\n        }\n        this._private__cache.set(cacheString, { _internal_metrics: metrics, _internal_tick: this._private__usageTick });\n        this._private__tick2Labels[this._private__usageTick] = cacheString;\n        this._private__actualSize++;\n        this._private__usageTick++;\n        return metrics;\n    }\n}\n\nclass PanePriceAxisViewRenderer {\n    constructor(textWidthCache) {\n        this._private__priceAxisViewRenderer = null;\n        this._private__rendererOptions = null;\n        this._private__align = 'right';\n        this._private__textWidthCache = textWidthCache;\n    }\n    _internal_setParams(priceAxisViewRenderer, rendererOptions, align) {\n        this._private__priceAxisViewRenderer = priceAxisViewRenderer;\n        this._private__rendererOptions = rendererOptions;\n        this._private__align = align;\n    }\n    _internal_draw(target) {\n        if (this._private__rendererOptions === null || this._private__priceAxisViewRenderer === null) {\n            return;\n        }\n        this._private__priceAxisViewRenderer._internal_draw(target, this._private__rendererOptions, this._private__textWidthCache, this._private__align);\n    }\n}\nclass PanePriceAxisView {\n    constructor(priceAxisView, dataSource, chartModel) {\n        this._private__priceAxisView = priceAxisView;\n        this._private__textWidthCache = new TextWidthCache(50); // when should we clear cache?\n        this._private__dataSource = dataSource;\n        this._private__chartModel = chartModel;\n        this._private__fontSize = -1;\n        this._private__renderer = new PanePriceAxisViewRenderer(this._private__textWidthCache);\n    }\n    _internal_renderer() {\n        const pane = this._private__chartModel._internal_paneForSource(this._private__dataSource);\n        if (pane === null) {\n            return null;\n        }\n        // this price scale will be used to find label placement only (left, right, none)\n        const priceScale = pane._internal_isOverlay(this._private__dataSource) ? pane._internal_defaultVisiblePriceScale() : this._private__dataSource._internal_priceScale();\n        if (priceScale === null) {\n            return null;\n        }\n        const position = pane._internal_priceScalePosition(priceScale);\n        if (position === 'overlay') {\n            return null;\n        }\n        const options = this._private__chartModel._internal_priceAxisRendererOptions();\n        if (options._internal_fontSize !== this._private__fontSize) {\n            this._private__fontSize = options._internal_fontSize;\n            this._private__textWidthCache._internal_reset();\n        }\n        this._private__renderer._internal_setParams(this._private__priceAxisView._internal_paneRenderer(), options, position);\n        return this._private__renderer;\n    }\n}\n\nclass HorizontalLineRenderer extends BitmapCoordinatesPaneRenderer {\n    constructor() {\n        super(...arguments);\n        this._private__data = null;\n    }\n    _internal_setData(data) {\n        this._private__data = data;\n    }\n    _internal_hitTest(x, y) {\n        if (!this._private__data?._internal_visible) {\n            return null;\n        }\n        const { _internal_y: itemY, _internal_lineWidth: lineWidth, _internal_externalId: externalId } = this._private__data;\n        // add a fixed area threshold around line (Y + width) for hit test\n        if (y >= itemY - lineWidth - 7 /* Constants.HitTestThreshold */ && y <= itemY + lineWidth + 7 /* Constants.HitTestThreshold */) {\n            return {\n                _internal_hitTestData: this._private__data,\n                _internal_externalId: externalId,\n            };\n        }\n        return null;\n    }\n    _internal__drawImpl({ context: ctx, bitmapSize, horizontalPixelRatio, verticalPixelRatio }) {\n        if (this._private__data === null) {\n            return;\n        }\n        if (this._private__data._internal_visible === false) {\n            return;\n        }\n        const y = Math.round(this._private__data._internal_y * verticalPixelRatio);\n        if (y < 0 || y > bitmapSize.height) {\n            return;\n        }\n        ctx.lineCap = 'butt';\n        ctx.strokeStyle = this._private__data._internal_color;\n        ctx.lineWidth = Math.floor(this._private__data._internal_lineWidth * horizontalPixelRatio);\n        setLineStyle(ctx, this._private__data._internal_lineStyle);\n        drawHorizontalLine(ctx, y, 0, bitmapSize.width);\n    }\n}\n\nclass SeriesHorizontalLinePaneView {\n    constructor(series) {\n        this._internal__lineRendererData = {\n            _internal_y: 0,\n            _internal_color: 'rgba(0, 0, 0, 0)',\n            _internal_lineWidth: 1,\n            _internal_lineStyle: 0 /* LineStyle.Solid */,\n            _internal_visible: false,\n        };\n        this._internal__lineRenderer = new HorizontalLineRenderer();\n        this._private__invalidated = true;\n        this._internal__series = series;\n        this._internal__model = series._internal_model();\n        this._internal__lineRenderer._internal_setData(this._internal__lineRendererData);\n    }\n    _internal_update() {\n        this._private__invalidated = true;\n    }\n    _internal_renderer() {\n        if (!this._internal__series._internal_visible()) {\n            return null;\n        }\n        if (this._private__invalidated) {\n            this._internal__updateImpl();\n            this._private__invalidated = false;\n        }\n        return this._internal__lineRenderer;\n    }\n}\n\nclass SeriesHorizontalBaseLinePaneView extends SeriesHorizontalLinePaneView {\n    // eslint-disable-next-line no-useless-constructor\n    constructor(series) {\n        super(series);\n    }\n    _internal__updateImpl() {\n        this._internal__lineRendererData._internal_visible = false;\n        const priceScale = this._internal__series._internal_priceScale();\n        const mode = priceScale._internal_mode()._internal_mode;\n        if (mode !== 2 /* PriceScaleMode.Percentage */ && mode !== 3 /* PriceScaleMode.IndexedTo100 */) {\n            return;\n        }\n        const seriesOptions = this._internal__series._internal_options();\n        if (!seriesOptions.baseLineVisible || !this._internal__series._internal_visible()) {\n            return;\n        }\n        const firstValue = this._internal__series._internal_firstValue();\n        if (firstValue === null) {\n            return;\n        }\n        this._internal__lineRendererData._internal_visible = true;\n        this._internal__lineRendererData._internal_y = priceScale._internal_priceToCoordinate(firstValue._internal_value, firstValue._internal_value);\n        this._internal__lineRendererData._internal_color = seriesOptions.baseLineColor;\n        this._internal__lineRendererData._internal_lineWidth = seriesOptions.baseLineWidth;\n        this._internal__lineRendererData._internal_lineStyle = seriesOptions.baseLineStyle;\n    }\n}\n\nclass SeriesLastPriceAnimationRenderer extends BitmapCoordinatesPaneRenderer {\n    constructor() {\n        super(...arguments);\n        this._private__data = null;\n    }\n    _internal_setData(data) {\n        this._private__data = data;\n    }\n    _internal_data() {\n        return this._private__data;\n    }\n    _internal__drawImpl({ context: ctx, horizontalPixelRatio, verticalPixelRatio }) {\n        const data = this._private__data;\n        if (data === null) {\n            return;\n        }\n        const tickWidth = Math.max(1, Math.floor(horizontalPixelRatio));\n        const correction = (tickWidth % 2) / 2;\n        const centerX = Math.round(data._internal_center.x * horizontalPixelRatio) + correction; // correct x coordinate only\n        const centerY = data._internal_center.y * verticalPixelRatio;\n        ctx.fillStyle = data._internal_seriesLineColor;\n        ctx.beginPath();\n        // TODO: it is better to have different horizontal and vertical radii\n        const centerPointRadius = Math.max(2, data._internal_seriesLineWidth * 1.5) * horizontalPixelRatio;\n        ctx.arc(centerX, centerY, centerPointRadius, 0, 2 * Math.PI, false);\n        ctx.fill();\n        ctx.fillStyle = data._internal_fillColor;\n        ctx.beginPath();\n        ctx.arc(centerX, centerY, data._internal_radius * horizontalPixelRatio, 0, 2 * Math.PI, false);\n        ctx.fill();\n        ctx.lineWidth = tickWidth;\n        ctx.strokeStyle = data._internal_strokeColor;\n        ctx.beginPath();\n        ctx.arc(centerX, centerY, data._internal_radius * horizontalPixelRatio + tickWidth / 2, 0, 2 * Math.PI, false);\n        ctx.stroke();\n    }\n}\n\nconst animationStagesData = [\n    {\n        _internal_start: 0,\n        _internal_end: 0.25 /* Constants.Stage1Period */,\n        _internal_startRadius: 4 /* Constants.Stage1StartCircleRadius */,\n        _internal_endRadius: 10 /* Constants.Stage1EndCircleRadius */,\n        _internal_startFillAlpha: 0.25 /* Constants.Stage1StartFillAlpha */,\n        _internal_endFillAlpha: 0 /* Constants.Stage1EndFillAlpha */,\n        _internal_startStrokeAlpha: 0.4 /* Constants.Stage1StartStrokeAlpha */,\n        _internal_endStrokeAlpha: 0.8 /* Constants.Stage1EndStrokeAlpha */,\n    },\n    {\n        _internal_start: 0.25 /* Constants.Stage1Period */,\n        _internal_end: 0.25 /* Constants.Stage1Period */ + 0.275 /* Constants.Stage2Period */,\n        _internal_startRadius: 10 /* Constants.Stage2StartCircleRadius */,\n        _internal_endRadius: 14 /* Constants.Stage2EndCircleRadius */,\n        _internal_startFillAlpha: 0 /* Constants.Stage2StartFillAlpha */,\n        _internal_endFillAlpha: 0 /* Constants.Stage2EndFillAlpha */,\n        _internal_startStrokeAlpha: 0.8 /* Constants.Stage2StartStrokeAlpha */,\n        _internal_endStrokeAlpha: 0 /* Constants.Stage2EndStrokeAlpha */,\n    },\n    {\n        _internal_start: 0.25 /* Constants.Stage1Period */ + 0.275 /* Constants.Stage2Period */,\n        _internal_end: 0.25 /* Constants.Stage1Period */ + 0.275 /* Constants.Stage2Period */ + 0.475 /* Constants.Stage3Period */,\n        _internal_startRadius: 14 /* Constants.Stage3StartCircleRadius */,\n        _internal_endRadius: 14 /* Constants.Stage3EndCircleRadius */,\n        _internal_startFillAlpha: 0 /* Constants.Stage3StartFillAlpha */,\n        _internal_endFillAlpha: 0 /* Constants.Stage3EndFillAlpha */,\n        _internal_startStrokeAlpha: 0 /* Constants.Stage3StartStrokeAlpha */,\n        _internal_endStrokeAlpha: 0 /* Constants.Stage3EndStrokeAlpha */,\n    },\n];\nfunction radius(stage, startRadius, endRadius) {\n    return startRadius + (endRadius - startRadius) * stage;\n}\nclass SeriesLastPriceAnimationPaneView {\n    constructor(series) {\n        this._private__renderer = new SeriesLastPriceAnimationRenderer();\n        this._private__invalidated = true;\n        this._private__stageInvalidated = true;\n        this._private__startTime = performance.now();\n        this._private__endTime = this._private__startTime - 1;\n        this._private__series = series;\n    }\n    _internal_onDataCleared() {\n        this._private__endTime = this._private__startTime - 1;\n        this._internal_update();\n    }\n    _internal_onNewRealtimeDataReceived() {\n        this._internal_update();\n        if (this._private__series._internal_options().lastPriceAnimation === 2 /* LastPriceAnimationMode.OnDataUpdate */) {\n            const now = performance.now();\n            const timeToAnimationEnd = this._private__endTime - now;\n            if (timeToAnimationEnd > 0) {\n                if (timeToAnimationEnd < 2600 /* Constants.AnimationPeriod */ / 4) {\n                    this._private__endTime += 2600 /* Constants.AnimationPeriod */;\n                }\n                return;\n            }\n            this._private__startTime = now;\n            this._private__endTime = now + 2600 /* Constants.AnimationPeriod */;\n        }\n    }\n    _internal_update() {\n        this._private__invalidated = true;\n    }\n    _internal_invalidateStage() {\n        this._private__stageInvalidated = true;\n    }\n    _internal_visible() {\n        // center point is always visible if lastPriceAnimation is not LastPriceAnimationMode.Disabled\n        return this._private__series._internal_options().lastPriceAnimation !== 0 /* LastPriceAnimationMode.Disabled */;\n    }\n    _internal_animationActive() {\n        switch (this._private__series._internal_options().lastPriceAnimation) {\n            case 0 /* LastPriceAnimationMode.Disabled */:\n                return false;\n            case 1 /* LastPriceAnimationMode.Continuous */:\n                return true;\n            case 2 /* LastPriceAnimationMode.OnDataUpdate */:\n                return performance.now() <= this._private__endTime;\n        }\n    }\n    _internal_renderer() {\n        if (this._private__invalidated) {\n            this._private__updateImpl();\n            this._private__invalidated = false;\n            this._private__stageInvalidated = false;\n        }\n        else if (this._private__stageInvalidated) {\n            this._private__updateRendererDataStage();\n            this._private__stageInvalidated = false;\n        }\n        return this._private__renderer;\n    }\n    _private__updateImpl() {\n        this._private__renderer._internal_setData(null);\n        const timeScale = this._private__series._internal_model()._internal_timeScale();\n        const visibleRange = timeScale._internal_visibleStrictRange();\n        const firstValue = this._private__series._internal_firstValue();\n        if (visibleRange === null || firstValue === null) {\n            return;\n        }\n        const lastValue = this._private__series._internal_lastValueData(true);\n        if (lastValue._internal_noData || !visibleRange._internal_contains(lastValue._internal_index)) {\n            return;\n        }\n        const lastValuePoint = {\n            x: timeScale._internal_indexToCoordinate(lastValue._internal_index),\n            y: this._private__series._internal_priceScale()._internal_priceToCoordinate(lastValue._internal_price, firstValue._internal_value),\n        };\n        const seriesLineColor = lastValue._internal_color;\n        const seriesLineWidth = this._private__series._internal_options().lineWidth;\n        const data = this._private__animationData(this._private__duration(), seriesLineColor);\n        this._private__renderer._internal_setData({\n            _internal_seriesLineColor: seriesLineColor,\n            _internal_seriesLineWidth: seriesLineWidth,\n            _internal_fillColor: data._internal_fillColor,\n            _internal_strokeColor: data._internal_strokeColor,\n            _internal_radius: data._internal_radius,\n            _internal_center: lastValuePoint,\n        });\n    }\n    _private__updateRendererDataStage() {\n        const rendererData = this._private__renderer._internal_data();\n        if (rendererData !== null) {\n            const data = this._private__animationData(this._private__duration(), rendererData._internal_seriesLineColor);\n            rendererData._internal_fillColor = data._internal_fillColor;\n            rendererData._internal_strokeColor = data._internal_strokeColor;\n            rendererData._internal_radius = data._internal_radius;\n        }\n    }\n    _private__duration() {\n        return this._internal_animationActive() ? performance.now() - this._private__startTime : 2600 /* Constants.AnimationPeriod */ - 1;\n    }\n    _private__color(seriesLineColor, stage, startAlpha, endAlpha) {\n        const alpha = startAlpha + (endAlpha - startAlpha) * stage;\n        return this._private__series._internal_model()._internal_colorParser()._internal_applyAlpha(seriesLineColor, alpha);\n    }\n    _private__animationData(durationSinceStart, lineColor) {\n        const globalStage = (durationSinceStart % 2600 /* Constants.AnimationPeriod */) / 2600 /* Constants.AnimationPeriod */;\n        let currentStageData;\n        for (const stageData of animationStagesData) {\n            if (globalStage >= stageData._internal_start && globalStage <= stageData._internal_end) {\n                currentStageData = stageData;\n                break;\n            }\n        }\n        assert(currentStageData !== undefined, 'Last price animation internal logic error');\n        const subStage = (globalStage - currentStageData._internal_start) / (currentStageData._internal_end - currentStageData._internal_start);\n        return {\n            _internal_fillColor: this._private__color(lineColor, subStage, currentStageData._internal_startFillAlpha, currentStageData._internal_endFillAlpha),\n            _internal_strokeColor: this._private__color(lineColor, subStage, currentStageData._internal_startStrokeAlpha, currentStageData._internal_endStrokeAlpha),\n            _internal_radius: radius(subStage, currentStageData._internal_startRadius, currentStageData._internal_endRadius),\n        };\n    }\n}\n\nclass SeriesPriceLinePaneView extends SeriesHorizontalLinePaneView {\n    // eslint-disable-next-line no-useless-constructor\n    constructor(series) {\n        super(series);\n    }\n    _internal__updateImpl() {\n        const data = this._internal__lineRendererData;\n        data._internal_visible = false;\n        const seriesOptions = this._internal__series._internal_options();\n        if (!seriesOptions.priceLineVisible || !this._internal__series._internal_visible()) {\n            return;\n        }\n        const lastValueData = this._internal__series._internal_lastValueData(seriesOptions.priceLineSource === 0 /* PriceLineSource.LastBar */);\n        if (lastValueData._internal_noData) {\n            return;\n        }\n        data._internal_visible = true;\n        data._internal_y = lastValueData._internal_coordinate;\n        data._internal_color = this._internal__series._internal_priceLineColor(lastValueData._internal_color);\n        data._internal_lineWidth = seriesOptions.priceLineWidth;\n        data._internal_lineStyle = seriesOptions.priceLineStyle;\n    }\n}\n\nclass SeriesPriceAxisView extends PriceAxisView {\n    constructor(source) {\n        super();\n        this._private__source = source;\n    }\n    _internal__updateRendererData(axisRendererData, paneRendererData, commonRendererData) {\n        axisRendererData._internal_visible = false;\n        paneRendererData._internal_visible = false;\n        const source = this._private__source;\n        if (!source._internal_visible()) {\n            return;\n        }\n        const seriesOptions = source._internal_options();\n        const showSeriesLastValue = seriesOptions.lastValueVisible;\n        const showSymbolLabel = source._internal_title() !== '';\n        const showPriceAndPercentage = seriesOptions.seriesLastValueMode === 0 /* PriceAxisLastValueMode.LastPriceAndPercentageValue */;\n        const lastValueData = source._internal_lastValueData(false);\n        if (lastValueData._internal_noData) {\n            return;\n        }\n        if (showSeriesLastValue) {\n            axisRendererData._internal_text = this._internal__axisText(lastValueData, showSeriesLastValue, showPriceAndPercentage);\n            axisRendererData._internal_visible = axisRendererData._internal_text.length !== 0;\n        }\n        if (showSymbolLabel || showPriceAndPercentage) {\n            paneRendererData._internal_text = this._internal__paneText(lastValueData, showSeriesLastValue, showSymbolLabel, showPriceAndPercentage);\n            paneRendererData._internal_visible = paneRendererData._internal_text.length > 0;\n        }\n        const lastValueColor = source._internal_priceLineColor(lastValueData._internal_color);\n        const colors = this._private__source._internal_model()._internal_colorParser()._internal_generateContrastColors(lastValueColor);\n        commonRendererData._internal_background = colors._internal_background;\n        commonRendererData._internal_coordinate = lastValueData._internal_coordinate;\n        paneRendererData._internal_borderColor = source._internal_model()._internal_backgroundColorAtYPercentFromTop(lastValueData._internal_coordinate / source._internal_priceScale()._internal_height());\n        axisRendererData._internal_borderColor = lastValueColor;\n        axisRendererData._internal_color = colors._internal_foreground;\n        paneRendererData._internal_color = colors._internal_foreground;\n    }\n    _internal__paneText(lastValue, showSeriesLastValue, showSymbolLabel, showPriceAndPercentage) {\n        let result = '';\n        const title = this._private__source._internal_title();\n        if (showSymbolLabel && title.length !== 0) {\n            result += `${title} `;\n        }\n        if (showSeriesLastValue && showPriceAndPercentage) {\n            result += this._private__source._internal_priceScale()._internal_isPercentage() ?\n                lastValue._internal_formattedPriceAbsolute : lastValue._internal_formattedPricePercentage;\n        }\n        return result.trim();\n    }\n    _internal__axisText(lastValueData, showSeriesLastValue, showPriceAndPercentage) {\n        if (!showSeriesLastValue) {\n            return '';\n        }\n        if (!showPriceAndPercentage) {\n            return lastValueData._internal_text;\n        }\n        return this._private__source._internal_priceScale()._internal_isPercentage() ?\n            lastValueData._internal_formattedPricePercentage : lastValueData._internal_formattedPriceAbsolute;\n    }\n}\n\nfunction computeFiniteResult(method, valueOne, valueTwo, fallback) {\n    const firstFinite = Number.isFinite(valueOne);\n    const secondFinite = Number.isFinite(valueTwo);\n    if (firstFinite && secondFinite) {\n        return method(valueOne, valueTwo);\n    }\n    return !firstFinite && !secondFinite ? fallback : (firstFinite ? valueOne : valueTwo);\n}\nclass PriceRangeImpl {\n    constructor(minValue, maxValue) {\n        this._private__minValue = minValue;\n        this._private__maxValue = maxValue;\n    }\n    _internal_equals(pr) {\n        if (pr === null) {\n            return false;\n        }\n        return this._private__minValue === pr._private__minValue && this._private__maxValue === pr._private__maxValue;\n    }\n    _internal_clone() {\n        return new PriceRangeImpl(this._private__minValue, this._private__maxValue);\n    }\n    _internal_minValue() {\n        return this._private__minValue;\n    }\n    _internal_maxValue() {\n        return this._private__maxValue;\n    }\n    _internal_length() {\n        return this._private__maxValue - this._private__minValue;\n    }\n    _internal_isEmpty() {\n        return this._private__maxValue === this._private__minValue || Number.isNaN(this._private__maxValue) || Number.isNaN(this._private__minValue);\n    }\n    _internal_merge(anotherRange) {\n        if (anotherRange === null) {\n            return this;\n        }\n        return new PriceRangeImpl(computeFiniteResult(Math.min, this._internal_minValue(), anotherRange._internal_minValue(), -Infinity), computeFiniteResult(Math.max, this._internal_maxValue(), anotherRange._internal_maxValue(), Infinity));\n    }\n    _internal_scaleAroundCenter(coeff) {\n        if (!isNumber(coeff)) {\n            return;\n        }\n        const delta = this._private__maxValue - this._private__minValue;\n        if (delta === 0) {\n            return;\n        }\n        const center = (this._private__maxValue + this._private__minValue) * 0.5;\n        let maxDelta = this._private__maxValue - center;\n        let minDelta = this._private__minValue - center;\n        maxDelta *= coeff;\n        minDelta *= coeff;\n        this._private__maxValue = center + maxDelta;\n        this._private__minValue = center + minDelta;\n    }\n    _internal_shift(delta) {\n        if (!isNumber(delta)) {\n            return;\n        }\n        this._private__maxValue += delta;\n        this._private__minValue += delta;\n    }\n    _internal_toRaw() {\n        return {\n            minValue: this._private__minValue,\n            maxValue: this._private__maxValue,\n        };\n    }\n    static _internal_fromRaw(raw) {\n        return (raw === null) ? null : new PriceRangeImpl(raw.minValue, raw.maxValue);\n    }\n}\n\nclass AutoscaleInfoImpl {\n    constructor(priceRange, margins) {\n        this._private__priceRange = priceRange;\n        this._private__margins = margins || null;\n    }\n    _internal_priceRange() {\n        return this._private__priceRange;\n    }\n    _internal_margins() {\n        return this._private__margins;\n    }\n    _internal_toRaw() {\n        return {\n            priceRange: this._private__priceRange === null ? null : this._private__priceRange._internal_toRaw(),\n            margins: this._private__margins || undefined,\n        };\n    }\n    static _internal_fromRaw(raw) {\n        return (raw === null) ? null : new AutoscaleInfoImpl(PriceRangeImpl._internal_fromRaw(raw.priceRange), raw.margins);\n    }\n}\n\nclass CustomPriceLinePaneView extends SeriesHorizontalLinePaneView {\n    constructor(series, priceLine) {\n        super(series);\n        this._private__priceLine = priceLine;\n    }\n    _internal__updateImpl() {\n        const data = this._internal__lineRendererData;\n        data._internal_visible = false;\n        const lineOptions = this._private__priceLine._internal_options();\n        if (!this._internal__series._internal_visible() || !lineOptions.lineVisible) {\n            return;\n        }\n        const y = this._private__priceLine._internal_yCoord();\n        if (y === null) {\n            return;\n        }\n        data._internal_visible = true;\n        data._internal_y = y;\n        data._internal_color = lineOptions.color;\n        data._internal_lineWidth = lineOptions.lineWidth;\n        data._internal_lineStyle = lineOptions.lineStyle;\n        data._internal_externalId = this._private__priceLine._internal_options().id;\n    }\n}\n\nclass CustomPriceLinePriceAxisView extends PriceAxisView {\n    constructor(series, priceLine) {\n        super();\n        this._private__series = series;\n        this._private__priceLine = priceLine;\n    }\n    _internal__updateRendererData(axisRendererData, paneRendererData, commonData) {\n        axisRendererData._internal_visible = false;\n        paneRendererData._internal_visible = false;\n        const options = this._private__priceLine._internal_options();\n        const labelVisible = options.axisLabelVisible;\n        const showPaneLabel = options.title !== '';\n        const series = this._private__series;\n        if (!labelVisible || !series._internal_visible()) {\n            return;\n        }\n        const y = this._private__priceLine._internal_yCoord();\n        if (y === null) {\n            return;\n        }\n        if (showPaneLabel) {\n            paneRendererData._internal_text = options.title;\n            paneRendererData._internal_visible = true;\n        }\n        paneRendererData._internal_borderColor = series._internal_model()._internal_backgroundColorAtYPercentFromTop(y / series._internal_priceScale()._internal_height());\n        axisRendererData._internal_text = this._private__formatPrice(options.price);\n        axisRendererData._internal_visible = true;\n        const colors = this._private__series._internal_model()._internal_colorParser()._internal_generateContrastColors(options.axisLabelColor || options.color);\n        commonData._internal_background = colors._internal_background;\n        const textColor = options.axisLabelTextColor || colors._internal_foreground;\n        axisRendererData._internal_color = textColor; // price text\n        paneRendererData._internal_color = textColor; // title text\n        commonData._internal_coordinate = y;\n    }\n    _private__formatPrice(price) {\n        const firstValue = this._private__series._internal_firstValue();\n        if (firstValue === null) {\n            return '';\n        }\n        return this._private__series._internal_priceScale()._internal_formatPrice(price, firstValue._internal_value);\n    }\n}\n\nclass CustomPriceLine {\n    constructor(series, options) {\n        this._private__series = series;\n        this._private__options = options;\n        this._private__priceLineView = new CustomPriceLinePaneView(series, this);\n        this._private__priceAxisView = new CustomPriceLinePriceAxisView(series, this);\n        this._private__panePriceAxisView = new PanePriceAxisView(this._private__priceAxisView, series, series._internal_model());\n    }\n    _internal_applyOptions(options) {\n        merge(this._private__options, options);\n        this._internal_update();\n        this._private__series._internal_model()._internal_lightUpdate();\n    }\n    _internal_options() {\n        return this._private__options;\n    }\n    _internal_paneView() {\n        return this._private__priceLineView;\n    }\n    _internal_labelPaneView() {\n        return this._private__panePriceAxisView;\n    }\n    _internal_priceAxisView() {\n        return this._private__priceAxisView;\n    }\n    _internal_update() {\n        this._private__priceLineView._internal_update();\n        this._private__priceAxisView._internal_update();\n    }\n    _internal_yCoord() {\n        const series = this._private__series;\n        const priceScale = series._internal_priceScale();\n        const timeScale = series._internal_model()._internal_timeScale();\n        if (timeScale._internal_isEmpty() || priceScale._internal_isEmpty()) {\n            return null;\n        }\n        const firstValue = series._internal_firstValue();\n        if (firstValue === null) {\n            return null;\n        }\n        return priceScale._internal_priceToCoordinate(this._private__options.price, firstValue._internal_value);\n    }\n}\n\nclass PriceDataSource extends DataSource {\n    constructor(model) {\n        super();\n        this._private__model = model;\n    }\n    _internal_model() {\n        return this._private__model;\n    }\n}\n\nconst barStyleFnMap = {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    Bar: (findBar, barStyle, barIndex, precomputedBars) => {\n        const upColor = barStyle.upColor;\n        const downColor = barStyle.downColor;\n        const currentBar = ensureNotNull(findBar(barIndex, precomputedBars));\n        const isUp = ensure(currentBar._internal_value[0 /* PlotRowValueIndex.Open */]) <= ensure(currentBar._internal_value[3 /* PlotRowValueIndex.Close */]);\n        return {\n            _internal_barColor: currentBar._internal_color ?? (isUp ? upColor : downColor),\n        };\n    },\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    Candlestick: (findBar, candlestickStyle, barIndex, precomputedBars) => {\n        const upColor = candlestickStyle.upColor;\n        const downColor = candlestickStyle.downColor;\n        const borderUpColor = candlestickStyle.borderUpColor;\n        const borderDownColor = candlestickStyle.borderDownColor;\n        const wickUpColor = candlestickStyle.wickUpColor;\n        const wickDownColor = candlestickStyle.wickDownColor;\n        const currentBar = ensureNotNull(findBar(barIndex, precomputedBars));\n        const isUp = ensure(currentBar._internal_value[0 /* PlotRowValueIndex.Open */]) <= ensure(currentBar._internal_value[3 /* PlotRowValueIndex.Close */]);\n        return {\n            _internal_barColor: currentBar._internal_color ?? (isUp ? upColor : downColor),\n            _internal_barBorderColor: currentBar._internal_borderColor ?? (isUp ? borderUpColor : borderDownColor),\n            _internal_barWickColor: currentBar._internal_wickColor ?? (isUp ? wickUpColor : wickDownColor),\n        };\n    },\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    Custom: (findBar, customStyle, barIndex, precomputedBars) => {\n        const currentBar = ensureNotNull(findBar(barIndex, precomputedBars));\n        return {\n            _internal_barColor: currentBar._internal_color ?? customStyle.color,\n        };\n    },\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    Area: (findBar, areaStyle, barIndex, precomputedBars) => {\n        const currentBar = ensureNotNull(findBar(barIndex, precomputedBars));\n        return {\n            _internal_barColor: currentBar._internal_lineColor ?? areaStyle.lineColor,\n            _internal_lineColor: currentBar._internal_lineColor ?? areaStyle.lineColor,\n            _internal_topColor: currentBar._internal_topColor ?? areaStyle.topColor,\n            _internal_bottomColor: currentBar._internal_bottomColor ?? areaStyle.bottomColor,\n        };\n    },\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    Baseline: (findBar, baselineStyle, barIndex, precomputedBars) => {\n        const currentBar = ensureNotNull(findBar(barIndex, precomputedBars));\n        const isAboveBaseline = currentBar._internal_value[3 /* PlotRowValueIndex.Close */] >= baselineStyle.baseValue.price;\n        return {\n            _internal_barColor: isAboveBaseline ? baselineStyle.topLineColor : baselineStyle.bottomLineColor,\n            _internal_topLineColor: currentBar._internal_topLineColor ?? baselineStyle.topLineColor,\n            _internal_bottomLineColor: currentBar._internal_bottomLineColor ?? baselineStyle.bottomLineColor,\n            _internal_topFillColor1: currentBar._internal_topFillColor1 ?? baselineStyle.topFillColor1,\n            _internal_topFillColor2: currentBar._internal_topFillColor2 ?? baselineStyle.topFillColor2,\n            _internal_bottomFillColor1: currentBar._internal_bottomFillColor1 ?? baselineStyle.bottomFillColor1,\n            _internal_bottomFillColor2: currentBar._internal_bottomFillColor2 ?? baselineStyle.bottomFillColor2,\n        };\n    },\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    Line: (findBar, lineStyle, barIndex, precomputedBars) => {\n        const currentBar = ensureNotNull(findBar(barIndex, precomputedBars));\n        return {\n            _internal_barColor: currentBar._internal_color ?? lineStyle.color,\n            _internal_lineColor: currentBar._internal_color ?? lineStyle.color,\n        };\n    },\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    Histogram: (findBar, histogramStyle, barIndex, precomputedBars) => {\n        const currentBar = ensureNotNull(findBar(barIndex, precomputedBars));\n        return {\n            _internal_barColor: currentBar._internal_color ?? histogramStyle.color,\n        };\n    },\n};\nclass SeriesBarColorer {\n    constructor(series) {\n        this._private__findBar = (barIndex, precomputedBars) => {\n            if (precomputedBars !== undefined) {\n                return precomputedBars._internal_value;\n            }\n            return this._private__series._internal_bars()._internal_valueAt(barIndex);\n        };\n        this._private__series = series;\n        this._private__styleGetter = barStyleFnMap[series._internal_seriesType()];\n    }\n    _internal_barStyle(barIndex, precomputedBars) {\n        // precomputedBars: {value: [Array BarValues], previousValue: [Array BarValues] | undefined}\n        // Used to avoid binary search if bars are already known\n        return this._private__styleGetter(this._private__findBar, this._private__series._internal_options(), barIndex, precomputedBars);\n    }\n}\n\n/**\n * Binary function that accepts two arguments (the first of the type of array elements, and the second is always val), and returns a value convertible to bool.\n * The value returned indicates whether the first argument is considered to go before the second.\n * The function shall not modify any of its arguments.\n */\nfunction boundCompare(lower, arr, value, compare, start = 0, to = arr.length) {\n    let count = to - start;\n    while (0 < count) {\n        const count2 = (count >> 1);\n        const mid = start + count2;\n        if (compare(arr[mid], value) === lower) {\n            start = mid + 1;\n            count -= count2 + 1;\n        }\n        else {\n            count = count2;\n        }\n    }\n    return start;\n}\nconst lowerBound = boundCompare.bind(null, true);\nconst upperBound = boundCompare.bind(null, false);\n\n/**\n * Search direction if no data found at provided index\n */\nvar MismatchDirection;\n(function (MismatchDirection) {\n    /**\n     * Search the nearest left item\n     */\n    MismatchDirection[MismatchDirection[\"NearestLeft\"] = -1] = \"NearestLeft\";\n    /**\n     * Do not search\n     */\n    MismatchDirection[MismatchDirection[\"None\"] = 0] = \"None\";\n    /**\n     * Search the nearest right item\n     */\n    MismatchDirection[MismatchDirection[\"NearestRight\"] = 1] = \"NearestRight\";\n})(MismatchDirection || (MismatchDirection = {}));\n// TODO: think about changing it dynamically\nconst CHUNK_SIZE = 30;\n/**\n * PlotList is an array of plot rows\n * each plot row consists of key (index in timescale) and plot value map\n */\nclass PlotList {\n    constructor() {\n        this._private__items = [];\n        this._private__minMaxCache = new Map();\n        this._private__rowSearchCache = new Map();\n        this._private__indices = [];\n    }\n    // @returns Last row\n    _internal_last() {\n        return this._internal_size() > 0 ? this._private__items[this._private__items.length - 1] : null;\n    }\n    _internal_firstIndex() {\n        return this._internal_size() > 0 ? this._private__indexAt(0) : null;\n    }\n    _internal_lastIndex() {\n        return this._internal_size() > 0 ? this._private__indexAt((this._private__items.length - 1)) : null;\n    }\n    _internal_size() {\n        return this._private__items.length;\n    }\n    _internal_isEmpty() {\n        return this._internal_size() === 0;\n    }\n    _internal_contains(index) {\n        return this._private__search(index, 0 /* MismatchDirection.None */) !== null;\n    }\n    _internal_valueAt(index) {\n        return this._internal_search(index);\n    }\n    _internal_search(index, searchMode = 0 /* MismatchDirection.None */) {\n        const pos = this._private__search(index, searchMode);\n        if (pos === null) {\n            return null;\n        }\n        return {\n            ...this._private__valueAt(pos),\n            _internal_index: this._private__indexAt(pos),\n        };\n    }\n    _internal_rows() {\n        return this._private__items;\n    }\n    _internal_minMaxOnRangeCached(start, end, plots) {\n        // this code works for single series only\n        // could fail after whitespaces implementation\n        if (this._internal_isEmpty()) {\n            return null;\n        }\n        let result = null;\n        for (const plot of plots) {\n            const plotMinMax = this._private__minMaxOnRangeCachedImpl(start, end, plot);\n            result = mergeMinMax(result, plotMinMax);\n        }\n        return result;\n    }\n    _internal_setData(plotRows) {\n        this._private__rowSearchCache.clear();\n        this._private__minMaxCache.clear();\n        this._private__items = plotRows;\n        this._private__indices = plotRows.map((plotRow) => plotRow._internal_index);\n    }\n    // TimePointIndex values for fulfilled data points\n    _internal_indices() {\n        return this._private__indices;\n    }\n    _private__indexAt(offset) {\n        return this._private__items[offset]._internal_index;\n    }\n    _private__valueAt(offset) {\n        return this._private__items[offset];\n    }\n    _private__search(index, searchMode) {\n        const exactPos = this._private__bsearch(index);\n        if (exactPos === null && searchMode !== 0 /* MismatchDirection.None */) {\n            switch (searchMode) {\n                case -1 /* MismatchDirection.NearestLeft */:\n                    return this._private__searchNearestLeft(index);\n                case 1 /* MismatchDirection.NearestRight */:\n                    return this._private__searchNearestRight(index);\n                default:\n                    throw new TypeError('Unknown search mode');\n            }\n        }\n        return exactPos;\n    }\n    _private__searchNearestLeft(index) {\n        let nearestLeftPos = this._private__lowerbound(index);\n        if (nearestLeftPos > 0) {\n            nearestLeftPos = nearestLeftPos - 1;\n        }\n        return (nearestLeftPos !== this._private__items.length && this._private__indexAt(nearestLeftPos) < index) ? nearestLeftPos : null;\n    }\n    _private__searchNearestRight(index) {\n        const nearestRightPos = this._private__upperbound(index);\n        return (nearestRightPos !== this._private__items.length && index < this._private__indexAt(nearestRightPos)) ? nearestRightPos : null;\n    }\n    _private__bsearch(index) {\n        const start = this._private__lowerbound(index);\n        if (start !== this._private__items.length && !(index < this._private__items[start]._internal_index)) {\n            return start;\n        }\n        return null;\n    }\n    _private__lowerbound(index) {\n        return lowerBound(this._private__items, index, (a, b) => a._internal_index < b);\n    }\n    _private__upperbound(index) {\n        return upperBound(this._private__items, index, (a, b) => a._internal_index > b);\n    }\n    _private__plotMinMax(startIndex, endIndexExclusive, plotIndex) {\n        let result = null;\n        for (let i = startIndex; i < endIndexExclusive; i++) {\n            const values = this._private__items[i]._internal_value;\n            const v = values[plotIndex];\n            if (Number.isNaN(v)) {\n                continue;\n            }\n            if (result === null) {\n                result = { _internal_min: v, _internal_max: v };\n            }\n            else {\n                if (v < result._internal_min) {\n                    result._internal_min = v;\n                }\n                if (v > result._internal_max) {\n                    result._internal_max = v;\n                }\n            }\n        }\n        return result;\n    }\n    _private__minMaxOnRangeCachedImpl(start, end, plotIndex) {\n        // this code works for single series only\n        // could fail after whitespaces implementation\n        if (this._internal_isEmpty()) {\n            return null;\n        }\n        let result = null;\n        // assume that bar indexes only increase\n        const firstIndex = ensureNotNull(this._internal_firstIndex());\n        const lastIndex = ensureNotNull(this._internal_lastIndex());\n        const s = Math.max(start, firstIndex);\n        const e = Math.min(end, lastIndex);\n        const cachedLow = Math.ceil(s / CHUNK_SIZE) * CHUNK_SIZE;\n        const cachedHigh = Math.max(cachedLow, Math.floor(e / CHUNK_SIZE) * CHUNK_SIZE);\n        {\n            const startIndex = this._private__lowerbound(s);\n            const endIndex = this._private__upperbound(Math.min(e, cachedLow, end)); // non-inclusive end\n            const plotMinMax = this._private__plotMinMax(startIndex, endIndex, plotIndex);\n            result = mergeMinMax(result, plotMinMax);\n        }\n        let minMaxCache = this._private__minMaxCache.get(plotIndex);\n        if (minMaxCache === undefined) {\n            minMaxCache = new Map();\n            this._private__minMaxCache.set(plotIndex, minMaxCache);\n        }\n        // now go cached\n        for (let c = Math.max(cachedLow + 1, s); c < cachedHigh; c += CHUNK_SIZE) {\n            const chunkIndex = Math.floor(c / CHUNK_SIZE);\n            let chunkMinMax = minMaxCache.get(chunkIndex);\n            if (chunkMinMax === undefined) {\n                const chunkStart = this._private__lowerbound(chunkIndex * CHUNK_SIZE);\n                const chunkEnd = this._private__upperbound((chunkIndex + 1) * CHUNK_SIZE - 1);\n                chunkMinMax = this._private__plotMinMax(chunkStart, chunkEnd, plotIndex);\n                minMaxCache.set(chunkIndex, chunkMinMax);\n            }\n            result = mergeMinMax(result, chunkMinMax);\n        }\n        // tail\n        {\n            const startIndex = this._private__lowerbound(cachedHigh);\n            const endIndex = this._private__upperbound(e); // non-inclusive end\n            const plotMinMax = this._private__plotMinMax(startIndex, endIndex, plotIndex);\n            result = mergeMinMax(result, plotMinMax);\n        }\n        return result;\n    }\n}\nfunction mergeMinMax(first, second) {\n    if (first === null) {\n        return second;\n    }\n    else {\n        if (second === null) {\n            return first;\n        }\n        else {\n            // merge MinMax values\n            const min = Math.min(first._internal_min, second._internal_min);\n            const max = Math.max(first._internal_max, second._internal_max);\n            return { _internal_min: min, _internal_max: max };\n        }\n    }\n}\n\nfunction createSeriesPlotList() {\n    return new PlotList();\n}\n\nclass PrimitiveRendererWrapper {\n    constructor(baseRenderer) {\n        this._private__baseRenderer = baseRenderer;\n    }\n    _internal_draw(target, isHovered, hitTestData) {\n        this._private__baseRenderer.draw(target);\n    }\n    _internal_drawBackground(target, isHovered, hitTestData) {\n        this._private__baseRenderer.drawBackground?.(target);\n    }\n}\nclass PrimitivePaneViewWrapper {\n    constructor(paneView) {\n        this._private__cache = null;\n        this._private__paneView = paneView;\n    }\n    _internal_renderer() {\n        const baseRenderer = this._private__paneView.renderer();\n        if (baseRenderer === null) {\n            return null;\n        }\n        if (this._private__cache?._internal_base === baseRenderer) {\n            return this._private__cache._internal_wrapper;\n        }\n        const wrapper = new PrimitiveRendererWrapper(baseRenderer);\n        this._private__cache = {\n            _internal_base: baseRenderer,\n            _internal_wrapper: wrapper,\n        };\n        return wrapper;\n    }\n    _internal_zOrder() {\n        return this._private__paneView.zOrder?.() ?? 'normal';\n    }\n}\nclass PrimitiveWrapper {\n    constructor(primitive) {\n        this._private__paneViewsCache = null;\n        this._internal__primitive = primitive;\n    }\n    _internal_primitive() {\n        return this._internal__primitive;\n    }\n    _internal_updateAllViews() {\n        this._internal__primitive.updateAllViews?.();\n    }\n    _internal_paneViews() {\n        const base = this._internal__primitive.paneViews?.() ?? [];\n        if (this._private__paneViewsCache?._internal_base === base) {\n            return this._private__paneViewsCache._internal_wrapper;\n        }\n        const wrapper = base.map((pw) => new PrimitivePaneViewWrapper(pw));\n        this._private__paneViewsCache = {\n            _internal_base: base,\n            _internal_wrapper: wrapper,\n        };\n        return wrapper;\n    }\n    _internal_hitTest(x, y) {\n        return this._internal__primitive.hitTest?.(x, y) ?? null;\n    }\n}\nlet PanePrimitiveWrapper$1 = class PanePrimitiveWrapper extends PrimitiveWrapper {\n    _internal_labelPaneViews() {\n        return [];\n    }\n};\n\nclass SeriesPrimitiveRendererWrapper {\n    constructor(baseRenderer) {\n        this._private__baseRenderer = baseRenderer;\n    }\n    _internal_draw(target, isHovered, hitTestData) {\n        this._private__baseRenderer.draw(target);\n    }\n    _internal_drawBackground(target, isHovered, hitTestData) {\n        this._private__baseRenderer.drawBackground?.(target);\n    }\n}\nclass SeriesPrimitivePaneViewWrapper {\n    constructor(paneView) {\n        this._private__cache = null;\n        this._private__paneView = paneView;\n    }\n    _internal_renderer() {\n        const baseRenderer = this._private__paneView.renderer();\n        if (baseRenderer === null) {\n            return null;\n        }\n        if (this._private__cache?._internal_base === baseRenderer) {\n            return this._private__cache._internal_wrapper;\n        }\n        const wrapper = new SeriesPrimitiveRendererWrapper(baseRenderer);\n        this._private__cache = {\n            _internal_base: baseRenderer,\n            _internal_wrapper: wrapper,\n        };\n        return wrapper;\n    }\n    _internal_zOrder() {\n        return this._private__paneView.zOrder?.() ?? 'normal';\n    }\n}\nfunction getAxisViewData(baseView) {\n    return {\n        _internal_text: baseView.text(),\n        _internal_coordinate: baseView.coordinate(),\n        _internal_fixedCoordinate: baseView.fixedCoordinate?.(),\n        _internal_color: baseView.textColor(),\n        _internal_background: baseView.backColor(),\n        _internal_visible: baseView.visible?.() ?? true,\n        _internal_tickVisible: baseView.tickVisible?.() ?? true,\n    };\n}\nclass SeriesPrimitiveTimeAxisViewWrapper {\n    constructor(baseView, timeScale) {\n        this._private__renderer = new TimeAxisViewRenderer();\n        this._private__baseView = baseView;\n        this._private__timeScale = timeScale;\n    }\n    _internal_renderer() {\n        this._private__renderer._internal_setData({\n            _internal_width: this._private__timeScale._internal_width(),\n            ...getAxisViewData(this._private__baseView),\n        });\n        return this._private__renderer;\n    }\n}\nclass SeriesPrimitivePriceAxisViewWrapper extends PriceAxisView {\n    constructor(baseView, priceScale) {\n        super();\n        this._private__baseView = baseView;\n        this._private__priceScale = priceScale;\n    }\n    _internal__updateRendererData(axisRendererData, paneRendererData, commonRendererData) {\n        const data = getAxisViewData(this._private__baseView);\n        commonRendererData._internal_background = data._internal_background;\n        axisRendererData._internal_color = data._internal_color;\n        const additionalPadding = 2 / 12 * this._private__priceScale._internal_fontSize();\n        commonRendererData._internal_additionalPaddingTop = additionalPadding;\n        commonRendererData._internal_additionalPaddingBottom = additionalPadding;\n        commonRendererData._internal_coordinate = data._internal_coordinate;\n        commonRendererData._internal_fixedCoordinate = data._internal_fixedCoordinate;\n        axisRendererData._internal_text = data._internal_text;\n        axisRendererData._internal_visible = data._internal_visible;\n        axisRendererData._internal_tickVisible = data._internal_tickVisible;\n    }\n}\nclass SeriesPrimitiveWrapper extends PrimitiveWrapper {\n    constructor(primitive, series) {\n        super(primitive);\n        this._private__timeAxisViewsCache = null;\n        this._private__priceAxisViewsCache = null;\n        this._private__priceAxisPaneViewsCache = null;\n        this._private__timeAxisPaneViewsCache = null;\n        this._private__series = series;\n    }\n    _internal_timeAxisViews() {\n        const base = this._internal__primitive.timeAxisViews?.() ?? [];\n        if (this._private__timeAxisViewsCache?._internal_base === base) {\n            return this._private__timeAxisViewsCache._internal_wrapper;\n        }\n        const timeScale = this._private__series._internal_model()._internal_timeScale();\n        const wrapper = base.map((aw) => new SeriesPrimitiveTimeAxisViewWrapper(aw, timeScale));\n        this._private__timeAxisViewsCache = {\n            _internal_base: base,\n            _internal_wrapper: wrapper,\n        };\n        return wrapper;\n    }\n    _internal_priceAxisViews() {\n        const base = this._internal__primitive.priceAxisViews?.() ?? [];\n        if (this._private__priceAxisViewsCache?._internal_base === base) {\n            return this._private__priceAxisViewsCache._internal_wrapper;\n        }\n        const priceScale = this._private__series._internal_priceScale();\n        const wrapper = base.map((aw) => new SeriesPrimitivePriceAxisViewWrapper(aw, priceScale));\n        this._private__priceAxisViewsCache = {\n            _internal_base: base,\n            _internal_wrapper: wrapper,\n        };\n        return wrapper;\n    }\n    _internal_priceAxisPaneViews() {\n        const base = this._internal__primitive.priceAxisPaneViews?.() ?? [];\n        if (this._private__priceAxisPaneViewsCache?._internal_base === base) {\n            return this._private__priceAxisPaneViewsCache._internal_wrapper;\n        }\n        const wrapper = base.map((pw) => new SeriesPrimitivePaneViewWrapper(pw));\n        this._private__priceAxisPaneViewsCache = {\n            _internal_base: base,\n            _internal_wrapper: wrapper,\n        };\n        return wrapper;\n    }\n    _internal_timeAxisPaneViews() {\n        const base = this._internal__primitive.timeAxisPaneViews?.() ?? [];\n        if (this._private__timeAxisPaneViewsCache?._internal_base === base) {\n            return this._private__timeAxisPaneViewsCache._internal_wrapper;\n        }\n        const wrapper = base.map((pw) => new SeriesPrimitivePaneViewWrapper(pw));\n        this._private__timeAxisPaneViewsCache = {\n            _internal_base: base,\n            _internal_wrapper: wrapper,\n        };\n        return wrapper;\n    }\n    _internal_autoscaleInfo(startTimePoint, endTimePoint) {\n        return (this._internal__primitive.autoscaleInfo?.(startTimePoint, endTimePoint) ?? null);\n    }\n}\n\nfunction extractPrimitivePaneViews(primitives, extractor, zOrder, destination) {\n    primitives.forEach((wrapper) => {\n        extractor(wrapper).forEach((paneView) => {\n            if (paneView._internal_zOrder() !== zOrder) {\n                return;\n            }\n            destination.push(paneView);\n        });\n    });\n}\nfunction primitivePaneViewsExtractor(wrapper) {\n    return wrapper._internal_paneViews();\n}\nfunction primitivePricePaneViewsExtractor(wrapper) {\n    return wrapper._internal_priceAxisPaneViews();\n}\nfunction primitiveTimePaneViewsExtractor(wrapper) {\n    return wrapper._internal_timeAxisPaneViews();\n}\nconst lineBasedSeries = ['Area', 'Line', 'Baseline'];\nclass Series extends PriceDataSource {\n    constructor(model, seriesType, options, createPaneView, customPaneView) {\n        super(model);\n        this._private__data = createSeriesPlotList();\n        this._private__priceLineView = new SeriesPriceLinePaneView(this);\n        this._private__customPriceLines = [];\n        this._private__baseHorizontalLineView = new SeriesHorizontalBaseLinePaneView(this);\n        this._private__lastPriceAnimationPaneView = null;\n        this._private__barColorerCache = null;\n        this._private__animationTimeoutId = null;\n        this._private__primitives = [];\n        this._private__options = options;\n        this._private__seriesType = seriesType;\n        const priceAxisView = new SeriesPriceAxisView(this);\n        this._private__priceAxisViews = [priceAxisView];\n        this._private__panePriceAxisView = new PanePriceAxisView(priceAxisView, this, model);\n        if (lineBasedSeries.includes(this._private__seriesType)) {\n            this._private__lastPriceAnimationPaneView = new SeriesLastPriceAnimationPaneView(this);\n        }\n        this._private__recreateFormatter();\n        this._private__paneView = createPaneView(this, this._internal_model(), customPaneView);\n    }\n    _internal_destroy() {\n        if (this._private__animationTimeoutId !== null) {\n            clearTimeout(this._private__animationTimeoutId);\n        }\n    }\n    _internal_priceLineColor(lastBarColor) {\n        return this._private__options.priceLineColor || lastBarColor;\n    }\n    _internal_lastValueData(globalLast) {\n        const noDataRes = { _internal_noData: true };\n        const priceScale = this._internal_priceScale();\n        if (this._internal_model()._internal_timeScale()._internal_isEmpty() || priceScale._internal_isEmpty() || this._private__data._internal_isEmpty()) {\n            return noDataRes;\n        }\n        const visibleBars = this._internal_model()._internal_timeScale()._internal_visibleStrictRange();\n        const firstValue = this._internal_firstValue();\n        if (visibleBars === null || firstValue === null) {\n            return noDataRes;\n        }\n        // find range of bars inside range\n        // TODO: make it more optimal\n        let bar;\n        let lastIndex;\n        if (globalLast) {\n            const lastBar = this._private__data._internal_last();\n            if (lastBar === null) {\n                return noDataRes;\n            }\n            bar = lastBar;\n            lastIndex = lastBar._internal_index;\n        }\n        else {\n            const endBar = this._private__data._internal_search(visibleBars._internal_right(), -1 /* MismatchDirection.NearestLeft */);\n            if (endBar === null) {\n                return noDataRes;\n            }\n            bar = this._private__data._internal_valueAt(endBar._internal_index);\n            if (bar === null) {\n                return noDataRes;\n            }\n            lastIndex = endBar._internal_index;\n        }\n        const price = bar._internal_value[3 /* PlotRowValueIndex.Close */];\n        const barColorer = this._internal_barColorer();\n        const style = barColorer._internal_barStyle(lastIndex, { _internal_value: bar });\n        const coordinate = priceScale._internal_priceToCoordinate(price, firstValue._internal_value);\n        return {\n            _internal_noData: false,\n            _internal_price: price,\n            _internal_text: priceScale._internal_formatPrice(price, firstValue._internal_value),\n            _internal_formattedPriceAbsolute: priceScale._internal_formatPriceAbsolute(price),\n            _internal_formattedPricePercentage: priceScale._internal_formatPricePercentage(price, firstValue._internal_value),\n            _internal_color: style._internal_barColor,\n            _internal_coordinate: coordinate,\n            _internal_index: lastIndex,\n        };\n    }\n    _internal_barColorer() {\n        if (this._private__barColorerCache !== null) {\n            return this._private__barColorerCache;\n        }\n        this._private__barColorerCache = new SeriesBarColorer(this);\n        return this._private__barColorerCache;\n    }\n    _internal_options() {\n        return this._private__options;\n    }\n    _internal_applyOptions(options) {\n        const targetPriceScaleId = options.priceScaleId;\n        if (targetPriceScaleId !== undefined && targetPriceScaleId !== this._private__options.priceScaleId) {\n            // series cannot do it itself, ask model\n            this._internal_model()._internal_moveSeriesToScale(this, targetPriceScaleId);\n        }\n        merge(this._private__options, options);\n        if (options.priceFormat !== undefined) {\n            this._private__recreateFormatter();\n            // updated formatter might affect rendering  and as a consequence of this the width of price axis might be changed\n            // thus we need to force the chart to do a full update to apply changes correctly\n            // full update is quite heavy operation in terms of performance\n            // but updating formatter looks like quite rare so forcing a full update here shouldn't affect the performance a lot\n            this._internal_model()._internal_fullUpdate();\n        }\n        this._internal_model()._internal_updateSource(this);\n        // a series might affect crosshair by some options (like crosshair markers)\n        // that's why we need to update crosshair as well\n        this._internal_model()._internal_updateCrosshair();\n        this._private__paneView._internal_update('options');\n    }\n    _internal_setData(data, updateInfo) {\n        this._private__data._internal_setData(data);\n        this._private__paneView._internal_update('data');\n        if (this._private__lastPriceAnimationPaneView !== null) {\n            if (updateInfo && updateInfo._internal_lastBarUpdatedOrNewBarsAddedToTheRight) {\n                this._private__lastPriceAnimationPaneView._internal_onNewRealtimeDataReceived();\n            }\n            else if (data.length === 0) {\n                this._private__lastPriceAnimationPaneView._internal_onDataCleared();\n            }\n        }\n        const sourcePane = this._internal_model()._internal_paneForSource(this);\n        this._internal_model()._internal_recalculatePane(sourcePane);\n        this._internal_model()._internal_updateSource(this);\n        this._internal_model()._internal_updateCrosshair();\n        this._internal_model()._internal_lightUpdate();\n    }\n    _internal_createPriceLine(options) {\n        const result = new CustomPriceLine(this, options);\n        this._private__customPriceLines.push(result);\n        this._internal_model()._internal_updateSource(this);\n        return result;\n    }\n    _internal_removePriceLine(line) {\n        const index = this._private__customPriceLines.indexOf(line);\n        if (index !== -1) {\n            this._private__customPriceLines.splice(index, 1);\n        }\n        this._internal_model()._internal_updateSource(this);\n    }\n    _internal_priceLines() {\n        return this._private__customPriceLines;\n    }\n    _internal_seriesType() {\n        return this._private__seriesType;\n    }\n    _internal_firstValue() {\n        const bar = this._internal_firstBar();\n        if (bar === null) {\n            return null;\n        }\n        return {\n            _internal_value: bar._internal_value[3 /* PlotRowValueIndex.Close */],\n            _internal_timePoint: bar._internal_time,\n        };\n    }\n    _internal_firstBar() {\n        const visibleBars = this._internal_model()._internal_timeScale()._internal_visibleStrictRange();\n        if (visibleBars === null) {\n            return null;\n        }\n        const startTimePoint = visibleBars._internal_left();\n        return this._private__data._internal_search(startTimePoint, 1 /* MismatchDirection.NearestRight */);\n    }\n    _internal_bars() {\n        return this._private__data;\n    }\n    _internal_dataAt(time) {\n        const prices = this._private__data._internal_valueAt(time);\n        if (prices === null) {\n            return null;\n        }\n        if (this._private__seriesType === 'Bar' || this._private__seriesType === 'Candlestick' || this._private__seriesType === 'Custom') {\n            return {\n                _internal_open: prices._internal_value[0 /* PlotRowValueIndex.Open */],\n                _internal_high: prices._internal_value[1 /* PlotRowValueIndex.High */],\n                _internal_low: prices._internal_value[2 /* PlotRowValueIndex.Low */],\n                _internal_close: prices._internal_value[3 /* PlotRowValueIndex.Close */],\n            };\n        }\n        else {\n            return prices._internal_value[3 /* PlotRowValueIndex.Close */];\n        }\n    }\n    _internal_topPaneViews(pane) {\n        const res = [];\n        extractPrimitivePaneViews(this._private__primitives, primitivePaneViewsExtractor, 'top', res);\n        const animationPaneView = this._private__lastPriceAnimationPaneView;\n        if (animationPaneView === null || !animationPaneView._internal_visible()) {\n            return res;\n        }\n        if (this._private__animationTimeoutId === null && animationPaneView._internal_animationActive()) {\n            this._private__animationTimeoutId = setTimeout(() => {\n                this._private__animationTimeoutId = null;\n                this._internal_model()._internal_cursorUpdate();\n            }, 0);\n        }\n        animationPaneView._internal_invalidateStage();\n        res.unshift(animationPaneView);\n        return res;\n    }\n    _internal_paneViews() {\n        const res = [];\n        if (!this._private__isOverlay()) {\n            res.push(this._private__baseHorizontalLineView);\n        }\n        res.push(this._private__paneView, this._private__priceLineView);\n        const priceLineViews = this._private__customPriceLines.map((line) => line._internal_paneView());\n        res.push(...priceLineViews);\n        extractPrimitivePaneViews(this._private__primitives, primitivePaneViewsExtractor, 'normal', res);\n        return res;\n    }\n    _internal_bottomPaneViews() {\n        return this._private__extractPaneViews(primitivePaneViewsExtractor, 'bottom');\n    }\n    _internal_pricePaneViews(zOrder) {\n        return this._private__extractPaneViews(primitivePricePaneViewsExtractor, zOrder);\n    }\n    _internal_timePaneViews(zOrder) {\n        return this._private__extractPaneViews(primitiveTimePaneViewsExtractor, zOrder);\n    }\n    _internal_primitiveHitTest(x, y) {\n        return this._private__primitives\n            .map((primitive) => primitive._internal_hitTest(x, y))\n            .filter((result) => result !== null);\n    }\n    _internal_labelPaneViews() {\n        return [\n            this._private__panePriceAxisView,\n            ...this._private__customPriceLines.map((line) => line._internal_labelPaneView()),\n        ];\n    }\n    _internal_priceAxisViews(pane, priceScale) {\n        if (priceScale !== this._internal__priceScale && !this._private__isOverlay()) {\n            return [];\n        }\n        const result = [...this._private__priceAxisViews];\n        for (const customPriceLine of this._private__customPriceLines) {\n            result.push(customPriceLine._internal_priceAxisView());\n        }\n        this._private__primitives.forEach((wrapper) => {\n            result.push(...wrapper._internal_priceAxisViews());\n        });\n        return result;\n    }\n    _internal_timeAxisViews() {\n        const res = [];\n        this._private__primitives.forEach((wrapper) => {\n            res.push(...wrapper._internal_timeAxisViews());\n        });\n        return res;\n    }\n    _internal_autoscaleInfo(startTimePoint, endTimePoint) {\n        if (this._private__options.autoscaleInfoProvider !== undefined) {\n            const autoscaleInfo = this._private__options.autoscaleInfoProvider(() => {\n                const res = this._private__autoscaleInfoImpl(startTimePoint, endTimePoint);\n                return (res === null) ? null : res._internal_toRaw();\n            });\n            return AutoscaleInfoImpl._internal_fromRaw(autoscaleInfo);\n        }\n        return this._private__autoscaleInfoImpl(startTimePoint, endTimePoint);\n    }\n    _internal_minMove() {\n        return this._private__options.priceFormat.minMove;\n    }\n    _internal_formatter() {\n        return this._private__formatter;\n    }\n    _internal_updateAllViews() {\n        this._private__paneView._internal_update();\n        for (const priceAxisView of this._private__priceAxisViews) {\n            priceAxisView._internal_update();\n        }\n        for (const customPriceLine of this._private__customPriceLines) {\n            customPriceLine._internal_update();\n        }\n        this._private__priceLineView._internal_update();\n        this._private__baseHorizontalLineView._internal_update();\n        this._private__lastPriceAnimationPaneView?._internal_update();\n        this._private__primitives.forEach((wrapper) => wrapper._internal_updateAllViews());\n    }\n    _internal_priceScale() {\n        return ensureNotNull(super._internal_priceScale());\n    }\n    _internal_markerDataAtIndex(index) {\n        const getValue = (this._private__seriesType === 'Line' || this._private__seriesType === 'Area' || this._private__seriesType === 'Baseline') &&\n            this._private__options.crosshairMarkerVisible;\n        if (!getValue) {\n            return null;\n        }\n        const bar = this._private__data._internal_valueAt(index);\n        if (bar === null) {\n            return null;\n        }\n        const price = bar._internal_value[3 /* PlotRowValueIndex.Close */];\n        const radius = this._private__markerRadius();\n        const borderColor = this._private__markerBorderColor();\n        const borderWidth = this._private__markerBorderWidth();\n        const backgroundColor = this._private__markerBackgroundColor(index);\n        return { _internal_price: price, _internal_radius: radius, _internal_borderColor: borderColor, _internal_borderWidth: borderWidth, _internal_backgroundColor: backgroundColor };\n    }\n    _internal_title() {\n        return this._private__options.title;\n    }\n    _internal_visible() {\n        return this._private__options.visible;\n    }\n    _internal_attachPrimitive(primitive) {\n        this._private__primitives.push(new SeriesPrimitiveWrapper(primitive, this));\n    }\n    _internal_detachPrimitive(source) {\n        this._private__primitives = this._private__primitives.filter((wrapper) => wrapper._internal_primitive() !== source);\n    }\n    _internal_customSeriesPlotValuesBuilder() {\n        if (this._private__seriesType !== 'Custom') {\n            return undefined;\n        }\n        return (data) => {\n            return this._private__paneView._internal_priceValueBuilder(data);\n        };\n    }\n    _internal_customSeriesWhitespaceCheck() {\n        if (this._private__seriesType !== 'Custom') {\n            return undefined;\n        }\n        return (data) => {\n            return this._private__paneView._internal_isWhitespace(data);\n        };\n    }\n    _internal_fulfilledIndices() {\n        return this._private__data._internal_indices();\n    }\n    _private__isOverlay() {\n        const priceScale = this._internal_priceScale();\n        return !isDefaultPriceScale(priceScale._internal_id());\n    }\n    _private__autoscaleInfoImpl(startTimePoint, endTimePoint) {\n        if (!isInteger(startTimePoint) || !isInteger(endTimePoint) || this._private__data._internal_isEmpty()) {\n            return null;\n        }\n        // TODO: refactor this\n        // series data is strongly hardcoded to keep bars\n        const plots = this._private__seriesType === 'Line' || this._private__seriesType === 'Area' || this._private__seriesType === 'Baseline' || this._private__seriesType === 'Histogram'\n            ? [3 /* PlotRowValueIndex.Close */]\n            : [2 /* PlotRowValueIndex.Low */, 1 /* PlotRowValueIndex.High */];\n        const barsMinMax = this._private__data._internal_minMaxOnRangeCached(startTimePoint, endTimePoint, plots);\n        let range = barsMinMax !== null ? new PriceRangeImpl(barsMinMax._internal_min, barsMinMax._internal_max) : null;\n        let margins = null;\n        if (this._internal_seriesType() === 'Histogram') {\n            const base = this._private__options.base;\n            const rangeWithBase = new PriceRangeImpl(base, base);\n            range = range !== null ? range._internal_merge(rangeWithBase) : rangeWithBase;\n        }\n        this._private__primitives.forEach((primitive) => {\n            const primitiveAutoscale = primitive._internal_autoscaleInfo(startTimePoint, endTimePoint);\n            if (primitiveAutoscale?.priceRange) {\n                const primitiveRange = new PriceRangeImpl(primitiveAutoscale.priceRange.minValue, primitiveAutoscale.priceRange.maxValue);\n                range = range !== null ? range._internal_merge(primitiveRange) : primitiveRange;\n            }\n            if (primitiveAutoscale?.margins) {\n                margins = primitiveAutoscale.margins;\n            }\n        });\n        return new AutoscaleInfoImpl(range, margins);\n    }\n    _private__markerRadius() {\n        switch (this._private__seriesType) {\n            case 'Line':\n            case 'Area':\n            case 'Baseline':\n                return this._private__options.crosshairMarkerRadius;\n        }\n        return 0;\n    }\n    _private__markerBorderColor() {\n        switch (this._private__seriesType) {\n            case 'Line':\n            case 'Area':\n            case 'Baseline': {\n                const crosshairMarkerBorderColor = this._private__options.crosshairMarkerBorderColor;\n                if (crosshairMarkerBorderColor.length !== 0) {\n                    return crosshairMarkerBorderColor;\n                }\n            }\n        }\n        return null;\n    }\n    _private__markerBorderWidth() {\n        switch (this._private__seriesType) {\n            case 'Line':\n            case 'Area':\n            case 'Baseline':\n                return this._private__options.crosshairMarkerBorderWidth;\n        }\n        return 0;\n    }\n    _private__markerBackgroundColor(index) {\n        switch (this._private__seriesType) {\n            case 'Line':\n            case 'Area':\n            case 'Baseline': {\n                const crosshairMarkerBackgroundColor = this._private__options.crosshairMarkerBackgroundColor;\n                if (crosshairMarkerBackgroundColor.length !== 0) {\n                    return crosshairMarkerBackgroundColor;\n                }\n            }\n        }\n        return this._internal_barColorer()._internal_barStyle(index)._internal_barColor;\n    }\n    _private__recreateFormatter() {\n        switch (this._private__options.priceFormat.type) {\n            case 'custom': {\n                const formatter = this._private__options.priceFormat.formatter;\n                this._private__formatter = {\n                    format: formatter,\n                    formatTickmarks: this._private__options.priceFormat.tickmarksFormatter ?? ((prices) => prices.map(formatter)),\n                };\n                break;\n            }\n            case 'volume': {\n                this._private__formatter = new VolumeFormatter(this._private__options.priceFormat.precision);\n                break;\n            }\n            case 'percent': {\n                this._private__formatter = new PercentageFormatter(this._private__options.priceFormat.precision);\n                break;\n            }\n            default: {\n                const priceScale = Math.pow(10, this._private__options.priceFormat.precision);\n                this._private__formatter = new PriceFormatter(priceScale, this._private__options.priceFormat.minMove * priceScale);\n            }\n        }\n        if (this._internal__priceScale !== null) {\n            this._internal__priceScale._internal_updateFormatter();\n        }\n    }\n    _private__extractPaneViews(extractor, zOrder) {\n        const res = [];\n        extractPrimitivePaneViews(this._private__primitives, extractor, zOrder, res);\n        return res;\n    }\n}\n\nconst magnetPlotRowKeys = [\n    3 /* PlotRowValueIndex.Close */,\n];\nconst magnetOHLCPlotRowKeys = [\n    0 /* PlotRowValueIndex.Open */,\n    1 /* PlotRowValueIndex.High */,\n    2 /* PlotRowValueIndex.Low */,\n    3 /* PlotRowValueIndex.Close */,\n];\nclass Magnet {\n    constructor(options) {\n        this._private__options = options;\n    }\n    _internal_align(price, index, pane) {\n        let res = price;\n        if (this._private__options.mode === 0 /* CrosshairMode.Normal */) {\n            return res;\n        }\n        const defaultPriceScale = pane._internal_defaultPriceScale();\n        const firstValue = defaultPriceScale._internal_firstValue();\n        if (firstValue === null) {\n            return res;\n        }\n        const y = defaultPriceScale._internal_priceToCoordinate(price, firstValue);\n        // get all serieses from the pane\n        const serieses = pane._internal_dataSources().filter(((ds) => (ds instanceof Series)));\n        const candidates = serieses.reduce((acc, series) => {\n            if (pane._internal_isOverlay(series) || !series._internal_visible()) {\n                return acc;\n            }\n            const ps = series._internal_priceScale();\n            const bars = series._internal_bars();\n            if (ps._internal_isEmpty() || !bars._internal_contains(index)) {\n                return acc;\n            }\n            const bar = bars._internal_valueAt(index);\n            if (bar === null) {\n                return acc;\n            }\n            // convert bar to pixels\n            const firstPrice = ensure(series._internal_firstValue());\n            const plotRowKeys = this._private__options.mode === 3 /* CrosshairMode.MagnetOHLC */\n                ? magnetOHLCPlotRowKeys\n                : magnetPlotRowKeys;\n            return acc.concat(plotRowKeys.map((key) => ps._internal_priceToCoordinate(bar._internal_value[key], firstPrice._internal_value)));\n        }, []);\n        if (candidates.length === 0) {\n            return res;\n        }\n        candidates.sort((y1, y2) => Math.abs(y1 - y) - Math.abs(y2 - y));\n        const nearest = candidates[0];\n        res = defaultPriceScale._internal_coordinateToPrice(nearest, firstValue);\n        return res;\n    }\n}\n\nfunction clamp(value, minVal, maxVal) {\n    return Math.min(Math.max(value, minVal), maxVal);\n}\nfunction isBaseDecimal(value) {\n    if (value < 0) {\n        return false;\n    }\n    for (let current = value; current > 1; current /= 10) {\n        if ((current % 10) !== 0) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction greaterOrEqual(x1, x2, epsilon) {\n    return (x2 - x1) <= epsilon;\n}\nfunction equal(x1, x2, epsilon) {\n    return Math.abs(x1 - x2) < epsilon;\n}\n// We can't use Math.min(...arr) because that would only support arrays shorter than 65536 items.\nfunction min(arr) {\n    if (arr.length < 1) {\n        throw Error('array is empty');\n    }\n    let minVal = arr[0];\n    for (let i = 1; i < arr.length; ++i) {\n        if (arr[i] < minVal) {\n            minVal = arr[i];\n        }\n    }\n    return minVal;\n}\nfunction ceiledEven(x) {\n    const ceiled = Math.ceil(x);\n    return (ceiled % 2 !== 0) ? ceiled - 1 : ceiled;\n}\nfunction ceiledOdd(x) {\n    const ceiled = Math.ceil(x);\n    return (ceiled % 2 === 0) ? ceiled - 1 : ceiled;\n}\n\nclass GridRenderer extends BitmapCoordinatesPaneRenderer {\n    constructor() {\n        super(...arguments);\n        this._private__data = null;\n    }\n    _internal_setData(data) {\n        this._private__data = data;\n    }\n    _internal__drawImpl({ context: ctx, bitmapSize, horizontalPixelRatio, verticalPixelRatio }) {\n        if (this._private__data === null) {\n            return;\n        }\n        const lineWidth = Math.max(1, Math.floor(horizontalPixelRatio));\n        ctx.lineWidth = lineWidth;\n        strokeInPixel(ctx, () => {\n            const data = ensureNotNull(this._private__data);\n            if (data._internal_vertLinesVisible) {\n                ctx.strokeStyle = data._internal_vertLinesColor;\n                setLineStyle(ctx, data._internal_vertLineStyle);\n                ctx.beginPath();\n                for (const timeMark of data._internal_timeMarks) {\n                    const x = Math.round(timeMark._internal_coord * horizontalPixelRatio);\n                    ctx.moveTo(x, -lineWidth);\n                    ctx.lineTo(x, bitmapSize.height + lineWidth);\n                }\n                ctx.stroke();\n            }\n            if (data._internal_horzLinesVisible) {\n                ctx.strokeStyle = data._internal_horzLinesColor;\n                setLineStyle(ctx, data._internal_horzLineStyle);\n                ctx.beginPath();\n                for (const priceMark of data._internal_priceMarks) {\n                    const y = Math.round(priceMark._internal_coord * verticalPixelRatio);\n                    ctx.moveTo(-lineWidth, y);\n                    ctx.lineTo(bitmapSize.width + lineWidth, y);\n                }\n                ctx.stroke();\n            }\n        });\n    }\n}\n\nclass GridPaneView {\n    constructor(pane) {\n        this._private__renderer = new GridRenderer();\n        this._private__invalidated = true;\n        this._private__pane = pane;\n    }\n    _internal_update() {\n        this._private__invalidated = true;\n    }\n    _internal_renderer() {\n        if (this._private__invalidated) {\n            const gridOptions = this._private__pane._internal_model()._internal_options().grid;\n            const data = {\n                _internal_horzLinesVisible: gridOptions.horzLines.visible,\n                _internal_vertLinesVisible: gridOptions.vertLines.visible,\n                _internal_horzLinesColor: gridOptions.horzLines.color,\n                _internal_vertLinesColor: gridOptions.vertLines.color,\n                _internal_horzLineStyle: gridOptions.horzLines.style,\n                _internal_vertLineStyle: gridOptions.vertLines.style,\n                _internal_priceMarks: this._private__pane._internal_defaultPriceScale()._internal_marks(),\n                // need this conversiom because TimeMark is a part of external interface\n                // and fields inside TimeMark are not minified\n                _internal_timeMarks: (this._private__pane._internal_model()._internal_timeScale()._internal_marks() || []).map((tm) => {\n                    return { _internal_coord: tm.coord };\n                }),\n            };\n            this._private__renderer._internal_setData(data);\n            this._private__invalidated = false;\n        }\n        return this._private__renderer;\n    }\n}\n\nclass Grid {\n    constructor(pane) {\n        this._private__paneView = new GridPaneView(pane);\n    }\n    _internal_paneView() {\n        return this._private__paneView;\n    }\n}\n\nconst defLogFormula = {\n    _internal_logicalOffset: 4,\n    _internal_coordOffset: 0.0001,\n};\nfunction fromPercent(value, baseValue) {\n    if (baseValue < 0) {\n        value = -value;\n    }\n    return (value / 100) * baseValue + baseValue;\n}\nfunction toPercent(value, baseValue) {\n    const result = 100 * (value - baseValue) / baseValue;\n    return (baseValue < 0 ? -result : result);\n}\nfunction toPercentRange(priceRange, baseValue) {\n    const minPercent = toPercent(priceRange._internal_minValue(), baseValue);\n    const maxPercent = toPercent(priceRange._internal_maxValue(), baseValue);\n    return new PriceRangeImpl(minPercent, maxPercent);\n}\nfunction fromIndexedTo100(value, baseValue) {\n    value -= 100;\n    if (baseValue < 0) {\n        value = -value;\n    }\n    return (value / 100) * baseValue + baseValue;\n}\nfunction toIndexedTo100(value, baseValue) {\n    const result = 100 * (value - baseValue) / baseValue + 100;\n    return (baseValue < 0 ? -result : result);\n}\nfunction toIndexedTo100Range(priceRange, baseValue) {\n    const minPercent = toIndexedTo100(priceRange._internal_minValue(), baseValue);\n    const maxPercent = toIndexedTo100(priceRange._internal_maxValue(), baseValue);\n    return new PriceRangeImpl(minPercent, maxPercent);\n}\nfunction toLog(price, logFormula) {\n    const m = Math.abs(price);\n    if (m < 1e-15) {\n        return 0;\n    }\n    const res = Math.log10(m + logFormula._internal_coordOffset) + logFormula._internal_logicalOffset;\n    return ((price < 0) ? -res : res);\n}\nfunction fromLog(logical, logFormula) {\n    const m = Math.abs(logical);\n    if (m < 1e-15) {\n        return 0;\n    }\n    const res = Math.pow(10, m - logFormula._internal_logicalOffset) - logFormula._internal_coordOffset;\n    return (logical < 0) ? -res : res;\n}\nfunction convertPriceRangeToLog(priceRange, logFormula) {\n    if (priceRange === null) {\n        return null;\n    }\n    const min = toLog(priceRange._internal_minValue(), logFormula);\n    const max = toLog(priceRange._internal_maxValue(), logFormula);\n    return new PriceRangeImpl(min, max);\n}\nfunction canConvertPriceRangeFromLog(priceRange, logFormula) {\n    if (priceRange === null) {\n        return false;\n    }\n    const min = fromLog(priceRange._internal_minValue(), logFormula);\n    const max = fromLog(priceRange._internal_maxValue(), logFormula);\n    return isFinite(min) && isFinite(max);\n}\nfunction convertPriceRangeFromLog(priceRange, logFormula) {\n    if (priceRange === null) {\n        return null;\n    }\n    const min = fromLog(priceRange._internal_minValue(), logFormula);\n    const max = fromLog(priceRange._internal_maxValue(), logFormula);\n    return new PriceRangeImpl(min, max);\n}\nfunction logFormulaForPriceRange(range) {\n    if (range === null) {\n        return defLogFormula;\n    }\n    const diff = Math.abs(range._internal_maxValue() - range._internal_minValue());\n    if (diff >= 1 || diff < 1e-15) {\n        return defLogFormula;\n    }\n    const digits = Math.ceil(Math.abs(Math.log10(diff)));\n    const logicalOffset = defLogFormula._internal_logicalOffset + digits;\n    const coordOffset = 1 / Math.pow(10, logicalOffset);\n    return {\n        _internal_logicalOffset: logicalOffset,\n        _internal_coordOffset: coordOffset,\n    };\n}\nfunction logFormulasAreSame(f1, f2) {\n    return f1._internal_logicalOffset === f2._internal_logicalOffset && f1._internal_coordOffset === f2._internal_coordOffset;\n}\n\nclass PriceTickSpanCalculator {\n    constructor(base, integralDividers) {\n        this._private__base = base;\n        this._private__integralDividers = integralDividers;\n        if (isBaseDecimal(this._private__base)) {\n            this._private__fractionalDividers = [2, 2.5, 2];\n        }\n        else {\n            this._private__fractionalDividers = [];\n            for (let baseRest = this._private__base; baseRest !== 1;) {\n                if ((baseRest % 2) === 0) {\n                    this._private__fractionalDividers.push(2);\n                    baseRest /= 2;\n                }\n                else if ((baseRest % 5) === 0) {\n                    this._private__fractionalDividers.push(2, 2.5);\n                    baseRest /= 5;\n                }\n                else {\n                    throw new Error('unexpected base');\n                }\n                if (this._private__fractionalDividers.length > 100) {\n                    throw new Error('something wrong with base');\n                }\n            }\n        }\n    }\n    _internal_tickSpan(high, low, maxTickSpan) {\n        const minMovement = (this._private__base === 0) ? (0) : (1 / this._private__base);\n        let resultTickSpan = Math.pow(10, Math.max(0, Math.ceil(Math.log10(high - low))));\n        let index = 0;\n        let c = this._private__integralDividers[0];\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            // the second part is actual for small with very small values like 1e-10\n            // greaterOrEqual fails for such values\n            const resultTickSpanLargerMinMovement = greaterOrEqual(resultTickSpan, minMovement, 1e-14 /* Constants.TickSpanEpsilon */) && resultTickSpan > (minMovement + 1e-14 /* Constants.TickSpanEpsilon */);\n            const resultTickSpanLargerMaxTickSpan = greaterOrEqual(resultTickSpan, maxTickSpan * c, 1e-14 /* Constants.TickSpanEpsilon */);\n            const resultTickSpanLarger1 = greaterOrEqual(resultTickSpan, 1, 1e-14 /* Constants.TickSpanEpsilon */);\n            const haveToContinue = resultTickSpanLargerMinMovement && resultTickSpanLargerMaxTickSpan && resultTickSpanLarger1;\n            if (!haveToContinue) {\n                break;\n            }\n            resultTickSpan /= c;\n            c = this._private__integralDividers[++index % this._private__integralDividers.length];\n        }\n        if (resultTickSpan <= (minMovement + 1e-14 /* Constants.TickSpanEpsilon */)) {\n            resultTickSpan = minMovement;\n        }\n        resultTickSpan = Math.max(1, resultTickSpan);\n        if ((this._private__fractionalDividers.length > 0) && equal(resultTickSpan, 1, 1e-14 /* Constants.TickSpanEpsilon */)) {\n            index = 0;\n            c = this._private__fractionalDividers[0];\n            while (greaterOrEqual(resultTickSpan, maxTickSpan * c, 1e-14 /* Constants.TickSpanEpsilon */) && resultTickSpan > (minMovement + 1e-14 /* Constants.TickSpanEpsilon */)) {\n                resultTickSpan /= c;\n                c = this._private__fractionalDividers[++index % this._private__fractionalDividers.length];\n            }\n        }\n        return resultTickSpan;\n    }\n}\n\nconst TICK_DENSITY = 2.5;\nclass PriceTickMarkBuilder {\n    constructor(priceScale, base, coordinateToLogicalFunc, logicalToCoordinateFunc) {\n        this._private__marks = [];\n        this._private__priceScale = priceScale;\n        this._private__base = base;\n        this._private__coordinateToLogicalFunc = coordinateToLogicalFunc;\n        this._private__logicalToCoordinateFunc = logicalToCoordinateFunc;\n    }\n    _internal_tickSpan(high, low) {\n        if (high < low) {\n            throw new Error('high < low');\n        }\n        const scaleHeight = this._private__priceScale._internal_height();\n        const markHeight = this._private__tickMarkHeight();\n        const maxTickSpan = (high - low) * markHeight / scaleHeight;\n        const spanCalculator1 = new PriceTickSpanCalculator(this._private__base, [2, 2.5, 2]);\n        const spanCalculator2 = new PriceTickSpanCalculator(this._private__base, [2, 2, 2.5]);\n        const spanCalculator3 = new PriceTickSpanCalculator(this._private__base, [2.5, 2, 2]);\n        const spans = [];\n        spans.push(spanCalculator1._internal_tickSpan(high, low, maxTickSpan), spanCalculator2._internal_tickSpan(high, low, maxTickSpan), spanCalculator3._internal_tickSpan(high, low, maxTickSpan));\n        return min(spans);\n    }\n    _internal_rebuildTickMarks() {\n        const priceScale = this._private__priceScale;\n        const firstValue = priceScale._internal_firstValue();\n        if (firstValue === null) {\n            this._private__marks = [];\n            return;\n        }\n        const scaleHeight = priceScale._internal_height();\n        const bottom = this._private__coordinateToLogicalFunc(scaleHeight - 1, firstValue);\n        const top = this._private__coordinateToLogicalFunc(0, firstValue);\n        const extraTopBottomMargin = this._private__priceScale._internal_options().entireTextOnly ? this._private__fontHeight() / 2 : 0;\n        const minCoord = extraTopBottomMargin;\n        const maxCoord = scaleHeight - 1 - extraTopBottomMargin;\n        const high = Math.max(bottom, top);\n        const low = Math.min(bottom, top);\n        if (high === low) {\n            this._private__marks = [];\n            return;\n        }\n        const span = this._internal_tickSpan(high, low);\n        this._private__updateMarks(firstValue, span, high, low, minCoord, maxCoord);\n        if (priceScale._internal_hasVisibleEdgeMarks() && this._private__shouldApplyEdgeMarks(span, low, high)) {\n            const padding = this._private__priceScale._internal_getEdgeMarksPadding();\n            this._private__applyEdgeMarks(firstValue, span, minCoord, maxCoord, padding, padding * 2);\n        }\n        const logicals = this._private__marks.map((mark) => mark._internal_logical);\n        const labels = this._private__priceScale._internal_formatLogicalTickmarks(logicals);\n        for (let i = 0; i < this._private__marks.length; i++) {\n            this._private__marks[i]._internal_label = labels[i];\n        }\n    }\n    _internal_marks() {\n        return this._private__marks;\n    }\n    _private__fontHeight() {\n        return this._private__priceScale._internal_fontSize();\n    }\n    _private__tickMarkHeight() {\n        return Math.ceil(this._private__fontHeight() * TICK_DENSITY);\n    }\n    _private__updateMarks(firstValue, span, high, low, minCoord, maxCoord) {\n        const marks = this._private__marks;\n        const priceScale = this._private__priceScale;\n        let mod = high % span;\n        mod += mod < 0 ? span : 0;\n        const sign = (high >= low) ? 1 : -1;\n        let prevCoord = null;\n        let targetIndex = 0;\n        for (let logical = high - mod; logical > low; logical -= span) {\n            const coord = this._private__logicalToCoordinateFunc(logical, firstValue, true);\n            // check if there is place for it\n            // this is required for log scale\n            if (prevCoord !== null && Math.abs(coord - prevCoord) < this._private__tickMarkHeight()) {\n                continue;\n            }\n            // check if a tick mark is partially visible and skip it if entireTextOnly is true\n            if (coord < minCoord || coord > maxCoord) {\n                continue;\n            }\n            if (targetIndex < marks.length) {\n                marks[targetIndex]._internal_coord = coord;\n                marks[targetIndex]._internal_label = priceScale._internal_formatLogical(logical);\n                marks[targetIndex]._internal_logical = logical;\n            }\n            else {\n                marks.push({\n                    _internal_coord: coord,\n                    _internal_label: priceScale._internal_formatLogical(logical),\n                    _internal_logical: logical,\n                });\n            }\n            targetIndex++;\n            prevCoord = coord;\n            if (priceScale._internal_isLog()) {\n                // recalc span\n                span = this._internal_tickSpan(logical * sign, low);\n            }\n        }\n        marks.length = targetIndex;\n    }\n    _private__applyEdgeMarks(firstValue, span, minCoord, maxCoord, minPadding, maxPadding) {\n        const marks = this._private__marks;\n        // top boundary\n        const topMark = this._private__computeBoundaryPriceMark(firstValue, minCoord, minPadding, maxPadding);\n        // bottom boundary\n        const bottomMark = this._private__computeBoundaryPriceMark(firstValue, maxCoord, -maxPadding, -minPadding);\n        const spanPx = this._private__logicalToCoordinateFunc(0, firstValue, true)\n            - this._private__logicalToCoordinateFunc(span, firstValue, true);\n        if (marks.length > 0 && marks[0]._internal_coord - topMark._internal_coord < spanPx / 2) {\n            marks.shift();\n        }\n        if (marks.length > 0 && bottomMark._internal_coord - marks[marks.length - 1]._internal_coord < spanPx / 2) {\n            marks.pop();\n        }\n        marks.unshift(topMark);\n        marks.push(bottomMark);\n    }\n    _private__computeBoundaryPriceMark(firstValue, coord, minPadding, maxPadding) {\n        const avgPadding = (minPadding + maxPadding) / 2;\n        const value1 = this._private__coordinateToLogicalFunc(coord + minPadding, firstValue);\n        const value2 = this._private__coordinateToLogicalFunc(coord + maxPadding, firstValue);\n        const minValue = Math.min(value1, value2);\n        const maxValue = Math.max(value1, value2);\n        const valueSpan = Math.max(0.1, this._internal_tickSpan(maxValue, minValue));\n        const value = this._private__coordinateToLogicalFunc(coord + avgPadding, firstValue);\n        const roundedValue = value - (value % valueSpan);\n        const roundedCoord = this._private__logicalToCoordinateFunc(roundedValue, firstValue, true);\n        return { _internal_label: this._private__priceScale._internal_formatLogical(roundedValue), _internal_coord: roundedCoord, _internal_logical: roundedValue };\n    }\n    _private__shouldApplyEdgeMarks(span, low, high) {\n        let range = ensure(this._private__priceScale._internal_priceRange());\n        if (this._private__priceScale._internal_isLog()) {\n            range = convertPriceRangeFromLog(range, this._private__priceScale._internal_getLogFormula());\n        }\n        return (range._internal_minValue() - low < span) && (high - range._internal_maxValue() < span);\n    }\n}\n\nfunction sortSources(sources) {\n    return sources.slice().sort((s1, s2) => {\n        return (ensureNotNull(s1._internal_zorder()) - ensureNotNull(s2._internal_zorder()));\n    });\n}\n\n/**\n * Represents the price scale mode.\n */\nvar PriceScaleMode;\n(function (PriceScaleMode) {\n    /**\n     * Price scale shows prices. Price range changes linearly.\n     */\n    PriceScaleMode[PriceScaleMode[\"Normal\"] = 0] = \"Normal\";\n    /**\n     * Price scale shows prices. Price range changes logarithmically.\n     */\n    PriceScaleMode[PriceScaleMode[\"Logarithmic\"] = 1] = \"Logarithmic\";\n    /**\n     * Price scale shows percentage values according the first visible value of the price scale.\n     * The first visible value is 0% in this mode.\n     */\n    PriceScaleMode[PriceScaleMode[\"Percentage\"] = 2] = \"Percentage\";\n    /**\n     * The same as percentage mode, but the first value is moved to 100.\n     */\n    PriceScaleMode[PriceScaleMode[\"IndexedTo100\"] = 3] = \"IndexedTo100\";\n})(PriceScaleMode || (PriceScaleMode = {}));\nconst percentageFormatter = new PercentageFormatter();\nconst defaultPriceFormatter = new PriceFormatter(100, 1);\nclass PriceScale {\n    constructor(id, options, layoutOptions, localizationOptions, colorParser) {\n        this._private__height = 0;\n        this._private__internalHeightCache = null;\n        this._private__priceRange = null;\n        this._private__priceRangeSnapshot = null;\n        this._private__invalidatedForRange = { _internal_isValid: false, _internal_visibleBars: null };\n        this._private__isCustomPriceRange = false;\n        this._private__marginAbove = 0;\n        this._private__marginBelow = 0;\n        this._private__onMarksChanged = new Delegate();\n        this._private__modeChanged = new Delegate();\n        this._private__dataSources = [];\n        this._private__formatterSource = null;\n        this._private__cachedOrderedSources = null;\n        this._private__marksCache = null;\n        this._private__scaleStartPoint = null;\n        this._private__scrollStartPoint = null;\n        this._private__formatter = defaultPriceFormatter;\n        this._private__logFormula = logFormulaForPriceRange(null);\n        this._private__id = id;\n        this._private__options = options;\n        this._private__layoutOptions = layoutOptions;\n        this._private__localizationOptions = localizationOptions;\n        this._private__colorParser = colorParser;\n        this._private__markBuilder = new PriceTickMarkBuilder(this, 100, this._private__coordinateToLogical.bind(this), this._private__logicalToCoordinate.bind(this));\n    }\n    _internal_id() {\n        return this._private__id;\n    }\n    _internal_options() {\n        return this._private__options;\n    }\n    _internal_applyOptions(options) {\n        merge(this._private__options, options);\n        this._internal_updateFormatter();\n        if (options.mode !== undefined) {\n            this._internal_setMode({ _internal_mode: options.mode });\n        }\n        if (options.scaleMargins !== undefined) {\n            const top = ensureDefined(options.scaleMargins.top);\n            const bottom = ensureDefined(options.scaleMargins.bottom);\n            if (top < 0 || top > 1) {\n                throw new Error(`Invalid top margin - expect value between 0 and 1, given=${top}`);\n            }\n            if (bottom < 0 || bottom > 1) {\n                throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${bottom}`);\n            }\n            if (top + bottom > 1) {\n                throw new Error(`Invalid margins - sum of margins must be less than 1, given=${top + bottom}`);\n            }\n            this._private__invalidateInternalHeightCache();\n            this._private__marksCache = null;\n        }\n    }\n    _internal_isAutoScale() {\n        return this._private__options.autoScale;\n    }\n    _internal_isCustomPriceRange() {\n        return this._private__isCustomPriceRange;\n    }\n    _internal_isLog() {\n        return this._private__options.mode === 1 /* PriceScaleMode.Logarithmic */;\n    }\n    _internal_isPercentage() {\n        return this._private__options.mode === 2 /* PriceScaleMode.Percentage */;\n    }\n    _internal_isIndexedTo100() {\n        return this._private__options.mode === 3 /* PriceScaleMode.IndexedTo100 */;\n    }\n    _internal_getLogFormula() {\n        return this._private__logFormula;\n    }\n    _internal_mode() {\n        return {\n            _internal_autoScale: this._private__options.autoScale,\n            _internal_isInverted: this._private__options.invertScale,\n            _internal_mode: this._private__options.mode,\n        };\n    }\n    // eslint-disable-next-line complexity\n    _internal_setMode(newMode) {\n        const oldMode = this._internal_mode();\n        let priceRange = null;\n        if (newMode._internal_autoScale !== undefined) {\n            this._private__options.autoScale = newMode._internal_autoScale;\n        }\n        if (newMode._internal_mode !== undefined) {\n            this._private__options.mode = newMode._internal_mode;\n            if (newMode._internal_mode === 2 /* PriceScaleMode.Percentage */ || newMode._internal_mode === 3 /* PriceScaleMode.IndexedTo100 */) {\n                this._private__options.autoScale = true;\n            }\n            // TODO: Remove after making rebuildTickMarks lazy\n            this._private__invalidatedForRange._internal_isValid = false;\n        }\n        // define which scale converted from\n        if (oldMode._internal_mode === 1 /* PriceScaleMode.Logarithmic */ && newMode._internal_mode !== oldMode._internal_mode) {\n            if (canConvertPriceRangeFromLog(this._private__priceRange, this._private__logFormula)) {\n                priceRange = convertPriceRangeFromLog(this._private__priceRange, this._private__logFormula);\n                if (priceRange !== null) {\n                    this._internal_setPriceRange(priceRange);\n                }\n            }\n            else {\n                this._private__options.autoScale = true;\n            }\n        }\n        // define which scale converted to\n        if (newMode._internal_mode === 1 /* PriceScaleMode.Logarithmic */ && newMode._internal_mode !== oldMode._internal_mode) {\n            priceRange = convertPriceRangeToLog(this._private__priceRange, this._private__logFormula);\n            if (priceRange !== null) {\n                this._internal_setPriceRange(priceRange);\n            }\n        }\n        const modeChanged = oldMode._internal_mode !== this._private__options.mode;\n        if (modeChanged && (oldMode._internal_mode === 2 /* PriceScaleMode.Percentage */ || this._internal_isPercentage())) {\n            this._internal_updateFormatter();\n        }\n        if (modeChanged && (oldMode._internal_mode === 3 /* PriceScaleMode.IndexedTo100 */ || this._internal_isIndexedTo100())) {\n            this._internal_updateFormatter();\n        }\n        if (newMode._internal_isInverted !== undefined && oldMode._internal_isInverted !== newMode._internal_isInverted) {\n            this._private__options.invertScale = newMode._internal_isInverted;\n            this._private__onIsInvertedChanged();\n        }\n        this._private__modeChanged._internal_fire(oldMode, this._internal_mode());\n    }\n    _internal_modeChanged() {\n        return this._private__modeChanged;\n    }\n    _internal_fontSize() {\n        return this._private__layoutOptions.fontSize;\n    }\n    _internal_height() {\n        return this._private__height;\n    }\n    _internal_setHeight(value) {\n        if (this._private__height === value) {\n            return;\n        }\n        this._private__height = value;\n        this._private__invalidateInternalHeightCache();\n        this._private__marksCache = null;\n    }\n    _internal_internalHeight() {\n        if (this._private__internalHeightCache) {\n            return this._private__internalHeightCache;\n        }\n        const res = this._internal_height() - this._private__topMarginPx() - this._private__bottomMarginPx();\n        this._private__internalHeightCache = res;\n        return res;\n    }\n    _internal_priceRange() {\n        this._private__makeSureItIsValid();\n        return this._private__priceRange;\n    }\n    _internal_setPriceRange(newPriceRange, isForceSetValue) {\n        const oldPriceRange = this._private__priceRange;\n        if (!isForceSetValue &&\n            !(oldPriceRange === null && newPriceRange !== null) &&\n            (oldPriceRange === null || oldPriceRange._internal_equals(newPriceRange))) {\n            return;\n        }\n        this._private__marksCache = null;\n        this._private__priceRange = newPriceRange;\n    }\n    _internal_setCustomPriceRange(newPriceRange) {\n        this._internal_setPriceRange(newPriceRange);\n        this._private__toggleCustomPriceRange(newPriceRange !== null);\n    }\n    _internal_isEmpty() {\n        this._private__makeSureItIsValid();\n        return this._private__height === 0 || !this._private__priceRange || this._private__priceRange._internal_isEmpty();\n    }\n    _internal_invertedCoordinate(coordinate) {\n        return this._internal_isInverted() ? coordinate : this._internal_height() - 1 - coordinate;\n    }\n    _internal_priceToCoordinate(price, baseValue) {\n        if (this._internal_isPercentage()) {\n            price = toPercent(price, baseValue);\n        }\n        else if (this._internal_isIndexedTo100()) {\n            price = toIndexedTo100(price, baseValue);\n        }\n        return this._private__logicalToCoordinate(price, baseValue);\n    }\n    _internal_pointsArrayToCoordinates(points, baseValue, visibleRange) {\n        this._private__makeSureItIsValid();\n        const bh = this._private__bottomMarginPx();\n        const range = ensureNotNull(this._internal_priceRange());\n        const min = range._internal_minValue();\n        const max = range._internal_maxValue();\n        const ih = (this._internal_internalHeight() - 1);\n        const isInverted = this._internal_isInverted();\n        const hmm = ih / (max - min);\n        const fromIndex = (visibleRange === undefined) ? 0 : visibleRange.from;\n        const toIndex = (visibleRange === undefined) ? points.length : visibleRange.to;\n        const transformFn = this._private__getCoordinateTransformer();\n        for (let i = fromIndex; i < toIndex; i++) {\n            const point = points[i];\n            const price = point._internal_price;\n            if (isNaN(price)) {\n                continue;\n            }\n            let logical = price;\n            if (transformFn !== null) {\n                logical = transformFn(point._internal_price, baseValue);\n            }\n            const invCoordinate = bh + hmm * (logical - min);\n            const coordinate = isInverted ? invCoordinate : this._private__height - 1 - invCoordinate;\n            point._internal_y = coordinate;\n        }\n    }\n    _internal_barPricesToCoordinates(pricesList, baseValue, visibleRange) {\n        this._private__makeSureItIsValid();\n        const bh = this._private__bottomMarginPx();\n        const range = ensureNotNull(this._internal_priceRange());\n        const min = range._internal_minValue();\n        const max = range._internal_maxValue();\n        const ih = (this._internal_internalHeight() - 1);\n        const isInverted = this._internal_isInverted();\n        const hmm = ih / (max - min);\n        const fromIndex = (visibleRange === undefined) ? 0 : visibleRange.from;\n        const toIndex = (visibleRange === undefined) ? pricesList.length : visibleRange.to;\n        const transformFn = this._private__getCoordinateTransformer();\n        for (let i = fromIndex; i < toIndex; i++) {\n            const bar = pricesList[i];\n            let openLogical = bar._internal_open;\n            let highLogical = bar._internal_high;\n            let lowLogical = bar._internal_low;\n            let closeLogical = bar._internal_close;\n            if (transformFn !== null) {\n                openLogical = transformFn(bar._internal_open, baseValue);\n                highLogical = transformFn(bar._internal_high, baseValue);\n                lowLogical = transformFn(bar._internal_low, baseValue);\n                closeLogical = transformFn(bar._internal_close, baseValue);\n            }\n            let invCoordinate = bh + hmm * (openLogical - min);\n            let coordinate = isInverted ? invCoordinate : this._private__height - 1 - invCoordinate;\n            bar._internal_openY = coordinate;\n            invCoordinate = bh + hmm * (highLogical - min);\n            coordinate = isInverted ? invCoordinate : this._private__height - 1 - invCoordinate;\n            bar._internal_highY = coordinate;\n            invCoordinate = bh + hmm * (lowLogical - min);\n            coordinate = isInverted ? invCoordinate : this._private__height - 1 - invCoordinate;\n            bar._internal_lowY = coordinate;\n            invCoordinate = bh + hmm * (closeLogical - min);\n            coordinate = isInverted ? invCoordinate : this._private__height - 1 - invCoordinate;\n            bar._internal_closeY = coordinate;\n        }\n    }\n    _internal_coordinateToPrice(coordinate, baseValue) {\n        const logical = this._private__coordinateToLogical(coordinate, baseValue);\n        return this._internal_logicalToPrice(logical, baseValue);\n    }\n    _internal_logicalToPrice(logical, baseValue) {\n        let value = logical;\n        if (this._internal_isPercentage()) {\n            value = fromPercent(value, baseValue);\n        }\n        else if (this._internal_isIndexedTo100()) {\n            value = fromIndexedTo100(value, baseValue);\n        }\n        return value;\n    }\n    _internal_dataSources() {\n        return this._private__dataSources;\n    }\n    _internal_orderedSources() {\n        if (!this._private__cachedOrderedSources) {\n            this._private__cachedOrderedSources = sortSources(this._private__dataSources);\n        }\n        return this._private__cachedOrderedSources;\n    }\n    _internal_addDataSource(source) {\n        if (this._private__dataSources.indexOf(source) !== -1) {\n            return;\n        }\n        this._private__dataSources.push(source);\n        this._internal_updateFormatter();\n        this._internal_invalidateSourcesCache();\n    }\n    _internal_removeDataSource(source) {\n        const index = this._private__dataSources.indexOf(source);\n        if (index === -1) {\n            throw new Error('source is not attached to scale');\n        }\n        this._private__dataSources.splice(index, 1);\n        if (this._private__dataSources.length === 0) {\n            this._internal_setMode({\n                _internal_autoScale: true,\n            });\n            // if no sources on price scale let's clear price range cache as well as enabling auto scale\n            this._internal_setPriceRange(null);\n        }\n        this._internal_updateFormatter();\n        this._internal_invalidateSourcesCache();\n    }\n    _internal_firstValue() {\n        // TODO: cache the result\n        let result = null;\n        for (const source of this._private__dataSources) {\n            const firstValue = source._internal_firstValue();\n            if (firstValue === null) {\n                continue;\n            }\n            if (result === null || firstValue._internal_timePoint < result._internal_timePoint) {\n                result = firstValue;\n            }\n        }\n        return result === null ? null : result._internal_value;\n    }\n    _internal_isInverted() {\n        return this._private__options.invertScale;\n    }\n    _internal_marks() {\n        const firstValueIsNull = this._internal_firstValue() === null;\n        // do not recalculate marks if firstValueIsNull is true because in this case we'll always get empty result\n        // this could happen in case when a series had some data and then you set empty data to it (in a simplified case)\n        // we could display an empty price scale, but this is not good from UX\n        // so in this case we need to keep an previous marks to display them on the scale\n        // as one of possible examples for this situation could be the following:\n        // let's say you have a study/indicator attached to a price scale and then you decide to stop it, i.e. remove its data because of its visibility\n        // a user will see the previous marks on the scale until you turn on your study back or remove it from the chart completely\n        if (this._private__marksCache !== null && (firstValueIsNull || this._private__marksCache._internal_firstValueIsNull === firstValueIsNull)) {\n            return this._private__marksCache._internal_marks;\n        }\n        this._private__markBuilder._internal_rebuildTickMarks();\n        const marks = this._private__markBuilder._internal_marks();\n        this._private__marksCache = { _internal_marks: marks, _internal_firstValueIsNull: firstValueIsNull };\n        this._private__onMarksChanged._internal_fire();\n        return marks;\n    }\n    _internal_onMarksChanged() {\n        return this._private__onMarksChanged;\n    }\n    _internal_startScale(x) {\n        if (this._internal_isPercentage() || this._internal_isIndexedTo100()) {\n            return;\n        }\n        if (this._private__scaleStartPoint !== null || this._private__priceRangeSnapshot !== null) {\n            return;\n        }\n        if (this._internal_isEmpty()) {\n            return;\n        }\n        // invert x\n        this._private__scaleStartPoint = this._private__height - x;\n        this._private__priceRangeSnapshot = ensureNotNull(this._internal_priceRange())._internal_clone();\n    }\n    _internal_scaleTo(x) {\n        if (this._internal_isPercentage() || this._internal_isIndexedTo100()) {\n            return;\n        }\n        if (this._private__scaleStartPoint === null) {\n            return;\n        }\n        this._internal_setMode({\n            _internal_autoScale: false,\n        });\n        // invert x\n        x = this._private__height - x;\n        if (x < 0) {\n            x = 0;\n        }\n        let scaleCoeff = (this._private__scaleStartPoint + (this._private__height - 1) * 0.2) / (x + (this._private__height - 1) * 0.2);\n        const newPriceRange = ensureNotNull(this._private__priceRangeSnapshot)._internal_clone();\n        scaleCoeff = Math.max(scaleCoeff, 0.1);\n        newPriceRange._internal_scaleAroundCenter(scaleCoeff);\n        this._internal_setPriceRange(newPriceRange);\n    }\n    _internal_endScale() {\n        if (this._internal_isPercentage() || this._internal_isIndexedTo100()) {\n            return;\n        }\n        this._private__scaleStartPoint = null;\n        this._private__priceRangeSnapshot = null;\n    }\n    _internal_startScroll(x) {\n        if (this._internal_isAutoScale()) {\n            return;\n        }\n        if (this._private__scrollStartPoint !== null || this._private__priceRangeSnapshot !== null) {\n            return;\n        }\n        if (this._internal_isEmpty()) {\n            return;\n        }\n        this._private__scrollStartPoint = x;\n        this._private__priceRangeSnapshot = ensureNotNull(this._internal_priceRange())._internal_clone();\n    }\n    _internal_scrollTo(x) {\n        if (this._internal_isAutoScale()) {\n            return;\n        }\n        if (this._private__scrollStartPoint === null) {\n            return;\n        }\n        const priceUnitsPerPixel = ensureNotNull(this._internal_priceRange())._internal_length() / (this._internal_internalHeight() - 1);\n        let pixelDelta = x - this._private__scrollStartPoint;\n        if (this._internal_isInverted()) {\n            pixelDelta *= -1;\n        }\n        const priceDelta = pixelDelta * priceUnitsPerPixel;\n        const newPriceRange = ensureNotNull(this._private__priceRangeSnapshot)._internal_clone();\n        newPriceRange._internal_shift(priceDelta);\n        this._internal_setPriceRange(newPriceRange, true);\n        this._private__marksCache = null;\n    }\n    _internal_endScroll() {\n        if (this._internal_isAutoScale()) {\n            return;\n        }\n        if (this._private__scrollStartPoint === null) {\n            return;\n        }\n        this._private__scrollStartPoint = null;\n        this._private__priceRangeSnapshot = null;\n    }\n    _internal_formatter() {\n        if (!this._private__formatter) {\n            this._internal_updateFormatter();\n        }\n        return this._private__formatter;\n    }\n    _internal_formatPrice(price, firstValue) {\n        switch (this._private__options.mode) {\n            case 2 /* PriceScaleMode.Percentage */:\n                return this._private__formatPercentage(toPercent(price, firstValue));\n            case 3 /* PriceScaleMode.IndexedTo100 */:\n                return this._internal_formatter().format(toIndexedTo100(price, firstValue));\n            default:\n                return this._private__formatPrice(price);\n        }\n    }\n    _internal_formatLogical(logical) {\n        switch (this._private__options.mode) {\n            case 2 /* PriceScaleMode.Percentage */:\n                return this._private__formatPercentage(logical);\n            case 3 /* PriceScaleMode.IndexedTo100 */:\n                return this._internal_formatter().format(logical);\n            default:\n                return this._private__formatPrice(logical);\n        }\n    }\n    _internal_formatLogicalTickmarks(logicals) {\n        switch (this._private__options.mode) {\n            case 2 /* PriceScaleMode.Percentage */:\n                return this._private__formatPercentageTickmarks(logicals);\n            case 3 /* PriceScaleMode.IndexedTo100 */:\n                return this._internal_formatter().formatTickmarks(logicals);\n            default:\n                return this._private__formatTickmarks(logicals);\n        }\n    }\n    _internal_formatPriceAbsolute(price) {\n        return this._private__formatPrice(price, ensureNotNull(this._private__formatterSource)._internal_formatter());\n    }\n    _internal_formatPricePercentage(price, baseValue) {\n        price = toPercent(price, baseValue);\n        return this._private__formatPercentage(price, percentageFormatter);\n    }\n    _internal_sourcesForAutoScale() {\n        return this._private__dataSources;\n    }\n    _internal_recalculatePriceRange(visibleBars) {\n        this._private__invalidatedForRange = {\n            _internal_visibleBars: visibleBars,\n            _internal_isValid: false,\n        };\n    }\n    _internal_updateAllViews() {\n        this._private__dataSources.forEach((s) => s._internal_updateAllViews());\n    }\n    _internal_hasVisibleEdgeMarks() {\n        return this._private__options.ensureEdgeTickMarksVisible && this._internal_isAutoScale();\n    }\n    _internal_getEdgeMarksPadding() {\n        return this._internal_fontSize() / 2;\n    }\n    _internal_updateFormatter() {\n        this._private__marksCache = null;\n        let zOrder = Infinity;\n        this._private__formatterSource = null;\n        // choose source with the lowest zorder\n        for (const source of this._private__dataSources) {\n            if (source._internal_zorder() < zOrder) {\n                zOrder = source._internal_zorder();\n                this._private__formatterSource = source;\n            }\n        }\n        let base = 100;\n        if (this._private__formatterSource !== null) {\n            base = Math.round(1 / this._private__formatterSource._internal_minMove());\n        }\n        this._private__formatter = defaultPriceFormatter;\n        if (this._internal_isPercentage()) {\n            this._private__formatter = percentageFormatter;\n            base = 100;\n        }\n        else if (this._internal_isIndexedTo100()) {\n            this._private__formatter = new PriceFormatter(100, 1);\n            base = 100;\n        }\n        else {\n            if (this._private__formatterSource !== null) {\n                // user\n                this._private__formatter = this._private__formatterSource._internal_formatter();\n            }\n        }\n        this._private__markBuilder = new PriceTickMarkBuilder(this, base, this._private__coordinateToLogical.bind(this), this._private__logicalToCoordinate.bind(this));\n        this._private__markBuilder._internal_rebuildTickMarks();\n    }\n    _internal_invalidateSourcesCache() {\n        this._private__cachedOrderedSources = null;\n    }\n    _internal_colorParser() {\n        return this._private__colorParser;\n    }\n    _private__toggleCustomPriceRange(v) {\n        this._private__isCustomPriceRange = v;\n    }\n    _private__topMarginPx() {\n        return this._internal_isInverted()\n            ? this._private__options.scaleMargins.bottom * this._internal_height() + this._private__marginBelow\n            : this._private__options.scaleMargins.top * this._internal_height() + this._private__marginAbove;\n    }\n    _private__bottomMarginPx() {\n        return this._internal_isInverted()\n            ? this._private__options.scaleMargins.top * this._internal_height() + this._private__marginAbove\n            : this._private__options.scaleMargins.bottom * this._internal_height() + this._private__marginBelow;\n    }\n    _private__makeSureItIsValid() {\n        if (!this._private__invalidatedForRange._internal_isValid) {\n            this._private__invalidatedForRange._internal_isValid = true;\n            this._private__recalculatePriceRangeImpl();\n        }\n    }\n    _private__invalidateInternalHeightCache() {\n        this._private__internalHeightCache = null;\n    }\n    _private__logicalToCoordinate(logical, baseValue) {\n        this._private__makeSureItIsValid();\n        if (this._internal_isEmpty()) {\n            return 0;\n        }\n        logical = this._internal_isLog() && logical ? toLog(logical, this._private__logFormula) : logical;\n        const range = ensureNotNull(this._internal_priceRange());\n        const invCoordinate = this._private__bottomMarginPx() +\n            (this._internal_internalHeight() - 1) * (logical - range._internal_minValue()) / range._internal_length();\n        const coordinate = this._internal_invertedCoordinate(invCoordinate);\n        return coordinate;\n    }\n    _private__coordinateToLogical(coordinate, baseValue) {\n        this._private__makeSureItIsValid();\n        if (this._internal_isEmpty()) {\n            return 0;\n        }\n        const invCoordinate = this._internal_invertedCoordinate(coordinate);\n        const range = ensureNotNull(this._internal_priceRange());\n        const logical = range._internal_minValue() + range._internal_length() *\n            ((invCoordinate - this._private__bottomMarginPx()) / (this._internal_internalHeight() - 1));\n        return this._internal_isLog() ? fromLog(logical, this._private__logFormula) : logical;\n    }\n    _private__onIsInvertedChanged() {\n        this._private__marksCache = null;\n        this._private__markBuilder._internal_rebuildTickMarks();\n    }\n    // eslint-disable-next-line complexity\n    _private__recalculatePriceRangeImpl() {\n        if (this._internal_isCustomPriceRange() && !this._internal_isAutoScale()) {\n            return;\n        }\n        const visibleBars = this._private__invalidatedForRange._internal_visibleBars;\n        if (visibleBars === null) {\n            return;\n        }\n        let priceRange = null;\n        const sources = this._internal_sourcesForAutoScale();\n        let marginAbove = 0;\n        let marginBelow = 0;\n        for (const source of sources) {\n            if (!source._internal_visible()) {\n                continue;\n            }\n            const firstValue = source._internal_firstValue();\n            if (firstValue === null) {\n                continue;\n            }\n            const autoScaleInfo = source._internal_autoscaleInfo(visibleBars._internal_left(), visibleBars._internal_right());\n            let sourceRange = autoScaleInfo && autoScaleInfo._internal_priceRange();\n            if (sourceRange !== null) {\n                switch (this._private__options.mode) {\n                    case 1 /* PriceScaleMode.Logarithmic */:\n                        sourceRange = convertPriceRangeToLog(sourceRange, this._private__logFormula);\n                        break;\n                    case 2 /* PriceScaleMode.Percentage */:\n                        sourceRange = toPercentRange(sourceRange, firstValue._internal_value);\n                        break;\n                    case 3 /* PriceScaleMode.IndexedTo100 */:\n                        sourceRange = toIndexedTo100Range(sourceRange, firstValue._internal_value);\n                        break;\n                }\n                if (priceRange === null) {\n                    priceRange = sourceRange;\n                }\n                else {\n                    priceRange = priceRange._internal_merge(ensureNotNull(sourceRange));\n                }\n                if (autoScaleInfo !== null) {\n                    const margins = autoScaleInfo._internal_margins();\n                    if (margins !== null) {\n                        marginAbove = Math.max(marginAbove, margins.above);\n                        marginBelow = Math.max(marginBelow, margins.below);\n                    }\n                }\n            }\n        }\n        if (this._internal_hasVisibleEdgeMarks()) {\n            marginAbove = Math.max(marginAbove, this._internal_getEdgeMarksPadding());\n            marginBelow = Math.max(marginBelow, this._internal_getEdgeMarksPadding());\n        }\n        if (marginAbove !== this._private__marginAbove || marginBelow !== this._private__marginBelow) {\n            this._private__marginAbove = marginAbove;\n            this._private__marginBelow = marginBelow;\n            this._private__marksCache = null;\n            this._private__invalidateInternalHeightCache();\n        }\n        if (priceRange !== null) {\n            // keep current range is new is empty\n            if (priceRange._internal_minValue() === priceRange._internal_maxValue()) {\n                const formatterSource = this._private__formatterSource;\n                const minMove = formatterSource === null || this._internal_isPercentage() || this._internal_isIndexedTo100() ? 1 : formatterSource._internal_minMove();\n                // if price range is degenerated to 1 point let's extend it by 10 min move values\n                // to avoid incorrect range and empty (blank) scale (in case of min tick much greater than 1)\n                const extendValue = 5 * minMove;\n                if (this._internal_isLog()) {\n                    priceRange = convertPriceRangeFromLog(priceRange, this._private__logFormula);\n                }\n                priceRange = new PriceRangeImpl(priceRange._internal_minValue() - extendValue, priceRange._internal_maxValue() + extendValue);\n                if (this._internal_isLog()) {\n                    priceRange = convertPriceRangeToLog(priceRange, this._private__logFormula);\n                }\n            }\n            if (this._internal_isLog()) {\n                const rawRange = convertPriceRangeFromLog(priceRange, this._private__logFormula);\n                const newLogFormula = logFormulaForPriceRange(rawRange);\n                if (!logFormulasAreSame(newLogFormula, this._private__logFormula)) {\n                    const rawSnapshot = this._private__priceRangeSnapshot !== null ? convertPriceRangeFromLog(this._private__priceRangeSnapshot, this._private__logFormula) : null;\n                    this._private__logFormula = newLogFormula;\n                    priceRange = convertPriceRangeToLog(rawRange, newLogFormula);\n                    if (rawSnapshot !== null) {\n                        this._private__priceRangeSnapshot = convertPriceRangeToLog(rawSnapshot, newLogFormula);\n                    }\n                }\n            }\n            this._internal_setPriceRange(priceRange);\n        }\n        else {\n            // reset empty to default\n            if (this._private__priceRange === null) {\n                this._internal_setPriceRange(new PriceRangeImpl(-0.5, 0.5));\n                this._private__logFormula = logFormulaForPriceRange(null);\n            }\n        }\n    }\n    _private__getCoordinateTransformer() {\n        if (this._internal_isPercentage()) {\n            return toPercent;\n        }\n        else if (this._internal_isIndexedTo100()) {\n            return toIndexedTo100;\n        }\n        else if (this._internal_isLog()) {\n            return (price) => toLog(price, this._private__logFormula);\n        }\n        return null;\n    }\n    _private__formatValue(value, formatter, fallbackFormatter) {\n        if (formatter === undefined) {\n            if (fallbackFormatter === undefined) {\n                fallbackFormatter = this._internal_formatter();\n            }\n            return fallbackFormatter.format(value);\n        }\n        return formatter(value);\n    }\n    _private__formatValues(values, formatter, fallbackFormatter) {\n        if (formatter === undefined) {\n            if (fallbackFormatter === undefined) {\n                fallbackFormatter = this._internal_formatter();\n            }\n            return fallbackFormatter.formatTickmarks(values);\n        }\n        return formatter(values);\n    }\n    _private__formatPrice(price, fallbackFormatter) {\n        return this._private__formatValue(price, this._private__localizationOptions.priceFormatter, fallbackFormatter);\n    }\n    _private__formatTickmarks(prices, fallbackFormatter) {\n        const priceFormatter = this._private__localizationOptions.priceFormatter;\n        return this._private__formatValues(prices, this._private__localizationOptions.tickmarksPriceFormatter ?? (priceFormatter ? (values) => values.map(priceFormatter) : undefined), fallbackFormatter);\n    }\n    _private__formatPercentage(percentage, fallbackFormatter) {\n        return this._private__formatValue(percentage, this._private__localizationOptions.percentageFormatter, fallbackFormatter);\n    }\n    _private__formatPercentageTickmarks(percentages, fallbackFormatter) {\n        const tickmarksPercentageFormatter = this._private__localizationOptions.percentageFormatter;\n        return this._private__formatValues(percentages, this._private__localizationOptions.tickmarksPercentageFormatter ?? (tickmarksPercentageFormatter ? (values) => values.map(tickmarksPercentageFormatter) : undefined), fallbackFormatter);\n    }\n}\n\nfunction isSeries(source) {\n    return source instanceof Series;\n}\nconst DEFAULT_STRETCH_FACTOR = 1;\nconst MIN_PANE_HEIGHT = 30;\nclass Pane {\n    constructor(timeScale, model) {\n        this._private__dataSources = [];\n        this._private__overlaySourcesByScaleId = new Map();\n        this._private__height = 0;\n        this._private__width = 0;\n        this._private__stretchFactor = DEFAULT_STRETCH_FACTOR;\n        this._private__cachedOrderedSources = null;\n        this._private__preserveEmptyPane = false;\n        this._private__destroyed = new Delegate();\n        this._private__primitives = [];\n        this._private__timeScale = timeScale;\n        this._private__model = model;\n        this._private__grid = new Grid(this);\n        const options = model._internal_options();\n        this._private__leftPriceScale = this._private__createPriceScale(\"left\" /* DefaultPriceScaleId.Left */, options.leftPriceScale);\n        this._private__rightPriceScale = this._private__createPriceScale(\"right\" /* DefaultPriceScaleId.Right */, options.rightPriceScale);\n        this._private__leftPriceScale._internal_modeChanged()._internal_subscribe(this._private__onPriceScaleModeChanged.bind(this, this._private__leftPriceScale), this);\n        this._private__rightPriceScale._internal_modeChanged()._internal_subscribe(this._private__onPriceScaleModeChanged.bind(this, this._private__rightPriceScale), this);\n        this._internal_applyScaleOptions(options);\n    }\n    _internal_applyScaleOptions(options) {\n        if (options.leftPriceScale) {\n            this._private__leftPriceScale._internal_applyOptions(options.leftPriceScale);\n        }\n        if (options.rightPriceScale) {\n            this._private__rightPriceScale._internal_applyOptions(options.rightPriceScale);\n        }\n        if (options.localization) {\n            this._private__leftPriceScale._internal_updateFormatter();\n            this._private__rightPriceScale._internal_updateFormatter();\n        }\n        if (options.overlayPriceScales) {\n            const sourceArrays = Array.from(this._private__overlaySourcesByScaleId.values());\n            for (const arr of sourceArrays) {\n                const priceScale = ensureNotNull(arr[0]._internal_priceScale());\n                priceScale._internal_applyOptions(options.overlayPriceScales);\n                if (options.localization) {\n                    priceScale._internal_updateFormatter();\n                }\n            }\n        }\n    }\n    _internal_priceScaleById(id) {\n        switch (id) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n            case \"left\" /* DefaultPriceScaleId.Left */: {\n                return this._private__leftPriceScale;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n            case \"right\" /* DefaultPriceScaleId.Right */: {\n                return this._private__rightPriceScale;\n            }\n        }\n        if (this._private__overlaySourcesByScaleId.has(id)) {\n            return ensureDefined(this._private__overlaySourcesByScaleId.get(id))[0]._internal_priceScale();\n        }\n        return null;\n    }\n    _internal_destroy() {\n        this._internal_model()._internal_priceScalesOptionsChanged()._internal_unsubscribeAll(this);\n        this._private__leftPriceScale._internal_modeChanged()._internal_unsubscribeAll(this);\n        this._private__rightPriceScale._internal_modeChanged()._internal_unsubscribeAll(this);\n        this._private__dataSources.forEach((source) => {\n            if (source._internal_destroy) {\n                source._internal_destroy();\n            }\n        });\n        this._private__primitives = this._private__primitives.filter((primitive) => {\n            const p = primitive._internal_primitive();\n            if (p.detached) {\n                p.detached();\n            }\n            return false;\n        });\n        this._private__destroyed._internal_fire();\n    }\n    _internal_stretchFactor() {\n        return this._private__stretchFactor;\n    }\n    _internal_setStretchFactor(factor) {\n        this._private__stretchFactor = factor;\n    }\n    _internal_model() {\n        return this._private__model;\n    }\n    _internal_width() {\n        return this._private__width;\n    }\n    _internal_height() {\n        return this._private__height;\n    }\n    _internal_setWidth(width) {\n        this._private__width = width;\n        this._internal_updateAllSources();\n    }\n    _internal_setHeight(height) {\n        this._private__height = height;\n        this._private__leftPriceScale._internal_setHeight(height);\n        this._private__rightPriceScale._internal_setHeight(height);\n        // process overlays\n        this._private__dataSources.forEach((ds) => {\n            if (this._internal_isOverlay(ds)) {\n                const priceScale = ds._internal_priceScale();\n                if (priceScale !== null) {\n                    priceScale._internal_setHeight(height);\n                }\n            }\n        });\n        this._internal_updateAllSources();\n    }\n    _internal_setPreserveEmptyPane(preserve) {\n        this._private__preserveEmptyPane = preserve;\n    }\n    _internal_preserveEmptyPane() {\n        return this._private__preserveEmptyPane;\n    }\n    _internal_series() {\n        return this._private__dataSources.filter(isSeries);\n    }\n    _internal_dataSources() {\n        return this._private__dataSources;\n    }\n    _internal_isOverlay(source) {\n        const priceScale = source._internal_priceScale();\n        if (priceScale === null) {\n            return true;\n        }\n        return this._private__leftPriceScale !== priceScale && this._private__rightPriceScale !== priceScale;\n    }\n    _internal_addDataSource(source, targetScaleId, keepSourcesOrder) {\n        this._private__insertDataSource(source, targetScaleId, keepSourcesOrder ? source._internal_zorder() : this._private__dataSources.length);\n    }\n    _internal_removeDataSource(source, keepSourceOrder) {\n        const index = this._private__dataSources.indexOf(source);\n        assert(index !== -1, 'removeDataSource: invalid data source');\n        this._private__dataSources.splice(index, 1);\n        if (!keepSourceOrder) {\n            this._private__dataSources.forEach((ds, i) => ds._internal_setZorder(i));\n        }\n        const priceScaleId = ensureNotNull(source._internal_priceScale())._internal_id();\n        if (this._private__overlaySourcesByScaleId.has(priceScaleId)) {\n            const overlaySources = ensureDefined(this._private__overlaySourcesByScaleId.get(priceScaleId));\n            const overlayIndex = overlaySources.indexOf(source);\n            if (overlayIndex !== -1) {\n                overlaySources.splice(overlayIndex, 1);\n                if (overlaySources.length === 0) {\n                    this._private__overlaySourcesByScaleId.delete(priceScaleId);\n                }\n            }\n        }\n        const priceScale = source._internal_priceScale();\n        // if source has owner, it returns owner's price scale\n        // and it does not have source in their list\n        if (priceScale && priceScale._internal_dataSources().indexOf(source) >= 0) {\n            priceScale._internal_removeDataSource(source);\n            this._internal_recalculatePriceScale(priceScale);\n        }\n        this._private__cachedOrderedSources = null;\n    }\n    _internal_priceScalePosition(priceScale) {\n        if (priceScale === this._private__leftPriceScale) {\n            return 'left';\n        }\n        if (priceScale === this._private__rightPriceScale) {\n            return 'right';\n        }\n        return 'overlay';\n    }\n    _internal_leftPriceScale() {\n        return this._private__leftPriceScale;\n    }\n    _internal_rightPriceScale() {\n        return this._private__rightPriceScale;\n    }\n    _internal_startScalePrice(priceScale, x) {\n        priceScale._internal_startScale(x);\n    }\n    _internal_scalePriceTo(priceScale, x) {\n        priceScale._internal_scaleTo(x);\n        // TODO: be more smart and update only affected views\n        this._internal_updateAllSources();\n    }\n    _internal_endScalePrice(priceScale) {\n        priceScale._internal_endScale();\n    }\n    _internal_startScrollPrice(priceScale, x) {\n        priceScale._internal_startScroll(x);\n    }\n    _internal_scrollPriceTo(priceScale, x) {\n        priceScale._internal_scrollTo(x);\n        this._internal_updateAllSources();\n    }\n    _internal_endScrollPrice(priceScale) {\n        priceScale._internal_endScroll();\n    }\n    _internal_updateAllSources() {\n        this._private__dataSources.forEach((source) => {\n            source._internal_updateAllViews();\n        });\n    }\n    _internal_defaultPriceScale() {\n        let priceScale = null;\n        if (this._private__model._internal_options().rightPriceScale.visible && this._private__rightPriceScale._internal_dataSources().length !== 0) {\n            priceScale = this._private__rightPriceScale;\n        }\n        else if (this._private__model._internal_options().leftPriceScale.visible && this._private__leftPriceScale._internal_dataSources().length !== 0) {\n            priceScale = this._private__leftPriceScale;\n        }\n        else if (this._private__dataSources.length !== 0) {\n            priceScale = this._private__dataSources[0]._internal_priceScale();\n        }\n        if (priceScale === null) {\n            priceScale = this._private__rightPriceScale;\n        }\n        return priceScale;\n    }\n    _internal_defaultVisiblePriceScale() {\n        let priceScale = null;\n        if (this._private__model._internal_options().rightPriceScale.visible) {\n            priceScale = this._private__rightPriceScale;\n        }\n        else if (this._private__model._internal_options().leftPriceScale.visible) {\n            priceScale = this._private__leftPriceScale;\n        }\n        return priceScale;\n    }\n    _internal_recalculatePriceScale(priceScale) {\n        if (priceScale === null || !priceScale._internal_isAutoScale()) {\n            return;\n        }\n        this._private__recalculatePriceScaleImpl(priceScale);\n    }\n    _internal_resetPriceScale(priceScale) {\n        const visibleBars = this._private__timeScale._internal_visibleStrictRange();\n        priceScale._internal_setMode({ _internal_autoScale: true });\n        if (visibleBars !== null) {\n            priceScale._internal_recalculatePriceRange(visibleBars);\n        }\n        this._internal_updateAllSources();\n    }\n    _internal_momentaryAutoScale() {\n        this._private__recalculatePriceScaleImpl(this._private__leftPriceScale);\n        this._private__recalculatePriceScaleImpl(this._private__rightPriceScale);\n    }\n    _internal_recalculate() {\n        this._internal_recalculatePriceScale(this._private__leftPriceScale);\n        this._internal_recalculatePriceScale(this._private__rightPriceScale);\n        this._private__dataSources.forEach((ds) => {\n            if (this._internal_isOverlay(ds)) {\n                this._internal_recalculatePriceScale(ds._internal_priceScale());\n            }\n        });\n        this._internal_updateAllSources();\n        this._private__model._internal_lightUpdate();\n    }\n    _internal_orderedSources() {\n        if (this._private__cachedOrderedSources === null) {\n            this._private__cachedOrderedSources = sortSources(this._private__dataSources);\n        }\n        return this._private__cachedOrderedSources;\n    }\n    _internal_setSeriesOrder(series, order) {\n        order = clamp(order, 0, this._private__dataSources.length - 1);\n        const index = this._private__dataSources.indexOf(series);\n        assert(index !== -1, 'setSeriesOrder: invalid data source');\n        this._private__dataSources.splice(index, 1);\n        this._private__dataSources.splice(order, 0, series);\n        this._private__dataSources.forEach((ps, i) => ps._internal_setZorder(i));\n        this._private__cachedOrderedSources = null;\n        for (const ps of [this._private__leftPriceScale, this._private__rightPriceScale]) {\n            ps._internal_invalidateSourcesCache();\n            ps._internal_updateFormatter();\n        }\n        this._private__model._internal_lightUpdate();\n    }\n    _internal_orderedSeries() {\n        return this._internal_orderedSources().filter(isSeries);\n    }\n    _internal_onDestroyed() {\n        return this._private__destroyed;\n    }\n    _internal_grid() {\n        return this._private__grid;\n    }\n    _internal_attachPrimitive(primitive) {\n        this._private__primitives.push(new PanePrimitiveWrapper$1(primitive));\n    }\n    _internal_detachPrimitive(source) {\n        this._private__primitives = this._private__primitives.filter((wrapper) => wrapper._internal_primitive() !== source);\n        if (source.detached) {\n            source.detached();\n        }\n        this._private__model._internal_lightUpdate();\n    }\n    _internal_primitives() {\n        return this._private__primitives;\n    }\n    _internal_primitiveHitTest(x, y) {\n        return this._private__primitives\n            .map((primitive) => primitive._internal_hitTest(x, y))\n            .filter((result) => result !== null);\n    }\n    _private__recalculatePriceScaleImpl(priceScale) {\n        // TODO: can use this checks\n        const sourceForAutoScale = priceScale._internal_sourcesForAutoScale();\n        if (sourceForAutoScale && sourceForAutoScale.length > 0 && !this._private__timeScale._internal_isEmpty()) {\n            const visibleBars = this._private__timeScale._internal_visibleStrictRange();\n            if (visibleBars !== null) {\n                priceScale._internal_recalculatePriceRange(visibleBars);\n            }\n        }\n        priceScale._internal_updateAllViews();\n    }\n    _private__insertDataSource(source, priceScaleId, order) {\n        let priceScale = this._internal_priceScaleById(priceScaleId);\n        if (priceScale === null) {\n            priceScale = this._private__createPriceScale(priceScaleId, this._private__model._internal_options().overlayPriceScales);\n        }\n        this._private__dataSources.splice(order, 0, source);\n        if (!isDefaultPriceScale(priceScaleId)) {\n            const overlaySources = this._private__overlaySourcesByScaleId.get(priceScaleId) || [];\n            overlaySources.push(source);\n            this._private__overlaySourcesByScaleId.set(priceScaleId, overlaySources);\n        }\n        source._internal_setZorder(order);\n        priceScale._internal_addDataSource(source);\n        source._internal_setPriceScale(priceScale);\n        this._internal_recalculatePriceScale(priceScale);\n        this._private__cachedOrderedSources = null;\n    }\n    _private__onPriceScaleModeChanged(priceScale, oldMode, newMode) {\n        if (oldMode._internal_mode === newMode._internal_mode) {\n            return;\n        }\n        // momentary auto scale if we toggle percentage/indexedTo100 mode\n        this._private__recalculatePriceScaleImpl(priceScale);\n    }\n    _private__createPriceScale(id, options) {\n        const actualOptions = { visible: true, autoScale: true, ...clone(options) };\n        const priceScale = new PriceScale(id, actualOptions, this._private__model._internal_options()['layout'], this._private__model._internal_options().localization, this._private__model._internal_colorParser());\n        priceScale._internal_setHeight(this._internal_height());\n        return priceScale;\n    }\n}\n\n// returns true if item is above reference\nfunction comparePrimitiveZOrder(item, reference) {\n    return (!reference ||\n        (item === 'top' && reference !== 'top') ||\n        (item === 'normal' && reference === 'bottom'));\n}\nfunction findBestPrimitiveHitTest(sources, x, y) {\n    let bestPrimitiveHit;\n    let bestHitSource;\n    for (const source of sources) {\n        const primitiveHitResults = source._internal_primitiveHitTest?.(x, y) ?? [];\n        for (const hitResult of primitiveHitResults) {\n            if (comparePrimitiveZOrder(hitResult.zOrder, bestPrimitiveHit?.zOrder)) {\n                bestPrimitiveHit = hitResult;\n                bestHitSource = source;\n            }\n        }\n    }\n    if (!bestPrimitiveHit || !bestHitSource) {\n        return null;\n    }\n    return {\n        _internal_hit: bestPrimitiveHit,\n        _internal_source: bestHitSource,\n    };\n}\nfunction convertPrimitiveHitResult(primitiveHit) {\n    return {\n        _internal_source: primitiveHit._internal_source,\n        _internal_object: {\n            _internal_externalId: primitiveHit._internal_hit.externalId,\n        },\n        _internal_cursorStyle: primitiveHit._internal_hit.cursorStyle,\n    };\n}\n/**\n * Performs a hit test on a collection of pane views to determine which view and object\n * is located at a given coordinate (x, y) and returns the matching pane view and\n * hit-tested result object, or null if no match is found.\n */\nfunction hitTestPaneView(paneViews, x, y, pane) {\n    for (const paneView of paneViews) {\n        const renderer = paneView._internal_renderer(pane);\n        if (renderer !== null && renderer._internal_hitTest) {\n            const result = renderer._internal_hitTest(x, y);\n            if (result !== null) {\n                return {\n                    _internal_view: paneView,\n                    _internal_object: result,\n                };\n            }\n        }\n    }\n    return null;\n}\nfunction isDataSource(source) {\n    return source._internal_paneViews !== undefined;\n}\n// eslint-disable-next-line complexity\nfunction hitTestPane(pane, x, y) {\n    const sources = [pane, ...pane._internal_orderedSources()];\n    const bestPrimitiveHit = findBestPrimitiveHitTest(sources, x, y);\n    if (bestPrimitiveHit?._internal_hit.zOrder === 'top') {\n        // a primitive hit on the 'top' layer will always beat the built-in hit tests\n        // (on normal layer) so we can return early here.\n        return convertPrimitiveHitResult(bestPrimitiveHit);\n    }\n    for (const source of sources) {\n        if (bestPrimitiveHit && bestPrimitiveHit._internal_source === source && bestPrimitiveHit._internal_hit.zOrder !== 'bottom' && !bestPrimitiveHit._internal_hit.isBackground) {\n            // a primitive will be drawn above a built-in item like a series marker\n            // therefore it takes precedence here.\n            return convertPrimitiveHitResult(bestPrimitiveHit);\n        }\n        if (isDataSource(source)) {\n            const sourceResult = hitTestPaneView(source._internal_paneViews(pane), x, y, pane);\n            if (sourceResult !== null) {\n                return {\n                    _internal_source: source,\n                    _internal_view: sourceResult._internal_view,\n                    _internal_object: sourceResult._internal_object,\n                };\n            }\n        }\n        if (bestPrimitiveHit && bestPrimitiveHit._internal_source === source && bestPrimitiveHit._internal_hit.zOrder !== 'bottom' && bestPrimitiveHit._internal_hit.isBackground) {\n            return convertPrimitiveHitResult(bestPrimitiveHit);\n        }\n    }\n    if (bestPrimitiveHit?._internal_hit) {\n        // return primitive hits for the 'bottom' layer\n        return convertPrimitiveHitResult(bestPrimitiveHit);\n    }\n    return null;\n}\n\nclass FormattedLabelsCache {\n    constructor(format, horzScaleBehavior, size = 50) {\n        this._private__actualSize = 0;\n        this._private__usageTick = 1;\n        this._private__oldestTick = 1;\n        this._private__cache = new Map();\n        this._private__tick2Labels = new Map();\n        this._private__format = format;\n        this._private__horzScaleBehavior = horzScaleBehavior;\n        this._private__maxSize = size;\n    }\n    _internal_format(tickMark) {\n        const time = tickMark.time;\n        const cacheKey = this._private__horzScaleBehavior.cacheKey(time);\n        const tick = this._private__cache.get(cacheKey);\n        if (tick !== undefined) {\n            return tick._internal_string;\n        }\n        if (this._private__actualSize === this._private__maxSize) {\n            const oldestValue = this._private__tick2Labels.get(this._private__oldestTick);\n            this._private__tick2Labels.delete(this._private__oldestTick);\n            this._private__cache.delete(ensureDefined(oldestValue));\n            this._private__oldestTick++;\n            this._private__actualSize--;\n        }\n        const str = this._private__format(tickMark);\n        this._private__cache.set(cacheKey, { _internal_string: str, _internal_tick: this._private__usageTick });\n        this._private__tick2Labels.set(this._private__usageTick, cacheKey);\n        this._private__actualSize++;\n        this._private__usageTick++;\n        return str;\n    }\n}\n\nclass RangeImpl {\n    constructor(left, right) {\n        assert(left <= right, 'right should be >= left');\n        this._private__left = left;\n        this._private__right = right;\n    }\n    _internal_left() {\n        return this._private__left;\n    }\n    _internal_right() {\n        return this._private__right;\n    }\n    _internal_count() {\n        return this._private__right - this._private__left + 1;\n    }\n    _internal_contains(index) {\n        return this._private__left <= index && index <= this._private__right;\n    }\n    _internal_equals(other) {\n        return this._private__left === other._internal_left() && this._private__right === other._internal_right();\n    }\n}\nfunction areRangesEqual(first, second) {\n    if (first === null || second === null) {\n        return first === second;\n    }\n    return first._internal_equals(second);\n}\n\nclass TickMarks {\n    constructor() {\n        this._private__marksByWeight = new Map();\n        this._private__cache = null;\n        this._private__uniformDistribution = false;\n    }\n    _internal_setUniformDistribution(val) {\n        this._private__uniformDistribution = val;\n        this._private__cache = null;\n    }\n    _internal_setTimeScalePoints(newPoints, firstChangedPointIndex) {\n        this._private__removeMarksSinceIndex(firstChangedPointIndex);\n        this._private__cache = null;\n        for (let index = firstChangedPointIndex; index < newPoints.length; ++index) {\n            const point = newPoints[index];\n            let marksForWeight = this._private__marksByWeight.get(point.timeWeight);\n            if (marksForWeight === undefined) {\n                marksForWeight = [];\n                this._private__marksByWeight.set(point.timeWeight, marksForWeight);\n            }\n            marksForWeight.push({\n                index: index,\n                time: point.time,\n                weight: point.timeWeight,\n                originalTime: point.originalTime,\n            });\n        }\n    }\n    _internal_build(spacing, maxWidth, checkIndicesForData, indicesWithDataMap, indicesWithDataId) {\n        const maxIndexesPerMark = Math.ceil(maxWidth / spacing);\n        if (this._private__cache === null ||\n            this._private__cache._internal_maxIndexesPerMark !== maxIndexesPerMark ||\n            indicesWithDataId !== this._private__cache._internal_indicesWithDataId ||\n            checkIndicesForData !== this._private__cache._internal_checkIndicesForData) {\n            this._private__cache = {\n                _internal_indicesWithDataId: indicesWithDataId,\n                _internal_checkIndicesForData: checkIndicesForData,\n                _internal_marks: this._private__buildMarksImpl(maxIndexesPerMark, checkIndicesForData, indicesWithDataMap),\n                _internal_maxIndexesPerMark: maxIndexesPerMark,\n            };\n        }\n        return this._private__cache._internal_marks;\n    }\n    _private__removeMarksSinceIndex(sinceIndex) {\n        if (sinceIndex === 0) {\n            this._private__marksByWeight.clear();\n            return;\n        }\n        const weightsToClear = [];\n        this._private__marksByWeight.forEach((marks, timeWeight) => {\n            if (sinceIndex <= marks[0].index) {\n                weightsToClear.push(timeWeight);\n            }\n            else {\n                marks.splice(lowerBound(marks, sinceIndex, (tm) => tm.index < sinceIndex), Infinity);\n            }\n        });\n        for (const weight of weightsToClear) {\n            this._private__marksByWeight.delete(weight);\n        }\n    }\n    _private__buildMarksImpl(maxIndexesPerMark, checkIndicesForData, indicesWithDataMap) {\n        let marks = [];\n        const canBeIncluded = (mark) => !checkIndicesForData || indicesWithDataMap.has(mark.index);\n        for (const weight of Array.from(this._private__marksByWeight.keys()).sort((a, b) => b - a)) {\n            if (!this._private__marksByWeight.get(weight)) {\n                continue;\n            }\n            // Built tickMarks are now prevMarks, and marks it as new array\n            const prevMarks = marks;\n            marks = [];\n            const prevMarksLength = prevMarks.length;\n            let prevMarksPointer = 0;\n            const currentWeight = ensureDefined(this._private__marksByWeight.get(weight));\n            const currentWeightLength = currentWeight.length;\n            let rightIndex = Infinity;\n            let leftIndex = -Infinity;\n            for (let i = 0; i < currentWeightLength; i++) {\n                const mark = currentWeight[i];\n                const currentIndex = mark.index;\n                // Determine indexes with which current index will be compared\n                // All marks to the right is moved to new array\n                while (prevMarksPointer < prevMarksLength) {\n                    const lastMark = prevMarks[prevMarksPointer];\n                    const lastIndex = lastMark.index;\n                    if (lastIndex < currentIndex && canBeIncluded(lastMark)) {\n                        prevMarksPointer++;\n                        marks.push(lastMark);\n                        leftIndex = lastIndex;\n                        rightIndex = Infinity;\n                    }\n                    else {\n                        rightIndex = lastIndex;\n                        break;\n                    }\n                }\n                if (rightIndex - currentIndex >= maxIndexesPerMark &&\n                    currentIndex - leftIndex >= maxIndexesPerMark &&\n                    canBeIncluded(mark)) {\n                    // TickMark fits. Place it into new array\n                    marks.push(mark);\n                    leftIndex = currentIndex;\n                }\n                else {\n                    if (this._private__uniformDistribution) {\n                        return prevMarks;\n                    }\n                }\n            }\n            // Place all unused tickMarks into new array;\n            for (; prevMarksPointer < prevMarksLength; prevMarksPointer++) {\n                if (canBeIncluded(prevMarks[prevMarksPointer])) {\n                    marks.push(prevMarks[prevMarksPointer]);\n                }\n            }\n        }\n        return marks;\n    }\n}\n\nclass TimeScaleVisibleRange {\n    constructor(logicalRange) {\n        this._private__logicalRange = logicalRange;\n    }\n    _internal_strictRange() {\n        if (this._private__logicalRange === null) {\n            return null;\n        }\n        return new RangeImpl(Math.floor(this._private__logicalRange._internal_left()), Math.ceil(this._private__logicalRange._internal_right()));\n    }\n    _internal_logicalRange() {\n        return this._private__logicalRange;\n    }\n    static _internal_invalid() {\n        return new TimeScaleVisibleRange(null);\n    }\n}\n\nconst defaultTickMarkMaxCharacterLength = 8;\nfunction markWithGreaterWeight$2(a, b) {\n    return a.weight > b.weight ? a : b;\n}\nclass TimeScale {\n    constructor(model, options, localizationOptions, horzScaleBehavior) {\n        this._private__width = 0;\n        this._private__baseIndexOrNull = null;\n        this._private__points = [];\n        this._private__scrollStartPoint = null;\n        this._private__scaleStartPoint = null;\n        this._private__tickMarks = new TickMarks();\n        this._private__formattedByWeight = new Map();\n        this._private__visibleRange = TimeScaleVisibleRange._internal_invalid();\n        this._private__visibleRangeInvalidated = true;\n        this._private__visibleBarsChanged = new Delegate();\n        this._private__logicalRangeChanged = new Delegate();\n        this._private__optionsApplied = new Delegate();\n        this._private__commonTransitionStartState = null;\n        this._private__timeMarksCache = null;\n        this._private__indicesWithData = new Map();\n        this._private__indicesWithDataUpdateId = -1;\n        this._private__labels = [];\n        this._private__options = options;\n        this._private__localizationOptions = localizationOptions;\n        this._private__rightOffset = options.rightOffset;\n        this._private__barSpacing = options.barSpacing;\n        this._private__model = model;\n        this._private__horzScaleBehavior = horzScaleBehavior;\n        this._private__updateDateTimeFormatter();\n        this._private__tickMarks._internal_setUniformDistribution(options.uniformDistribution);\n        this._internal_recalculateIndicesWithData();\n    }\n    _internal_options() {\n        return this._private__options;\n    }\n    _internal_applyLocalizationOptions(localizationOptions) {\n        merge(this._private__localizationOptions, localizationOptions);\n        this._private__invalidateTickMarks();\n        this._private__updateDateTimeFormatter();\n    }\n    _internal_applyOptions(options, localizationOptions) {\n        merge(this._private__options, options);\n        if (this._private__options.fixLeftEdge) {\n            this._private__doFixLeftEdge();\n        }\n        if (this._private__options.fixRightEdge) {\n            this._private__doFixRightEdge();\n        }\n        // note that bar spacing should be applied before right offset\n        // because right offset depends on bar spacing\n        if (options.barSpacing !== undefined) {\n            this._private__model._internal_setBarSpacing(options.barSpacing);\n        }\n        if (options.rightOffset !== undefined) {\n            this._private__model._internal_setRightOffset(options.rightOffset);\n        }\n        if (options.minBarSpacing !== undefined || options.maxBarSpacing !== undefined) {\n            // yes, if we apply bar spacing constrains then we need to correct bar spacing\n            // the easiest way is to apply it once again\n            this._private__model._internal_setBarSpacing(options.barSpacing ?? this._private__barSpacing);\n        }\n        if (options.ignoreWhitespaceIndices !== undefined && options.ignoreWhitespaceIndices !== this._private__options.ignoreWhitespaceIndices) {\n            this._internal_recalculateIndicesWithData();\n        }\n        this._private__invalidateTickMarks();\n        this._private__updateDateTimeFormatter();\n        this._private__optionsApplied._internal_fire();\n    }\n    _internal_indexToTime(index) {\n        return this._private__points[index]?.time ?? null;\n    }\n    _internal_indexToTimeScalePoint(index) {\n        return this._private__points[index] ?? null;\n    }\n    _internal_timeToIndex(time, findNearest) {\n        if (this._private__points.length < 1) {\n            // no time points available\n            return null;\n        }\n        if (this._private__horzScaleBehavior.key(time) > this._private__horzScaleBehavior.key(this._private__points[this._private__points.length - 1].time)) {\n            // special case\n            return findNearest ? this._private__points.length - 1 : null;\n        }\n        const index = lowerBound(this._private__points, this._private__horzScaleBehavior.key(time), (a, b) => this._private__horzScaleBehavior.key(a.time) < b);\n        if (this._private__horzScaleBehavior.key(time) < this._private__horzScaleBehavior.key(this._private__points[index].time)) {\n            return findNearest ? index : null;\n        }\n        return index;\n    }\n    _internal_isEmpty() {\n        return this._private__width === 0 || this._private__points.length === 0 || this._private__baseIndexOrNull === null;\n    }\n    _internal_hasPoints() {\n        return this._private__points.length > 0;\n    }\n    // strict range: integer indices of the bars in the visible range rounded in more wide direction\n    _internal_visibleStrictRange() {\n        this._private__updateVisibleRange();\n        return this._private__visibleRange._internal_strictRange();\n    }\n    _internal_visibleLogicalRange() {\n        this._private__updateVisibleRange();\n        return this._private__visibleRange._internal_logicalRange();\n    }\n    _internal_visibleTimeRange() {\n        const visibleBars = this._internal_visibleStrictRange();\n        if (visibleBars === null) {\n            return null;\n        }\n        const range = {\n            from: visibleBars._internal_left(),\n            to: visibleBars._internal_right(),\n        };\n        return this._internal_timeRangeForLogicalRange(range);\n    }\n    _internal_timeRangeForLogicalRange(range) {\n        const from = Math.round(range.from);\n        const to = Math.round(range.to);\n        const firstIndex = ensureNotNull(this._private__firstIndex());\n        const lastIndex = ensureNotNull(this._private__lastIndex());\n        return {\n            from: ensureNotNull(this._internal_indexToTimeScalePoint(Math.max(firstIndex, from))),\n            to: ensureNotNull(this._internal_indexToTimeScalePoint(Math.min(lastIndex, to))),\n        };\n    }\n    _internal_logicalRangeForTimeRange(range) {\n        return {\n            from: ensureNotNull(this._internal_timeToIndex(range.from, true)),\n            to: ensureNotNull(this._internal_timeToIndex(range.to, true)),\n        };\n    }\n    _internal_width() {\n        return this._private__width;\n    }\n    _internal_setWidth(newWidth) {\n        if (!isFinite(newWidth) || newWidth <= 0) {\n            return;\n        }\n        if (this._private__width === newWidth) {\n            return;\n        }\n        // when we change the width and we need to correct visible range because of fixing left edge\n        // we need to check the previous visible range rather than the new one\n        // because it might be updated by changing width, bar spacing, etc\n        // but we need to try to keep the same range\n        const previousVisibleRange = this._internal_visibleLogicalRange();\n        const oldWidth = this._private__width;\n        this._private__width = newWidth;\n        this._private__visibleRangeInvalidated = true;\n        if (this._private__options.lockVisibleTimeRangeOnResize && oldWidth !== 0) {\n            // recalculate bar spacing\n            const newBarSpacing = this._private__barSpacing * newWidth / oldWidth;\n            this._private__barSpacing = newBarSpacing;\n        }\n        // if time scale is scrolled to the end of data and we have fixed right edge\n        // keep left edge instead of right\n        // we need it to avoid \"shaking\" if the last bar visibility affects time scale width\n        if (this._private__options.fixLeftEdge) {\n            // note that logical left range means not the middle of a bar (it's the left border)\n            if (previousVisibleRange !== null && previousVisibleRange._internal_left() <= 0) {\n                const delta = oldWidth - newWidth;\n                // reduce  _rightOffset means move right\n                // we could move more than required - this will be fixed by _correctOffset()\n                this._private__rightOffset -= Math.round(delta / this._private__barSpacing) + 1;\n                this._private__visibleRangeInvalidated = true;\n            }\n        }\n        // updating bar spacing should be first because right offset depends on it\n        this._private__correctBarSpacing();\n        this._private__correctOffset();\n    }\n    _internal_indexToCoordinate(index) {\n        if (this._internal_isEmpty() || !isInteger(index)) {\n            return 0;\n        }\n        const baseIndex = this._internal_baseIndex();\n        const deltaFromRight = baseIndex + this._private__rightOffset - index;\n        const coordinate = this._private__width - (deltaFromRight + 0.5) * this._private__barSpacing - 1;\n        return coordinate;\n    }\n    _internal_indexesToCoordinates(points, visibleRange) {\n        const baseIndex = this._internal_baseIndex();\n        const indexFrom = (visibleRange === undefined) ? 0 : visibleRange.from;\n        const indexTo = (visibleRange === undefined) ? points.length : visibleRange.to;\n        for (let i = indexFrom; i < indexTo; i++) {\n            const index = points[i]._internal_time;\n            const deltaFromRight = baseIndex + this._private__rightOffset - index;\n            const coordinate = this._private__width - (deltaFromRight + 0.5) * this._private__barSpacing - 1;\n            points[i]._internal_x = coordinate;\n        }\n    }\n    _internal_coordinateToIndex(x, considerIgnoreWhitespace) {\n        const index = Math.ceil(this._private__coordinateToFloatIndex(x));\n        if (!considerIgnoreWhitespace ||\n            !this._private__options.ignoreWhitespaceIndices ||\n            this._private__shouldConsiderIndex(index)) {\n            return index;\n        }\n        return this._private__findNearestIndexWithData(index);\n    }\n    _internal_setRightOffset(offset) {\n        this._private__visibleRangeInvalidated = true;\n        this._private__rightOffset = offset;\n        this._private__correctOffset();\n        this._private__model._internal_recalculateAllPanes();\n        this._private__model._internal_lightUpdate();\n    }\n    _internal_barSpacing() {\n        return this._private__barSpacing;\n    }\n    _internal_setBarSpacing(newBarSpacing) {\n        this._private__setBarSpacing(newBarSpacing);\n        // do not allow scroll out of visible bars\n        this._private__correctOffset();\n        this._private__model._internal_recalculateAllPanes();\n        this._private__model._internal_lightUpdate();\n    }\n    _internal_rightOffset() {\n        return this._private__rightOffset;\n    }\n    // eslint-disable-next-line complexity\n    _internal_marks() {\n        if (this._internal_isEmpty()) {\n            return null;\n        }\n        if (this._private__timeMarksCache !== null) {\n            return this._private__timeMarksCache;\n        }\n        const spacing = this._private__barSpacing;\n        const fontSize = this._private__model._internal_options()['layout'].fontSize;\n        const pixelsPer8Characters = (fontSize + 4) * 5;\n        const pixelsPerCharacter = pixelsPer8Characters / defaultTickMarkMaxCharacterLength;\n        const maxLabelWidth = pixelsPerCharacter * (this._private__options.tickMarkMaxCharacterLength || defaultTickMarkMaxCharacterLength);\n        const indexPerLabel = Math.round(maxLabelWidth / spacing);\n        const visibleBars = ensureNotNull(this._internal_visibleStrictRange());\n        const firstBar = Math.max(visibleBars._internal_left(), visibleBars._internal_left() - indexPerLabel);\n        const lastBar = Math.max(visibleBars._internal_right(), visibleBars._internal_right() - indexPerLabel);\n        const items = this._private__tickMarks._internal_build(spacing, maxLabelWidth, this._private__options.ignoreWhitespaceIndices, this._private__indicesWithData, this._private__indicesWithDataUpdateId);\n        // according to indexPerLabel value this value means \"earliest index which _might be_ used as the second label on time scale\"\n        const earliestIndexOfSecondLabel = this._private__firstIndex() + indexPerLabel;\n        // according to indexPerLabel value this value means \"earliest index which _might be_ used as the second last label on time scale\"\n        const indexOfSecondLastLabel = this._private__lastIndex() - indexPerLabel;\n        const isAllScalingAndScrollingDisabled = this._private__isAllScalingAndScrollingDisabled();\n        const isLeftEdgeFixed = this._private__options.fixLeftEdge || isAllScalingAndScrollingDisabled;\n        const isRightEdgeFixed = this._private__options.fixRightEdge || isAllScalingAndScrollingDisabled;\n        let targetIndex = 0;\n        for (const tm of items) {\n            if (!(firstBar <= tm.index && tm.index <= lastBar)) {\n                continue;\n            }\n            let label;\n            if (targetIndex < this._private__labels.length) {\n                label = this._private__labels[targetIndex];\n                label.coord = this._internal_indexToCoordinate(tm.index);\n                label.label = this._private__formatLabel(tm);\n                label.weight = tm.weight;\n            }\n            else {\n                label = {\n                    needAlignCoordinate: false,\n                    coord: this._internal_indexToCoordinate(tm.index),\n                    label: this._private__formatLabel(tm),\n                    weight: tm.weight,\n                };\n                this._private__labels.push(label);\n            }\n            if (this._private__barSpacing > (maxLabelWidth / 2) && !isAllScalingAndScrollingDisabled) {\n                // if there is enough space then let's show all tick marks as usual\n                label.needAlignCoordinate = false;\n            }\n            else {\n                // if a user is able to scroll after a tick mark then show it as usual, otherwise the coordinate might be aligned\n                // if the index is for the second (last) label or later (earlier) then most likely this label might be displayed without correcting the coordinate\n                label.needAlignCoordinate = (isLeftEdgeFixed && tm.index <= earliestIndexOfSecondLabel) || (isRightEdgeFixed && tm.index >= indexOfSecondLastLabel);\n            }\n            targetIndex++;\n        }\n        this._private__labels.length = targetIndex;\n        this._private__timeMarksCache = this._private__labels;\n        return this._private__labels;\n    }\n    _internal_restoreDefault() {\n        this._private__visibleRangeInvalidated = true;\n        this._internal_setBarSpacing(this._private__options.barSpacing);\n        this._internal_setRightOffset(this._private__options.rightOffset);\n    }\n    _internal_setBaseIndex(baseIndex) {\n        this._private__visibleRangeInvalidated = true;\n        this._private__baseIndexOrNull = baseIndex;\n        this._private__correctOffset();\n        this._private__doFixLeftEdge();\n    }\n    /**\n     * Zoom in/out the scale around a `zoomPoint` on `scale` value.\n     *\n     * @param zoomPoint - X coordinate of the point to apply the zoom.\n     * If `rightBarStaysOnScroll` option is disabled, then will be used to restore right offset.\n     * @param scale - Zoom value (in 1/10 parts of current bar spacing).\n     * Negative value means zoom out, positive - zoom in.\n     */\n    _internal_zoom(zoomPoint, scale) {\n        const floatIndexAtZoomPoint = this._private__coordinateToFloatIndex(zoomPoint);\n        const barSpacing = this._internal_barSpacing();\n        const newBarSpacing = barSpacing + scale * (barSpacing / 10);\n        // zoom in/out bar spacing\n        this._internal_setBarSpacing(newBarSpacing);\n        if (!this._private__options.rightBarStaysOnScroll) {\n            // and then correct right offset to move index under zoomPoint back to its coordinate\n            this._internal_setRightOffset(this._internal_rightOffset() + (floatIndexAtZoomPoint - this._private__coordinateToFloatIndex(zoomPoint)));\n        }\n    }\n    _internal_startScale(x) {\n        if (this._private__scrollStartPoint) {\n            this._internal_endScroll();\n        }\n        if (this._private__scaleStartPoint !== null || this._private__commonTransitionStartState !== null) {\n            return;\n        }\n        if (this._internal_isEmpty()) {\n            return;\n        }\n        this._private__scaleStartPoint = x;\n        this._private__saveCommonTransitionsStartState();\n    }\n    _internal_scaleTo(x) {\n        if (this._private__commonTransitionStartState === null) {\n            return;\n        }\n        const startLengthFromRight = clamp(this._private__width - x, 0, this._private__width);\n        const currentLengthFromRight = clamp(this._private__width - ensureNotNull(this._private__scaleStartPoint), 0, this._private__width);\n        if (startLengthFromRight === 0 || currentLengthFromRight === 0) {\n            return;\n        }\n        this._internal_setBarSpacing(this._private__commonTransitionStartState._internal_barSpacing * startLengthFromRight / currentLengthFromRight);\n    }\n    _internal_endScale() {\n        if (this._private__scaleStartPoint === null) {\n            return;\n        }\n        this._private__scaleStartPoint = null;\n        this._private__clearCommonTransitionsStartState();\n    }\n    _internal_startScroll(x) {\n        if (this._private__scrollStartPoint !== null || this._private__commonTransitionStartState !== null) {\n            return;\n        }\n        if (this._internal_isEmpty()) {\n            return;\n        }\n        this._private__scrollStartPoint = x;\n        this._private__saveCommonTransitionsStartState();\n    }\n    _internal_scrollTo(x) {\n        if (this._private__scrollStartPoint === null) {\n            return;\n        }\n        const shiftInLogical = (this._private__scrollStartPoint - x) / this._internal_barSpacing();\n        this._private__rightOffset = ensureNotNull(this._private__commonTransitionStartState)._internal_rightOffset + shiftInLogical;\n        this._private__visibleRangeInvalidated = true;\n        // do not allow scroll out of visible bars\n        this._private__correctOffset();\n    }\n    _internal_endScroll() {\n        if (this._private__scrollStartPoint === null) {\n            return;\n        }\n        this._private__scrollStartPoint = null;\n        this._private__clearCommonTransitionsStartState();\n    }\n    _internal_scrollToRealTime() {\n        this._internal_scrollToOffsetAnimated(this._private__options.rightOffset);\n    }\n    _internal_scrollToOffsetAnimated(offset, animationDuration = 400 /* Constants.DefaultAnimationDuration */) {\n        if (!isFinite(offset)) {\n            throw new RangeError('offset is required and must be finite number');\n        }\n        if (!isFinite(animationDuration) || animationDuration <= 0) {\n            throw new RangeError('animationDuration (optional) must be finite positive number');\n        }\n        const source = this._private__rightOffset;\n        const animationStart = performance.now();\n        this._private__model._internal_setTimeScaleAnimation({\n            _internal_finished: (time) => (time - animationStart) / animationDuration >= 1,\n            _internal_getPosition: (time) => {\n                const animationProgress = (time - animationStart) / animationDuration;\n                const finishAnimation = animationProgress >= 1;\n                return finishAnimation ? offset : source + (offset - source) * animationProgress;\n            },\n        });\n    }\n    _internal_update(newPoints, firstChangedPointIndex) {\n        this._private__visibleRangeInvalidated = true;\n        this._private__points = newPoints;\n        this._private__tickMarks._internal_setTimeScalePoints(newPoints, firstChangedPointIndex);\n        this._private__correctOffset();\n    }\n    _internal_visibleBarsChanged() {\n        return this._private__visibleBarsChanged;\n    }\n    _internal_logicalRangeChanged() {\n        return this._private__logicalRangeChanged;\n    }\n    _internal_optionsApplied() {\n        return this._private__optionsApplied;\n    }\n    _internal_baseIndex() {\n        // null is used to known that baseIndex is not set yet\n        // so in methods which should known whether it is set or not\n        // we should check field `_baseIndexOrNull` instead of getter `baseIndex()`\n        // see minRightOffset for example\n        return this._private__baseIndexOrNull || 0;\n    }\n    _internal_setVisibleRange(range) {\n        const length = range._internal_count();\n        this._private__setBarSpacing(this._private__width / length);\n        this._private__rightOffset = range._internal_right() - this._internal_baseIndex();\n        this._private__correctOffset();\n        this._private__visibleRangeInvalidated = true;\n        this._private__model._internal_recalculateAllPanes();\n        this._private__model._internal_lightUpdate();\n    }\n    _internal_fitContent() {\n        const first = this._private__firstIndex();\n        const last = this._private__lastIndex();\n        if (first === null || last === null) {\n            return;\n        }\n        this._internal_setVisibleRange(new RangeImpl(first, last + this._private__options.rightOffset));\n    }\n    _internal_setLogicalRange(range) {\n        const barRange = new RangeImpl(range.from, range.to);\n        this._internal_setVisibleRange(barRange);\n    }\n    _internal_formatDateTime(timeScalePoint) {\n        if (this._private__localizationOptions.timeFormatter !== undefined) {\n            return this._private__localizationOptions.timeFormatter(timeScalePoint.originalTime);\n        }\n        return this._private__horzScaleBehavior.formatHorzItem(timeScalePoint.time);\n    }\n    _internal_recalculateIndicesWithData() {\n        if (!this._private__options.ignoreWhitespaceIndices) {\n            return;\n        }\n        this._private__indicesWithData.clear();\n        const series = this._private__model._internal_serieses();\n        for (const s of series) {\n            for (const index of s._internal_fulfilledIndices()) {\n                this._private__indicesWithData.set(index, true);\n            }\n        }\n        this._private__indicesWithDataUpdateId++;\n    }\n    _private__isAllScalingAndScrollingDisabled() {\n        const handleScroll = this._private__model._internal_options()['handleScroll'];\n        const handleScale = this._private__model._internal_options()['handleScale'];\n        return !handleScroll.horzTouchDrag\n            && !handleScroll.mouseWheel\n            && !handleScroll.pressedMouseMove\n            && !handleScroll.vertTouchDrag\n            && !handleScale.axisDoubleClickReset.time\n            && !handleScale.axisPressedMouseMove.time\n            && !handleScale.mouseWheel\n            && !handleScale.pinch;\n    }\n    _private__firstIndex() {\n        return this._private__points.length === 0 ? null : 0;\n    }\n    _private__lastIndex() {\n        return this._private__points.length === 0 ? null : (this._private__points.length - 1);\n    }\n    _private__rightOffsetForCoordinate(x) {\n        return (this._private__width - 1 - x) / this._private__barSpacing;\n    }\n    _private__coordinateToFloatIndex(x) {\n        const deltaFromRight = this._private__rightOffsetForCoordinate(x);\n        const baseIndex = this._internal_baseIndex();\n        const index = baseIndex + this._private__rightOffset - deltaFromRight;\n        // JavaScript uses very strange rounding\n        // we need rounding to avoid problems with calculation errors\n        return Math.round(index * 1000000) / 1000000;\n    }\n    _private__setBarSpacing(newBarSpacing) {\n        const oldBarSpacing = this._private__barSpacing;\n        this._private__barSpacing = newBarSpacing;\n        this._private__correctBarSpacing();\n        // this._barSpacing might be changed in _correctBarSpacing\n        if (oldBarSpacing !== this._private__barSpacing) {\n            this._private__visibleRangeInvalidated = true;\n            this._private__resetTimeMarksCache();\n        }\n    }\n    _private__updateVisibleRange() {\n        if (!this._private__visibleRangeInvalidated) {\n            return;\n        }\n        this._private__visibleRangeInvalidated = false;\n        if (this._internal_isEmpty()) {\n            this._private__setVisibleRange(TimeScaleVisibleRange._internal_invalid());\n            return;\n        }\n        const baseIndex = this._internal_baseIndex();\n        const newBarsLength = this._private__width / this._private__barSpacing;\n        const rightBorder = this._private__rightOffset + baseIndex;\n        const leftBorder = rightBorder - newBarsLength + 1;\n        const logicalRange = new RangeImpl(leftBorder, rightBorder);\n        this._private__setVisibleRange(new TimeScaleVisibleRange(logicalRange));\n    }\n    _private__correctBarSpacing() {\n        const barSpacing = clamp(this._private__barSpacing, this._private__minBarSpacing(), this._private__maxBarSpacing());\n        if (this._private__barSpacing !== barSpacing) {\n            this._private__barSpacing = barSpacing;\n            this._private__visibleRangeInvalidated = true;\n        }\n    }\n    _private__maxBarSpacing() {\n        if (this._private__options.maxBarSpacing > 0) {\n            // option takes precedance\n            return this._private__options.maxBarSpacing;\n        }\n        else {\n            // half of the width is default value for maximum bar spacing\n            return this._private__width * 0.5;\n        }\n    }\n    _private__minBarSpacing() {\n        // if both options are enabled then limit bar spacing so that zooming-out is not possible\n        // if it would cause either the first or last points to move too far from an edge\n        if (this._private__options.fixLeftEdge && this._private__options.fixRightEdge && this._private__points.length !== 0) {\n            return this._private__width / this._private__points.length;\n        }\n        return this._private__options.minBarSpacing;\n    }\n    _private__correctOffset() {\n        // block scrolling of to past\n        const minRightOffset = this._private__minRightOffset();\n        if (minRightOffset !== null && this._private__rightOffset < minRightOffset) {\n            this._private__rightOffset = minRightOffset;\n            this._private__visibleRangeInvalidated = true;\n        }\n        // block scrolling of to future\n        const maxRightOffset = this._private__maxRightOffset();\n        if (this._private__rightOffset > maxRightOffset) {\n            this._private__rightOffset = maxRightOffset;\n            this._private__visibleRangeInvalidated = true;\n        }\n    }\n    _private__minRightOffset() {\n        const firstIndex = this._private__firstIndex();\n        const baseIndex = this._private__baseIndexOrNull;\n        if (firstIndex === null || baseIndex === null) {\n            return null;\n        }\n        const barsEstimation = this._private__options.fixLeftEdge\n            ? this._private__width / this._private__barSpacing\n            : Math.min(2 /* Constants.MinVisibleBarsCount */, this._private__points.length);\n        return firstIndex - baseIndex - 1 + barsEstimation;\n    }\n    _private__maxRightOffset() {\n        return this._private__options.fixRightEdge\n            ? 0\n            : (this._private__width / this._private__barSpacing) - Math.min(2 /* Constants.MinVisibleBarsCount */, this._private__points.length);\n    }\n    _private__saveCommonTransitionsStartState() {\n        this._private__commonTransitionStartState = {\n            _internal_barSpacing: this._internal_barSpacing(),\n            _internal_rightOffset: this._internal_rightOffset(),\n        };\n    }\n    _private__clearCommonTransitionsStartState() {\n        this._private__commonTransitionStartState = null;\n    }\n    _private__formatLabel(tickMark) {\n        let formatter = this._private__formattedByWeight.get(tickMark.weight);\n        if (formatter === undefined) {\n            formatter = new FormattedLabelsCache((mark) => {\n                return this._private__formatLabelImpl(mark);\n            }, this._private__horzScaleBehavior);\n            this._private__formattedByWeight.set(tickMark.weight, formatter);\n        }\n        return formatter._internal_format(tickMark);\n    }\n    _private__formatLabelImpl(tickMark) {\n        return this._private__horzScaleBehavior.formatTickmark(tickMark, this._private__localizationOptions);\n    }\n    _private__setVisibleRange(newVisibleRange) {\n        const oldVisibleRange = this._private__visibleRange;\n        this._private__visibleRange = newVisibleRange;\n        if (!areRangesEqual(oldVisibleRange._internal_strictRange(), this._private__visibleRange._internal_strictRange())) {\n            this._private__visibleBarsChanged._internal_fire();\n        }\n        if (!areRangesEqual(oldVisibleRange._internal_logicalRange(), this._private__visibleRange._internal_logicalRange())) {\n            this._private__logicalRangeChanged._internal_fire();\n        }\n        // TODO: reset only coords in case when this._visibleBars has not been changed\n        this._private__resetTimeMarksCache();\n    }\n    _private__resetTimeMarksCache() {\n        this._private__timeMarksCache = null;\n    }\n    _private__invalidateTickMarks() {\n        this._private__resetTimeMarksCache();\n        this._private__formattedByWeight.clear();\n    }\n    _private__updateDateTimeFormatter() {\n        this._private__horzScaleBehavior.updateFormatter(this._private__localizationOptions);\n    }\n    _private__doFixLeftEdge() {\n        if (!this._private__options.fixLeftEdge) {\n            return;\n        }\n        const firstIndex = this._private__firstIndex();\n        if (firstIndex === null) {\n            return;\n        }\n        const visibleRange = this._internal_visibleStrictRange();\n        if (visibleRange === null) {\n            return;\n        }\n        const delta = visibleRange._internal_left() - firstIndex;\n        if (delta < 0) {\n            const leftEdgeOffset = this._private__rightOffset - delta - 1;\n            this._internal_setRightOffset(leftEdgeOffset);\n        }\n        this._private__correctBarSpacing();\n    }\n    _private__doFixRightEdge() {\n        this._private__correctOffset();\n        this._private__correctBarSpacing();\n    }\n    _private__shouldConsiderIndex(index) {\n        if (!this._private__options.ignoreWhitespaceIndices) {\n            return true;\n        }\n        return this._private__indicesWithData.get(index) || false;\n    }\n    _private__findNearestIndexWithData(x) {\n        const gen = testNearestIntegers(x);\n        const maxIndex = this._private__lastIndex();\n        while (maxIndex) {\n            const index = gen.next().value;\n            if (this._private__indicesWithData.get(index)) {\n                return index;\n            }\n            if (index < 0 || index > maxIndex) {\n                break;\n            }\n        }\n        return x; // fallback to original index\n    }\n}\nfunction* testNearestIntegers(num) {\n    const rounded = Math.round(num);\n    const isRoundedDown = rounded < num;\n    let offset = 1;\n    while (true) {\n        if (isRoundedDown) {\n            yield rounded + offset;\n            yield rounded - offset;\n        }\n        else {\n            yield rounded - offset;\n            yield rounded + offset;\n        }\n        offset++;\n    }\n}\n\n/// <reference types=\"_build-time-constants\" />\n/**\n * Determine how to exit the tracking mode.\n *\n * By default, mobile users will long press to deactivate the scroll and have the ability to check values and dates.\n * Another press is required to activate the scroll, be able to move left/right, zoom, etc.\n */\nvar TrackingModeExitMode;\n(function (TrackingModeExitMode) {\n    /**\n     * Tracking Mode will be deactivated on touch end event.\n     */\n    TrackingModeExitMode[TrackingModeExitMode[\"OnTouchEnd\"] = 0] = \"OnTouchEnd\";\n    /**\n     * Tracking Mode will be deactivated on the next tap event.\n     */\n    TrackingModeExitMode[TrackingModeExitMode[\"OnNextTap\"] = 1] = \"OnNextTap\";\n})(TrackingModeExitMode || (TrackingModeExitMode = {}));\nfunction isPanePrimitive(source) {\n    return source instanceof Pane;\n}\nclass ChartModel {\n    constructor(invalidateHandler, options, horzScaleBehavior) {\n        this._private__panes = [];\n        this._private__serieses = [];\n        this._private__width = 0;\n        this._private__hoveredSource = null;\n        this._private__priceScalesOptionsChanged = new Delegate();\n        this._private__crosshairMoved = new Delegate();\n        this._private__gradientColorsCache = null;\n        this._private__invalidateHandler = invalidateHandler;\n        this._private__options = options;\n        this._private__horzScaleBehavior = horzScaleBehavior;\n        this._private__colorParser = new ColorParser(this._private__options.layout.colorParsers);\n        this._private__rendererOptionsProvider = new PriceAxisRendererOptionsProvider(this);\n        this._private__timeScale = new TimeScale(this, options.timeScale, this._private__options.localization, horzScaleBehavior);\n        this._private__crosshair = new Crosshair(this, options.crosshair);\n        this._private__magnet = new Magnet(options.crosshair);\n        if (options.addDefaultPane) {\n            this._private__getOrCreatePane(0);\n            this._private__panes[0]._internal_setStretchFactor(DEFAULT_STRETCH_FACTOR * 2);\n        }\n        this._private__backgroundTopColor = this._private__getBackgroundColor(0 /* BackgroundColorSide.Top */);\n        this._private__backgroundBottomColor = this._private__getBackgroundColor(1 /* BackgroundColorSide.Bottom */);\n    }\n    _internal_fullUpdate() {\n        this._private__invalidate(InvalidateMask._internal_full());\n    }\n    _internal_lightUpdate() {\n        this._private__invalidate(InvalidateMask._internal_light());\n    }\n    _internal_cursorUpdate() {\n        this._private__invalidate(new InvalidateMask(1 /* InvalidationLevel.Cursor */));\n    }\n    _internal_updateSource(source) {\n        const inv = this._private__invalidationMaskForSource(source);\n        this._private__invalidate(inv);\n    }\n    _internal_hoveredSource() {\n        return this._private__hoveredSource;\n    }\n    _internal_setHoveredSource(source) {\n        if (this._private__hoveredSource?._internal_source === source?._internal_source && this._private__hoveredSource?._internal_object?._internal_externalId === source?._internal_object?._internal_externalId) {\n            return;\n        }\n        const prevSource = this._private__hoveredSource;\n        this._private__hoveredSource = source;\n        if (prevSource !== null) {\n            this._internal_updateSource(prevSource._internal_source);\n        }\n        // additional check to prevent unnecessary updates of same source\n        if (source !== null && source._internal_source !== prevSource?._internal_source) {\n            this._internal_updateSource(source._internal_source);\n        }\n    }\n    _internal_options() {\n        return this._private__options;\n    }\n    _internal_applyOptions(options) {\n        merge(this._private__options, options);\n        this._private__panes.forEach((p) => p._internal_applyScaleOptions(options));\n        if (options.timeScale !== undefined) {\n            this._private__timeScale._internal_applyOptions(options.timeScale);\n        }\n        if (options.localization !== undefined) {\n            this._private__timeScale._internal_applyLocalizationOptions(options.localization);\n        }\n        if (options.leftPriceScale || options.rightPriceScale) {\n            this._private__priceScalesOptionsChanged._internal_fire();\n        }\n        this._private__backgroundTopColor = this._private__getBackgroundColor(0 /* BackgroundColorSide.Top */);\n        this._private__backgroundBottomColor = this._private__getBackgroundColor(1 /* BackgroundColorSide.Bottom */);\n        this._internal_fullUpdate();\n    }\n    _internal_applyPriceScaleOptions(priceScaleId, options, paneIndex = 0) {\n        const pane = this._private__panes[paneIndex];\n        if (pane === undefined) {\n            {\n                throw new Error(`Trying to apply price scale options with incorrect pane index: ${paneIndex}`);\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        if (priceScaleId === \"left\" /* DefaultPriceScaleId.Left */) {\n            merge(this._private__options, {\n                leftPriceScale: options,\n            });\n            pane._internal_applyScaleOptions({\n                leftPriceScale: options,\n            });\n            this._private__priceScalesOptionsChanged._internal_fire();\n            this._internal_fullUpdate();\n            return;\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        }\n        else if (priceScaleId === \"right\" /* DefaultPriceScaleId.Right */) {\n            merge(this._private__options, {\n                rightPriceScale: options,\n            });\n            pane._internal_applyScaleOptions({\n                rightPriceScale: options,\n            });\n            this._private__priceScalesOptionsChanged._internal_fire();\n            this._internal_fullUpdate();\n            return;\n        }\n        const res = this._internal_findPriceScale(priceScaleId, paneIndex);\n        if (res === null) {\n            {\n                throw new Error(`Trying to apply price scale options with incorrect ID: ${priceScaleId}`);\n            }\n        }\n        res._internal_priceScale._internal_applyOptions(options);\n        this._private__priceScalesOptionsChanged._internal_fire();\n    }\n    _internal_findPriceScale(priceScaleId, paneIndex) {\n        const pane = this._private__panes[paneIndex];\n        if (pane === undefined) {\n            return null;\n        }\n        const priceScale = pane._internal_priceScaleById(priceScaleId);\n        if (priceScale !== null) {\n            return {\n                _internal_pane: pane,\n                _internal_priceScale: priceScale,\n            };\n        }\n        return null;\n    }\n    _internal_timeScale() {\n        return this._private__timeScale;\n    }\n    _internal_panes() {\n        return this._private__panes;\n    }\n    _internal_crosshairSource() {\n        return this._private__crosshair;\n    }\n    _internal_crosshairMoved() {\n        return this._private__crosshairMoved;\n    }\n    _internal_setPaneHeight(pane, height) {\n        pane._internal_setHeight(height);\n        this._internal_recalculateAllPanes();\n    }\n    _internal_setWidth(width) {\n        this._private__width = width;\n        this._private__timeScale._internal_setWidth(this._private__width);\n        this._private__panes.forEach((pane) => pane._internal_setWidth(width));\n        this._internal_recalculateAllPanes();\n    }\n    _internal_removePane(index) {\n        if (this._private__panes.length === 1) {\n            return;\n        }\n        assert(index >= 0 && index < this._private__panes.length, 'Invalid pane index');\n        this._private__panes.splice(index, 1);\n        this._internal_fullUpdate();\n    }\n    _internal_changePanesHeight(paneIndex, height) {\n        if (this._private__panes.length < 2) {\n            return;\n        }\n        assert(paneIndex >= 0 && paneIndex < this._private__panes.length, 'Invalid pane index');\n        const targetPane = this._private__panes[paneIndex];\n        const totalStretch = this._private__panes.reduce((prevValue, pane) => prevValue + pane._internal_stretchFactor(), 0);\n        const totalHeight = this._private__panes.reduce((prevValue, pane) => prevValue + pane._internal_height(), 0);\n        const maxPaneHeight = totalHeight - MIN_PANE_HEIGHT * (this._private__panes.length - 1);\n        height = Math.min(maxPaneHeight, Math.max(MIN_PANE_HEIGHT, height));\n        const pixelStretchFactor = totalStretch / totalHeight;\n        const oldHeight = targetPane._internal_height();\n        targetPane._internal_setStretchFactor(height * pixelStretchFactor);\n        let otherPanesChange = height - oldHeight;\n        let panesCount = this._private__panes.length - 1;\n        for (const pane of this._private__panes) {\n            if (pane !== targetPane) {\n                const newPaneHeight = Math.min(maxPaneHeight, Math.max(30, pane._internal_height() - otherPanesChange / panesCount));\n                otherPanesChange -= (pane._internal_height() - newPaneHeight);\n                panesCount -= 1;\n                const newStretchFactor = newPaneHeight * pixelStretchFactor;\n                pane._internal_setStretchFactor(newStretchFactor);\n            }\n        }\n        this._internal_fullUpdate();\n    }\n    _internal_swapPanes(first, second) {\n        assert(first >= 0 && first < this._private__panes.length && second >= 0 && second < this._private__panes.length, 'Invalid pane index');\n        const firstPane = this._private__panes[first];\n        const secondPane = this._private__panes[second];\n        this._private__panes[first] = secondPane;\n        this._private__panes[second] = firstPane;\n        this._internal_fullUpdate();\n    }\n    _internal_movePane(from, to) {\n        assert(from >= 0 && from < this._private__panes.length && to >= 0 && to < this._private__panes.length, 'Invalid pane index');\n        if (from === to) {\n            return;\n        }\n        const [paneToMove] = this._private__panes.splice(from, 1);\n        this._private__panes.splice(to, 0, paneToMove);\n        this._internal_fullUpdate();\n    }\n    _internal_startScalePrice(pane, priceScale, x) {\n        pane._internal_startScalePrice(priceScale, x);\n    }\n    _internal_scalePriceTo(pane, priceScale, x) {\n        pane._internal_scalePriceTo(priceScale, x);\n        this._internal_updateCrosshair();\n        this._private__invalidate(this._private__paneInvalidationMask(pane, 2 /* InvalidationLevel.Light */));\n    }\n    _internal_endScalePrice(pane, priceScale) {\n        pane._internal_endScalePrice(priceScale);\n        this._private__invalidate(this._private__paneInvalidationMask(pane, 2 /* InvalidationLevel.Light */));\n    }\n    _internal_startScrollPrice(pane, priceScale, x) {\n        if (priceScale._internal_isAutoScale()) {\n            return;\n        }\n        pane._internal_startScrollPrice(priceScale, x);\n    }\n    _internal_scrollPriceTo(pane, priceScale, x) {\n        if (priceScale._internal_isAutoScale()) {\n            return;\n        }\n        pane._internal_scrollPriceTo(priceScale, x);\n        this._internal_updateCrosshair();\n        this._private__invalidate(this._private__paneInvalidationMask(pane, 2 /* InvalidationLevel.Light */));\n    }\n    _internal_endScrollPrice(pane, priceScale) {\n        if (priceScale._internal_isAutoScale()) {\n            return;\n        }\n        pane._internal_endScrollPrice(priceScale);\n        this._private__invalidate(this._private__paneInvalidationMask(pane, 2 /* InvalidationLevel.Light */));\n    }\n    _internal_resetPriceScale(pane, priceScale) {\n        pane._internal_resetPriceScale(priceScale);\n        this._private__invalidate(this._private__paneInvalidationMask(pane, 2 /* InvalidationLevel.Light */));\n    }\n    _internal_startScaleTime(position) {\n        this._private__timeScale._internal_startScale(position);\n    }\n    /**\n     * Zoom in/out the chart (depends on scale value).\n     *\n     * @param pointX - X coordinate of the point to apply the zoom (the point which should stay on its place)\n     * @param scale - Zoom value. Negative value means zoom out, positive - zoom in.\n     */\n    _internal_zoomTime(pointX, scale) {\n        const timeScale = this._internal_timeScale();\n        if (timeScale._internal_isEmpty() || scale === 0) {\n            return;\n        }\n        const timeScaleWidth = timeScale._internal_width();\n        pointX = Math.max(1, Math.min(pointX, timeScaleWidth));\n        timeScale._internal_zoom(pointX, scale);\n        this._internal_recalculateAllPanes();\n    }\n    _internal_scrollChart(x) {\n        this._internal_startScrollTime(0);\n        this._internal_scrollTimeTo(x);\n        this._internal_endScrollTime();\n    }\n    _internal_scaleTimeTo(x) {\n        this._private__timeScale._internal_scaleTo(x);\n        this._internal_recalculateAllPanes();\n    }\n    _internal_endScaleTime() {\n        this._private__timeScale._internal_endScale();\n        this._internal_lightUpdate();\n    }\n    _internal_startScrollTime(x) {\n        this._private__timeScale._internal_startScroll(x);\n    }\n    _internal_scrollTimeTo(x) {\n        this._private__timeScale._internal_scrollTo(x);\n        this._internal_recalculateAllPanes();\n    }\n    _internal_endScrollTime() {\n        this._private__timeScale._internal_endScroll();\n        this._internal_lightUpdate();\n    }\n    _internal_serieses() {\n        return this._private__serieses;\n    }\n    _internal_setAndSaveCurrentPosition(x, y, event, pane, skipEvent) {\n        this._private__crosshair._internal_saveOriginCoord(x, y);\n        let price = NaN;\n        let index = this._private__timeScale._internal_coordinateToIndex(x, true);\n        const visibleBars = this._private__timeScale._internal_visibleStrictRange();\n        if (visibleBars !== null) {\n            index = Math.min(Math.max(visibleBars._internal_left(), index), visibleBars._internal_right());\n        }\n        const priceScale = pane._internal_defaultPriceScale();\n        const firstValue = priceScale._internal_firstValue();\n        if (firstValue !== null) {\n            price = priceScale._internal_coordinateToPrice(y, firstValue);\n        }\n        price = this._private__magnet._internal_align(price, index, pane);\n        this._private__crosshair._internal_setPosition(index, price, pane);\n        this._internal_cursorUpdate();\n        if (!skipEvent) {\n            const hitTest = hitTestPane(pane, x, y);\n            this._internal_setHoveredSource(hitTest && { _internal_source: hitTest._internal_source, _internal_object: hitTest._internal_object, _internal_cursorStyle: hitTest._internal_cursorStyle || null });\n            this._private__crosshairMoved._internal_fire(this._private__crosshair._internal_appliedIndex(), { x, y }, event);\n        }\n    }\n    // A position provided external (not from an internal event listener)\n    _internal_setAndSaveSyntheticPosition(price, horizontalPosition, pane) {\n        const priceScale = pane._internal_defaultPriceScale();\n        const firstValue = priceScale._internal_firstValue();\n        const y = priceScale._internal_priceToCoordinate(price, ensureNotNull(firstValue));\n        const index = this._private__timeScale._internal_timeToIndex(horizontalPosition, true);\n        const x = this._private__timeScale._internal_indexToCoordinate(ensureNotNull(index));\n        this._internal_setAndSaveCurrentPosition(x, y, null, pane, true);\n    }\n    _internal_clearCurrentPosition(skipEvent) {\n        const crosshair = this._internal_crosshairSource();\n        crosshair._internal_clearPosition();\n        this._internal_cursorUpdate();\n        if (!skipEvent) {\n            this._private__crosshairMoved._internal_fire(null, null, null);\n        }\n    }\n    _internal_updateCrosshair() {\n        // apply magnet\n        const pane = this._private__crosshair._internal_pane();\n        if (pane !== null) {\n            const x = this._private__crosshair._internal_originCoordX();\n            const y = this._private__crosshair._internal_originCoordY();\n            this._internal_setAndSaveCurrentPosition(x, y, null, pane);\n        }\n        this._private__crosshair._internal_updateAllViews();\n    }\n    _internal_updateTimeScale(newBaseIndex, newPoints, firstChangedPointIndex) {\n        const oldFirstTime = this._private__timeScale._internal_indexToTime(0);\n        if (newPoints !== undefined && firstChangedPointIndex !== undefined) {\n            this._private__timeScale._internal_update(newPoints, firstChangedPointIndex);\n        }\n        const newFirstTime = this._private__timeScale._internal_indexToTime(0);\n        const currentBaseIndex = this._private__timeScale._internal_baseIndex();\n        const visibleBars = this._private__timeScale._internal_visibleStrictRange();\n        // if time scale cannot return current visible bars range (e.g. time scale has zero-width)\n        // then we do not need to update right offset to shift visible bars range to have the same right offset as we have before new bar\n        // (and actually we cannot)\n        if (visibleBars !== null && oldFirstTime !== null && newFirstTime !== null) {\n            const isLastSeriesBarVisible = visibleBars._internal_contains(currentBaseIndex);\n            const isLeftBarShiftToLeft = this._private__horzScaleBehavior.key(oldFirstTime) > this._private__horzScaleBehavior.key(newFirstTime);\n            const isSeriesPointsAdded = newBaseIndex !== null && newBaseIndex > currentBaseIndex;\n            const isSeriesPointsAddedToRight = isSeriesPointsAdded && !isLeftBarShiftToLeft;\n            const allowShiftWhenReplacingWhitespace = this._private__timeScale._internal_options().allowShiftVisibleRangeOnWhitespaceReplacement;\n            const replacedExistingWhitespace = firstChangedPointIndex === undefined;\n            const needShiftVisibleRangeOnNewBar = isLastSeriesBarVisible && (!replacedExistingWhitespace || allowShiftWhenReplacingWhitespace) && this._private__timeScale._internal_options().shiftVisibleRangeOnNewBar;\n            if (isSeriesPointsAddedToRight && !needShiftVisibleRangeOnNewBar) {\n                const compensationShift = newBaseIndex - currentBaseIndex;\n                this._private__timeScale._internal_setRightOffset(this._private__timeScale._internal_rightOffset() - compensationShift);\n            }\n        }\n        this._private__timeScale._internal_setBaseIndex(newBaseIndex);\n    }\n    _internal_recalculatePane(pane) {\n        if (pane !== null) {\n            pane._internal_recalculate();\n        }\n    }\n    _internal_paneForSource(source) {\n        if (isPanePrimitive(source)) {\n            return source;\n        }\n        const pane = this._private__panes.find((p) => p._internal_orderedSources().includes(source));\n        return pane === undefined ? null : pane;\n    }\n    _internal_recalculateAllPanes() {\n        this._private__panes.forEach((p) => p._internal_recalculate());\n        this._internal_updateCrosshair();\n    }\n    _internal_destroy() {\n        this._private__panes.forEach((p) => p._internal_destroy());\n        this._private__panes.length = 0;\n        // to avoid memleaks\n        this._private__options.localization.priceFormatter = undefined;\n        this._private__options.localization.percentageFormatter = undefined;\n        this._private__options.localization.timeFormatter = undefined;\n    }\n    _internal_rendererOptionsProvider() {\n        return this._private__rendererOptionsProvider;\n    }\n    _internal_priceAxisRendererOptions() {\n        return this._private__rendererOptionsProvider._internal_options();\n    }\n    _internal_priceScalesOptionsChanged() {\n        return this._private__priceScalesOptionsChanged;\n    }\n    _internal_addSeriesToPane(series, paneIndex) {\n        const pane = this._private__getOrCreatePane(paneIndex);\n        this._private__addSeriesToPane(series, pane);\n        this._private__serieses.push(series);\n        if (this._private__serieses.length === 1) {\n            // call fullUpdate to recalculate chart's parts geometry\n            this._internal_fullUpdate();\n        }\n        else {\n            this._internal_lightUpdate();\n        }\n    }\n    _internal_removeSeries(series) {\n        const pane = this._internal_paneForSource(series);\n        const seriesIndex = this._private__serieses.indexOf(series);\n        assert(seriesIndex !== -1, 'Series not found');\n        const paneImpl = ensureNotNull(pane);\n        this._private__serieses.splice(seriesIndex, 1);\n        paneImpl._internal_removeDataSource(series);\n        if (series._internal_destroy) {\n            series._internal_destroy();\n        }\n        this._private__timeScale._internal_recalculateIndicesWithData();\n        this._private__cleanupIfPaneIsEmpty(paneImpl);\n    }\n    _internal_moveSeriesToScale(series, targetScaleId) {\n        const pane = ensureNotNull(this._internal_paneForSource(series));\n        pane._internal_removeDataSource(series, true);\n        pane._internal_addDataSource(series, targetScaleId, true);\n    }\n    _internal_fitContent() {\n        const mask = InvalidateMask._internal_light();\n        mask._internal_setFitContent();\n        this._private__invalidate(mask);\n    }\n    _internal_setTargetLogicalRange(range) {\n        const mask = InvalidateMask._internal_light();\n        mask._internal_applyRange(range);\n        this._private__invalidate(mask);\n    }\n    _internal_resetTimeScale() {\n        const mask = InvalidateMask._internal_light();\n        mask._internal_resetTimeScale();\n        this._private__invalidate(mask);\n    }\n    _internal_setBarSpacing(spacing) {\n        const mask = InvalidateMask._internal_light();\n        mask._internal_setBarSpacing(spacing);\n        this._private__invalidate(mask);\n    }\n    _internal_setRightOffset(offset) {\n        const mask = InvalidateMask._internal_light();\n        mask._internal_setRightOffset(offset);\n        this._private__invalidate(mask);\n    }\n    _internal_setTimeScaleAnimation(animation) {\n        const mask = InvalidateMask._internal_light();\n        mask._internal_setTimeScaleAnimation(animation);\n        this._private__invalidate(mask);\n    }\n    _internal_stopTimeScaleAnimation() {\n        const mask = InvalidateMask._internal_light();\n        mask._internal_stopTimeScaleAnimation();\n        this._private__invalidate(mask);\n    }\n    _internal_defaultVisiblePriceScaleId() {\n        return this._private__options.rightPriceScale.visible ? \"right\" /* DefaultPriceScaleId.Right */ : \"left\" /* DefaultPriceScaleId.Left */;\n    }\n    _internal_moveSeriesToPane(series, newPaneIndex) {\n        assert(newPaneIndex >= 0, 'Index should be greater or equal to 0');\n        const fromPaneIndex = this._private__seriesPaneIndex(series);\n        if (newPaneIndex === fromPaneIndex) {\n            return;\n        }\n        const previousPane = ensureNotNull(this._internal_paneForSource(series));\n        previousPane._internal_removeDataSource(series);\n        const newPane = this._private__getOrCreatePane(newPaneIndex);\n        this._private__addSeriesToPane(series, newPane);\n        if (previousPane._internal_dataSources().length === 0) {\n            this._private__cleanupIfPaneIsEmpty(previousPane);\n        }\n        this._internal_fullUpdate();\n    }\n    _internal_backgroundBottomColor() {\n        return this._private__backgroundBottomColor;\n    }\n    _internal_backgroundTopColor() {\n        return this._private__backgroundTopColor;\n    }\n    _internal_backgroundColorAtYPercentFromTop(percent) {\n        const bottomColor = this._private__backgroundBottomColor;\n        const topColor = this._private__backgroundTopColor;\n        if (bottomColor === topColor) {\n            // solid background\n            return bottomColor;\n        }\n        // gradient background\n        // percent should be from 0 to 100 (we're using only integer values to make cache more efficient)\n        percent = Math.max(0, Math.min(100, Math.round(percent * 100)));\n        if (this._private__gradientColorsCache === null ||\n            this._private__gradientColorsCache._internal_topColor !== topColor || this._private__gradientColorsCache._internal_bottomColor !== bottomColor) {\n            this._private__gradientColorsCache = {\n                _internal_topColor: topColor,\n                _internal_bottomColor: bottomColor,\n                _internal_colors: new Map(),\n            };\n        }\n        else {\n            const cachedValue = this._private__gradientColorsCache._internal_colors.get(percent);\n            if (cachedValue !== undefined) {\n                return cachedValue;\n            }\n        }\n        const result = this._private__colorParser._internal_gradientColorAtPercent(topColor, bottomColor, percent / 100);\n        this._private__gradientColorsCache._internal_colors.set(percent, result);\n        return result;\n    }\n    _internal_getPaneIndex(pane) {\n        return this._private__panes.indexOf(pane);\n    }\n    _internal_colorParser() {\n        return this._private__colorParser;\n    }\n    _internal_addPane() {\n        return this._private__addPane();\n    }\n    _private__addPane(index) {\n        const pane = new Pane(this._private__timeScale, this);\n        this._private__panes.push(pane);\n        const idx = index ?? this._private__panes.length - 1;\n        // we always do autoscaling on the creation\n        // if autoscale option is true, it is ok, just recalculate by invalidation mask\n        // if autoscale option is false, autoscale anyway on the first draw\n        // also there is a scenario when autoscale is true in constructor and false later on applyOptions\n        const mask = InvalidateMask._internal_full();\n        mask._internal_invalidatePane(idx, {\n            _internal_level: 0 /* InvalidationLevel.None */,\n            _internal_autoScale: true,\n        });\n        this._private__invalidate(mask);\n        return pane;\n    }\n    _private__getOrCreatePane(index) {\n        assert(index >= 0, 'Index should be greater or equal to 0');\n        index = Math.min(this._private__panes.length, index);\n        if (index < this._private__panes.length) {\n            return this._private__panes[index];\n        }\n        return this._private__addPane(index);\n    }\n    _private__seriesPaneIndex(series) {\n        return this._private__panes.findIndex((pane) => pane._internal_series().includes(series));\n    }\n    _private__paneInvalidationMask(pane, level) {\n        const inv = new InvalidateMask(level);\n        if (pane !== null) {\n            const index = this._private__panes.indexOf(pane);\n            inv._internal_invalidatePane(index, {\n                _internal_level: level,\n            });\n        }\n        return inv;\n    }\n    _private__invalidationMaskForSource(source, invalidateType) {\n        if (invalidateType === undefined) {\n            invalidateType = 2 /* InvalidationLevel.Light */;\n        }\n        return this._private__paneInvalidationMask(this._internal_paneForSource(source), invalidateType);\n    }\n    _private__invalidate(mask) {\n        if (this._private__invalidateHandler) {\n            this._private__invalidateHandler(mask);\n        }\n        this._private__panes.forEach((pane) => pane._internal_grid()._internal_paneView()._internal_update());\n    }\n    _private__addSeriesToPane(series, pane) {\n        const priceScaleId = series._internal_options().priceScaleId;\n        const targetScaleId = priceScaleId !== undefined ? priceScaleId : this._internal_defaultVisiblePriceScaleId();\n        pane._internal_addDataSource(series, targetScaleId);\n        if (!isDefaultPriceScale(targetScaleId)) {\n            // let's apply that options again to apply margins\n            series._internal_applyOptions(series._internal_options());\n        }\n    }\n    _private__getBackgroundColor(side) {\n        const layoutOptions = this._private__options['layout'];\n        if (layoutOptions.background.type === \"gradient\" /* ColorType.VerticalGradient */) {\n            return side === 0 /* BackgroundColorSide.Top */ ?\n                layoutOptions.background.topColor :\n                layoutOptions.background.bottomColor;\n        }\n        return layoutOptions.background.color;\n    }\n    _private__cleanupIfPaneIsEmpty(pane) {\n        if (!pane._internal_preserveEmptyPane() && (pane._internal_dataSources().length === 0 && this._private__panes.length > 1)) {\n            this._private__panes.splice(this._internal_getPaneIndex(pane), 1);\n        }\n    }\n}\n\nfunction fillUpDownCandlesticksColors(options) {\n    if (options.borderColor !== undefined) {\n        options.borderUpColor = options.borderColor;\n        options.borderDownColor = options.borderColor;\n    }\n    if (options.wickColor !== undefined) {\n        options.wickUpColor = options.wickColor;\n        options.wickDownColor = options.wickColor;\n    }\n}\n/**\n * Represents the type of the last price animation for series such as area or line.\n */\nvar LastPriceAnimationMode;\n(function (LastPriceAnimationMode) {\n    /**\n     * Animation is always disabled\n     */\n    LastPriceAnimationMode[LastPriceAnimationMode[\"Disabled\"] = 0] = \"Disabled\";\n    /**\n     * Animation is always enabled.\n     */\n    LastPriceAnimationMode[LastPriceAnimationMode[\"Continuous\"] = 1] = \"Continuous\";\n    /**\n     * Animation is active after new data.\n     */\n    LastPriceAnimationMode[LastPriceAnimationMode[\"OnDataUpdate\"] = 2] = \"OnDataUpdate\";\n})(LastPriceAnimationMode || (LastPriceAnimationMode = {}));\nfunction precisionByMinMove(minMove) {\n    if (minMove >= 1) {\n        return 0;\n    }\n    let i = 0;\n    for (; i < 8; i++) {\n        const intPart = Math.round(minMove);\n        const fractPart = Math.abs(intPart - minMove);\n        if (fractPart < 1e-8) {\n            return i;\n        }\n        minMove = minMove * 10;\n    }\n    return i;\n}\n/**\n * Represents the source of data to be used for the horizontal price line.\n */\nvar PriceLineSource;\n(function (PriceLineSource) {\n    /**\n     * Use the last bar data.\n     */\n    PriceLineSource[PriceLineSource[\"LastBar\"] = 0] = \"LastBar\";\n    /**\n     * Use the last visible data of the chart viewport.\n     */\n    PriceLineSource[PriceLineSource[\"LastVisible\"] = 1] = \"LastVisible\";\n})(PriceLineSource || (PriceLineSource = {}));\n\n/**\n * Represents a type of color.\n */\nvar ColorType;\n(function (ColorType) {\n    /** Solid color */\n    ColorType[\"Solid\"] = \"solid\";\n    /** Vertical gradient color */\n    ColorType[\"VerticalGradient\"] = \"gradient\";\n})(ColorType || (ColorType = {}));\n\n/**\n * Check if a time value is a business day object.\n *\n * @param time - The time to check.\n * @returns `true` if `time` is a {@link BusinessDay} object, false otherwise.\n */\nfunction isBusinessDay(time) {\n    return !isNumber(time) && !isString(time);\n}\n/**\n * Check if a time value is a UTC timestamp number.\n *\n * @param time - The time to check.\n * @returns `true` if `time` is a {@link UTCTimestamp} number, false otherwise.\n */\nfunction isUTCTimestamp(time) {\n    return isNumber(time);\n}\n/**\n * Represents the type of a tick mark on the time axis.\n */\nvar TickMarkType;\n(function (TickMarkType) {\n    /**\n     * The start of the year (e.g. it's the first tick mark in a year).\n     */\n    TickMarkType[TickMarkType[\"Year\"] = 0] = \"Year\";\n    /**\n     * The start of the month (e.g. it's the first tick mark in a month).\n     */\n    TickMarkType[TickMarkType[\"Month\"] = 1] = \"Month\";\n    /**\n     * A day of the month.\n     */\n    TickMarkType[TickMarkType[\"DayOfMonth\"] = 2] = \"DayOfMonth\";\n    /**\n     * A time without seconds.\n     */\n    TickMarkType[TickMarkType[\"Time\"] = 3] = \"Time\";\n    /**\n     * A time with seconds.\n     */\n    TickMarkType[TickMarkType[\"TimeWithSeconds\"] = 4] = \"TimeWithSeconds\";\n})(TickMarkType || (TickMarkType = {}));\n\nconst getMonth = (date) => date.getUTCMonth() + 1;\nconst getDay = (date) => date.getUTCDate();\nconst getYear = (date) => date.getUTCFullYear();\nconst dd = (date) => numberToStringWithLeadingZero(getDay(date), 2);\nconst MMMM = (date, locale) => new Date(date.getUTCFullYear(), date.getUTCMonth(), 1)\n    .toLocaleString(locale, { month: 'long' });\nconst MMM = (date, locale) => new Date(date.getUTCFullYear(), date.getUTCMonth(), 1)\n    .toLocaleString(locale, { month: 'short' });\nconst MM = (date) => numberToStringWithLeadingZero(getMonth(date), 2);\nconst yy = (date) => numberToStringWithLeadingZero(getYear(date) % 100, 2);\nconst yyyy = (date) => numberToStringWithLeadingZero(getYear(date), 4);\nfunction formatDate(date, format, locale) {\n    return format\n        .replace(/yyyy/g, yyyy(date))\n        .replace(/yy/g, yy(date))\n        .replace(/MMMM/g, MMMM(date, locale))\n        .replace(/MMM/g, MMM(date, locale))\n        .replace(/MM/g, MM(date))\n        .replace(/dd/g, dd(date));\n}\n\nclass DateFormatter {\n    constructor(dateFormat = 'yyyy-MM-dd', locale = 'default') {\n        this._private__dateFormat = dateFormat;\n        this._private__locale = locale;\n    }\n    _internal_format(date) {\n        return formatDate(date, this._private__dateFormat, this._private__locale);\n    }\n}\n\nclass TimeFormatter {\n    constructor(format) {\n        this._private__formatStr = format || '%h:%m:%s';\n    }\n    _internal_format(date) {\n        return this._private__formatStr.replace('%h', numberToStringWithLeadingZero(date.getUTCHours(), 2)).\n            replace('%m', numberToStringWithLeadingZero(date.getUTCMinutes(), 2)).\n            replace('%s', numberToStringWithLeadingZero(date.getUTCSeconds(), 2));\n    }\n}\n\nconst defaultParams = {\n    _internal_dateFormat: 'yyyy-MM-dd',\n    _internal_timeFormat: '%h:%m:%s',\n    _internal_dateTimeSeparator: ' ',\n    _internal_locale: 'default',\n};\nclass DateTimeFormatter {\n    constructor(params = {}) {\n        const formatterParams = { ...defaultParams, ...params };\n        this._private__dateFormatter = new DateFormatter(formatterParams._internal_dateFormat, formatterParams._internal_locale);\n        this._private__timeFormatter = new TimeFormatter(formatterParams._internal_timeFormat);\n        this._private__separator = formatterParams._internal_dateTimeSeparator;\n    }\n    _internal_format(dateTime) {\n        return `${this._private__dateFormatter._internal_format(dateTime)}${this._private__separator}${this._private__timeFormatter._internal_format(dateTime)}`;\n    }\n}\n\nfunction defaultTickMarkFormatter(timePoint, tickMarkType, locale) {\n    const formatOptions = {};\n    switch (tickMarkType) {\n        case 0 /* TickMarkType.Year */:\n            formatOptions.year = 'numeric';\n            break;\n        case 1 /* TickMarkType.Month */:\n            formatOptions.month = 'short';\n            break;\n        case 2 /* TickMarkType.DayOfMonth */:\n            formatOptions.day = 'numeric';\n            break;\n        case 3 /* TickMarkType.Time */:\n            formatOptions.hour12 = false;\n            formatOptions.hour = '2-digit';\n            formatOptions.minute = '2-digit';\n            break;\n        case 4 /* TickMarkType.TimeWithSeconds */:\n            formatOptions.hour12 = false;\n            formatOptions.hour = '2-digit';\n            formatOptions.minute = '2-digit';\n            formatOptions.second = '2-digit';\n            break;\n    }\n    const date = timePoint._internal_businessDay === undefined\n        ? new Date(timePoint._internal_timestamp * 1000)\n        : new Date(Date.UTC(timePoint._internal_businessDay.year, timePoint._internal_businessDay.month - 1, timePoint._internal_businessDay.day));\n    // from given date we should use only as UTC date or timestamp\n    // but to format as locale date we can convert UTC date to local date\n    const localDateFromUtc = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds(), date.getUTCMilliseconds());\n    return localDateFromUtc.toLocaleString(locale, formatOptions);\n}\n\nfunction hours(count) {\n    return count * 60 * 60 * 1000;\n}\nfunction minutes(count) {\n    return count * 60 * 1000;\n}\nfunction seconds(count) {\n    return count * 1000;\n}\nconst intradayWeightDivisors = [\n    { _internal_divisor: seconds(1), _internal_weight: 10 /* TickMarkWeight.Second */ },\n    { _internal_divisor: minutes(1), _internal_weight: 20 /* TickMarkWeight.Minute1 */ },\n    { _internal_divisor: minutes(5), _internal_weight: 21 /* TickMarkWeight.Minute5 */ },\n    { _internal_divisor: minutes(30), _internal_weight: 22 /* TickMarkWeight.Minute30 */ },\n    { _internal_divisor: hours(1), _internal_weight: 30 /* TickMarkWeight.Hour1 */ },\n    { _internal_divisor: hours(3), _internal_weight: 31 /* TickMarkWeight.Hour3 */ },\n    { _internal_divisor: hours(6), _internal_weight: 32 /* TickMarkWeight.Hour6 */ },\n    { _internal_divisor: hours(12), _internal_weight: 33 /* TickMarkWeight.Hour12 */ },\n];\nfunction weightByTime(currentDate, prevDate) {\n    if (currentDate.getUTCFullYear() !== prevDate.getUTCFullYear()) {\n        return 70 /* TickMarkWeight.Year */;\n    }\n    else if (currentDate.getUTCMonth() !== prevDate.getUTCMonth()) {\n        return 60 /* TickMarkWeight.Month */;\n    }\n    else if (currentDate.getUTCDate() !== prevDate.getUTCDate()) {\n        return 50 /* TickMarkWeight.Day */;\n    }\n    for (let i = intradayWeightDivisors.length - 1; i >= 0; --i) {\n        if (Math.floor(prevDate.getTime() / intradayWeightDivisors[i]._internal_divisor) !== Math.floor(currentDate.getTime() / intradayWeightDivisors[i]._internal_divisor)) {\n            return intradayWeightDivisors[i]._internal_weight;\n        }\n    }\n    return 0 /* TickMarkWeight.LessThanSecond */;\n}\nfunction cast(t) {\n    return t;\n}\nfunction fillWeightsForPoints(sortedTimePoints, startIndex = 0) {\n    if (sortedTimePoints.length === 0) {\n        return;\n    }\n    let prevTime = startIndex === 0 ? null : cast(sortedTimePoints[startIndex - 1].time)._internal_timestamp;\n    let prevDate = prevTime !== null ? new Date(prevTime * 1000) : null;\n    let totalTimeDiff = 0;\n    for (let index = startIndex; index < sortedTimePoints.length; ++index) {\n        const currentPoint = sortedTimePoints[index];\n        const currentDate = new Date(cast(currentPoint.time)._internal_timestamp * 1000);\n        if (prevDate !== null) {\n            currentPoint.timeWeight = weightByTime(currentDate, prevDate);\n        }\n        totalTimeDiff += cast(currentPoint.time)._internal_timestamp - (prevTime || cast(currentPoint.time)._internal_timestamp);\n        prevTime = cast(currentPoint.time)._internal_timestamp;\n        prevDate = currentDate;\n    }\n    if (startIndex === 0 && sortedTimePoints.length > 1) {\n        // let's guess a weight for the first point\n        // let's say the previous point was average time back in the history\n        const averageTimeDiff = Math.ceil(totalTimeDiff / (sortedTimePoints.length - 1));\n        const approxPrevDate = new Date((cast(sortedTimePoints[0].time)._internal_timestamp - averageTimeDiff) * 1000);\n        sortedTimePoints[0].timeWeight = weightByTime(new Date(cast(sortedTimePoints[0].time)._internal_timestamp * 1000), approxPrevDate);\n    }\n}\n\nfunction businessDayConverter(time) {\n    let businessDay = time;\n    if (isString(time)) {\n        businessDay = stringToBusinessDay(time);\n    }\n    if (!isBusinessDay(businessDay)) {\n        throw new Error('time must be of type BusinessDay');\n    }\n    const date = new Date(Date.UTC(businessDay.year, businessDay.month - 1, businessDay.day, 0, 0, 0, 0));\n    return {\n        _internal_timestamp: Math.round(date.getTime() / 1000),\n        _internal_businessDay: businessDay,\n    };\n}\nfunction timestampConverter(time) {\n    if (!isUTCTimestamp(time)) {\n        throw new Error('time must be of type isUTCTimestamp');\n    }\n    return {\n        _internal_timestamp: time,\n    };\n}\nfunction selectTimeConverter(data) {\n    if (data.length === 0) {\n        return null;\n    }\n    if (isBusinessDay(data[0].time) || isString(data[0].time)) {\n        return businessDayConverter;\n    }\n    return timestampConverter;\n}\nconst validDateRegex = /^\\d\\d\\d\\d-\\d\\d-\\d\\d$/;\nfunction convertTime(time) {\n    if (isUTCTimestamp(time)) {\n        return timestampConverter(time);\n    }\n    if (!isBusinessDay(time)) {\n        return businessDayConverter(stringToBusinessDay(time));\n    }\n    return businessDayConverter(time);\n}\nfunction stringToBusinessDay(value) {\n    {\n        // in some browsers (I look at your Chrome) the Date constructor may accept invalid date string\n        // but parses them in 'implementation specific' way\n        // for example 2019-1-1 isn't the same as 2019-01-01 (for Chrome both are 'valid' date strings)\n        // see https://bugs.chromium.org/p/chromium/issues/detail?id=968939\n        // so, we need to be sure that date has valid format to avoid strange behavior and hours of debugging\n        // but let's do this in development build only because of perf\n        if (!validDateRegex.test(value)) {\n            throw new Error(`Invalid date string=${value}, expected format=yyyy-mm-dd`);\n        }\n    }\n    const d = new Date(value);\n    if (isNaN(d.getTime())) {\n        throw new Error(`Invalid date string=${value}, expected format=yyyy-mm-dd`);\n    }\n    return {\n        day: d.getUTCDate(),\n        month: d.getUTCMonth() + 1,\n        year: d.getUTCFullYear(),\n    };\n}\nfunction convertStringToBusinessDay(value) {\n    if (isString(value.time)) {\n        value.time = stringToBusinessDay(value.time);\n    }\n}\nfunction convertStringsToBusinessDays(data) {\n    return data.forEach(convertStringToBusinessDay);\n}\n\n// eslint-disable-next-line complexity\nfunction weightToTickMarkType(weight, timeVisible, secondsVisible) {\n    switch (weight) {\n        case 0 /* TickMarkWeight.LessThanSecond */:\n        case 10 /* TickMarkWeight.Second */:\n            return timeVisible\n                ? (secondsVisible ? 4 /* TickMarkType.TimeWithSeconds */ : 3 /* TickMarkType.Time */)\n                : 2 /* TickMarkType.DayOfMonth */;\n        case 20 /* TickMarkWeight.Minute1 */:\n        case 21 /* TickMarkWeight.Minute5 */:\n        case 22 /* TickMarkWeight.Minute30 */:\n        case 30 /* TickMarkWeight.Hour1 */:\n        case 31 /* TickMarkWeight.Hour3 */:\n        case 32 /* TickMarkWeight.Hour6 */:\n        case 33 /* TickMarkWeight.Hour12 */:\n            return timeVisible ? 3 /* TickMarkType.Time */ : 2 /* TickMarkType.DayOfMonth */;\n        case 50 /* TickMarkWeight.Day */:\n            return 2 /* TickMarkType.DayOfMonth */;\n        case 60 /* TickMarkWeight.Month */:\n            return 1 /* TickMarkType.Month */;\n        case 70 /* TickMarkWeight.Year */:\n            return 0 /* TickMarkType.Year */;\n    }\n}\nclass HorzScaleBehaviorTime {\n    options() {\n        return this._private__options;\n    }\n    setOptions(options) {\n        this._private__options = options;\n        this.updateFormatter(options.localization);\n    }\n    preprocessData(data) {\n        if (Array.isArray(data)) {\n            convertStringsToBusinessDays(data);\n        }\n        else {\n            convertStringToBusinessDay(data);\n        }\n    }\n    createConverterToInternalObj(data) {\n        return ensureNotNull(selectTimeConverter(data));\n    }\n    key(item) {\n        // eslint-disable-next-line no-restricted-syntax\n        if (typeof item === 'object' && \"_internal_timestamp\" in item) {\n            return item._internal_timestamp;\n        }\n        else {\n            return this.key(this.convertHorzItemToInternal(item));\n        }\n    }\n    cacheKey(item) {\n        const time = item;\n        return time._internal_businessDay === undefined\n            ? new Date(time._internal_timestamp * 1000).getTime()\n            : new Date(Date.UTC(time._internal_businessDay.year, time._internal_businessDay.month - 1, time._internal_businessDay.day)).getTime();\n    }\n    convertHorzItemToInternal(item) {\n        return convertTime(item);\n    }\n    updateFormatter(options) {\n        if (!this._private__options) {\n            return;\n        }\n        const dateFormat = options.dateFormat;\n        if (this._private__options.timeScale.timeVisible) {\n            this._private__dateTimeFormatter = new DateTimeFormatter({\n                _internal_dateFormat: dateFormat,\n                _internal_timeFormat: this._private__options.timeScale.secondsVisible ? '%h:%m:%s' : '%h:%m',\n                _internal_dateTimeSeparator: '   ',\n                _internal_locale: options.locale,\n            });\n        }\n        else {\n            this._private__dateTimeFormatter = new DateFormatter(dateFormat, options.locale);\n        }\n    }\n    formatHorzItem(item) {\n        const tp = item;\n        return this._private__dateTimeFormatter._internal_format(new Date(tp._internal_timestamp * 1000));\n    }\n    formatTickmark(tickMark, localizationOptions) {\n        const tickMarkType = weightToTickMarkType(tickMark.weight, this._private__options.timeScale.timeVisible, this._private__options.timeScale.secondsVisible);\n        const options = this._private__options.timeScale;\n        if (options.tickMarkFormatter !== undefined) {\n            const tickMarkString = options.tickMarkFormatter(tickMark.originalTime, tickMarkType, localizationOptions.locale);\n            if (tickMarkString !== null) {\n                return tickMarkString;\n            }\n        }\n        return defaultTickMarkFormatter(tickMark.time, tickMarkType, localizationOptions.locale);\n    }\n    maxTickMarkWeight(tickMarks) {\n        let maxWeight = tickMarks.reduce(markWithGreaterWeight$2, tickMarks[0]).weight;\n        // special case: it looks strange if 15:00 is bold but 14:00 is not\n        // so if maxWeight > TickMarkWeight.Hour1 and < TickMarkWeight.Day reduce it to TickMarkWeight.Hour1\n        if (maxWeight > 30 /* TickMarkWeight.Hour1 */ && maxWeight < 50 /* TickMarkWeight.Day */) {\n            maxWeight = 30 /* TickMarkWeight.Hour1 */;\n        }\n        return maxWeight;\n    }\n    fillWeightsForPoints(sortedTimePoints, startIndex) {\n        fillWeightsForPoints(sortedTimePoints, startIndex);\n    }\n    static _internal_applyDefaults(options) {\n        return merge({ localization: { dateFormat: 'dd MMM \\'yy' } }, options ?? {});\n    }\n}\n\n/**\n * When you're trying to use the library in server-side context (for instance in SSR)\n * you don't have some browser-specific variables like navigator or window\n * and if the library will use them on the top level of the library\n * the import will fail due ReferenceError\n * thus, this allows use the navigator on the top level and being imported in server-side context as well\n * See issue #446\n */\n// eslint-disable-next-line @typescript-eslint/tslint/config\nconst isRunningOnClientSide = typeof window !== 'undefined';\n\nfunction isFF() {\n    if (!isRunningOnClientSide) {\n        return false;\n    }\n    return window.navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n}\nfunction isIOS() {\n    if (!isRunningOnClientSide) {\n        return false;\n    }\n    // eslint-disable-next-line deprecation/deprecation\n    return /iPhone|iPad|iPod/.test(window.navigator.platform);\n}\nfunction isChrome() {\n    if (!isRunningOnClientSide) {\n        return false;\n    }\n    return window.chrome !== undefined;\n}\n// Determine whether the browser is running on windows.\nfunction isWindows() {\n    if (!isRunningOnClientSide) {\n        return false;\n    }\n    // more accurate if available\n    if (navigator?.userAgentData?.platform) {\n        return navigator.userAgentData.platform === 'Windows';\n    }\n    return navigator.userAgent.toLowerCase().indexOf('win') >= 0;\n}\n// Determine whether the browser is Chromium based.\nfunction isChromiumBased() {\n    if (!isRunningOnClientSide) {\n        return false;\n    }\n    if (!navigator.userAgentData) {\n        return false;\n    }\n    return navigator.userAgentData.brands.some((brand) => {\n        return brand.brand.includes('Chromium');\n    });\n}\n\n/// <reference types=\"_build-time-constants\" />\nfunction warn(msg) {\n    {\n        // eslint-disable-next-line no-console\n        console.warn(msg);\n    }\n}\n\n// on Hi-DPI CSS size * Device Pixel Ratio should be integer to avoid smoothing\n// For chart widget we decrease the size because we must be inside container.\n// For time axis this is not important, since it just affects space for pane widgets\nfunction suggestChartSize(originalSize) {\n    const integerWidth = Math.floor(originalSize.width);\n    const integerHeight = Math.floor(originalSize.height);\n    const width = integerWidth - (integerWidth % 2);\n    const height = integerHeight - (integerHeight % 2);\n    return size$1({ width, height });\n}\nfunction suggestTimeScaleHeight(originalHeight) {\n    return originalHeight + (originalHeight % 2);\n}\nfunction suggestPriceScaleWidth(originalWidth) {\n    return originalWidth + (originalWidth % 2);\n}\n\nfunction preventScrollByWheelClick(el) {\n    if (!isChrome()) {\n        return;\n    }\n    el.addEventListener('mousedown', (e) => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        if (e.button === 1 /* MouseEventButton.Middle */) {\n            // prevent incorrect scrolling event\n            e.preventDefault();\n            return false;\n        }\n        return undefined;\n    });\n}\n\n// TODO: get rid of a lot of boolean flags, probably we should replace it with some enum\nclass MouseEventHandler {\n    constructor(target, handler, options) {\n        this._private__clickCount = 0;\n        this._private__clickTimeoutId = null;\n        this._private__clickPosition = { _internal_x: Number.NEGATIVE_INFINITY, _internal_y: Number.POSITIVE_INFINITY };\n        this._private__tapCount = 0;\n        this._private__tapTimeoutId = null;\n        this._private__tapPosition = { _internal_x: Number.NEGATIVE_INFINITY, _internal_y: Number.POSITIVE_INFINITY };\n        this._private__longTapTimeoutId = null;\n        this._private__longTapActive = false;\n        this._private__mouseMoveStartPosition = null;\n        this._private__touchMoveStartPosition = null;\n        this._private__touchMoveExceededManhattanDistance = false;\n        this._private__cancelClick = false;\n        this._private__cancelTap = false;\n        this._private__unsubscribeOutsideMouseEvents = null;\n        this._private__unsubscribeOutsideTouchEvents = null;\n        this._private__unsubscribeMobileSafariEvents = null;\n        this._private__unsubscribeMousemove = null;\n        this._private__unsubscribeRootMouseEvents = null;\n        this._private__unsubscribeRootTouchEvents = null;\n        this._private__startPinchMiddlePoint = null;\n        this._private__startPinchDistance = 0;\n        this._private__pinchPrevented = false;\n        this._private__preventTouchDragProcess = false;\n        this._private__mousePressed = false;\n        this._private__lastTouchEventTimeStamp = 0;\n        // for touchstart/touchmove/touchend events we handle only first touch\n        // i.e. we don't support several active touches at the same time (except pinch event)\n        this._private__activeTouchId = null;\n        // accept all mouse leave events if it's not an iOS device\n        // see _mouseEnterHandler, _mouseMoveHandler, _mouseLeaveHandler\n        this._private__acceptMouseLeave = !isIOS();\n        /**\n         * In Firefox mouse events dont't fire if the mouse position is outside of the browser's border.\n         * To prevent the mouse from hanging while pressed we're subscribing on the mouseleave event of the document element.\n         * We're subscribing on mouseleave, but this event is actually fired on mouseup outside of the browser's border.\n         */\n        this._private__onFirefoxOutsideMouseUp = (mouseUpEvent) => {\n            this._private__mouseUpHandler(mouseUpEvent);\n        };\n        /**\n         * Safari doesn't fire touchstart/mousedown events on double tap since iOS 13.\n         * There are two possible solutions:\n         * 1) Call preventDefault in touchEnd handler. But it also prevents click event from firing.\n         * 2) Add listener on dblclick event that fires with the preceding mousedown/mouseup.\n         * https://developer.apple.com/forums/thread/125073\n         */\n        this._private__onMobileSafariDoubleClick = (dblClickEvent) => {\n            if (this._private__firesTouchEvents(dblClickEvent)) {\n                const compatEvent = this._private__makeCompatEvent(dblClickEvent);\n                ++this._private__tapCount;\n                if (this._private__tapTimeoutId && this._private__tapCount > 1) {\n                    const { _internal_manhattanDistance: manhattanDistance } = this._private__touchMouseMoveWithDownInfo(getPosition(dblClickEvent), this._private__tapPosition);\n                    // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n                    if (manhattanDistance < 30 /* Constants.DoubleTapManhattanDistance */ && !this._private__cancelTap) {\n                        this._private__processTouchEvent(compatEvent, this._private__handler._internal_doubleTapEvent);\n                    }\n                    this._private__resetTapTimeout();\n                }\n            }\n            else {\n                const compatEvent = this._private__makeCompatEvent(dblClickEvent);\n                ++this._private__clickCount;\n                if (this._private__clickTimeoutId && this._private__clickCount > 1) {\n                    const { _internal_manhattanDistance: manhattanDistance } = this._private__touchMouseMoveWithDownInfo(getPosition(dblClickEvent), this._private__clickPosition);\n                    // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n                    if (manhattanDistance < 5 /* Constants.DoubleClickManhattanDistance */ && !this._private__cancelClick) {\n                        this._private__processMouseEvent(compatEvent, this._private__handler._internal_mouseDoubleClickEvent);\n                    }\n                    this._private__resetClickTimeout();\n                }\n            }\n        };\n        this._private__target = target;\n        this._private__handler = handler;\n        this._private__options = options;\n        this._private__init();\n    }\n    _internal_destroy() {\n        if (this._private__unsubscribeOutsideMouseEvents !== null) {\n            this._private__unsubscribeOutsideMouseEvents();\n            this._private__unsubscribeOutsideMouseEvents = null;\n        }\n        if (this._private__unsubscribeOutsideTouchEvents !== null) {\n            this._private__unsubscribeOutsideTouchEvents();\n            this._private__unsubscribeOutsideTouchEvents = null;\n        }\n        if (this._private__unsubscribeMousemove !== null) {\n            this._private__unsubscribeMousemove();\n            this._private__unsubscribeMousemove = null;\n        }\n        if (this._private__unsubscribeRootMouseEvents !== null) {\n            this._private__unsubscribeRootMouseEvents();\n            this._private__unsubscribeRootMouseEvents = null;\n        }\n        if (this._private__unsubscribeRootTouchEvents !== null) {\n            this._private__unsubscribeRootTouchEvents();\n            this._private__unsubscribeRootTouchEvents = null;\n        }\n        if (this._private__unsubscribeMobileSafariEvents !== null) {\n            this._private__unsubscribeMobileSafariEvents();\n            this._private__unsubscribeMobileSafariEvents = null;\n        }\n        this._private__clearLongTapTimeout();\n        this._private__resetClickTimeout();\n    }\n    _private__mouseEnterHandler(enterEvent) {\n        if (this._private__unsubscribeMousemove) {\n            this._private__unsubscribeMousemove();\n        }\n        const boundMouseMoveHandler = this._private__mouseMoveHandler.bind(this);\n        this._private__unsubscribeMousemove = () => {\n            this._private__target.removeEventListener('mousemove', boundMouseMoveHandler);\n        };\n        this._private__target.addEventListener('mousemove', boundMouseMoveHandler);\n        if (this._private__firesTouchEvents(enterEvent)) {\n            return;\n        }\n        const compatEvent = this._private__makeCompatEvent(enterEvent);\n        this._private__processMouseEvent(compatEvent, this._private__handler._internal_mouseEnterEvent);\n        this._private__acceptMouseLeave = true;\n    }\n    _private__resetClickTimeout() {\n        if (this._private__clickTimeoutId !== null) {\n            clearTimeout(this._private__clickTimeoutId);\n        }\n        this._private__clickCount = 0;\n        this._private__clickTimeoutId = null;\n        this._private__clickPosition = { _internal_x: Number.NEGATIVE_INFINITY, _internal_y: Number.POSITIVE_INFINITY };\n    }\n    _private__resetTapTimeout() {\n        if (this._private__tapTimeoutId !== null) {\n            clearTimeout(this._private__tapTimeoutId);\n        }\n        this._private__tapCount = 0;\n        this._private__tapTimeoutId = null;\n        this._private__tapPosition = { _internal_x: Number.NEGATIVE_INFINITY, _internal_y: Number.POSITIVE_INFINITY };\n    }\n    _private__mouseMoveHandler(moveEvent) {\n        if (this._private__mousePressed || this._private__touchMoveStartPosition !== null) {\n            return;\n        }\n        if (this._private__firesTouchEvents(moveEvent)) {\n            return;\n        }\n        const compatEvent = this._private__makeCompatEvent(moveEvent);\n        this._private__processMouseEvent(compatEvent, this._private__handler._internal_mouseMoveEvent);\n        this._private__acceptMouseLeave = true;\n    }\n    _private__touchMoveHandler(moveEvent) {\n        const touch = touchWithId(moveEvent.changedTouches, ensureNotNull(this._private__activeTouchId));\n        if (touch === null) {\n            return;\n        }\n        this._private__lastTouchEventTimeStamp = eventTimeStamp(moveEvent);\n        if (this._private__startPinchMiddlePoint !== null) {\n            return;\n        }\n        if (this._private__preventTouchDragProcess) {\n            return;\n        }\n        // prevent pinch if move event comes faster than the second touch\n        this._private__pinchPrevented = true;\n        const moveInfo = this._private__touchMouseMoveWithDownInfo(getPosition(touch), ensureNotNull(this._private__touchMoveStartPosition));\n        const { _internal_xOffset: xOffset, _internal_yOffset: yOffset, _internal_manhattanDistance: manhattanDistance } = moveInfo;\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        if (!this._private__touchMoveExceededManhattanDistance && manhattanDistance < 5 /* Constants.CancelTapManhattanDistance */) {\n            return;\n        }\n        if (!this._private__touchMoveExceededManhattanDistance) {\n            // first time when current position exceeded manhattan distance\n            // vertical drag is more important than horizontal drag\n            // because we scroll the page vertically often than horizontally\n            const correctedXOffset = xOffset * 0.5;\n            // a drag can be only if touch page scroll isn't allowed\n            const isVertDrag = yOffset >= correctedXOffset && !this._private__options._internal_treatVertTouchDragAsPageScroll();\n            const isHorzDrag = correctedXOffset > yOffset && !this._private__options._internal_treatHorzTouchDragAsPageScroll();\n            // if drag event happened then we should revert preventDefault state to original one\n            // and try to process the drag event\n            // else we shouldn't prevent default of the event and ignore processing the drag event\n            if (!isVertDrag && !isHorzDrag) {\n                this._private__preventTouchDragProcess = true;\n            }\n            this._private__touchMoveExceededManhattanDistance = true;\n            // if manhattan distance is more that 5 - we should cancel tap event\n            this._private__cancelTap = true;\n            this._private__clearLongTapTimeout();\n            this._private__resetTapTimeout();\n        }\n        if (!this._private__preventTouchDragProcess) {\n            const compatEvent = this._private__makeCompatEvent(moveEvent, touch);\n            this._private__processTouchEvent(compatEvent, this._private__handler._internal_touchMoveEvent);\n            // we should prevent default in case of touch only\n            // to prevent scroll of the page\n            preventDefault(moveEvent);\n        }\n    }\n    _private__mouseMoveWithDownHandler(moveEvent) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        if (moveEvent.button !== 0 /* MouseEventButton.Left */) {\n            return;\n        }\n        const moveInfo = this._private__touchMouseMoveWithDownInfo(getPosition(moveEvent), ensureNotNull(this._private__mouseMoveStartPosition));\n        const { _internal_manhattanDistance: manhattanDistance } = moveInfo;\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        if (manhattanDistance >= 5 /* Constants.CancelClickManhattanDistance */) {\n            // if manhattan distance is more that 5 - we should cancel click event\n            this._private__cancelClick = true;\n            this._private__resetClickTimeout();\n        }\n        if (this._private__cancelClick) {\n            // if this._cancelClick is true, that means that minimum manhattan distance is already exceeded\n            const compatEvent = this._private__makeCompatEvent(moveEvent);\n            this._private__processMouseEvent(compatEvent, this._private__handler._internal_pressedMouseMoveEvent);\n        }\n    }\n    _private__touchMouseMoveWithDownInfo(currentPosition, startPosition) {\n        const xOffset = Math.abs(startPosition._internal_x - currentPosition._internal_x);\n        const yOffset = Math.abs(startPosition._internal_y - currentPosition._internal_y);\n        const manhattanDistance = xOffset + yOffset;\n        return {\n            _internal_xOffset: xOffset,\n            _internal_yOffset: yOffset,\n            _internal_manhattanDistance: manhattanDistance,\n        };\n    }\n    // eslint-disable-next-line complexity\n    _private__touchEndHandler(touchEndEvent) {\n        let touch = touchWithId(touchEndEvent.changedTouches, ensureNotNull(this._private__activeTouchId));\n        if (touch === null && touchEndEvent.touches.length === 0) {\n            // something went wrong, somehow we missed the required touchend event\n            // probably the browser has not sent this event\n            touch = touchEndEvent.changedTouches[0];\n        }\n        if (touch === null) {\n            return;\n        }\n        this._private__activeTouchId = null;\n        this._private__lastTouchEventTimeStamp = eventTimeStamp(touchEndEvent);\n        this._private__clearLongTapTimeout();\n        this._private__touchMoveStartPosition = null;\n        if (this._private__unsubscribeRootTouchEvents) {\n            this._private__unsubscribeRootTouchEvents();\n            this._private__unsubscribeRootTouchEvents = null;\n        }\n        const compatEvent = this._private__makeCompatEvent(touchEndEvent, touch);\n        this._private__processTouchEvent(compatEvent, this._private__handler._internal_touchEndEvent);\n        ++this._private__tapCount;\n        if (this._private__tapTimeoutId && this._private__tapCount > 1) {\n            // check that both clicks are near enough\n            const { _internal_manhattanDistance: manhattanDistance } = this._private__touchMouseMoveWithDownInfo(getPosition(touch), this._private__tapPosition);\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n            if (manhattanDistance < 30 /* Constants.DoubleTapManhattanDistance */ && !this._private__cancelTap) {\n                this._private__processTouchEvent(compatEvent, this._private__handler._internal_doubleTapEvent);\n            }\n            this._private__resetTapTimeout();\n        }\n        else {\n            if (!this._private__cancelTap) {\n                this._private__processTouchEvent(compatEvent, this._private__handler._internal_tapEvent);\n                // do not fire mouse events if tap handler was executed\n                // prevent click event on new dom element (who appeared after tap)\n                if (this._private__handler._internal_tapEvent) {\n                    preventDefault(touchEndEvent);\n                }\n            }\n        }\n        // prevent, for example, safari's dblclick-to-zoom or fast-click after long-tap\n        // we handle mouseDoubleClickEvent here ourselves\n        if (this._private__tapCount === 0) {\n            preventDefault(touchEndEvent);\n        }\n        if (touchEndEvent.touches.length === 0) {\n            if (this._private__longTapActive) {\n                this._private__longTapActive = false;\n                // prevent native click event\n                preventDefault(touchEndEvent);\n            }\n        }\n    }\n    _private__mouseUpHandler(mouseUpEvent) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        if (mouseUpEvent.button !== 0 /* MouseEventButton.Left */) {\n            return;\n        }\n        const compatEvent = this._private__makeCompatEvent(mouseUpEvent);\n        this._private__mouseMoveStartPosition = null;\n        this._private__mousePressed = false;\n        if (this._private__unsubscribeRootMouseEvents) {\n            this._private__unsubscribeRootMouseEvents();\n            this._private__unsubscribeRootMouseEvents = null;\n        }\n        if (isFF()) {\n            const rootElement = this._private__target.ownerDocument.documentElement;\n            rootElement.removeEventListener('mouseleave', this._private__onFirefoxOutsideMouseUp);\n        }\n        if (this._private__firesTouchEvents(mouseUpEvent)) {\n            return;\n        }\n        this._private__processMouseEvent(compatEvent, this._private__handler._internal_mouseUpEvent);\n        ++this._private__clickCount;\n        if (this._private__clickTimeoutId && this._private__clickCount > 1) {\n            // check that both clicks are near enough\n            const { _internal_manhattanDistance: manhattanDistance } = this._private__touchMouseMoveWithDownInfo(getPosition(mouseUpEvent), this._private__clickPosition);\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n            if (manhattanDistance < 5 /* Constants.DoubleClickManhattanDistance */ && !this._private__cancelClick) {\n                this._private__processMouseEvent(compatEvent, this._private__handler._internal_mouseDoubleClickEvent);\n            }\n            this._private__resetClickTimeout();\n        }\n        else {\n            if (!this._private__cancelClick) {\n                this._private__processMouseEvent(compatEvent, this._private__handler._internal_mouseClickEvent);\n            }\n        }\n    }\n    _private__clearLongTapTimeout() {\n        if (this._private__longTapTimeoutId === null) {\n            return;\n        }\n        clearTimeout(this._private__longTapTimeoutId);\n        this._private__longTapTimeoutId = null;\n    }\n    _private__touchStartHandler(downEvent) {\n        if (this._private__activeTouchId !== null) {\n            return;\n        }\n        const touch = downEvent.changedTouches[0];\n        this._private__activeTouchId = touch.identifier;\n        this._private__lastTouchEventTimeStamp = eventTimeStamp(downEvent);\n        const rootElement = this._private__target.ownerDocument.documentElement;\n        this._private__cancelTap = false;\n        this._private__touchMoveExceededManhattanDistance = false;\n        this._private__preventTouchDragProcess = false;\n        this._private__touchMoveStartPosition = getPosition(touch);\n        if (this._private__unsubscribeRootTouchEvents) {\n            this._private__unsubscribeRootTouchEvents();\n            this._private__unsubscribeRootTouchEvents = null;\n        }\n        {\n            const boundTouchMoveWithDownHandler = this._private__touchMoveHandler.bind(this);\n            const boundTouchEndHandler = this._private__touchEndHandler.bind(this);\n            this._private__unsubscribeRootTouchEvents = () => {\n                rootElement.removeEventListener('touchmove', boundTouchMoveWithDownHandler);\n                rootElement.removeEventListener('touchend', boundTouchEndHandler);\n            };\n            rootElement.addEventListener('touchmove', boundTouchMoveWithDownHandler, { passive: false });\n            rootElement.addEventListener('touchend', boundTouchEndHandler, { passive: false });\n            this._private__clearLongTapTimeout();\n            this._private__longTapTimeoutId = setTimeout(this._private__longTapHandler.bind(this, downEvent), 240 /* Delay.LongTap */);\n        }\n        const compatEvent = this._private__makeCompatEvent(downEvent, touch);\n        this._private__processTouchEvent(compatEvent, this._private__handler._internal_touchStartEvent);\n        if (!this._private__tapTimeoutId) {\n            this._private__tapCount = 0;\n            this._private__tapTimeoutId = setTimeout(this._private__resetTapTimeout.bind(this), 500 /* Delay.ResetClick */);\n            this._private__tapPosition = getPosition(touch);\n        }\n    }\n    _private__mouseDownHandler(downEvent) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        if (downEvent.button !== 0 /* MouseEventButton.Left */) {\n            return;\n        }\n        const rootElement = this._private__target.ownerDocument.documentElement;\n        if (isFF()) {\n            rootElement.addEventListener('mouseleave', this._private__onFirefoxOutsideMouseUp);\n        }\n        this._private__cancelClick = false;\n        this._private__mouseMoveStartPosition = getPosition(downEvent);\n        if (this._private__unsubscribeRootMouseEvents) {\n            this._private__unsubscribeRootMouseEvents();\n            this._private__unsubscribeRootMouseEvents = null;\n        }\n        {\n            const boundMouseMoveWithDownHandler = this._private__mouseMoveWithDownHandler.bind(this);\n            const boundMouseUpHandler = this._private__mouseUpHandler.bind(this);\n            this._private__unsubscribeRootMouseEvents = () => {\n                rootElement.removeEventListener('mousemove', boundMouseMoveWithDownHandler);\n                rootElement.removeEventListener('mouseup', boundMouseUpHandler);\n            };\n            rootElement.addEventListener('mousemove', boundMouseMoveWithDownHandler);\n            rootElement.addEventListener('mouseup', boundMouseUpHandler);\n        }\n        this._private__mousePressed = true;\n        if (this._private__firesTouchEvents(downEvent)) {\n            return;\n        }\n        const compatEvent = this._private__makeCompatEvent(downEvent);\n        this._private__processMouseEvent(compatEvent, this._private__handler._internal_mouseDownEvent);\n        if (!this._private__clickTimeoutId) {\n            this._private__clickCount = 0;\n            this._private__clickTimeoutId = setTimeout(this._private__resetClickTimeout.bind(this), 500 /* Delay.ResetClick */);\n            this._private__clickPosition = getPosition(downEvent);\n        }\n    }\n    _private__init() {\n        this._private__target.addEventListener('mouseenter', this._private__mouseEnterHandler.bind(this));\n        // Do not show context menu when something went wrong\n        this._private__target.addEventListener('touchcancel', this._private__clearLongTapTimeout.bind(this));\n        {\n            const doc = this._private__target.ownerDocument;\n            const outsideHandler = (event) => {\n                if (!this._private__handler._internal_mouseDownOutsideEvent) {\n                    return;\n                }\n                if (event.composed && this._private__target.contains(event.composedPath()[0])) {\n                    return;\n                }\n                if (event.target && this._private__target.contains(event.target)) {\n                    return;\n                }\n                this._private__handler._internal_mouseDownOutsideEvent();\n            };\n            this._private__unsubscribeOutsideTouchEvents = () => {\n                doc.removeEventListener('touchstart', outsideHandler);\n            };\n            this._private__unsubscribeOutsideMouseEvents = () => {\n                doc.removeEventListener('mousedown', outsideHandler);\n            };\n            doc.addEventListener('mousedown', outsideHandler);\n            doc.addEventListener('touchstart', outsideHandler, { passive: true });\n        }\n        if (isIOS()) {\n            this._private__unsubscribeMobileSafariEvents = () => {\n                this._private__target.removeEventListener('dblclick', this._private__onMobileSafariDoubleClick);\n            };\n            this._private__target.addEventListener('dblclick', this._private__onMobileSafariDoubleClick);\n        }\n        this._private__target.addEventListener('mouseleave', this._private__mouseLeaveHandler.bind(this));\n        this._private__target.addEventListener('touchstart', this._private__touchStartHandler.bind(this), { passive: true });\n        preventScrollByWheelClick(this._private__target);\n        this._private__target.addEventListener('mousedown', this._private__mouseDownHandler.bind(this));\n        this._private__initPinch();\n        // Hey mobile Safari, what's up?\n        // If mobile Safari doesn't have any touchmove handler with passive=false\n        // it treats a touchstart and the following touchmove events as cancelable=false,\n        // so we can't prevent them (as soon we subscribe on touchmove inside touchstart's handler).\n        // And we'll get scroll of the page along with chart's one instead of only chart's scroll.\n        this._private__target.addEventListener('touchmove', () => { }, { passive: false });\n    }\n    _private__initPinch() {\n        if (this._private__handler._internal_pinchStartEvent === undefined &&\n            this._private__handler._internal_pinchEvent === undefined &&\n            this._private__handler._internal_pinchEndEvent === undefined) {\n            return;\n        }\n        this._private__target.addEventListener('touchstart', (event) => this._private__checkPinchState(event.touches), { passive: true });\n        this._private__target.addEventListener('touchmove', (event) => {\n            if (event.touches.length !== 2 || this._private__startPinchMiddlePoint === null) {\n                return;\n            }\n            if (this._private__handler._internal_pinchEvent !== undefined) {\n                const currentDistance = getDistance(event.touches[0], event.touches[1]);\n                const scale = currentDistance / this._private__startPinchDistance;\n                this._private__handler._internal_pinchEvent(this._private__startPinchMiddlePoint, scale);\n                preventDefault(event);\n            }\n        }, { passive: false });\n        this._private__target.addEventListener('touchend', (event) => {\n            this._private__checkPinchState(event.touches);\n        });\n    }\n    _private__checkPinchState(touches) {\n        if (touches.length === 1) {\n            this._private__pinchPrevented = false;\n        }\n        if (touches.length !== 2 || this._private__pinchPrevented || this._private__longTapActive) {\n            this._private__stopPinch();\n        }\n        else {\n            this._private__startPinch(touches);\n        }\n    }\n    _private__startPinch(touches) {\n        const box = getBoundingClientRect(this._private__target);\n        this._private__startPinchMiddlePoint = {\n            _internal_x: ((touches[0].clientX - box.left) + (touches[1].clientX - box.left)) / 2,\n            _internal_y: ((touches[0].clientY - box.top) + (touches[1].clientY - box.top)) / 2,\n        };\n        this._private__startPinchDistance = getDistance(touches[0], touches[1]);\n        if (this._private__handler._internal_pinchStartEvent !== undefined) {\n            this._private__handler._internal_pinchStartEvent();\n        }\n        this._private__clearLongTapTimeout();\n    }\n    _private__stopPinch() {\n        if (this._private__startPinchMiddlePoint === null) {\n            return;\n        }\n        this._private__startPinchMiddlePoint = null;\n        if (this._private__handler._internal_pinchEndEvent !== undefined) {\n            this._private__handler._internal_pinchEndEvent();\n        }\n    }\n    _private__mouseLeaveHandler(event) {\n        if (this._private__unsubscribeMousemove) {\n            this._private__unsubscribeMousemove();\n        }\n        if (this._private__firesTouchEvents(event)) {\n            return;\n        }\n        if (!this._private__acceptMouseLeave) {\n            // mobile Safari sometimes emits mouse leave event for no reason, there is no way to handle it in other way\n            // just ignore this event if there was no mouse move or mouse enter events\n            return;\n        }\n        const compatEvent = this._private__makeCompatEvent(event);\n        this._private__processMouseEvent(compatEvent, this._private__handler._internal_mouseLeaveEvent);\n        // accept all mouse leave events if it's not an iOS device\n        this._private__acceptMouseLeave = !isIOS();\n    }\n    _private__longTapHandler(event) {\n        const touch = touchWithId(event.touches, ensureNotNull(this._private__activeTouchId));\n        if (touch === null) {\n            return;\n        }\n        const compatEvent = this._private__makeCompatEvent(event, touch);\n        this._private__processTouchEvent(compatEvent, this._private__handler._internal_longTapEvent);\n        this._private__cancelTap = true;\n        // long tap is active until touchend event with 0 touches occurred\n        this._private__longTapActive = true;\n    }\n    _private__firesTouchEvents(e) {\n        if (e.sourceCapabilities && e.sourceCapabilities.firesTouchEvents !== undefined) {\n            return e.sourceCapabilities.firesTouchEvents;\n        }\n        return eventTimeStamp(e) < this._private__lastTouchEventTimeStamp + 500 /* Delay.PreventFiresTouchEvents */;\n    }\n    _private__processTouchEvent(event, callback) {\n        if (callback) {\n            callback.call(this._private__handler, event);\n        }\n    }\n    _private__processMouseEvent(event, callback) {\n        if (!callback) {\n            return;\n        }\n        callback.call(this._private__handler, event);\n    }\n    _private__makeCompatEvent(event, touch) {\n        // TouchEvent has no clientX/Y coordinates:\n        // We have to use the last Touch instead\n        const eventLike = touch || event;\n        const box = this._private__target.getBoundingClientRect() || { left: 0, top: 0 };\n        return {\n            clientX: eventLike.clientX,\n            clientY: eventLike.clientY,\n            pageX: eventLike.pageX,\n            pageY: eventLike.pageY,\n            screenX: eventLike.screenX,\n            screenY: eventLike.screenY,\n            localX: (eventLike.clientX - box.left),\n            localY: (eventLike.clientY - box.top),\n            ctrlKey: event.ctrlKey,\n            altKey: event.altKey,\n            shiftKey: event.shiftKey,\n            metaKey: event.metaKey,\n            _internal_isTouch: !event.type.startsWith('mouse') && event.type !== 'contextmenu' && event.type !== 'click',\n            _internal_srcType: event.type,\n            _internal_target: eventLike.target,\n            _internal_view: event.view,\n            _internal_preventDefault: () => {\n                if (event.type !== 'touchstart') {\n                    // touchstart is passive and cannot be prevented\n                    preventDefault(event);\n                }\n            },\n        };\n    }\n}\nfunction getBoundingClientRect(element) {\n    return element.getBoundingClientRect() || { left: 0, top: 0 };\n}\nfunction getDistance(p1, p2) {\n    const xDiff = p1.clientX - p2.clientX;\n    const yDiff = p1.clientY - p2.clientY;\n    return Math.sqrt(xDiff * xDiff + yDiff * yDiff);\n}\nfunction preventDefault(event) {\n    if (event.cancelable) {\n        event.preventDefault();\n    }\n}\nfunction getPosition(eventLike) {\n    return {\n        _internal_x: eventLike.pageX,\n        _internal_y: eventLike.pageY,\n    };\n}\nfunction eventTimeStamp(e) {\n    // for some reason e.timestamp is always 0 on iPad with magic mouse, so we use performance.now() as a fallback\n    return e.timeStamp || performance.now();\n}\nfunction touchWithId(touches, id) {\n    for (let i = 0; i < touches.length; ++i) {\n        if (touches[i].identifier === id) {\n            return touches[i];\n        }\n    }\n    return null;\n}\n\nclass PaneSeparator {\n    constructor(chartWidget, topPaneIndex, bottomPaneIndex) {\n        this._private__handle = null;\n        this._private__mouseEventHandler = null;\n        this._private__resizeEnabled = true;\n        this._private__resizeInfo = null;\n        this._private__chartWidget = chartWidget;\n        this._private__topPane = chartWidget._internal_paneWidgets()[topPaneIndex];\n        this._private__bottomPane = chartWidget._internal_paneWidgets()[bottomPaneIndex];\n        this._private__rowElement = document.createElement('tr');\n        this._private__rowElement.style.height = 1 /* SeparatorConstants.SeparatorHeight */ + 'px';\n        this._private__cell = document.createElement('td');\n        this._private__cell.style.position = 'relative';\n        this._private__cell.style.padding = '0';\n        this._private__cell.style.margin = '0';\n        this._private__cell.setAttribute('colspan', '3');\n        this._private__updateBorderColor();\n        this._private__rowElement.appendChild(this._private__cell);\n        this._private__resizeEnabled = this._private__chartWidget._internal_options()['layout'].panes.enableResize;\n        if (!this._private__resizeEnabled) {\n            this._private__handle = null;\n            this._private__mouseEventHandler = null;\n        }\n        else {\n            this._private__addResizableHandle();\n        }\n    }\n    _internal_destroy() {\n        if (this._private__mouseEventHandler !== null) {\n            this._private__mouseEventHandler._internal_destroy();\n        }\n    }\n    _internal_getElement() {\n        return this._private__rowElement;\n    }\n    _internal_getSize() {\n        return size$1({\n            width: this._private__topPane._internal_getSize().width,\n            height: 1 /* SeparatorConstants.SeparatorHeight */,\n        });\n    }\n    _internal_getBitmapSize() {\n        return size$1({\n            width: this._private__topPane._internal_getBitmapSize().width,\n            height: 1 /* SeparatorConstants.SeparatorHeight */ * window.devicePixelRatio,\n        });\n    }\n    _internal_drawBitmap(ctx, x, y) {\n        const bitmapSize = this._internal_getBitmapSize();\n        ctx.fillStyle = this._private__chartWidget._internal_options()['layout'].panes.separatorColor;\n        ctx.fillRect(x, y, bitmapSize.width, bitmapSize.height);\n    }\n    _internal_update() {\n        this._private__updateBorderColor();\n        if (this._private__chartWidget._internal_options()['layout'].panes.enableResize !== this._private__resizeEnabled) {\n            this._private__resizeEnabled = this._private__chartWidget._internal_options()['layout'].panes.enableResize;\n            if (this._private__resizeEnabled) {\n                this._private__addResizableHandle();\n            }\n            else {\n                if (this._private__handle !== null) {\n                    this._private__cell.removeChild(this._private__handle._internal_backgroundElement);\n                    this._private__cell.removeChild(this._private__handle._internal_element);\n                    this._private__handle = null;\n                }\n                if (this._private__mouseEventHandler !== null) {\n                    this._private__mouseEventHandler._internal_destroy();\n                    this._private__mouseEventHandler = null;\n                }\n            }\n        }\n    }\n    _private__addResizableHandle() {\n        const backgroundElement = document.createElement('div');\n        const bgStyle = backgroundElement.style;\n        bgStyle.position = 'fixed';\n        bgStyle.display = 'none';\n        bgStyle.zIndex = '49';\n        bgStyle.top = '0';\n        bgStyle.left = '0';\n        bgStyle.width = '100%';\n        bgStyle.height = '100%';\n        bgStyle.cursor = 'row-resize';\n        this._private__cell.appendChild(backgroundElement);\n        const element = document.createElement('div');\n        const style = element.style;\n        style.position = 'absolute';\n        style.zIndex = '50';\n        style.top = '-4px';\n        style.height = '9px';\n        style.width = '100%';\n        style.backgroundColor = '';\n        style.cursor = 'row-resize';\n        this._private__cell.appendChild(element);\n        const handlers = {\n            _internal_mouseEnterEvent: this._private__mouseOverEvent.bind(this),\n            _internal_mouseLeaveEvent: this._private__mouseLeaveEvent.bind(this),\n            _internal_mouseDownEvent: this._private__mouseDownEvent.bind(this),\n            _internal_touchStartEvent: this._private__mouseDownEvent.bind(this),\n            _internal_pressedMouseMoveEvent: this._private__pressedMouseMoveEvent.bind(this),\n            _internal_touchMoveEvent: this._private__pressedMouseMoveEvent.bind(this),\n            _internal_mouseUpEvent: this._private__mouseUpEvent.bind(this),\n            _internal_touchEndEvent: this._private__mouseUpEvent.bind(this),\n        };\n        this._private__mouseEventHandler = new MouseEventHandler(element, handlers, {\n            _internal_treatVertTouchDragAsPageScroll: () => false,\n            _internal_treatHorzTouchDragAsPageScroll: () => true,\n        });\n        this._private__handle = { _internal_element: element, _internal_backgroundElement: backgroundElement };\n    }\n    _private__updateBorderColor() {\n        this._private__cell.style.background = this._private__chartWidget._internal_options()['layout'].panes.separatorColor;\n    }\n    _private__mouseOverEvent(event) {\n        if (this._private__handle !== null) {\n            this._private__handle._internal_element.style.backgroundColor = this._private__chartWidget._internal_options()['layout'].panes.separatorHoverColor;\n        }\n    }\n    _private__mouseLeaveEvent(event) {\n        if (this._private__handle !== null && this._private__resizeInfo === null) {\n            this._private__handle._internal_element.style.backgroundColor = '';\n        }\n    }\n    _private__mouseDownEvent(event) {\n        if (this._private__handle === null) {\n            return;\n        }\n        const totalStretch = this._private__topPane._internal_state()._internal_stretchFactor() + this._private__bottomPane._internal_state()._internal_stretchFactor();\n        const totalHeight = this._private__topPane._internal_getSize().height + this._private__bottomPane._internal_getSize().height;\n        const pixelStretchFactor = totalStretch / totalHeight;\n        const minPaneStretch = 30 /* SeparatorConstants.MinPaneHeight */ * pixelStretchFactor;\n        if (totalStretch <= minPaneStretch * 2) {\n            // cannot resize panes that already have less than minimal height\n            // that's possible if there are many panes on the chart\n            return;\n        }\n        this._private__resizeInfo = {\n            _internal_startY: event.pageY,\n            _internal_prevStretchTopPane: this._private__topPane._internal_state()._internal_stretchFactor(),\n            _internal_maxPaneStretch: totalStretch - minPaneStretch,\n            _internal_totalStretch: totalStretch,\n            _internal_pixelStretchFactor: pixelStretchFactor,\n            _internal_minPaneStretch: minPaneStretch,\n        };\n        this._private__handle._internal_backgroundElement.style.display = 'block';\n    }\n    _private__pressedMouseMoveEvent(event) {\n        const resizeInfo = this._private__resizeInfo;\n        if (resizeInfo === null) {\n            return;\n        }\n        const deltaY = event.pageY - resizeInfo._internal_startY;\n        const deltaStretchFactor = deltaY * resizeInfo._internal_pixelStretchFactor;\n        const upperPaneNewStretch = clamp(resizeInfo._internal_prevStretchTopPane + deltaStretchFactor, resizeInfo._internal_minPaneStretch, resizeInfo._internal_maxPaneStretch);\n        this._private__topPane._internal_state()._internal_setStretchFactor(upperPaneNewStretch);\n        this._private__bottomPane._internal_state()._internal_setStretchFactor(resizeInfo._internal_totalStretch - upperPaneNewStretch);\n        this._private__chartWidget._internal_model()._internal_fullUpdate();\n    }\n    _private__mouseUpEvent(event) {\n        if (this._private__resizeInfo === null || this._private__handle === null) {\n            return;\n        }\n        this._private__resizeInfo = null;\n        this._private__handle._internal_backgroundElement.style.display = 'none';\n    }\n}\n\nfunction distanceBetweenPoints(pos1, pos2) {\n    return pos1._internal_position - pos2._internal_position;\n}\nfunction speedPxPerMSec(pos1, pos2, maxSpeed) {\n    const speed = (pos1._internal_position - pos2._internal_position) / (pos1._internal_time - pos2._internal_time);\n    return Math.sign(speed) * Math.min(Math.abs(speed), maxSpeed);\n}\nfunction durationMSec(speed, dumpingCoeff) {\n    const lnDumpingCoeff = Math.log(dumpingCoeff);\n    return Math.log((1 /* Constants.EpsilonDistance */ * lnDumpingCoeff) / -speed) / (lnDumpingCoeff);\n}\nclass KineticAnimation {\n    constructor(minSpeed, maxSpeed, dumpingCoeff, minMove) {\n        this._private__position1 = null;\n        this._private__position2 = null;\n        this._private__position3 = null;\n        this._private__position4 = null;\n        this._private__animationStartPosition = null;\n        this._private__durationMsecs = 0;\n        this._private__speedPxPerMsec = 0;\n        this._private__minSpeed = minSpeed;\n        this._private__maxSpeed = maxSpeed;\n        this._private__dumpingCoeff = dumpingCoeff;\n        this._private__minMove = minMove;\n    }\n    _internal_addPosition(position, time) {\n        if (this._private__position1 !== null) {\n            if (this._private__position1._internal_time === time) {\n                this._private__position1._internal_position = position;\n                return;\n            }\n            if (Math.abs(this._private__position1._internal_position - position) < this._private__minMove) {\n                return;\n            }\n        }\n        this._private__position4 = this._private__position3;\n        this._private__position3 = this._private__position2;\n        this._private__position2 = this._private__position1;\n        this._private__position1 = { _internal_time: time, _internal_position: position };\n    }\n    _internal_start(position, time) {\n        if (this._private__position1 === null || this._private__position2 === null) {\n            return;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        if (time - this._private__position1._internal_time > 50 /* Constants.MaxStartDelay */) {\n            return;\n        }\n        // To calculate all the rest parameters we should calculate the speed af first\n        let totalDistance = 0;\n        const speed1 = speedPxPerMSec(this._private__position1, this._private__position2, this._private__maxSpeed);\n        const distance1 = distanceBetweenPoints(this._private__position1, this._private__position2);\n        // We're calculating weighted average speed\n        // Than more distance for a segment, than more its weight\n        const speedItems = [speed1];\n        const distanceItems = [distance1];\n        totalDistance += distance1;\n        if (this._private__position3 !== null) {\n            const speed2 = speedPxPerMSec(this._private__position2, this._private__position3, this._private__maxSpeed);\n            // stop at this moment if direction of the segment is opposite\n            if (Math.sign(speed2) === Math.sign(speed1)) {\n                const distance2 = distanceBetweenPoints(this._private__position2, this._private__position3);\n                speedItems.push(speed2);\n                distanceItems.push(distance2);\n                totalDistance += distance2;\n                if (this._private__position4 !== null) {\n                    const speed3 = speedPxPerMSec(this._private__position3, this._private__position4, this._private__maxSpeed);\n                    if (Math.sign(speed3) === Math.sign(speed1)) {\n                        const distance3 = distanceBetweenPoints(this._private__position3, this._private__position4);\n                        speedItems.push(speed3);\n                        distanceItems.push(distance3);\n                        totalDistance += distance3;\n                    }\n                }\n            }\n        }\n        let resultSpeed = 0;\n        for (let i = 0; i < speedItems.length; ++i) {\n            resultSpeed += distanceItems[i] / totalDistance * speedItems[i];\n        }\n        if (Math.abs(resultSpeed) < this._private__minSpeed) {\n            return;\n        }\n        this._private__animationStartPosition = { _internal_position: position, _internal_time: time };\n        this._private__speedPxPerMsec = resultSpeed;\n        this._private__durationMsecs = durationMSec(Math.abs(resultSpeed), this._private__dumpingCoeff);\n    }\n    _internal_getPosition(time) {\n        const startPosition = ensureNotNull(this._private__animationStartPosition);\n        const durationMsecs = time - startPosition._internal_time;\n        return startPosition._internal_position + this._private__speedPxPerMsec * (Math.pow(this._private__dumpingCoeff, durationMsecs) - 1) / (Math.log(this._private__dumpingCoeff));\n    }\n    _internal_finished(time) {\n        return this._private__animationStartPosition === null || this._private__progressDuration(time) === this._private__durationMsecs;\n    }\n    _private__progressDuration(time) {\n        const startPosition = ensureNotNull(this._private__animationStartPosition);\n        const progress = time - startPosition._internal_time;\n        return Math.min(progress, this._private__durationMsecs);\n    }\n}\n\nconst svg = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"35\" height=\"19\" fill=\"none\"><g fill-rule=\"evenodd\" clip-path=\"url(#a)\" clip-rule=\"evenodd\"><path fill=\"var(--stroke)\" d=\"M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z\"/><path fill=\"var(--fill)\" d=\"M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z\"/></g><defs><clipPath id=\"a\"><path fill=\"var(--stroke)\" d=\"M0 0h35v19H0z\"/></clipPath></defs></svg>`;\nconst css = `a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}`;\n// This widget doesn't support dynamically responding to options changes\n// because it is expected that the `attributionLogo` option won't be changed\n// and this saves some bundle size.\nclass AttributionLogoWidget {\n    constructor(container, chart) {\n        this._private__element = undefined;\n        this._private__cssElement = undefined;\n        this._private__theme = undefined;\n        this._private__visible = false;\n        this._private__container = container;\n        this._private__chart = chart;\n        this._private__render();\n    }\n    _internal_update() {\n        this._private__render();\n    }\n    _internal_removeElement() {\n        if (this._private__element) {\n            this._private__container.removeChild(this._private__element);\n        }\n        if (this._private__cssElement) {\n            this._private__container.removeChild(this._private__cssElement);\n        }\n        this._private__element = undefined;\n        this._private__cssElement = undefined;\n    }\n    _private__shouldUpdate() {\n        return this._private__visible !== this._private__shouldBeVisible() || this._private__theme !== this._private__themeToUse();\n    }\n    _private__themeToUse() {\n        return this._private__chart._internal_model()._internal_colorParser()._internal_colorStringToGrayscale(this._private__chart._internal_options()['layout'].textColor) > 160\n            ? 'dark'\n            : 'light';\n    }\n    _private__shouldBeVisible() {\n        return this._private__chart._internal_options()['layout'].attributionLogo;\n    }\n    _private__getUTMSource() {\n        const url = new URL(location.href);\n        if (!url.hostname) {\n            // ignore local testing\n            return '';\n        }\n        return '&utm_source=' + url.hostname + url.pathname;\n    }\n    _private__render() {\n        if (!this._private__shouldUpdate()) {\n            return;\n        }\n        this._internal_removeElement();\n        this._private__visible = this._private__shouldBeVisible();\n        if (this._private__visible) {\n            this._private__theme = this._private__themeToUse();\n            this._private__cssElement = document.createElement('style');\n            this._private__cssElement.innerText = css;\n            this._private__element = document.createElement('a');\n            this._private__element.href = `https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this._private__getUTMSource()}`;\n            this._private__element.title = 'Charting by TradingView';\n            this._private__element.id = 'tv-attr-logo';\n            this._private__element.target = '_blank';\n            this._private__element.innerHTML = svg;\n            this._private__element.toggleAttribute('data-dark', this._private__theme === 'dark');\n            this._private__container.appendChild(this._private__cssElement);\n            this._private__container.appendChild(this._private__element);\n        }\n    }\n}\n\nfunction createBoundCanvas(parentElement, size) {\n    const doc = ensureNotNull(parentElement.ownerDocument);\n    const canvas = doc.createElement('canvas');\n    parentElement.appendChild(canvas);\n    const binding = bindCanvasElementBitmapSizeTo(canvas, {\n        type: 'device-pixel-content-box',\n        options: {\n            allowResizeObserver: true,\n        },\n        transform: (bitmapSize, canvasElementClientSize) => ({\n            width: Math.max(bitmapSize.width, canvasElementClientSize.width),\n            height: Math.max(bitmapSize.height, canvasElementClientSize.height),\n        }),\n    });\n    binding.resizeCanvasElement(size);\n    return binding;\n}\nfunction releaseCanvas(canvas) {\n    // This function fixes the iOS Safari error \"Total canvas memory use exceeds the maximum limit\".\n    // Seems that iOS Safari stores canvas elements for some additional time internally.\n    // So if we create/destroy a lot of canvas elements in a short period of time we can get this error.\n    // We resize the canvas to 1x1 pixels to force it to release memmory resources.\n    canvas.width = 1;\n    canvas.height = 1;\n    canvas.getContext('2d')?.clearRect(0, 0, 1, 1);\n}\n\nfunction drawBackground(renderer, target, isHovered, hitTestData) {\n    if (renderer._internal_drawBackground) {\n        renderer._internal_drawBackground(target, isHovered, hitTestData);\n    }\n}\nfunction drawForeground(renderer, target, isHovered, hitTestData) {\n    renderer._internal_draw(target, isHovered, hitTestData);\n}\nfunction drawSourceViews(paneViewsGetter, drawRendererFn, source, pane) {\n    const views = paneViewsGetter(source, pane);\n    for (const view of views) {\n        const renderer = view._internal_renderer(pane);\n        if (renderer !== null) {\n            drawRendererFn(renderer);\n        }\n    }\n}\n\nfunction hasPriceScale(source) {\n    return source._internal_priceScale !== undefined;\n}\nfunction buildPriceAxisViewsGetter(zOrder, priceScaleId) {\n    return (source) => {\n        if (!hasPriceScale(source)) {\n            return [];\n        }\n        const psId = source._internal_priceScale()?._internal_id() ?? '';\n        if (psId !== priceScaleId) {\n            // exclude if source is using a different price scale.\n            return [];\n        }\n        return source._internal_pricePaneViews?.(zOrder) ?? [];\n    };\n}\nfunction recalculateOverlapping(views, direction, scaleHeight, rendererOptions) {\n    if (!views.length) {\n        return;\n    }\n    let currentGroupStart = 0;\n    const initLabelHeight = views[0]._internal_height(rendererOptions, true);\n    let spaceBeforeCurrentGroup = direction === 1\n        ? scaleHeight / 2 - (views[0]._internal_getFixedCoordinate() - initLabelHeight / 2)\n        : views[0]._internal_getFixedCoordinate() - initLabelHeight / 2 - scaleHeight / 2;\n    spaceBeforeCurrentGroup = Math.max(0, spaceBeforeCurrentGroup);\n    for (let i = 1; i < views.length; i++) {\n        const view = views[i];\n        const prev = views[i - 1];\n        const height = prev._internal_height(rendererOptions, false);\n        const coordinate = view._internal_getFixedCoordinate();\n        const prevFixedCoordinate = prev._internal_getFixedCoordinate();\n        const overlap = direction === 1\n            ? coordinate > prevFixedCoordinate - height\n            : coordinate < prevFixedCoordinate + height;\n        if (overlap) {\n            const fixedCoordinate = prevFixedCoordinate - height * direction;\n            view._internal_setFixedCoordinate(fixedCoordinate);\n            const edgePoint = fixedCoordinate - direction * height / 2;\n            const outOfViewport = direction === 1 ? edgePoint < 0 : edgePoint > scaleHeight;\n            if (outOfViewport && spaceBeforeCurrentGroup > 0) {\n                // shift the whole group up or down\n                const desiredGroupShift = direction === 1 ? -1 - edgePoint : edgePoint - scaleHeight;\n                const possibleShift = Math.min(desiredGroupShift, spaceBeforeCurrentGroup);\n                for (let k = currentGroupStart; k < views.length; k++) {\n                    views[k]._internal_setFixedCoordinate(views[k]._internal_getFixedCoordinate() + direction * possibleShift);\n                }\n                spaceBeforeCurrentGroup -= possibleShift;\n            }\n        }\n        else {\n            currentGroupStart = i;\n            spaceBeforeCurrentGroup = direction === 1\n                ? prevFixedCoordinate - height - coordinate\n                : coordinate - (prevFixedCoordinate + height);\n        }\n    }\n}\nfunction priceScaleCrosshairLabelVisible(crosshair) {\n    return crosshair.mode !== 2 /* CrosshairMode.Hidden */ && crosshair.horzLine.visible && crosshair.horzLine.labelVisible;\n}\nclass PriceAxisWidget {\n    constructor(pane, options, rendererOptionsProvider, side) {\n        this._private__priceScale = null;\n        this._private__size = null;\n        this._private__mousedown = false;\n        this._private__widthCache = new TextWidthCache(200);\n        this._private__font = null;\n        this._private__prevOptimalWidth = 0;\n        this._private__isSettingSize = false;\n        this._private__canvasSuggestedBitmapSizeChangedHandler = () => {\n            if (this._private__isSettingSize) {\n                return;\n            }\n            this._private__pane._internal_chart()._internal_model()._internal_lightUpdate();\n        };\n        this._private__topCanvasSuggestedBitmapSizeChangedHandler = () => {\n            if (this._private__isSettingSize) {\n                return;\n            }\n            this._private__pane._internal_chart()._internal_model()._internal_lightUpdate();\n        };\n        this._private__pane = pane;\n        this._private__options = options;\n        this._private__layoutOptions = options['layout'];\n        this._private__rendererOptionsProvider = rendererOptionsProvider;\n        this._private__isLeft = side === 'left';\n        this._private__sourcePaneViews = buildPriceAxisViewsGetter('normal', side);\n        this._private__sourceTopPaneViews = buildPriceAxisViewsGetter('top', side);\n        this._private__sourceBottomPaneViews = buildPriceAxisViewsGetter('bottom', side);\n        this._private__cell = document.createElement('div');\n        this._private__cell.style.height = '100%';\n        this._private__cell.style.overflow = 'hidden';\n        this._private__cell.style.width = '25px';\n        this._private__cell.style.left = '0';\n        this._private__cell.style.position = 'relative';\n        this._private__canvasBinding = createBoundCanvas(this._private__cell, size$1({ width: 16, height: 16 }));\n        this._private__canvasBinding.subscribeSuggestedBitmapSizeChanged(this._private__canvasSuggestedBitmapSizeChangedHandler);\n        const canvas = this._private__canvasBinding.canvasElement;\n        canvas.style.position = 'absolute';\n        canvas.style.zIndex = '1';\n        canvas.style.left = '0';\n        canvas.style.top = '0';\n        this._private__topCanvasBinding = createBoundCanvas(this._private__cell, size$1({ width: 16, height: 16 }));\n        this._private__topCanvasBinding.subscribeSuggestedBitmapSizeChanged(this._private__topCanvasSuggestedBitmapSizeChangedHandler);\n        const topCanvas = this._private__topCanvasBinding.canvasElement;\n        topCanvas.style.position = 'absolute';\n        topCanvas.style.zIndex = '2';\n        topCanvas.style.left = '0';\n        topCanvas.style.top = '0';\n        const handler = {\n            _internal_mouseDownEvent: this._private__mouseDownEvent.bind(this),\n            _internal_touchStartEvent: this._private__mouseDownEvent.bind(this),\n            _internal_pressedMouseMoveEvent: this._private__pressedMouseMoveEvent.bind(this),\n            _internal_touchMoveEvent: this._private__pressedMouseMoveEvent.bind(this),\n            _internal_mouseDownOutsideEvent: this._private__mouseDownOutsideEvent.bind(this),\n            _internal_mouseUpEvent: this._private__mouseUpEvent.bind(this),\n            _internal_touchEndEvent: this._private__mouseUpEvent.bind(this),\n            _internal_mouseDoubleClickEvent: this._private__mouseDoubleClickEvent.bind(this),\n            _internal_doubleTapEvent: this._private__mouseDoubleClickEvent.bind(this),\n            _internal_mouseEnterEvent: this._private__mouseEnterEvent.bind(this),\n            _internal_mouseLeaveEvent: this._private__mouseLeaveEvent.bind(this),\n        };\n        this._private__mouseEventHandler = new MouseEventHandler(this._private__topCanvasBinding.canvasElement, handler, {\n            _internal_treatVertTouchDragAsPageScroll: () => !this._private__options['handleScroll'].vertTouchDrag,\n            _internal_treatHorzTouchDragAsPageScroll: () => true,\n        });\n    }\n    _internal_destroy() {\n        this._private__mouseEventHandler._internal_destroy();\n        this._private__topCanvasBinding.unsubscribeSuggestedBitmapSizeChanged(this._private__topCanvasSuggestedBitmapSizeChangedHandler);\n        releaseCanvas(this._private__topCanvasBinding.canvasElement);\n        this._private__topCanvasBinding.dispose();\n        this._private__canvasBinding.unsubscribeSuggestedBitmapSizeChanged(this._private__canvasSuggestedBitmapSizeChangedHandler);\n        releaseCanvas(this._private__canvasBinding.canvasElement);\n        this._private__canvasBinding.dispose();\n        if (this._private__priceScale !== null) {\n            this._private__priceScale._internal_onMarksChanged()._internal_unsubscribeAll(this);\n        }\n        this._private__priceScale = null;\n    }\n    _internal_getElement() {\n        return this._private__cell;\n    }\n    _internal_fontSize() {\n        return this._private__layoutOptions.fontSize;\n    }\n    _internal_rendererOptions() {\n        const options = this._private__rendererOptionsProvider._internal_options();\n        const isFontChanged = this._private__font !== options._internal_font;\n        if (isFontChanged) {\n            this._private__widthCache._internal_reset();\n            this._private__font = options._internal_font;\n        }\n        return options;\n    }\n    _internal_optimalWidth() {\n        if (this._private__priceScale === null) {\n            return 0;\n        }\n        let tickMarkMaxWidth = 0;\n        const rendererOptions = this._internal_rendererOptions();\n        const ctx = ensureNotNull(this._private__canvasBinding.canvasElement.getContext('2d', {\n            colorSpace: this._private__pane._internal_chart()._internal_options().layout.colorSpace,\n        }));\n        ctx.save();\n        const tickMarks = this._private__priceScale._internal_marks();\n        ctx.font = this._private__baseFont();\n        if (tickMarks.length > 0) {\n            tickMarkMaxWidth = Math.max(this._private__widthCache._internal_measureText(ctx, tickMarks[0]._internal_label), this._private__widthCache._internal_measureText(ctx, tickMarks[tickMarks.length - 1]._internal_label));\n        }\n        const views = this._private__backLabels();\n        for (let j = views.length; j--;) {\n            const width = this._private__widthCache._internal_measureText(ctx, views[j]._internal_text());\n            if (width > tickMarkMaxWidth) {\n                tickMarkMaxWidth = width;\n            }\n        }\n        const firstValue = this._private__priceScale._internal_firstValue();\n        if (firstValue !== null &&\n            this._private__size !== null &&\n            priceScaleCrosshairLabelVisible(this._private__options.crosshair)) {\n            const topValue = this._private__priceScale._internal_coordinateToPrice(1, firstValue);\n            const bottomValue = this._private__priceScale._internal_coordinateToPrice(this._private__size.height - 2, firstValue);\n            tickMarkMaxWidth = Math.max(tickMarkMaxWidth, this._private__widthCache._internal_measureText(ctx, this._private__priceScale._internal_formatPrice(Math.floor(Math.min(topValue, bottomValue)) + 0.11111111111111, firstValue)), this._private__widthCache._internal_measureText(ctx, this._private__priceScale._internal_formatPrice(Math.ceil(Math.max(topValue, bottomValue)) - 0.11111111111111, firstValue)));\n        }\n        ctx.restore();\n        const resultTickMarksMaxWidth = tickMarkMaxWidth || 34 /* Constants.DefaultOptimalWidth */;\n        const res = Math.ceil(rendererOptions._internal_borderSize +\n            rendererOptions._internal_tickLength +\n            rendererOptions._internal_paddingInner +\n            rendererOptions._internal_paddingOuter +\n            5 /* Constants.LabelOffset */ +\n            resultTickMarksMaxWidth);\n        // make it even, remove this after migration to perfect fancy canvas\n        return suggestPriceScaleWidth(res);\n    }\n    _internal_setSize(newSize) {\n        if (this._private__size === null || !equalSizes(this._private__size, newSize)) {\n            this._private__size = newSize;\n            this._private__isSettingSize = true;\n            this._private__canvasBinding.resizeCanvasElement(newSize);\n            this._private__topCanvasBinding.resizeCanvasElement(newSize);\n            this._private__isSettingSize = false;\n            this._private__cell.style.width = `${newSize.width}px`;\n            this._private__cell.style.height = `${newSize.height}px`;\n        }\n    }\n    _internal_getWidth() {\n        return ensureNotNull(this._private__size).width;\n    }\n    _internal_setPriceScale(priceScale) {\n        if (this._private__priceScale === priceScale) {\n            return;\n        }\n        if (this._private__priceScale !== null) {\n            this._private__priceScale._internal_onMarksChanged()._internal_unsubscribeAll(this);\n        }\n        this._private__priceScale = priceScale;\n        priceScale._internal_onMarksChanged()._internal_subscribe(this._private__onMarksChanged.bind(this), this);\n    }\n    _internal_priceScale() {\n        return this._private__priceScale;\n    }\n    _internal_reset() {\n        const pane = this._private__pane._internal_state();\n        const model = this._private__pane._internal_chart()._internal_model();\n        model._internal_resetPriceScale(pane, ensureNotNull(this._internal_priceScale()));\n    }\n    _internal_paint(type) {\n        if (this._private__size === null) {\n            return;\n        }\n        const canvasOptions = {\n            colorSpace: this._private__pane._internal_chart()._internal_options().layout.colorSpace,\n        };\n        if (type !== 1 /* InvalidationLevel.Cursor */) {\n            this._private__alignLabels();\n            this._private__canvasBinding.applySuggestedBitmapSize();\n            const target = tryCreateCanvasRenderingTarget2D(this._private__canvasBinding, canvasOptions);\n            if (target !== null) {\n                target.useBitmapCoordinateSpace((scope) => {\n                    this._private__drawBackground(scope);\n                    this._private__drawBorder(scope);\n                });\n                this._private__pane._internal_drawAdditionalSources(target, this._private__sourceBottomPaneViews);\n                this._private__drawTickMarks(target);\n                this._private__pane._internal_drawAdditionalSources(target, this._private__sourcePaneViews);\n                this._private__drawBackLabels(target);\n            }\n        }\n        this._private__topCanvasBinding.applySuggestedBitmapSize();\n        const topTarget = tryCreateCanvasRenderingTarget2D(this._private__topCanvasBinding, canvasOptions);\n        if (topTarget !== null) {\n            topTarget.useBitmapCoordinateSpace(({ context: ctx, bitmapSize }) => {\n                ctx.clearRect(0, 0, bitmapSize.width, bitmapSize.height);\n            });\n            this._private__drawCrosshairLabel(topTarget);\n            this._private__pane._internal_drawAdditionalSources(topTarget, this._private__sourceTopPaneViews);\n        }\n    }\n    _internal_getBitmapSize() {\n        return this._private__canvasBinding.bitmapSize;\n    }\n    _internal_drawBitmap(ctx, x, y) {\n        const bitmapSize = this._internal_getBitmapSize();\n        if (bitmapSize.width > 0 && bitmapSize.height > 0) {\n            ctx.drawImage(this._private__canvasBinding.canvasElement, x, y);\n        }\n    }\n    _internal_update() {\n        // this call has side-effect - it regenerates marks on the price scale\n        this._private__priceScale?._internal_marks();\n    }\n    _private__mouseDownEvent(e) {\n        if (this._private__priceScale === null || this._private__priceScale._internal_isEmpty() || !this._private__options['handleScale'].axisPressedMouseMove.price) {\n            return;\n        }\n        const model = this._private__pane._internal_chart()._internal_model();\n        const pane = this._private__pane._internal_state();\n        this._private__mousedown = true;\n        model._internal_startScalePrice(pane, this._private__priceScale, e.localY);\n    }\n    _private__pressedMouseMoveEvent(e) {\n        if (this._private__priceScale === null || !this._private__options['handleScale'].axisPressedMouseMove.price) {\n            return;\n        }\n        const model = this._private__pane._internal_chart()._internal_model();\n        const pane = this._private__pane._internal_state();\n        const priceScale = this._private__priceScale;\n        model._internal_scalePriceTo(pane, priceScale, e.localY);\n    }\n    _private__mouseDownOutsideEvent() {\n        if (this._private__priceScale === null || !this._private__options['handleScale'].axisPressedMouseMove.price) {\n            return;\n        }\n        const model = this._private__pane._internal_chart()._internal_model();\n        const pane = this._private__pane._internal_state();\n        const priceScale = this._private__priceScale;\n        if (this._private__mousedown) {\n            this._private__mousedown = false;\n            model._internal_endScalePrice(pane, priceScale);\n        }\n    }\n    _private__mouseUpEvent(e) {\n        if (this._private__priceScale === null || !this._private__options['handleScale'].axisPressedMouseMove.price) {\n            return;\n        }\n        const model = this._private__pane._internal_chart()._internal_model();\n        const pane = this._private__pane._internal_state();\n        this._private__mousedown = false;\n        model._internal_endScalePrice(pane, this._private__priceScale);\n    }\n    _private__mouseDoubleClickEvent(e) {\n        if (this._private__options['handleScale'].axisDoubleClickReset.price) {\n            this._internal_reset();\n        }\n    }\n    _private__mouseEnterEvent(e) {\n        if (this._private__priceScale === null) {\n            return;\n        }\n        const model = this._private__pane._internal_chart()._internal_model();\n        if (model._internal_options()['handleScale'].axisPressedMouseMove.price && !this._private__priceScale._internal_isPercentage() && !this._private__priceScale._internal_isIndexedTo100()) {\n            this._private__setCursor(1 /* CursorType.NsResize */);\n        }\n    }\n    _private__mouseLeaveEvent(e) {\n        this._private__setCursor(0 /* CursorType.Default */);\n    }\n    _private__backLabels() {\n        const res = [];\n        const priceScale = (this._private__priceScale === null) ? undefined : this._private__priceScale;\n        const addViewsForSources = (sources) => {\n            for (let i = 0; i < sources.length; ++i) {\n                const source = sources[i];\n                const views = source._internal_priceAxisViews(this._private__pane._internal_state(), priceScale);\n                for (let j = 0; j < views.length; j++) {\n                    res.push(views[j]);\n                }\n            }\n        };\n        // calculate max and min coordinates for views on selection\n        // crosshair individually\n        addViewsForSources(this._private__pane._internal_state()._internal_orderedSources());\n        return res;\n    }\n    _private__drawBackground({ context: ctx, bitmapSize }) {\n        const { width, height } = bitmapSize;\n        const model = this._private__pane._internal_state()._internal_model();\n        const topColor = model._internal_backgroundTopColor();\n        const bottomColor = model._internal_backgroundBottomColor();\n        if (topColor === bottomColor) {\n            clearRect(ctx, 0, 0, width, height, topColor);\n        }\n        else {\n            clearRectWithGradient(ctx, 0, 0, width, height, topColor, bottomColor);\n        }\n    }\n    _private__drawBorder({ context: ctx, bitmapSize, horizontalPixelRatio }) {\n        if (this._private__size === null || this._private__priceScale === null || !this._private__priceScale._internal_options().borderVisible) {\n            return;\n        }\n        ctx.fillStyle = this._private__priceScale._internal_options().borderColor;\n        const borderSize = Math.max(1, Math.floor(this._internal_rendererOptions()._internal_borderSize * horizontalPixelRatio));\n        let left;\n        if (this._private__isLeft) {\n            left = bitmapSize.width - borderSize;\n        }\n        else {\n            left = 0;\n        }\n        ctx.fillRect(left, 0, borderSize, bitmapSize.height);\n    }\n    _private__drawTickMarks(target) {\n        if (this._private__size === null || this._private__priceScale === null) {\n            return;\n        }\n        const tickMarks = this._private__priceScale._internal_marks();\n        const priceScaleOptions = this._private__priceScale._internal_options();\n        const rendererOptions = this._internal_rendererOptions();\n        const tickMarkLeftX = this._private__isLeft ?\n            (this._private__size.width - rendererOptions._internal_tickLength) :\n            0;\n        if (priceScaleOptions.borderVisible && priceScaleOptions.ticksVisible) {\n            target.useBitmapCoordinateSpace(({ context: ctx, horizontalPixelRatio, verticalPixelRatio }) => {\n                ctx.fillStyle = priceScaleOptions.borderColor;\n                const tickHeight = Math.max(1, Math.floor(verticalPixelRatio));\n                const tickOffset = Math.floor(verticalPixelRatio * 0.5);\n                const tickLength = Math.round(rendererOptions._internal_tickLength * horizontalPixelRatio);\n                ctx.beginPath();\n                for (const tickMark of tickMarks) {\n                    ctx.rect(Math.floor(tickMarkLeftX * horizontalPixelRatio), Math.round(tickMark._internal_coord * verticalPixelRatio) - tickOffset, tickLength, tickHeight);\n                }\n                ctx.fill();\n            });\n        }\n        target.useMediaCoordinateSpace(({ context: ctx }) => {\n            ctx.font = this._private__baseFont();\n            ctx.fillStyle = priceScaleOptions.textColor ?? this._private__layoutOptions.textColor;\n            ctx.textAlign = this._private__isLeft ? 'right' : 'left';\n            ctx.textBaseline = 'middle';\n            const textLeftX = this._private__isLeft ?\n                Math.round(tickMarkLeftX - rendererOptions._internal_paddingInner) :\n                Math.round(tickMarkLeftX + rendererOptions._internal_tickLength + rendererOptions._internal_paddingInner);\n            const yMidCorrections = tickMarks.map((mark) => this._private__widthCache._internal_yMidCorrection(ctx, mark._internal_label));\n            for (let i = tickMarks.length; i--;) {\n                const tickMark = tickMarks[i];\n                ctx.fillText(tickMark._internal_label, textLeftX, tickMark._internal_coord + yMidCorrections[i]);\n            }\n        });\n    }\n    _private__alignLabels() {\n        if (this._private__size === null || this._private__priceScale === null) {\n            return;\n        }\n        let center = this._private__size.height / 2;\n        const views = [];\n        const orderedSources = this._private__priceScale._internal_orderedSources().slice(); // Copy of array\n        const pane = this._private__pane;\n        const paneState = pane._internal_state();\n        const rendererOptions = this._internal_rendererOptions();\n        // if we are default price scale, append labels from no-scale\n        const isDefault = this._private__priceScale === paneState._internal_defaultVisiblePriceScale();\n        if (isDefault) {\n            this._private__pane._internal_state()._internal_orderedSources().forEach((source) => {\n                if (paneState._internal_isOverlay(source)) {\n                    orderedSources.push(source);\n                }\n            });\n        }\n        // we can use any, but let's use the first source as \"center\" one\n        const centerSource = this._private__priceScale._internal_dataSources()[0];\n        const priceScale = this._private__priceScale;\n        const updateForSources = (sources) => {\n            sources.forEach((source) => {\n                const sourceViews = source._internal_priceAxisViews(paneState, priceScale);\n                // never align selected sources\n                sourceViews.forEach((view) => {\n                    view._internal_setFixedCoordinate(null);\n                    if (view._internal_isVisible()) {\n                        views.push(view);\n                    }\n                });\n                if (centerSource === source && sourceViews.length > 0) {\n                    center = sourceViews[0]._internal_coordinate();\n                }\n            });\n        };\n        // crosshair individually\n        updateForSources(orderedSources);\n        views.forEach((view) => view._internal_setFixedCoordinate(view._internal_coordinate()));\n        const options = this._private__priceScale._internal_options();\n        if (!options.alignLabels) {\n            return;\n        }\n        this._private__fixLabelOverlap(views, rendererOptions, center);\n    }\n    _private__fixLabelOverlap(views, rendererOptions, center) {\n        if (this._private__size === null) {\n            return;\n        }\n        // split into two parts\n        const top = views.filter((view) => view._internal_coordinate() <= center);\n        const bottom = views.filter((view) => view._internal_coordinate() > center);\n        // sort top from center to top\n        top.sort((l, r) => r._internal_coordinate() - l._internal_coordinate());\n        // share center label\n        if (top.length && bottom.length) {\n            bottom.push(top[0]);\n        }\n        bottom.sort((l, r) => l._internal_coordinate() - r._internal_coordinate());\n        for (const view of views) {\n            const halfHeight = Math.floor(view._internal_height(rendererOptions) / 2);\n            const coordinate = view._internal_coordinate();\n            if (coordinate > -halfHeight && coordinate < halfHeight) {\n                view._internal_setFixedCoordinate(halfHeight);\n            }\n            if (coordinate > (this._private__size.height - halfHeight) && coordinate < this._private__size.height + halfHeight) {\n                view._internal_setFixedCoordinate(this._private__size.height - halfHeight);\n            }\n        }\n        recalculateOverlapping(top, 1, this._private__size.height, rendererOptions);\n        recalculateOverlapping(bottom, -1, this._private__size.height, rendererOptions);\n    }\n    _private__drawBackLabels(target) {\n        if (this._private__size === null) {\n            return;\n        }\n        const views = this._private__backLabels();\n        const rendererOptions = this._internal_rendererOptions();\n        const align = this._private__isLeft ? 'right' : 'left';\n        views.forEach((view) => {\n            if (view._internal_isAxisLabelVisible()) {\n                const renderer = view._internal_renderer(ensureNotNull(this._private__priceScale));\n                renderer._internal_draw(target, rendererOptions, this._private__widthCache, align);\n            }\n        });\n    }\n    _private__drawCrosshairLabel(target) {\n        if (this._private__size === null || this._private__priceScale === null) {\n            return;\n        }\n        const model = this._private__pane._internal_chart()._internal_model();\n        const views = []; // array of arrays\n        const pane = this._private__pane._internal_state();\n        const v = model._internal_crosshairSource()._internal_priceAxisViews(pane, this._private__priceScale);\n        if (v.length) {\n            views.push(v);\n        }\n        const ro = this._internal_rendererOptions();\n        const align = this._private__isLeft ? 'right' : 'left';\n        views.forEach((arr) => {\n            arr.forEach((view) => {\n                view._internal_renderer(ensureNotNull(this._private__priceScale))._internal_draw(target, ro, this._private__widthCache, align);\n            });\n        });\n    }\n    _private__setCursor(type) {\n        this._private__cell.style.cursor = type === 1 /* CursorType.NsResize */ ? 'ns-resize' : 'default';\n    }\n    _private__onMarksChanged() {\n        const width = this._internal_optimalWidth();\n        // avoid price scale is shrunk\n        // using < instead !== to avoid infinite changes\n        if (this._private__prevOptimalWidth < width) {\n            this._private__pane._internal_chart()._internal_model()._internal_fullUpdate();\n        }\n        this._private__prevOptimalWidth = width;\n    }\n    _private__baseFont() {\n        return makeFont(this._private__layoutOptions.fontSize, this._private__layoutOptions.fontFamily);\n    }\n}\n\nfunction sourceBottomPaneViews$1(source, pane) {\n    return source._internal_bottomPaneViews?.(pane) ?? [];\n}\nfunction sourcePaneViews$1(source, pane) {\n    return source._internal_paneViews?.(pane) ?? [];\n}\nfunction sourceLabelPaneViews(source, pane) {\n    return source._internal_labelPaneViews?.(pane) ?? [];\n}\nfunction sourceTopPaneViews$1(source, pane) {\n    return source._internal_topPaneViews?.(pane) ?? [];\n}\nclass PaneWidget {\n    constructor(chart, state) {\n        this._private__size = size$1({ width: 0, height: 0 });\n        this._private__leftPriceAxisWidget = null;\n        this._private__rightPriceAxisWidget = null;\n        this._private__attributionLogoWidget = null;\n        this._private__startScrollingPos = null;\n        this._private__isScrolling = false;\n        this._private__clicked = new Delegate();\n        this._private__dblClicked = new Delegate();\n        this._private__prevPinchScale = 0;\n        this._private__longTap = false;\n        this._private__startTrackPoint = null;\n        this._private__exitTrackingModeOnNextTry = false;\n        this._private__initCrosshairPosition = null;\n        this._private__scrollXAnimation = null;\n        this._private__isSettingSize = false;\n        this._private__canvasSuggestedBitmapSizeChangedHandler = () => {\n            if (this._private__isSettingSize || this._private__state === null) {\n                return;\n            }\n            this._private__model()._internal_lightUpdate();\n        };\n        this._private__topCanvasSuggestedBitmapSizeChangedHandler = () => {\n            if (this._private__isSettingSize || this._private__state === null) {\n                return;\n            }\n            this._private__model()._internal_lightUpdate();\n        };\n        this._private__chart = chart;\n        this._private__state = state;\n        this._private__state._internal_onDestroyed()._internal_subscribe(this._private__onStateDestroyed.bind(this), this, true);\n        this._private__paneCell = document.createElement('td');\n        this._private__paneCell.style.padding = '0';\n        this._private__paneCell.style.position = 'relative';\n        const paneWrapper = document.createElement('div');\n        paneWrapper.style.width = '100%';\n        paneWrapper.style.height = '100%';\n        paneWrapper.style.position = 'relative';\n        paneWrapper.style.overflow = 'hidden';\n        this._private__leftAxisCell = document.createElement('td');\n        this._private__leftAxisCell.style.padding = '0';\n        this._private__rightAxisCell = document.createElement('td');\n        this._private__rightAxisCell.style.padding = '0';\n        this._private__paneCell.appendChild(paneWrapper);\n        this._private__canvasBinding = createBoundCanvas(paneWrapper, size$1({ width: 16, height: 16 }));\n        this._private__canvasBinding.subscribeSuggestedBitmapSizeChanged(this._private__canvasSuggestedBitmapSizeChangedHandler);\n        const canvas = this._private__canvasBinding.canvasElement;\n        canvas.style.position = 'absolute';\n        canvas.style.zIndex = '1';\n        canvas.style.left = '0';\n        canvas.style.top = '0';\n        this._private__topCanvasBinding = createBoundCanvas(paneWrapper, size$1({ width: 16, height: 16 }));\n        this._private__topCanvasBinding.subscribeSuggestedBitmapSizeChanged(this._private__topCanvasSuggestedBitmapSizeChangedHandler);\n        const topCanvas = this._private__topCanvasBinding.canvasElement;\n        topCanvas.style.position = 'absolute';\n        topCanvas.style.zIndex = '2';\n        topCanvas.style.left = '0';\n        topCanvas.style.top = '0';\n        this._private__rowElement = document.createElement('tr');\n        this._private__rowElement.appendChild(this._private__leftAxisCell);\n        this._private__rowElement.appendChild(this._private__paneCell);\n        this._private__rowElement.appendChild(this._private__rightAxisCell);\n        this._internal_updatePriceAxisWidgetsStates();\n        this._private__mouseEventHandler = new MouseEventHandler(this._private__topCanvasBinding.canvasElement, this, {\n            _internal_treatVertTouchDragAsPageScroll: () => this._private__startTrackPoint === null && !this._private__chart._internal_options()['handleScroll'].vertTouchDrag,\n            _internal_treatHorzTouchDragAsPageScroll: () => this._private__startTrackPoint === null && !this._private__chart._internal_options()['handleScroll'].horzTouchDrag,\n        });\n    }\n    _internal_destroy() {\n        if (this._private__leftPriceAxisWidget !== null) {\n            this._private__leftPriceAxisWidget._internal_destroy();\n        }\n        if (this._private__rightPriceAxisWidget !== null) {\n            this._private__rightPriceAxisWidget._internal_destroy();\n        }\n        this._private__attributionLogoWidget = null;\n        this._private__topCanvasBinding.unsubscribeSuggestedBitmapSizeChanged(this._private__topCanvasSuggestedBitmapSizeChangedHandler);\n        releaseCanvas(this._private__topCanvasBinding.canvasElement);\n        this._private__topCanvasBinding.dispose();\n        this._private__canvasBinding.unsubscribeSuggestedBitmapSizeChanged(this._private__canvasSuggestedBitmapSizeChangedHandler);\n        releaseCanvas(this._private__canvasBinding.canvasElement);\n        this._private__canvasBinding.dispose();\n        if (this._private__state !== null) {\n            this._private__state._internal_onDestroyed()._internal_unsubscribeAll(this);\n            this._private__state._internal_destroy();\n        }\n        this._private__mouseEventHandler._internal_destroy();\n    }\n    _internal_state() {\n        return ensureNotNull(this._private__state);\n    }\n    _internal_setState(pane) {\n        if (this._private__state !== null) {\n            this._private__state._internal_onDestroyed()._internal_unsubscribeAll(this);\n        }\n        this._private__state = pane;\n        if (this._private__state !== null) {\n            this._private__state._internal_onDestroyed()._internal_subscribe(PaneWidget.prototype._private__onStateDestroyed.bind(this), this, true);\n        }\n        this._internal_updatePriceAxisWidgetsStates();\n        if (this._private__chart._internal_paneWidgets().indexOf(this) === this._private__chart._internal_paneWidgets().length - 1) {\n            this._private__attributionLogoWidget = this._private__attributionLogoWidget ?? new AttributionLogoWidget(this._private__paneCell, this._private__chart);\n            this._private__attributionLogoWidget._internal_update();\n        }\n        else {\n            this._private__attributionLogoWidget?._internal_removeElement();\n            this._private__attributionLogoWidget = null;\n        }\n    }\n    _internal_chart() {\n        return this._private__chart;\n    }\n    _internal_getElement() {\n        return this._private__rowElement;\n    }\n    _internal_updatePriceAxisWidgetsStates() {\n        if (this._private__state === null) {\n            return;\n        }\n        this._private__recreatePriceAxisWidgets();\n        if (this._private__model()._internal_serieses().length === 0) {\n            return;\n        }\n        if (this._private__leftPriceAxisWidget !== null) {\n            const leftPriceScale = this._private__state._internal_leftPriceScale();\n            this._private__leftPriceAxisWidget._internal_setPriceScale(ensureNotNull(leftPriceScale));\n        }\n        if (this._private__rightPriceAxisWidget !== null) {\n            const rightPriceScale = this._private__state._internal_rightPriceScale();\n            this._private__rightPriceAxisWidget._internal_setPriceScale(ensureNotNull(rightPriceScale));\n        }\n    }\n    _internal_updatePriceAxisWidgets() {\n        if (this._private__leftPriceAxisWidget !== null) {\n            this._private__leftPriceAxisWidget._internal_update();\n        }\n        if (this._private__rightPriceAxisWidget !== null) {\n            this._private__rightPriceAxisWidget._internal_update();\n        }\n    }\n    _internal_stretchFactor() {\n        return this._private__state !== null ? this._private__state._internal_stretchFactor() : 0;\n    }\n    _internal_setStretchFactor(stretchFactor) {\n        if (this._private__state) {\n            this._private__state._internal_setStretchFactor(stretchFactor);\n        }\n    }\n    _internal_mouseEnterEvent(event) {\n        if (!this._private__state) {\n            return;\n        }\n        this._private__onMouseEvent();\n        const x = event.localX;\n        const y = event.localY;\n        this._private__setCrosshairPosition(x, y, event);\n    }\n    _internal_mouseDownEvent(event) {\n        this._private__onMouseEvent();\n        this._private__mouseTouchDownEvent();\n        this._private__setCrosshairPosition(event.localX, event.localY, event);\n    }\n    _internal_mouseMoveEvent(event) {\n        if (!this._private__state) {\n            return;\n        }\n        this._private__onMouseEvent();\n        const x = event.localX;\n        const y = event.localY;\n        this._private__setCrosshairPosition(x, y, event);\n    }\n    _internal_mouseClickEvent(event) {\n        if (this._private__state === null) {\n            return;\n        }\n        this._private__onMouseEvent();\n        this._private__fireClickedDelegate(event);\n    }\n    _internal_mouseDoubleClickEvent(event) {\n        if (this._private__state === null) {\n            return;\n        }\n        this._private__fireMouseClickDelegate(this._private__dblClicked, event);\n    }\n    _internal_doubleTapEvent(event) {\n        this._internal_mouseDoubleClickEvent(event);\n    }\n    _internal_pressedMouseMoveEvent(event) {\n        this._private__onMouseEvent();\n        this._private__pressedMouseTouchMoveEvent(event);\n        this._private__setCrosshairPosition(event.localX, event.localY, event);\n    }\n    _internal_mouseUpEvent(event) {\n        if (this._private__state === null) {\n            return;\n        }\n        this._private__onMouseEvent();\n        this._private__longTap = false;\n        this._private__endScroll(event);\n    }\n    _internal_tapEvent(event) {\n        if (this._private__state === null) {\n            return;\n        }\n        this._private__fireClickedDelegate(event);\n    }\n    _internal_longTapEvent(event) {\n        this._private__longTap = true;\n        if (this._private__startTrackPoint === null) {\n            const point = { x: event.localX, y: event.localY };\n            this._private__startTrackingMode(point, point, event);\n        }\n    }\n    _internal_mouseLeaveEvent(event) {\n        if (this._private__state === null) {\n            return;\n        }\n        this._private__onMouseEvent();\n        this._private__state._internal_model()._internal_setHoveredSource(null);\n        this._private__clearCrosshairPosition();\n    }\n    _internal_clicked() {\n        return this._private__clicked;\n    }\n    _internal_dblClicked() {\n        return this._private__dblClicked;\n    }\n    _internal_pinchStartEvent() {\n        this._private__prevPinchScale = 1;\n        this._private__model()._internal_stopTimeScaleAnimation();\n    }\n    _internal_pinchEvent(middlePoint, scale) {\n        if (!this._private__chart._internal_options()['handleScale'].pinch) {\n            return;\n        }\n        const zoomScale = (scale - this._private__prevPinchScale) * 5;\n        this._private__prevPinchScale = scale;\n        this._private__model()._internal_zoomTime(middlePoint._internal_x, zoomScale);\n    }\n    _internal_touchStartEvent(event) {\n        this._private__longTap = false;\n        this._private__exitTrackingModeOnNextTry = this._private__startTrackPoint !== null;\n        this._private__mouseTouchDownEvent();\n        const crosshair = this._private__model()._internal_crosshairSource();\n        if (this._private__startTrackPoint !== null && crosshair._internal_visible()) {\n            this._private__initCrosshairPosition = { x: crosshair._internal_appliedX(), y: crosshair._internal_appliedY() };\n            this._private__startTrackPoint = { x: event.localX, y: event.localY };\n        }\n    }\n    _internal_touchMoveEvent(event) {\n        if (this._private__state === null) {\n            return;\n        }\n        const x = event.localX;\n        const y = event.localY;\n        if (this._private__startTrackPoint !== null) {\n            // tracking mode: move crosshair\n            this._private__exitTrackingModeOnNextTry = false;\n            const origPoint = ensureNotNull(this._private__initCrosshairPosition);\n            const newX = origPoint.x + (x - this._private__startTrackPoint.x);\n            const newY = origPoint.y + (y - this._private__startTrackPoint.y);\n            this._private__setCrosshairPosition(newX, newY, event);\n            return;\n        }\n        this._private__pressedMouseTouchMoveEvent(event);\n    }\n    _internal_touchEndEvent(event) {\n        if (this._internal_chart()._internal_options().trackingMode.exitMode === 0 /* TrackingModeExitMode.OnTouchEnd */) {\n            this._private__exitTrackingModeOnNextTry = true;\n        }\n        this._private__tryExitTrackingMode();\n        this._private__endScroll(event);\n    }\n    _internal_hitTest(x, y) {\n        const state = this._private__state;\n        if (state === null) {\n            return null;\n        }\n        return hitTestPane(state, x, y);\n    }\n    _internal_setPriceAxisSize(width, position) {\n        const priceAxisWidget = position === 'left' ? this._private__leftPriceAxisWidget : this._private__rightPriceAxisWidget;\n        ensureNotNull(priceAxisWidget)._internal_setSize(size$1({ width, height: this._private__size.height }));\n    }\n    _internal_getSize() {\n        return this._private__size;\n    }\n    _internal_setSize(newSize) {\n        if (equalSizes(this._private__size, newSize)) {\n            return;\n        }\n        this._private__size = newSize;\n        this._private__isSettingSize = true;\n        this._private__canvasBinding.resizeCanvasElement(newSize);\n        this._private__topCanvasBinding.resizeCanvasElement(newSize);\n        this._private__isSettingSize = false;\n        this._private__paneCell.style.width = newSize.width + 'px';\n        this._private__paneCell.style.height = newSize.height + 'px';\n    }\n    _internal_recalculatePriceScales() {\n        const pane = ensureNotNull(this._private__state);\n        pane._internal_recalculatePriceScale(pane._internal_leftPriceScale());\n        pane._internal_recalculatePriceScale(pane._internal_rightPriceScale());\n        for (const source of pane._internal_dataSources()) {\n            if (pane._internal_isOverlay(source)) {\n                const priceScale = source._internal_priceScale();\n                if (priceScale !== null) {\n                    pane._internal_recalculatePriceScale(priceScale);\n                }\n                // for overlay drawings price scale is owner's price scale\n                // however owner's price scale could not contain ds\n                source._internal_updateAllViews();\n            }\n        }\n        for (const primitive of pane._internal_primitives()) {\n            primitive._internal_updateAllViews();\n        }\n    }\n    _internal_getBitmapSize() {\n        return this._private__canvasBinding.bitmapSize;\n    }\n    _internal_drawBitmap(ctx, x, y) {\n        const bitmapSize = this._internal_getBitmapSize();\n        if (bitmapSize.width > 0 && bitmapSize.height > 0) {\n            ctx.drawImage(this._private__canvasBinding.canvasElement, x, y);\n        }\n    }\n    _internal_paint(type) {\n        if (type === 0 /* InvalidationLevel.None */) {\n            return;\n        }\n        if (this._private__state === null) {\n            return;\n        }\n        if (type > 1 /* InvalidationLevel.Cursor */) {\n            this._internal_recalculatePriceScales();\n        }\n        if (this._private__leftPriceAxisWidget !== null) {\n            this._private__leftPriceAxisWidget._internal_paint(type);\n        }\n        if (this._private__rightPriceAxisWidget !== null) {\n            this._private__rightPriceAxisWidget._internal_paint(type);\n        }\n        const canvasOptions = {\n            colorSpace: this._private__chart._internal_options().layout.colorSpace,\n        };\n        if (type !== 1 /* InvalidationLevel.Cursor */) {\n            this._private__canvasBinding.applySuggestedBitmapSize();\n            const target = tryCreateCanvasRenderingTarget2D(this._private__canvasBinding, canvasOptions);\n            if (target !== null) {\n                target.useBitmapCoordinateSpace((scope) => {\n                    this._private__drawBackground(scope);\n                });\n                if (this._private__state) {\n                    this._private__drawSources(target, sourceBottomPaneViews$1);\n                    this._private__drawGrid(target);\n                    this._private__drawSources(target, sourcePaneViews$1);\n                    this._private__drawSources(target, sourceLabelPaneViews);\n                }\n            }\n        }\n        this._private__topCanvasBinding.applySuggestedBitmapSize();\n        const topTarget = tryCreateCanvasRenderingTarget2D(this._private__topCanvasBinding, canvasOptions);\n        if (topTarget !== null) {\n            topTarget.useBitmapCoordinateSpace(({ context: ctx, bitmapSize }) => {\n                ctx.clearRect(0, 0, bitmapSize.width, bitmapSize.height);\n            });\n            this._private__drawCrosshair(topTarget);\n            this._private__drawSources(topTarget, sourceTopPaneViews$1);\n            this._private__drawSources(topTarget, sourceLabelPaneViews);\n        }\n    }\n    _internal_leftPriceAxisWidget() {\n        return this._private__leftPriceAxisWidget;\n    }\n    _internal_rightPriceAxisWidget() {\n        return this._private__rightPriceAxisWidget;\n    }\n    _internal_drawAdditionalSources(target, paneViewsGetter) {\n        this._private__drawSources(target, paneViewsGetter);\n    }\n    _private__onStateDestroyed() {\n        if (this._private__state !== null) {\n            this._private__state._internal_onDestroyed()._internal_unsubscribeAll(this);\n        }\n        this._private__state = null;\n    }\n    _private__fireClickedDelegate(event) {\n        this._private__fireMouseClickDelegate(this._private__clicked, event);\n    }\n    _private__fireMouseClickDelegate(delegate, event) {\n        const x = event.localX;\n        const y = event.localY;\n        if (delegate._internal_hasListeners()) {\n            delegate._internal_fire(this._private__model()._internal_timeScale()._internal_coordinateToIndex(x), { x, y }, event);\n        }\n    }\n    _private__drawBackground({ context: ctx, bitmapSize }) {\n        const { width, height } = bitmapSize;\n        const model = this._private__model();\n        const topColor = model._internal_backgroundTopColor();\n        const bottomColor = model._internal_backgroundBottomColor();\n        if (topColor === bottomColor) {\n            clearRect(ctx, 0, 0, width, height, bottomColor);\n        }\n        else {\n            clearRectWithGradient(ctx, 0, 0, width, height, topColor, bottomColor);\n        }\n    }\n    _private__drawGrid(target) {\n        const state = ensureNotNull(this._private__state);\n        const paneView = state._internal_grid()._internal_paneView();\n        const renderer = paneView._internal_renderer(state);\n        if (renderer !== null) {\n            renderer._internal_draw(target, false);\n        }\n    }\n    _private__drawCrosshair(target) {\n        this._private__drawSourceImpl(target, sourcePaneViews$1, drawForeground, this._private__model()._internal_crosshairSource());\n    }\n    _private__drawSources(target, paneViewsGetter) {\n        const state = ensureNotNull(this._private__state);\n        const sources = state._internal_orderedSources();\n        const panePrimitives = state._internal_primitives();\n        for (const panePrimitive of panePrimitives) {\n            this._private__drawSourceImpl(target, paneViewsGetter, drawBackground, panePrimitive);\n        }\n        for (const source of sources) {\n            this._private__drawSourceImpl(target, paneViewsGetter, drawBackground, source);\n        }\n        for (const panePrimitive of panePrimitives) {\n            this._private__drawSourceImpl(target, paneViewsGetter, drawForeground, panePrimitive);\n        }\n        for (const source of sources) {\n            this._private__drawSourceImpl(target, paneViewsGetter, drawForeground, source);\n        }\n    }\n    _private__drawSourceImpl(target, paneViewsGetter, drawFn, source) {\n        const state = ensureNotNull(this._private__state);\n        const hoveredSource = state._internal_model()._internal_hoveredSource();\n        const isHovered = hoveredSource !== null && hoveredSource._internal_source === source;\n        const objecId = hoveredSource !== null && isHovered && hoveredSource._internal_object !== undefined\n            ? hoveredSource._internal_object._internal_hitTestData\n            : undefined;\n        const drawRendererFn = (renderer) => drawFn(renderer, target, isHovered, objecId);\n        drawSourceViews(paneViewsGetter, drawRendererFn, source, state);\n    }\n    _private__recreatePriceAxisWidgets() {\n        if (this._private__state === null) {\n            return;\n        }\n        const chart = this._private__chart;\n        const leftAxisVisible = this._private__state._internal_leftPriceScale()._internal_options().visible;\n        const rightAxisVisible = this._private__state._internal_rightPriceScale()._internal_options().visible;\n        if (!leftAxisVisible && this._private__leftPriceAxisWidget !== null) {\n            this._private__leftAxisCell.removeChild(this._private__leftPriceAxisWidget._internal_getElement());\n            this._private__leftPriceAxisWidget._internal_destroy();\n            this._private__leftPriceAxisWidget = null;\n        }\n        if (!rightAxisVisible && this._private__rightPriceAxisWidget !== null) {\n            this._private__rightAxisCell.removeChild(this._private__rightPriceAxisWidget._internal_getElement());\n            this._private__rightPriceAxisWidget._internal_destroy();\n            this._private__rightPriceAxisWidget = null;\n        }\n        const rendererOptionsProvider = chart._internal_model()._internal_rendererOptionsProvider();\n        if (leftAxisVisible && this._private__leftPriceAxisWidget === null) {\n            this._private__leftPriceAxisWidget = new PriceAxisWidget(this, chart._internal_options(), rendererOptionsProvider, 'left');\n            this._private__leftAxisCell.appendChild(this._private__leftPriceAxisWidget._internal_getElement());\n        }\n        if (rightAxisVisible && this._private__rightPriceAxisWidget === null) {\n            this._private__rightPriceAxisWidget = new PriceAxisWidget(this, chart._internal_options(), rendererOptionsProvider, 'right');\n            this._private__rightAxisCell.appendChild(this._private__rightPriceAxisWidget._internal_getElement());\n        }\n    }\n    _private__preventScroll(event) {\n        return event._internal_isTouch && this._private__longTap || this._private__startTrackPoint !== null;\n    }\n    _private__correctXCoord(x) {\n        return Math.max(0, Math.min(x, this._private__size.width - 1));\n    }\n    _private__correctYCoord(y) {\n        return Math.max(0, Math.min(y, this._private__size.height - 1));\n    }\n    _private__setCrosshairPosition(x, y, event) {\n        this._private__model()._internal_setAndSaveCurrentPosition(this._private__correctXCoord(x), this._private__correctYCoord(y), event, ensureNotNull(this._private__state));\n    }\n    _private__clearCrosshairPosition() {\n        this._private__model()._internal_clearCurrentPosition();\n    }\n    _private__tryExitTrackingMode() {\n        if (this._private__exitTrackingModeOnNextTry) {\n            this._private__startTrackPoint = null;\n            this._private__clearCrosshairPosition();\n        }\n    }\n    _private__startTrackingMode(startTrackPoint, crossHairPosition, event) {\n        this._private__startTrackPoint = startTrackPoint;\n        this._private__exitTrackingModeOnNextTry = false;\n        this._private__setCrosshairPosition(crossHairPosition.x, crossHairPosition.y, event);\n        const crosshair = this._private__model()._internal_crosshairSource();\n        this._private__initCrosshairPosition = { x: crosshair._internal_appliedX(), y: crosshair._internal_appliedY() };\n    }\n    _private__model() {\n        return this._private__chart._internal_model();\n    }\n    _private__endScroll(event) {\n        if (!this._private__isScrolling) {\n            return;\n        }\n        const model = this._private__model();\n        const state = this._internal_state();\n        model._internal_endScrollPrice(state, state._internal_defaultPriceScale());\n        this._private__startScrollingPos = null;\n        this._private__isScrolling = false;\n        model._internal_endScrollTime();\n        if (this._private__scrollXAnimation !== null) {\n            const startAnimationTime = performance.now();\n            const timeScale = model._internal_timeScale();\n            this._private__scrollXAnimation._internal_start(timeScale._internal_rightOffset(), startAnimationTime);\n            if (!this._private__scrollXAnimation._internal_finished(startAnimationTime)) {\n                model._internal_setTimeScaleAnimation(this._private__scrollXAnimation);\n            }\n        }\n    }\n    _private__onMouseEvent() {\n        this._private__startTrackPoint = null;\n    }\n    _private__mouseTouchDownEvent() {\n        if (!this._private__state) {\n            return;\n        }\n        this._private__model()._internal_stopTimeScaleAnimation();\n        if (document.activeElement !== document.body && document.activeElement !== document.documentElement) {\n            // If any focusable element except the page itself is focused, remove the focus\n            ensureNotNull(document.activeElement).blur();\n        }\n        else {\n            // Clear selection\n            const selection = document.getSelection();\n            if (selection !== null) {\n                selection.removeAllRanges();\n            }\n        }\n        const priceScale = this._private__state._internal_defaultPriceScale();\n        if (priceScale._internal_isEmpty() || this._private__model()._internal_timeScale()._internal_isEmpty()) {\n            return;\n        }\n    }\n    // eslint-disable-next-line complexity\n    _private__pressedMouseTouchMoveEvent(event) {\n        if (this._private__state === null) {\n            return;\n        }\n        const model = this._private__model();\n        const timeScale = model._internal_timeScale();\n        if (timeScale._internal_isEmpty()) {\n            return;\n        }\n        const chartOptions = this._private__chart._internal_options();\n        const scrollOptions = chartOptions['handleScroll'];\n        const kineticScrollOptions = chartOptions.kineticScroll;\n        if ((!scrollOptions.pressedMouseMove || event._internal_isTouch) &&\n            (!scrollOptions.horzTouchDrag && !scrollOptions.vertTouchDrag || !event._internal_isTouch)) {\n            return;\n        }\n        const priceScale = this._private__state._internal_defaultPriceScale();\n        const now = performance.now();\n        if (this._private__startScrollingPos === null && !this._private__preventScroll(event)) {\n            this._private__startScrollingPos = {\n                x: event.clientX,\n                y: event.clientY,\n                _internal_timestamp: now,\n                _internal_localX: event.localX,\n                _internal_localY: event.localY,\n            };\n        }\n        if (this._private__startScrollingPos !== null &&\n            !this._private__isScrolling &&\n            (this._private__startScrollingPos.x !== event.clientX || this._private__startScrollingPos.y !== event.clientY)) {\n            if (event._internal_isTouch && kineticScrollOptions.touch || !event._internal_isTouch && kineticScrollOptions.mouse) {\n                const barSpacing = timeScale._internal_barSpacing();\n                this._private__scrollXAnimation = new KineticAnimation(0.2 /* KineticScrollConstants.MinScrollSpeed */ / barSpacing, 7 /* KineticScrollConstants.MaxScrollSpeed */ / barSpacing, 0.997 /* KineticScrollConstants.DumpingCoeff */, 15 /* KineticScrollConstants.ScrollMinMove */ / barSpacing);\n                this._private__scrollXAnimation._internal_addPosition(timeScale._internal_rightOffset(), this._private__startScrollingPos._internal_timestamp);\n            }\n            else {\n                this._private__scrollXAnimation = null;\n            }\n            if (!priceScale._internal_isEmpty()) {\n                model._internal_startScrollPrice(this._private__state, priceScale, event.localY);\n            }\n            model._internal_startScrollTime(event.localX);\n            this._private__isScrolling = true;\n        }\n        if (this._private__isScrolling) {\n            // this allows scrolling not default price scales\n            if (!priceScale._internal_isEmpty()) {\n                model._internal_scrollPriceTo(this._private__state, priceScale, event.localY);\n            }\n            model._internal_scrollTimeTo(event.localX);\n            if (this._private__scrollXAnimation !== null) {\n                this._private__scrollXAnimation._internal_addPosition(timeScale._internal_rightOffset(), now);\n            }\n        }\n    }\n}\n\nclass PriceAxisStub {\n    constructor(side, options, params, borderVisible, bottomColor) {\n        this._private__invalidated = true;\n        this._private__size = size$1({ width: 0, height: 0 });\n        this._private__canvasSuggestedBitmapSizeChangedHandler = () => this._internal_paint(3 /* InvalidationLevel.Full */);\n        this._private__isLeft = side === 'left';\n        this._private__rendererOptionsProvider = params._internal_rendererOptionsProvider;\n        this._private__options = options;\n        this._private__borderVisible = borderVisible;\n        this._private__bottomColor = bottomColor;\n        this._private__cell = document.createElement('div');\n        this._private__cell.style.width = '25px';\n        this._private__cell.style.height = '100%';\n        this._private__cell.style.overflow = 'hidden';\n        this._private__canvasBinding = createBoundCanvas(this._private__cell, size$1({ width: 16, height: 16 }));\n        this._private__canvasBinding.subscribeSuggestedBitmapSizeChanged(this._private__canvasSuggestedBitmapSizeChangedHandler);\n    }\n    _internal_destroy() {\n        this._private__canvasBinding.unsubscribeSuggestedBitmapSizeChanged(this._private__canvasSuggestedBitmapSizeChangedHandler);\n        releaseCanvas(this._private__canvasBinding.canvasElement);\n        this._private__canvasBinding.dispose();\n    }\n    _internal_getElement() {\n        return this._private__cell;\n    }\n    _internal_getSize() {\n        return this._private__size;\n    }\n    _internal_setSize(newSize) {\n        if (!equalSizes(this._private__size, newSize)) {\n            this._private__size = newSize;\n            this._private__canvasBinding.resizeCanvasElement(newSize);\n            this._private__cell.style.width = `${newSize.width}px`;\n            this._private__cell.style.height = `${newSize.height}px`;\n            this._private__invalidated = true;\n        }\n    }\n    _internal_paint(type) {\n        if (type < 3 /* InvalidationLevel.Full */ && !this._private__invalidated) {\n            return;\n        }\n        if (this._private__size.width === 0 || this._private__size.height === 0) {\n            return;\n        }\n        this._private__invalidated = false;\n        this._private__canvasBinding.applySuggestedBitmapSize();\n        const target = tryCreateCanvasRenderingTarget2D(this._private__canvasBinding, {\n            colorSpace: this._private__options.layout.colorSpace,\n        });\n        if (target !== null) {\n            target.useBitmapCoordinateSpace((scope) => {\n                this._private__drawBackground(scope);\n                this._private__drawBorder(scope);\n            });\n        }\n    }\n    _internal_getBitmapSize() {\n        return this._private__canvasBinding.bitmapSize;\n    }\n    _internal_drawBitmap(ctx, x, y) {\n        const bitmapSize = this._internal_getBitmapSize();\n        if (bitmapSize.width > 0 && bitmapSize.height > 0) {\n            ctx.drawImage(this._private__canvasBinding.canvasElement, x, y);\n        }\n    }\n    _private__drawBorder({ context: ctx, bitmapSize, horizontalPixelRatio, verticalPixelRatio }) {\n        if (!this._private__borderVisible()) {\n            return;\n        }\n        ctx.fillStyle = this._private__options.timeScale.borderColor;\n        const horzBorderSize = Math.floor(this._private__rendererOptionsProvider._internal_options()._internal_borderSize * horizontalPixelRatio);\n        const vertBorderSize = Math.floor(this._private__rendererOptionsProvider._internal_options()._internal_borderSize * verticalPixelRatio);\n        const left = (this._private__isLeft) ? bitmapSize.width - horzBorderSize : 0;\n        ctx.fillRect(left, 0, horzBorderSize, vertBorderSize);\n    }\n    _private__drawBackground({ context: ctx, bitmapSize }) {\n        clearRect(ctx, 0, 0, bitmapSize.width, bitmapSize.height, this._private__bottomColor());\n    }\n}\n\nfunction buildTimeAxisViewsGetter(zOrder) {\n    return (source) => source._internal_timePaneViews?.(zOrder) ?? [];\n}\nconst sourcePaneViews = buildTimeAxisViewsGetter('normal');\nconst sourceTopPaneViews = buildTimeAxisViewsGetter('top');\nconst sourceBottomPaneViews = buildTimeAxisViewsGetter('bottom');\nclass TimeAxisWidget {\n    constructor(chartWidget, horzScaleBehavior) {\n        this._private__leftStub = null;\n        this._private__rightStub = null;\n        this._private__rendererOptions = null;\n        this._private__mouseDown = false;\n        this._private__size = size$1({ width: 0, height: 0 });\n        this._private__sizeChanged = new Delegate();\n        this._private__widthCache = new TextWidthCache(5);\n        this._private__isSettingSize = false;\n        this._private__canvasSuggestedBitmapSizeChangedHandler = () => {\n            if (!this._private__isSettingSize) {\n                this._private__chart._internal_model()._internal_lightUpdate();\n            }\n        };\n        this._private__topCanvasSuggestedBitmapSizeChangedHandler = () => {\n            if (!this._private__isSettingSize) {\n                this._private__chart._internal_model()._internal_lightUpdate();\n            }\n        };\n        this._private__chart = chartWidget;\n        this._private__horzScaleBehavior = horzScaleBehavior;\n        this._private__options = chartWidget._internal_options()['layout'];\n        this._private__element = document.createElement('tr');\n        this._private__leftStubCell = document.createElement('td');\n        this._private__leftStubCell.style.padding = '0';\n        this._private__rightStubCell = document.createElement('td');\n        this._private__rightStubCell.style.padding = '0';\n        this._private__cell = document.createElement('td');\n        this._private__cell.style.height = '25px';\n        this._private__cell.style.padding = '0';\n        this._private__dv = document.createElement('div');\n        this._private__dv.style.width = '100%';\n        this._private__dv.style.height = '100%';\n        this._private__dv.style.position = 'relative';\n        this._private__dv.style.overflow = 'hidden';\n        this._private__cell.appendChild(this._private__dv);\n        this._private__canvasBinding = createBoundCanvas(this._private__dv, size$1({ width: 16, height: 16 }));\n        this._private__canvasBinding.subscribeSuggestedBitmapSizeChanged(this._private__canvasSuggestedBitmapSizeChangedHandler);\n        const canvas = this._private__canvasBinding.canvasElement;\n        canvas.style.position = 'absolute';\n        canvas.style.zIndex = '1';\n        canvas.style.left = '0';\n        canvas.style.top = '0';\n        this._private__topCanvasBinding = createBoundCanvas(this._private__dv, size$1({ width: 16, height: 16 }));\n        this._private__topCanvasBinding.subscribeSuggestedBitmapSizeChanged(this._private__topCanvasSuggestedBitmapSizeChangedHandler);\n        const topCanvas = this._private__topCanvasBinding.canvasElement;\n        topCanvas.style.position = 'absolute';\n        topCanvas.style.zIndex = '2';\n        topCanvas.style.left = '0';\n        topCanvas.style.top = '0';\n        this._private__element.appendChild(this._private__leftStubCell);\n        this._private__element.appendChild(this._private__cell);\n        this._private__element.appendChild(this._private__rightStubCell);\n        this._private__recreateStubs();\n        this._private__chart._internal_model()._internal_priceScalesOptionsChanged()._internal_subscribe(this._private__recreateStubs.bind(this), this);\n        this._private__mouseEventHandler = new MouseEventHandler(this._private__topCanvasBinding.canvasElement, this, {\n            _internal_treatVertTouchDragAsPageScroll: () => true,\n            _internal_treatHorzTouchDragAsPageScroll: () => !this._private__chart._internal_options()['handleScroll'].horzTouchDrag,\n        });\n    }\n    _internal_destroy() {\n        this._private__mouseEventHandler._internal_destroy();\n        if (this._private__leftStub !== null) {\n            this._private__leftStub._internal_destroy();\n        }\n        if (this._private__rightStub !== null) {\n            this._private__rightStub._internal_destroy();\n        }\n        this._private__topCanvasBinding.unsubscribeSuggestedBitmapSizeChanged(this._private__topCanvasSuggestedBitmapSizeChangedHandler);\n        releaseCanvas(this._private__topCanvasBinding.canvasElement);\n        this._private__topCanvasBinding.dispose();\n        this._private__canvasBinding.unsubscribeSuggestedBitmapSizeChanged(this._private__canvasSuggestedBitmapSizeChangedHandler);\n        releaseCanvas(this._private__canvasBinding.canvasElement);\n        this._private__canvasBinding.dispose();\n    }\n    _internal_getElement() {\n        return this._private__element;\n    }\n    _internal_leftStub() {\n        return this._private__leftStub;\n    }\n    _internal_rightStub() {\n        return this._private__rightStub;\n    }\n    _internal_mouseDownEvent(event) {\n        if (this._private__mouseDown) {\n            return;\n        }\n        this._private__mouseDown = true;\n        const model = this._private__chart._internal_model();\n        if (model._internal_timeScale()._internal_isEmpty() || !this._private__chart._internal_options()['handleScale'].axisPressedMouseMove.time) {\n            return;\n        }\n        model._internal_startScaleTime(event.localX);\n    }\n    _internal_touchStartEvent(event) {\n        this._internal_mouseDownEvent(event);\n    }\n    _internal_mouseDownOutsideEvent() {\n        const model = this._private__chart._internal_model();\n        if (!model._internal_timeScale()._internal_isEmpty() && this._private__mouseDown) {\n            this._private__mouseDown = false;\n            if (this._private__chart._internal_options()['handleScale'].axisPressedMouseMove.time) {\n                model._internal_endScaleTime();\n            }\n        }\n    }\n    _internal_pressedMouseMoveEvent(event) {\n        const model = this._private__chart._internal_model();\n        if (model._internal_timeScale()._internal_isEmpty() || !this._private__chart._internal_options()['handleScale'].axisPressedMouseMove.time) {\n            return;\n        }\n        model._internal_scaleTimeTo(event.localX);\n    }\n    _internal_touchMoveEvent(event) {\n        this._internal_pressedMouseMoveEvent(event);\n    }\n    _internal_mouseUpEvent() {\n        this._private__mouseDown = false;\n        const model = this._private__chart._internal_model();\n        if (model._internal_timeScale()._internal_isEmpty() && !this._private__chart._internal_options()['handleScale'].axisPressedMouseMove.time) {\n            return;\n        }\n        model._internal_endScaleTime();\n    }\n    _internal_touchEndEvent() {\n        this._internal_mouseUpEvent();\n    }\n    _internal_mouseDoubleClickEvent() {\n        if (this._private__chart._internal_options()['handleScale'].axisDoubleClickReset.time) {\n            this._private__chart._internal_model()._internal_resetTimeScale();\n        }\n    }\n    _internal_doubleTapEvent() {\n        this._internal_mouseDoubleClickEvent();\n    }\n    _internal_mouseEnterEvent() {\n        if (this._private__chart._internal_model()._internal_options()['handleScale'].axisPressedMouseMove.time) {\n            this._private__setCursor(1 /* CursorType.EwResize */);\n        }\n    }\n    _internal_mouseLeaveEvent() {\n        this._private__setCursor(0 /* CursorType.Default */);\n    }\n    _internal_getSize() {\n        return this._private__size;\n    }\n    _internal_sizeChanged() {\n        return this._private__sizeChanged;\n    }\n    _internal_setSizes(timeAxisSize, leftStubWidth, rightStubWidth) {\n        if (!equalSizes(this._private__size, timeAxisSize)) {\n            this._private__size = timeAxisSize;\n            this._private__isSettingSize = true;\n            this._private__canvasBinding.resizeCanvasElement(timeAxisSize);\n            this._private__topCanvasBinding.resizeCanvasElement(timeAxisSize);\n            this._private__isSettingSize = false;\n            this._private__cell.style.width = `${timeAxisSize.width}px`;\n            this._private__cell.style.height = `${timeAxisSize.height}px`;\n            this._private__sizeChanged._internal_fire(timeAxisSize);\n        }\n        if (this._private__leftStub !== null) {\n            this._private__leftStub._internal_setSize(size$1({ width: leftStubWidth, height: timeAxisSize.height }));\n        }\n        if (this._private__rightStub !== null) {\n            this._private__rightStub._internal_setSize(size$1({ width: rightStubWidth, height: timeAxisSize.height }));\n        }\n    }\n    _internal_optimalHeight() {\n        const rendererOptions = this._private__getRendererOptions();\n        return Math.ceil(\n        // rendererOptions.offsetSize +\n        rendererOptions._internal_borderSize +\n            rendererOptions._internal_tickLength +\n            rendererOptions._internal_fontSize +\n            rendererOptions._internal_paddingTop +\n            rendererOptions._internal_paddingBottom +\n            rendererOptions._internal_labelBottomOffset);\n    }\n    _internal_update() {\n        // this call has side-effect - it regenerates marks on the time scale\n        this._private__chart._internal_model()._internal_timeScale()._internal_marks();\n    }\n    _internal_getBitmapSize() {\n        return this._private__canvasBinding.bitmapSize;\n    }\n    _internal_drawBitmap(ctx, x, y) {\n        const bitmapSize = this._internal_getBitmapSize();\n        if (bitmapSize.width > 0 && bitmapSize.height > 0) {\n            ctx.drawImage(this._private__canvasBinding.canvasElement, x, y);\n        }\n    }\n    _internal_paint(type) {\n        if (type === 0 /* InvalidationLevel.None */) {\n            return;\n        }\n        const canvasOptions = {\n            colorSpace: this._private__options.colorSpace,\n        };\n        if (type !== 1 /* InvalidationLevel.Cursor */) {\n            this._private__canvasBinding.applySuggestedBitmapSize();\n            const target = tryCreateCanvasRenderingTarget2D(this._private__canvasBinding, canvasOptions);\n            if (target !== null) {\n                target.useBitmapCoordinateSpace((scope) => {\n                    this._private__drawBackground(scope);\n                    this._private__drawBorder(scope);\n                    this._private__drawAdditionalSources(target, sourceBottomPaneViews);\n                });\n                this._private__drawTickMarks(target);\n                this._private__drawAdditionalSources(target, sourcePaneViews);\n                // atm we don't have sources to be drawn on time axis except crosshair which is rendered on top level canvas\n                // so let's don't call this code at all for now\n                // this._drawLabels(this._chart.model().dataSources(), target);\n            }\n            if (this._private__leftStub !== null) {\n                this._private__leftStub._internal_paint(type);\n            }\n            if (this._private__rightStub !== null) {\n                this._private__rightStub._internal_paint(type);\n            }\n        }\n        this._private__topCanvasBinding.applySuggestedBitmapSize();\n        const topTarget = tryCreateCanvasRenderingTarget2D(this._private__topCanvasBinding, canvasOptions);\n        if (topTarget !== null) {\n            topTarget.useBitmapCoordinateSpace(({ context: ctx, bitmapSize }) => {\n                ctx.clearRect(0, 0, bitmapSize.width, bitmapSize.height);\n            });\n            this._private__drawLabels([...this._private__chart._internal_model()._internal_serieses(), this._private__chart._internal_model()._internal_crosshairSource()], topTarget);\n            this._private__drawAdditionalSources(topTarget, sourceTopPaneViews);\n        }\n    }\n    _private__drawAdditionalSources(target, axisViewsGetter) {\n        const sources = this._private__chart._internal_model()._internal_serieses();\n        for (const source of sources) {\n            drawSourceViews(axisViewsGetter, (renderer) => drawBackground(renderer, target, false, undefined), source, undefined);\n        }\n        for (const source of sources) {\n            drawSourceViews(axisViewsGetter, (renderer) => drawForeground(renderer, target, false, undefined), source, undefined);\n        }\n    }\n    _private__drawBackground({ context: ctx, bitmapSize }) {\n        clearRect(ctx, 0, 0, bitmapSize.width, bitmapSize.height, this._private__chart._internal_model()._internal_backgroundBottomColor());\n    }\n    _private__drawBorder({ context: ctx, bitmapSize, verticalPixelRatio }) {\n        if (this._private__chart._internal_options().timeScale.borderVisible) {\n            ctx.fillStyle = this._private__lineColor();\n            const borderSize = Math.max(1, Math.floor(this._private__getRendererOptions()._internal_borderSize * verticalPixelRatio));\n            ctx.fillRect(0, 0, bitmapSize.width, borderSize);\n        }\n    }\n    _private__drawTickMarks(target) {\n        const timeScale = this._private__chart._internal_model()._internal_timeScale();\n        const tickMarks = timeScale._internal_marks();\n        if (!tickMarks || tickMarks.length === 0) {\n            return;\n        }\n        const maxWeight = this._private__horzScaleBehavior.maxTickMarkWeight(tickMarks);\n        const rendererOptions = this._private__getRendererOptions();\n        const options = timeScale._internal_options();\n        if (options.borderVisible && options.ticksVisible) {\n            target.useBitmapCoordinateSpace(({ context: ctx, horizontalPixelRatio, verticalPixelRatio }) => {\n                ctx.strokeStyle = this._private__lineColor();\n                ctx.fillStyle = this._private__lineColor();\n                const tickWidth = Math.max(1, Math.floor(horizontalPixelRatio));\n                const tickOffset = Math.floor(horizontalPixelRatio * 0.5);\n                ctx.beginPath();\n                const tickLen = Math.round(rendererOptions._internal_tickLength * verticalPixelRatio);\n                for (let index = tickMarks.length; index--;) {\n                    const x = Math.round(tickMarks[index].coord * horizontalPixelRatio);\n                    ctx.rect(x - tickOffset, 0, tickWidth, tickLen);\n                }\n                ctx.fill();\n            });\n        }\n        target.useMediaCoordinateSpace(({ context: ctx }) => {\n            const yText = (rendererOptions._internal_borderSize +\n                rendererOptions._internal_tickLength +\n                rendererOptions._internal_paddingTop +\n                rendererOptions._internal_fontSize / 2);\n            ctx.textAlign = 'center';\n            ctx.textBaseline = 'middle';\n            ctx.fillStyle = this._private__textColor();\n            // draw base marks\n            ctx.font = this._private__baseFont();\n            for (const tickMark of tickMarks) {\n                if (tickMark.weight < maxWeight) {\n                    const coordinate = tickMark.needAlignCoordinate ? this._private__alignTickMarkLabelCoordinate(ctx, tickMark.coord, tickMark.label) : tickMark.coord;\n                    ctx.fillText(tickMark.label, coordinate, yText);\n                }\n            }\n            if (this._private__chart._internal_options().timeScale.allowBoldLabels) {\n                ctx.font = this._private__baseBoldFont();\n            }\n            for (const tickMark of tickMarks) {\n                if (tickMark.weight >= maxWeight) {\n                    const coordinate = tickMark.needAlignCoordinate ? this._private__alignTickMarkLabelCoordinate(ctx, tickMark.coord, tickMark.label) : tickMark.coord;\n                    ctx.fillText(tickMark.label, coordinate, yText);\n                }\n            }\n        });\n    }\n    _private__alignTickMarkLabelCoordinate(ctx, coordinate, labelText) {\n        const labelWidth = this._private__widthCache._internal_measureText(ctx, labelText);\n        const labelWidthHalf = labelWidth / 2;\n        const leftTextCoordinate = Math.floor(coordinate - labelWidthHalf) + 0.5;\n        if (leftTextCoordinate < 0) {\n            coordinate = coordinate + Math.abs(0 - leftTextCoordinate);\n        }\n        else if (leftTextCoordinate + labelWidth > this._private__size.width) {\n            coordinate = coordinate - Math.abs(this._private__size.width - (leftTextCoordinate + labelWidth));\n        }\n        return coordinate;\n    }\n    _private__drawLabels(sources, target) {\n        const rendererOptions = this._private__getRendererOptions();\n        for (const source of sources) {\n            for (const view of source._internal_timeAxisViews()) {\n                view._internal_renderer()._internal_draw(target, rendererOptions);\n            }\n        }\n    }\n    _private__lineColor() {\n        return this._private__chart._internal_options().timeScale.borderColor;\n    }\n    _private__textColor() {\n        return this._private__options.textColor;\n    }\n    _private__fontSize() {\n        return this._private__options.fontSize;\n    }\n    _private__baseFont() {\n        return makeFont(this._private__fontSize(), this._private__options.fontFamily);\n    }\n    _private__baseBoldFont() {\n        return makeFont(this._private__fontSize(), this._private__options.fontFamily, 'bold');\n    }\n    _private__getRendererOptions() {\n        if (this._private__rendererOptions === null) {\n            this._private__rendererOptions = {\n                _internal_borderSize: 1 /* Constants.BorderSize */,\n                _internal_baselineOffset: NaN,\n                _internal_paddingTop: NaN,\n                _internal_paddingBottom: NaN,\n                _internal_paddingHorizontal: NaN,\n                _internal_tickLength: 5 /* Constants.TickLength */,\n                _internal_fontSize: NaN,\n                _internal_font: '',\n                _internal_widthCache: new TextWidthCache(),\n                _internal_labelBottomOffset: 0,\n            };\n        }\n        const rendererOptions = this._private__rendererOptions;\n        const newFont = this._private__baseFont();\n        if (rendererOptions._internal_font !== newFont) {\n            const fontSize = this._private__fontSize();\n            rendererOptions._internal_fontSize = fontSize;\n            rendererOptions._internal_font = newFont;\n            rendererOptions._internal_paddingTop = 3 * fontSize / 12;\n            rendererOptions._internal_paddingBottom = 3 * fontSize / 12;\n            rendererOptions._internal_paddingHorizontal = 9 * fontSize / 12;\n            rendererOptions._internal_baselineOffset = 0;\n            rendererOptions._internal_labelBottomOffset = 4 * fontSize / 12;\n            rendererOptions._internal_widthCache._internal_reset();\n        }\n        return this._private__rendererOptions;\n    }\n    _private__setCursor(type) {\n        this._private__cell.style.cursor = type === 1 /* CursorType.EwResize */ ? 'ew-resize' : 'default';\n    }\n    _private__recreateStubs() {\n        const model = this._private__chart._internal_model();\n        const options = model._internal_options();\n        if (!options.leftPriceScale.visible && this._private__leftStub !== null) {\n            this._private__leftStubCell.removeChild(this._private__leftStub._internal_getElement());\n            this._private__leftStub._internal_destroy();\n            this._private__leftStub = null;\n        }\n        if (!options.rightPriceScale.visible && this._private__rightStub !== null) {\n            this._private__rightStubCell.removeChild(this._private__rightStub._internal_getElement());\n            this._private__rightStub._internal_destroy();\n            this._private__rightStub = null;\n        }\n        const rendererOptionsProvider = this._private__chart._internal_model()._internal_rendererOptionsProvider();\n        const params = {\n            _internal_rendererOptionsProvider: rendererOptionsProvider,\n        };\n        const borderVisibleGetter = () => {\n            return options.leftPriceScale.borderVisible && model._internal_timeScale()._internal_options().borderVisible;\n        };\n        const bottomColorGetter = () => model._internal_backgroundBottomColor();\n        if (options.leftPriceScale.visible && this._private__leftStub === null) {\n            this._private__leftStub = new PriceAxisStub('left', options, params, borderVisibleGetter, bottomColorGetter);\n            this._private__leftStubCell.appendChild(this._private__leftStub._internal_getElement());\n        }\n        if (options.rightPriceScale.visible && this._private__rightStub === null) {\n            this._private__rightStub = new PriceAxisStub('right', options, params, borderVisibleGetter, bottomColorGetter);\n            this._private__rightStubCell.appendChild(this._private__rightStub._internal_getElement());\n        }\n    }\n}\n\nconst windowsChrome = isChromiumBased() && isWindows();\nclass ChartWidget {\n    constructor(container, options, horzScaleBehavior) {\n        this._private__paneWidgets = [];\n        this._private__paneSeparators = [];\n        this._private__drawRafId = 0;\n        this._private__height = 0;\n        this._private__width = 0;\n        this._private__leftPriceAxisWidth = 0;\n        this._private__rightPriceAxisWidth = 0;\n        this._private__invalidateMask = null;\n        this._private__drawPlanned = false;\n        this._private__clicked = new Delegate();\n        this._private__dblClicked = new Delegate();\n        this._private__crosshairMoved = new Delegate();\n        this._private__observer = null;\n        this._private__cursorStyleOverride = null;\n        this._private__container = container;\n        this._private__options = options;\n        this._private__horzScaleBehavior = horzScaleBehavior;\n        this._private__element = document.createElement('div');\n        this._private__element.classList.add('tv-lightweight-charts');\n        this._private__element.style.overflow = 'hidden';\n        this._private__element.style.direction = 'ltr';\n        this._private__element.style.width = '100%';\n        this._private__element.style.height = '100%';\n        disableSelection(this._private__element);\n        this._private__tableElement = document.createElement('table');\n        this._private__tableElement.setAttribute('cellspacing', '0');\n        this._private__element.appendChild(this._private__tableElement);\n        this._private__onWheelBound = this._private__onMousewheel.bind(this);\n        if (shouldSubscribeMouseWheel(this._private__options)) {\n            this._private__setMouseWheelEventListener(true);\n        }\n        this._private__model = new ChartModel(this._private__invalidateHandler.bind(this), this._private__options, horzScaleBehavior);\n        this._internal_model()._internal_crosshairMoved()._internal_subscribe(this._private__onPaneWidgetCrosshairMoved.bind(this), this);\n        this._private__timeAxisWidget = new TimeAxisWidget(this, this._private__horzScaleBehavior);\n        this._private__tableElement.appendChild(this._private__timeAxisWidget._internal_getElement());\n        const usedObserver = options.autoSize && this._private__installObserver();\n        // observer could not fire event immediately for some cases\n        // so we have to set initial size manually\n        let width = this._private__options.width;\n        let height = this._private__options.height;\n        // ignore width/height options if observer has actually been used\n        // however respect options if installing resize observer failed\n        if (usedObserver || width === 0 || height === 0) {\n            const containerRect = container.getBoundingClientRect();\n            width = width || containerRect.width;\n            height = height || containerRect.height;\n        }\n        // BEWARE: resize must be called BEFORE _syncGuiWithModel (in constructor only)\n        // or after but with adjustSize to properly update time scale\n        this._internal_resize(width, height);\n        this._private__syncGuiWithModel();\n        container.appendChild(this._private__element);\n        this._private__updateTimeAxisVisibility();\n        this._private__model._internal_timeScale()._internal_optionsApplied()._internal_subscribe(this._private__model._internal_fullUpdate.bind(this._private__model), this);\n        this._private__model._internal_priceScalesOptionsChanged()._internal_subscribe(this._private__model._internal_fullUpdate.bind(this._private__model), this);\n    }\n    _internal_model() {\n        return this._private__model;\n    }\n    _internal_options() {\n        return this._private__options;\n    }\n    _internal_paneWidgets() {\n        return this._private__paneWidgets;\n    }\n    _internal_timeAxisWidget() {\n        return this._private__timeAxisWidget;\n    }\n    _internal_destroy() {\n        this._private__setMouseWheelEventListener(false);\n        if (this._private__drawRafId !== 0) {\n            window.cancelAnimationFrame(this._private__drawRafId);\n        }\n        this._private__model._internal_crosshairMoved()._internal_unsubscribeAll(this);\n        this._private__model._internal_timeScale()._internal_optionsApplied()._internal_unsubscribeAll(this);\n        this._private__model._internal_priceScalesOptionsChanged()._internal_unsubscribeAll(this);\n        this._private__model._internal_destroy();\n        for (const paneWidget of this._private__paneWidgets) {\n            this._private__tableElement.removeChild(paneWidget._internal_getElement());\n            paneWidget._internal_clicked()._internal_unsubscribeAll(this);\n            paneWidget._internal_dblClicked()._internal_unsubscribeAll(this);\n            paneWidget._internal_destroy();\n        }\n        this._private__paneWidgets = [];\n        for (const paneSeparator of this._private__paneSeparators) {\n            this._private__destroySeparator(paneSeparator);\n        }\n        this._private__paneSeparators = [];\n        ensureNotNull(this._private__timeAxisWidget)._internal_destroy();\n        if (this._private__element.parentElement !== null) {\n            this._private__element.parentElement.removeChild(this._private__element);\n        }\n        this._private__crosshairMoved._internal_destroy();\n        this._private__clicked._internal_destroy();\n        this._private__dblClicked._internal_destroy();\n        this._private__uninstallObserver();\n    }\n    _internal_resize(width, height, forceRepaint = false) {\n        if (this._private__height === height && this._private__width === width) {\n            return;\n        }\n        const sizeHint = suggestChartSize(size$1({ width, height }));\n        this._private__height = sizeHint.height;\n        this._private__width = sizeHint.width;\n        const heightStr = this._private__height + 'px';\n        const widthStr = this._private__width + 'px';\n        ensureNotNull(this._private__element).style.height = heightStr;\n        ensureNotNull(this._private__element).style.width = widthStr;\n        this._private__tableElement.style.height = heightStr;\n        this._private__tableElement.style.width = widthStr;\n        if (forceRepaint) {\n            this._private__drawImpl(InvalidateMask._internal_full(), performance.now());\n        }\n        else {\n            this._private__model._internal_fullUpdate();\n        }\n    }\n    _internal_paint(invalidateMask) {\n        if (invalidateMask === undefined) {\n            invalidateMask = InvalidateMask._internal_full();\n        }\n        for (let i = 0; i < this._private__paneWidgets.length; i++) {\n            this._private__paneWidgets[i]._internal_paint(invalidateMask._internal_invalidateForPane(i)._internal_level);\n        }\n        if (this._private__options.timeScale.visible) {\n            this._private__timeAxisWidget._internal_paint(invalidateMask._internal_fullInvalidation());\n        }\n    }\n    _internal_applyOptions(options) {\n        const currentlyHasMouseWheelListener = shouldSubscribeMouseWheel(this._private__options);\n        // we don't need to merge options here because it's done in chart model\n        // and since both model and widget share the same object it will be done automatically for widget as well\n        // not ideal solution for sure, but it work's for now ¯\\_(ツ)_/¯\n        this._private__model._internal_applyOptions(options);\n        const shouldHaveMouseWheelListener = shouldSubscribeMouseWheel(this._private__options);\n        if (shouldHaveMouseWheelListener !== currentlyHasMouseWheelListener) {\n            this._private__setMouseWheelEventListener(shouldHaveMouseWheelListener);\n        }\n        if (options['layout']?.panes) {\n            this._private__applyPanesOptions();\n        }\n        this._private__updateTimeAxisVisibility();\n        this._private__applyAutoSizeOptions(options);\n    }\n    _internal_clicked() {\n        return this._private__clicked;\n    }\n    _internal_dblClicked() {\n        return this._private__dblClicked;\n    }\n    _internal_crosshairMoved() {\n        return this._private__crosshairMoved;\n    }\n    _internal_takeScreenshot() {\n        if (this._private__invalidateMask !== null) {\n            this._private__drawImpl(this._private__invalidateMask, performance.now());\n            this._private__invalidateMask = null;\n        }\n        const screeshotBitmapSize = this._private__traverseLayout(null);\n        const screenshotCanvas = document.createElement('canvas');\n        screenshotCanvas.width = screeshotBitmapSize.width;\n        screenshotCanvas.height = screeshotBitmapSize.height;\n        const ctx = ensureNotNull(screenshotCanvas.getContext('2d'));\n        this._private__traverseLayout(ctx);\n        return screenshotCanvas;\n    }\n    _internal_getPriceAxisWidth(position) {\n        if (position === \"left\" /* DefaultPriceScaleId.Left */ && !this._private__isLeftAxisVisible()) {\n            return 0;\n        }\n        if (position === \"right\" /* DefaultPriceScaleId.Right */ && !this._private__isRightAxisVisible()) {\n            return 0;\n        }\n        if (this._private__paneWidgets.length === 0) {\n            return 0;\n        }\n        // we don't need to worry about exactly pane widget here\n        // because all pane widgets have the same width of price axis widget\n        // see _adjustSizeImpl\n        const priceAxisWidget = position === \"left\" /* DefaultPriceScaleId.Left */\n            ? this._private__paneWidgets[0]._internal_leftPriceAxisWidget()\n            : this._private__paneWidgets[0]._internal_rightPriceAxisWidget();\n        return ensureNotNull(priceAxisWidget)._internal_getWidth();\n    }\n    _internal_autoSizeActive() {\n        return this._private__options.autoSize && this._private__observer !== null;\n    }\n    _internal_element() {\n        return this._private__element;\n    }\n    _internal_setCursorStyle(style) {\n        this._private__cursorStyleOverride = style;\n        if (this._private__cursorStyleOverride) {\n            this._internal_element().style.setProperty('cursor', style);\n        }\n        else {\n            this._internal_element().style.removeProperty('cursor');\n        }\n    }\n    _internal_getCursorOverrideStyle() {\n        return this._private__cursorStyleOverride;\n    }\n    _internal_paneSize(paneIndex) {\n        return ensureDefined(this._private__paneWidgets[paneIndex])._internal_getSize();\n    }\n    _private__applyPanesOptions() {\n        this._private__paneSeparators.forEach((separator) => {\n            separator._internal_update();\n        });\n    }\n    // eslint-disable-next-line complexity\n    _private__applyAutoSizeOptions(options) {\n        if (options.autoSize === undefined && this._private__observer && (options.width !== undefined || options.height !== undefined)) {\n            warn(`You should turn autoSize off explicitly before specifying sizes; try adding options.autoSize: false to new options`);\n            return;\n        }\n        if (options.autoSize && !this._private__observer) {\n            // installing observer will override resize if successful\n            this._private__installObserver();\n        }\n        if (options.autoSize === false && this._private__observer !== null) {\n            this._private__uninstallObserver();\n        }\n        if (!options.autoSize && (options.width !== undefined || options.height !== undefined)) {\n            this._internal_resize(options.width || this._private__width, options.height || this._private__height);\n        }\n    }\n    /**\n     * Traverses the widget's layout (pane and axis child widgets),\n     * draws the screenshot (if rendering context is passed) and returns the screenshot bitmap size\n     *\n     * @param ctx - if passed, used to draw the screenshot of widget\n     * @returns screenshot bitmap size\n     */\n    _private__traverseLayout(ctx) {\n        let totalWidth = 0;\n        let totalHeight = 0;\n        const firstPane = this._private__paneWidgets[0];\n        const drawPriceAxises = (position, targetX) => {\n            let targetY = 0;\n            for (let paneIndex = 0; paneIndex < this._private__paneWidgets.length; paneIndex++) {\n                const paneWidget = this._private__paneWidgets[paneIndex];\n                const priceAxisWidget = ensureNotNull(position === 'left' ? paneWidget._internal_leftPriceAxisWidget() : paneWidget._internal_rightPriceAxisWidget());\n                const bitmapSize = priceAxisWidget._internal_getBitmapSize();\n                if (ctx !== null) {\n                    priceAxisWidget._internal_drawBitmap(ctx, targetX, targetY);\n                }\n                targetY += bitmapSize.height;\n                if (paneIndex < this._private__paneWidgets.length - 1) {\n                    const separator = this._private__paneSeparators[paneIndex];\n                    const separatorBitmapSize = separator._internal_getBitmapSize();\n                    if (ctx !== null) {\n                        separator._internal_drawBitmap(ctx, targetX, targetY);\n                    }\n                    targetY += separatorBitmapSize.height;\n                }\n            }\n        };\n        // draw left price scale if exists\n        if (this._private__isLeftAxisVisible()) {\n            drawPriceAxises('left', 0);\n            const leftAxisBitmapWidth = ensureNotNull(firstPane._internal_leftPriceAxisWidget())._internal_getBitmapSize().width;\n            totalWidth += leftAxisBitmapWidth;\n        }\n        for (let paneIndex = 0; paneIndex < this._private__paneWidgets.length; paneIndex++) {\n            const paneWidget = this._private__paneWidgets[paneIndex];\n            const bitmapSize = paneWidget._internal_getBitmapSize();\n            if (ctx !== null) {\n                paneWidget._internal_drawBitmap(ctx, totalWidth, totalHeight);\n            }\n            totalHeight += bitmapSize.height;\n            if (paneIndex < this._private__paneWidgets.length - 1) {\n                const separator = this._private__paneSeparators[paneIndex];\n                const separatorBitmapSize = separator._internal_getBitmapSize();\n                if (ctx !== null) {\n                    separator._internal_drawBitmap(ctx, totalWidth, totalHeight);\n                }\n                totalHeight += separatorBitmapSize.height;\n            }\n        }\n        const firstPaneBitmapWidth = firstPane._internal_getBitmapSize().width;\n        totalWidth += firstPaneBitmapWidth;\n        // draw right price scale if exists\n        if (this._private__isRightAxisVisible()) {\n            drawPriceAxises('right', totalWidth);\n            const rightAxisBitmapWidth = ensureNotNull(firstPane._internal_rightPriceAxisWidget())._internal_getBitmapSize().width;\n            totalWidth += rightAxisBitmapWidth;\n        }\n        const drawStub = (position, targetX, targetY) => {\n            const stub = ensureNotNull(position === 'left' ? this._private__timeAxisWidget._internal_leftStub() : this._private__timeAxisWidget._internal_rightStub());\n            stub._internal_drawBitmap(ensureNotNull(ctx), targetX, targetY);\n        };\n        // draw time scale and stubs\n        if (this._private__options.timeScale.visible) {\n            const timeAxisBitmapSize = this._private__timeAxisWidget._internal_getBitmapSize();\n            if (ctx !== null) {\n                let targetX = 0;\n                if (this._private__isLeftAxisVisible()) {\n                    drawStub('left', targetX, totalHeight);\n                    targetX = ensureNotNull(firstPane._internal_leftPriceAxisWidget())._internal_getBitmapSize().width;\n                }\n                this._private__timeAxisWidget._internal_drawBitmap(ctx, targetX, totalHeight);\n                targetX += timeAxisBitmapSize.width;\n                if (this._private__isRightAxisVisible()) {\n                    drawStub('right', targetX, totalHeight);\n                }\n            }\n            totalHeight += timeAxisBitmapSize.height;\n        }\n        return size$1({\n            width: totalWidth,\n            height: totalHeight,\n        });\n    }\n    // eslint-disable-next-line complexity\n    _private__adjustSizeImpl() {\n        let totalStretch = 0;\n        let leftPriceAxisWidth = 0;\n        let rightPriceAxisWidth = 0;\n        for (const paneWidget of this._private__paneWidgets) {\n            if (this._private__isLeftAxisVisible()) {\n                leftPriceAxisWidth = Math.max(leftPriceAxisWidth, ensureNotNull(paneWidget._internal_leftPriceAxisWidget())._internal_optimalWidth(), this._private__options.leftPriceScale.minimumWidth);\n            }\n            if (this._private__isRightAxisVisible()) {\n                rightPriceAxisWidth = Math.max(rightPriceAxisWidth, ensureNotNull(paneWidget._internal_rightPriceAxisWidget())._internal_optimalWidth(), this._private__options.rightPriceScale.minimumWidth);\n            }\n            totalStretch += paneWidget._internal_stretchFactor();\n        }\n        leftPriceAxisWidth = suggestPriceScaleWidth(leftPriceAxisWidth);\n        rightPriceAxisWidth = suggestPriceScaleWidth(rightPriceAxisWidth);\n        const width = this._private__width;\n        const height = this._private__height;\n        const paneWidth = Math.max(width - leftPriceAxisWidth - rightPriceAxisWidth, 0);\n        const separatorCount = this._private__paneSeparators.length;\n        const separatorHeight = 1 /* SeparatorConstants.SeparatorHeight */;\n        const separatorsHeight = separatorHeight * separatorCount;\n        const timeAxisVisible = this._private__options.timeScale.visible;\n        let timeAxisHeight = timeAxisVisible ? Math.max(this._private__timeAxisWidget._internal_optimalHeight(), this._private__options.timeScale.minimumHeight) : 0;\n        timeAxisHeight = suggestTimeScaleHeight(timeAxisHeight);\n        const otherWidgetHeight = separatorsHeight + timeAxisHeight;\n        const totalPaneHeight = height < otherWidgetHeight ? 0 : height - otherWidgetHeight;\n        const stretchPixels = totalPaneHeight / totalStretch;\n        let accumulatedHeight = 0;\n        const pixelRatio = window.devicePixelRatio || 1;\n        for (let paneIndex = 0; paneIndex < this._private__paneWidgets.length; ++paneIndex) {\n            const paneWidget = this._private__paneWidgets[paneIndex];\n            paneWidget._internal_setState(this._private__model._internal_panes()[paneIndex]);\n            let paneHeight = 0;\n            let calculatePaneHeight = 0;\n            if (paneIndex === this._private__paneWidgets.length - 1) {\n                calculatePaneHeight = Math.ceil((totalPaneHeight - accumulatedHeight) * pixelRatio) / pixelRatio;\n            }\n            else {\n                calculatePaneHeight = Math.round(paneWidget._internal_stretchFactor() * stretchPixels * pixelRatio) / pixelRatio;\n            }\n            paneHeight = Math.max(calculatePaneHeight, 2);\n            accumulatedHeight += paneHeight;\n            paneWidget._internal_setSize(size$1({ width: paneWidth, height: paneHeight }));\n            if (this._private__isLeftAxisVisible()) {\n                paneWidget._internal_setPriceAxisSize(leftPriceAxisWidth, 'left');\n            }\n            if (this._private__isRightAxisVisible()) {\n                paneWidget._internal_setPriceAxisSize(rightPriceAxisWidth, 'right');\n            }\n            if (paneWidget._internal_state()) {\n                this._private__model._internal_setPaneHeight(paneWidget._internal_state(), paneHeight);\n            }\n        }\n        this._private__timeAxisWidget._internal_setSizes(size$1({ width: timeAxisVisible ? paneWidth : 0, height: timeAxisHeight }), timeAxisVisible ? leftPriceAxisWidth : 0, timeAxisVisible ? rightPriceAxisWidth : 0);\n        this._private__model._internal_setWidth(paneWidth);\n        if (this._private__leftPriceAxisWidth !== leftPriceAxisWidth) {\n            this._private__leftPriceAxisWidth = leftPriceAxisWidth;\n        }\n        if (this._private__rightPriceAxisWidth !== rightPriceAxisWidth) {\n            this._private__rightPriceAxisWidth = rightPriceAxisWidth;\n        }\n    }\n    _private__setMouseWheelEventListener(add) {\n        if (add) {\n            this._private__element.addEventListener('wheel', this._private__onWheelBound, { passive: false });\n            return;\n        }\n        this._private__element.removeEventListener('wheel', this._private__onWheelBound);\n    }\n    _private__determineWheelSpeedAdjustment(event) {\n        switch (event.deltaMode) {\n            case event.DOM_DELTA_PAGE:\n                // one screen at time scroll mode\n                return 120;\n            case event.DOM_DELTA_LINE:\n                // one line at time scroll mode\n                return 32;\n        }\n        if (!windowsChrome) {\n            return 1;\n        }\n        // Chromium on Windows has a bug where the scroll speed isn't correctly\n        // adjusted for high density displays. We need to correct for this so that\n        // scroll speed is consistent between browsers.\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=1001735\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=1207308\n        return (1 / window.devicePixelRatio);\n    }\n    _private__onMousewheel(event) {\n        if ((event.deltaX === 0 || !this._private__options['handleScroll'].mouseWheel) &&\n            (event.deltaY === 0 || !this._private__options['handleScale'].mouseWheel)) {\n            return;\n        }\n        const scrollSpeedAdjustment = this._private__determineWheelSpeedAdjustment(event);\n        const deltaX = scrollSpeedAdjustment * event.deltaX / 100;\n        const deltaY = -(scrollSpeedAdjustment * event.deltaY / 100);\n        if (event.cancelable) {\n            event.preventDefault();\n        }\n        if (deltaY !== 0 && this._private__options['handleScale'].mouseWheel) {\n            const zoomScale = Math.sign(deltaY) * Math.min(1, Math.abs(deltaY));\n            const scrollPosition = event.clientX - this._private__element.getBoundingClientRect().left;\n            this._internal_model()._internal_zoomTime(scrollPosition, zoomScale);\n        }\n        if (deltaX !== 0 && this._private__options['handleScroll'].mouseWheel) {\n            this._internal_model()._internal_scrollChart(deltaX * -80); // 80 is a made up coefficient, and minus is for the \"natural\" scroll\n        }\n    }\n    _private__drawImpl(invalidateMask, time) {\n        const invalidationType = invalidateMask._internal_fullInvalidation();\n        // actions for full invalidation ONLY (not shared with light)\n        if (invalidationType === 3 /* InvalidationLevel.Full */) {\n            this._private__updateGui();\n        }\n        // light or full invalidate actions\n        if (invalidationType === 3 /* InvalidationLevel.Full */ ||\n            invalidationType === 2 /* InvalidationLevel.Light */) {\n            this._private__applyMomentaryAutoScale(invalidateMask);\n            this._private__applyTimeScaleInvalidations(invalidateMask, time);\n            this._private__timeAxisWidget._internal_update();\n            this._private__paneWidgets.forEach((pane) => {\n                pane._internal_updatePriceAxisWidgets();\n            });\n            // In the case a full invalidation has been postponed during the draw, reapply\n            // the timescale invalidations. A full invalidation would mean there is a change\n            // in the timescale width (caused by price scale changes) that needs to be drawn\n            // right away to avoid flickering.\n            if (this._private__invalidateMask?._internal_fullInvalidation() === 3 /* InvalidationLevel.Full */) {\n                this._private__invalidateMask._internal_merge(invalidateMask);\n                this._private__updateGui();\n                this._private__applyMomentaryAutoScale(this._private__invalidateMask);\n                this._private__applyTimeScaleInvalidations(this._private__invalidateMask, time);\n                invalidateMask = this._private__invalidateMask;\n                this._private__invalidateMask = null;\n            }\n        }\n        this._internal_paint(invalidateMask);\n    }\n    _private__applyTimeScaleInvalidations(invalidateMask, time) {\n        for (const tsInvalidation of invalidateMask._internal_timeScaleInvalidations()) {\n            this._private__applyTimeScaleInvalidation(tsInvalidation, time);\n        }\n    }\n    _private__applyMomentaryAutoScale(invalidateMask) {\n        const panes = this._private__model._internal_panes();\n        for (let i = 0; i < panes.length; i++) {\n            if (invalidateMask._internal_invalidateForPane(i)._internal_autoScale) {\n                panes[i]._internal_momentaryAutoScale();\n            }\n        }\n    }\n    _private__applyTimeScaleInvalidation(invalidation, time) {\n        const timeScale = this._private__model._internal_timeScale();\n        switch (invalidation._internal_type) {\n            case 0 /* TimeScaleInvalidationType.FitContent */:\n                timeScale._internal_fitContent();\n                break;\n            case 1 /* TimeScaleInvalidationType.ApplyRange */:\n                timeScale._internal_setLogicalRange(invalidation._internal_value);\n                break;\n            case 2 /* TimeScaleInvalidationType.ApplyBarSpacing */:\n                timeScale._internal_setBarSpacing(invalidation._internal_value);\n                break;\n            case 3 /* TimeScaleInvalidationType.ApplyRightOffset */:\n                timeScale._internal_setRightOffset(invalidation._internal_value);\n                break;\n            case 4 /* TimeScaleInvalidationType.Reset */:\n                timeScale._internal_restoreDefault();\n                break;\n            case 5 /* TimeScaleInvalidationType.Animation */:\n                if (!invalidation._internal_value._internal_finished(time)) {\n                    timeScale._internal_setRightOffset(invalidation._internal_value._internal_getPosition(time));\n                }\n                break;\n        }\n    }\n    _private__invalidateHandler(invalidateMask) {\n        if (this._private__invalidateMask !== null) {\n            this._private__invalidateMask._internal_merge(invalidateMask);\n        }\n        else {\n            this._private__invalidateMask = invalidateMask;\n        }\n        if (!this._private__drawPlanned) {\n            this._private__drawPlanned = true;\n            this._private__drawRafId = window.requestAnimationFrame((time) => {\n                this._private__drawPlanned = false;\n                this._private__drawRafId = 0;\n                if (this._private__invalidateMask !== null) {\n                    const mask = this._private__invalidateMask;\n                    this._private__invalidateMask = null;\n                    this._private__drawImpl(mask, time);\n                    for (const tsInvalidation of mask._internal_timeScaleInvalidations()) {\n                        if (tsInvalidation._internal_type === 5 /* TimeScaleInvalidationType.Animation */ && !tsInvalidation._internal_value._internal_finished(time)) {\n                            this._internal_model()._internal_setTimeScaleAnimation(tsInvalidation._internal_value);\n                            break;\n                        }\n                    }\n                }\n            });\n        }\n    }\n    _private__updateGui() {\n        this._private__syncGuiWithModel();\n    }\n    _private__destroySeparator(separator) {\n        this._private__tableElement.removeChild(separator._internal_getElement());\n        separator._internal_destroy();\n    }\n    _private__syncGuiWithModel() {\n        const panes = this._private__model._internal_panes();\n        const targetPaneWidgetsCount = panes.length;\n        const actualPaneWidgetsCount = this._private__paneWidgets.length;\n        // Remove (if needed) pane widgets and separators\n        for (let i = targetPaneWidgetsCount; i < actualPaneWidgetsCount; i++) {\n            const paneWidget = ensureDefined(this._private__paneWidgets.pop());\n            this._private__tableElement.removeChild(paneWidget._internal_getElement());\n            paneWidget._internal_clicked()._internal_unsubscribeAll(this);\n            paneWidget._internal_dblClicked()._internal_unsubscribeAll(this);\n            paneWidget._internal_destroy();\n            const paneSeparator = this._private__paneSeparators.pop();\n            if (paneSeparator !== undefined) {\n                this._private__destroySeparator(paneSeparator);\n            }\n        }\n        // Create (if needed) new pane widgets and separators\n        for (let i = actualPaneWidgetsCount; i < targetPaneWidgetsCount; i++) {\n            const paneWidget = new PaneWidget(this, panes[i]);\n            paneWidget._internal_clicked()._internal_subscribe(this._private__onPaneWidgetClicked.bind(this, paneWidget), this);\n            paneWidget._internal_dblClicked()._internal_subscribe(this._private__onPaneWidgetDblClicked.bind(this, paneWidget), this);\n            this._private__paneWidgets.push(paneWidget);\n            // create and insert separator\n            if (i > 0) {\n                const paneSeparator = new PaneSeparator(this, i - 1, i);\n                this._private__paneSeparators.push(paneSeparator);\n                this._private__tableElement.insertBefore(paneSeparator._internal_getElement(), this._private__timeAxisWidget._internal_getElement());\n            }\n            // insert paneWidget\n            this._private__tableElement.insertBefore(paneWidget._internal_getElement(), this._private__timeAxisWidget._internal_getElement());\n        }\n        for (let i = 0; i < targetPaneWidgetsCount; i++) {\n            const state = panes[i];\n            const paneWidget = this._private__paneWidgets[i];\n            if (paneWidget._internal_state() !== state) {\n                paneWidget._internal_setState(state);\n            }\n            else {\n                paneWidget._internal_updatePriceAxisWidgetsStates();\n            }\n        }\n        this._private__updateTimeAxisVisibility();\n        this._private__adjustSizeImpl();\n    }\n    _private__getMouseEventParamsImpl(index, point, event, pane) {\n        const seriesData = new Map();\n        if (index !== null) {\n            const serieses = this._private__model._internal_serieses();\n            serieses.forEach((s) => {\n                // TODO: replace with search left\n                const data = s._internal_bars()._internal_search(index);\n                if (data !== null) {\n                    seriesData.set(s, data);\n                }\n            });\n        }\n        let clientTime;\n        if (index !== null) {\n            const timePoint = this._private__model._internal_timeScale()._internal_indexToTimeScalePoint(index)?.originalTime;\n            if (timePoint !== undefined) {\n                clientTime = timePoint;\n            }\n        }\n        const hoveredSource = this._internal_model()._internal_hoveredSource();\n        const hoveredSeries = hoveredSource !== null && hoveredSource._internal_source instanceof Series\n            ? hoveredSource._internal_source\n            : undefined;\n        const hoveredObject = hoveredSource !== null && hoveredSource._internal_object !== undefined\n            ? hoveredSource._internal_object._internal_externalId\n            : undefined;\n        const paneIndex = this._private__getPaneIndex(pane);\n        return {\n            _internal_originalTime: clientTime,\n            _internal_index: index ?? undefined,\n            _internal_point: point ?? undefined,\n            _internal_paneIndex: paneIndex !== -1 ? paneIndex : undefined,\n            _internal_hoveredSeries: hoveredSeries,\n            _internal_seriesData: seriesData,\n            _internal_hoveredObject: hoveredObject,\n            _internal_touchMouseEventData: event ?? undefined,\n        };\n    }\n    _private__getPaneIndex(pane) {\n        let paneIndex = -1;\n        if (pane) {\n            paneIndex = this._private__paneWidgets.indexOf(pane);\n        }\n        else {\n            const crosshairPane = this._internal_model()._internal_crosshairSource()._internal_pane();\n            if (crosshairPane !== null) {\n                paneIndex = this._internal_model()._internal_panes().indexOf(crosshairPane);\n            }\n        }\n        return paneIndex;\n    }\n    _private__onPaneWidgetClicked(pane, time, point, event) {\n        this._private__clicked._internal_fire(() => this._private__getMouseEventParamsImpl(time, point, event, pane));\n    }\n    _private__onPaneWidgetDblClicked(pane, time, point, event) {\n        this._private__dblClicked._internal_fire(() => this._private__getMouseEventParamsImpl(time, point, event, pane));\n    }\n    _private__onPaneWidgetCrosshairMoved(time, point, event) {\n        this._internal_setCursorStyle(this._internal_model()._internal_hoveredSource()?._internal_cursorStyle ?? null);\n        this._private__crosshairMoved._internal_fire(() => this._private__getMouseEventParamsImpl(time, point, event));\n    }\n    _private__updateTimeAxisVisibility() {\n        const display = this._private__options.timeScale.visible ? '' : 'none';\n        this._private__timeAxisWidget._internal_getElement().style.display = display;\n    }\n    _private__isLeftAxisVisible() {\n        return this._private__paneWidgets[0]._internal_state()._internal_leftPriceScale()._internal_options().visible;\n    }\n    _private__isRightAxisVisible() {\n        return this._private__paneWidgets[0]._internal_state()._internal_rightPriceScale()._internal_options().visible;\n    }\n    _private__installObserver() {\n        // eslint-disable-next-line no-restricted-syntax\n        if (!('ResizeObserver' in window)) {\n            warn('Options contains \"autoSize\" flag, but the browser does not support ResizeObserver feature. Please provide polyfill.');\n            return false;\n        }\n        else {\n            this._private__observer = new ResizeObserver((entries) => {\n                // There is no need to check if entry.target === this._container since there is only\n                // a single element being observed.\n                // and we want to use the last entry (if multiple) because it would be most up to date\n                // (since the browser may batch multiple updates).\n                const containerEntry = entries[entries.length - 1];\n                if (!containerEntry) {\n                    // this may be undefined if the entries array was empty.\n                    return;\n                }\n                this._internal_resize(containerEntry.contentRect.width, containerEntry.contentRect.height);\n            });\n            this._private__observer.observe(this._private__container, { box: 'border-box' });\n            return true;\n        }\n    }\n    _private__uninstallObserver() {\n        if (this._private__observer !== null) {\n            this._private__observer.disconnect();\n        }\n        this._private__observer = null;\n    }\n}\nfunction disableSelection(element) {\n    element.style.userSelect = 'none';\n    // eslint-disable-next-line deprecation/deprecation\n    element.style.webkitUserSelect = 'none';\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any,@typescript-eslint/no-unsafe-member-access\n    element.style.msUserSelect = 'none';\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any,@typescript-eslint/no-unsafe-member-access\n    element.style.MozUserSelect = 'none';\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any,@typescript-eslint/no-unsafe-member-access\n    element.style.webkitTapHighlightColor = 'transparent';\n}\nfunction shouldSubscribeMouseWheel(options) {\n    return Boolean(options['handleScroll'].mouseWheel || options['handleScale'].mouseWheel);\n}\n\nfunction isWhitespaceData(data) {\n    return data.open === undefined && data.value === undefined;\n}\nfunction isFulfilledData(data) {\n    return isFulfilledBarData(data) || isFulfilledLineData(data);\n}\nfunction isFulfilledBarData(data) {\n    return data.open !== undefined;\n}\nfunction isFulfilledLineData(data) {\n    return data.value !== undefined;\n}\n\nfunction getColoredLineBasedSeriesPlotRow(time, index, item, originalTime) {\n    const val = item.value;\n    const res = { _internal_index: index, _internal_time: time, _internal_value: [val, val, val, val], _internal_originalTime: originalTime };\n    if (item.color !== undefined) {\n        res._internal_color = item.color;\n    }\n    return res;\n}\nfunction getAreaSeriesPlotRow(time, index, item, originalTime) {\n    const val = item.value;\n    const res = { _internal_index: index, _internal_time: time, _internal_value: [val, val, val, val], _internal_originalTime: originalTime };\n    if (item.lineColor !== undefined) {\n        res._internal_lineColor = item.lineColor;\n    }\n    if (item.topColor !== undefined) {\n        res._internal_topColor = item.topColor;\n    }\n    if (item.bottomColor !== undefined) {\n        res._internal_bottomColor = item.bottomColor;\n    }\n    return res;\n}\nfunction getBaselineSeriesPlotRow(time, index, item, originalTime) {\n    const val = item.value;\n    const res = { _internal_index: index, _internal_time: time, _internal_value: [val, val, val, val], _internal_originalTime: originalTime };\n    if (item.topLineColor !== undefined) {\n        res._internal_topLineColor = item.topLineColor;\n    }\n    if (item.bottomLineColor !== undefined) {\n        res._internal_bottomLineColor = item.bottomLineColor;\n    }\n    if (item.topFillColor1 !== undefined) {\n        res._internal_topFillColor1 = item.topFillColor1;\n    }\n    if (item.topFillColor2 !== undefined) {\n        res._internal_topFillColor2 = item.topFillColor2;\n    }\n    if (item.bottomFillColor1 !== undefined) {\n        res._internal_bottomFillColor1 = item.bottomFillColor1;\n    }\n    if (item.bottomFillColor2 !== undefined) {\n        res._internal_bottomFillColor2 = item.bottomFillColor2;\n    }\n    return res;\n}\nfunction getBarSeriesPlotRow(time, index, item, originalTime) {\n    const res = { _internal_index: index, _internal_time: time, _internal_value: [item.open, item.high, item.low, item.close], _internal_originalTime: originalTime };\n    if (item.color !== undefined) {\n        res._internal_color = item.color;\n    }\n    return res;\n}\nfunction getCandlestickSeriesPlotRow(time, index, item, originalTime) {\n    const res = { _internal_index: index, _internal_time: time, _internal_value: [item.open, item.high, item.low, item.close], _internal_originalTime: originalTime };\n    if (item.color !== undefined) {\n        res._internal_color = item.color;\n    }\n    if (item.borderColor !== undefined) {\n        res._internal_borderColor = item.borderColor;\n    }\n    if (item.wickColor !== undefined) {\n        res._internal_wickColor = item.wickColor;\n    }\n    return res;\n}\nfunction getCustomSeriesPlotRow(time, index, item, originalTime, dataToPlotRow) {\n    const values = ensureDefined(dataToPlotRow)(item);\n    const max = Math.max(...values);\n    const min = Math.min(...values);\n    const last = values[values.length - 1];\n    const value = [last, max, min, last];\n    const { time: excludedTime, color, ...data } = item;\n    return { _internal_index: index, _internal_time: time, _internal_value: value, _internal_originalTime: originalTime, _internal_data: data, _internal_color: color };\n}\nfunction isSeriesPlotRow(row) {\n    return row._internal_value !== undefined;\n}\nfunction wrapCustomValues(plotRow, bar) {\n    if (bar.customValues !== undefined) {\n        plotRow._internal_customValues = bar.customValues;\n    }\n    return plotRow;\n}\nfunction isWhitespaceDataWithCustomCheck(bar, customIsWhitespace) {\n    if (customIsWhitespace) {\n        return customIsWhitespace(bar);\n    }\n    return isWhitespaceData(bar);\n}\nfunction wrapWhitespaceData(createPlotRowFn) {\n    return (time, index, bar, originalTime, dataToPlotRow, customIsWhitespace) => {\n        if (isWhitespaceDataWithCustomCheck(bar, customIsWhitespace)) {\n            return wrapCustomValues({ _internal_time: time, _internal_index: index, _internal_originalTime: originalTime }, bar);\n        }\n        return wrapCustomValues(createPlotRowFn(time, index, bar, originalTime, dataToPlotRow), bar);\n    };\n}\nfunction getSeriesPlotRowCreator(seriesType) {\n    const seriesPlotRowFnMap = {\n        Candlestick: wrapWhitespaceData(getCandlestickSeriesPlotRow),\n        Bar: wrapWhitespaceData(getBarSeriesPlotRow),\n        Area: wrapWhitespaceData(getAreaSeriesPlotRow),\n        Baseline: wrapWhitespaceData(getBaselineSeriesPlotRow),\n        Histogram: wrapWhitespaceData(getColoredLineBasedSeriesPlotRow),\n        Line: wrapWhitespaceData(getColoredLineBasedSeriesPlotRow),\n        Custom: wrapWhitespaceData(getCustomSeriesPlotRow),\n    };\n    return seriesPlotRowFnMap[seriesType];\n}\n\n/// <reference types=\"_build-time-constants\" />\nfunction createEmptyTimePointData(timePoint) {\n    return { _internal_index: 0, _internal_mapping: new Map(), _internal_timePoint: timePoint };\n}\nfunction seriesRowsFirstAndLastTime(seriesRows, bh) {\n    if (seriesRows === undefined || seriesRows.length === 0) {\n        return undefined;\n    }\n    return {\n        _internal_firstTime: bh.key(seriesRows[0]._internal_time),\n        _internal_lastTime: bh.key(seriesRows[seriesRows.length - 1]._internal_time),\n    };\n}\nfunction seriesUpdateInfo(seriesRows, prevSeriesRows, bh) {\n    const firstAndLastTime = seriesRowsFirstAndLastTime(seriesRows, bh);\n    const prevFirstAndLastTime = seriesRowsFirstAndLastTime(prevSeriesRows, bh);\n    if (firstAndLastTime !== undefined && prevFirstAndLastTime !== undefined) {\n        return {\n            _internal_historicalUpdate: false,\n            _internal_lastBarUpdatedOrNewBarsAddedToTheRight: firstAndLastTime._internal_lastTime >= prevFirstAndLastTime._internal_lastTime &&\n                firstAndLastTime._internal_firstTime >= prevFirstAndLastTime._internal_firstTime,\n        };\n    }\n    return undefined;\n}\nfunction timeScalePointTime(mergedPointData) {\n    let result;\n    mergedPointData.forEach((v) => {\n        if (result === undefined) {\n            result = v._internal_originalTime;\n        }\n    });\n    return ensureDefined(result);\n}\nfunction saveOriginalTime(data) {\n    if (data._internal_originalTime === undefined) {\n        data._internal_originalTime = data.time;\n    }\n}\nclass DataLayer {\n    constructor(horzScaleBehavior) {\n        // note that _pointDataByTimePoint and _seriesRowsBySeries shares THE SAME objects in their values between each other\n        // it's just different kind of maps to make usages/perf better\n        this._private__pointDataByTimePoint = new Map();\n        this._private__seriesRowsBySeries = new Map();\n        this._private__seriesLastTimePoint = new Map();\n        // this is kind of \"dest\" values (in opposite to \"source\" ones) - we don't need to modify it manually, the only by calling _updateTimeScalePoints or updateSeriesData methods\n        this._private__sortedTimePoints = [];\n        this._private__horzScaleBehavior = horzScaleBehavior;\n    }\n    _internal_destroy() {\n        this._private__pointDataByTimePoint.clear();\n        this._private__seriesRowsBySeries.clear();\n        this._private__seriesLastTimePoint.clear();\n        this._private__sortedTimePoints = [];\n    }\n    _internal_setSeriesData(series, data) {\n        let needCleanupPoints = this._private__pointDataByTimePoint.size !== 0;\n        let isTimeScaleAffected = false;\n        // save previous series rows data before it's replaced inside this._setRowsToSeries\n        const prevSeriesRows = this._private__seriesRowsBySeries.get(series);\n        if (prevSeriesRows !== undefined) {\n            if (this._private__seriesRowsBySeries.size === 1) {\n                needCleanupPoints = false;\n                isTimeScaleAffected = true;\n                // perf optimization - if there is only 1 series, then we can just clear and fill everything from scratch\n                this._private__pointDataByTimePoint.clear();\n            }\n            else {\n                // perf optimization - actually we have to use this._pointDataByTimePoint for going through here\n                // but as soon as this._sortedTimePoints is just a different form of _pointDataByTimePoint we can use it as well\n                for (const point of this._private__sortedTimePoints) {\n                    if (point.pointData._internal_mapping.delete(series)) {\n                        isTimeScaleAffected = true;\n                    }\n                }\n            }\n        }\n        let seriesRows = [];\n        if (data.length !== 0) {\n            const originalTimes = data.map((d) => d.time);\n            const timeConverter = this._private__horzScaleBehavior.createConverterToInternalObj(data);\n            const createPlotRow = getSeriesPlotRowCreator(series._internal_seriesType());\n            const dataToPlotRow = series._internal_customSeriesPlotValuesBuilder();\n            const customWhitespaceChecker = series._internal_customSeriesWhitespaceCheck();\n            seriesRows = data.map((item, index) => {\n                const time = timeConverter(item.time);\n                const horzItemKey = this._private__horzScaleBehavior.key(time);\n                let timePointData = this._private__pointDataByTimePoint.get(horzItemKey);\n                if (timePointData === undefined) {\n                    // the indexes will be sync later\n                    timePointData = createEmptyTimePointData(time);\n                    this._private__pointDataByTimePoint.set(horzItemKey, timePointData);\n                    isTimeScaleAffected = true;\n                }\n                const row = createPlotRow(time, timePointData._internal_index, item, originalTimes[index], dataToPlotRow, customWhitespaceChecker);\n                timePointData._internal_mapping.set(series, row);\n                return row;\n            });\n        }\n        if (needCleanupPoints) {\n            // we deleted the old data from mapping and added the new ones\n            // so there might be empty points now, let's remove them first\n            this._private__cleanupPointsData();\n        }\n        this._private__setRowsToSeries(series, seriesRows);\n        let firstChangedPointIndex = -1;\n        if (isTimeScaleAffected) {\n            // then generate the time scale points\n            // timeWeight will be updates in _updateTimeScalePoints later\n            const newTimeScalePoints = [];\n            this._private__pointDataByTimePoint.forEach((pointData) => {\n                newTimeScalePoints.push({\n                    timeWeight: 0,\n                    time: pointData._internal_timePoint,\n                    pointData,\n                    originalTime: timeScalePointTime(pointData._internal_mapping),\n                });\n            });\n            newTimeScalePoints.sort((t1, t2) => this._private__horzScaleBehavior.key(t1.time) - this._private__horzScaleBehavior.key(t2.time));\n            firstChangedPointIndex = this._private__replaceTimeScalePoints(newTimeScalePoints);\n        }\n        return this._private__getUpdateResponse(series, firstChangedPointIndex, seriesUpdateInfo(this._private__seriesRowsBySeries.get(series), prevSeriesRows, this._private__horzScaleBehavior));\n    }\n    _internal_removeSeries(series) {\n        return this._internal_setSeriesData(series, []);\n    }\n    _internal_updateSeriesData(series, data, historicalUpdate) {\n        const extendedData = data;\n        saveOriginalTime(extendedData);\n        // convertStringToBusinessDay(data);\n        this._private__horzScaleBehavior.preprocessData(data);\n        const timeConverter = this._private__horzScaleBehavior.createConverterToInternalObj([data]);\n        const time = timeConverter(data.time);\n        const lastSeriesTime = this._private__seriesLastTimePoint.get(series);\n        if (!historicalUpdate && lastSeriesTime !== undefined && this._private__horzScaleBehavior.key(time) < this._private__horzScaleBehavior.key(lastSeriesTime)) {\n            // eslint-disable-next-line @typescript-eslint/no-base-to-string\n            throw new Error(`Cannot update oldest data, last time=${lastSeriesTime}, new time=${time}`);\n        }\n        let pointDataAtTime = this._private__pointDataByTimePoint.get(this._private__horzScaleBehavior.key(time));\n        if (historicalUpdate && pointDataAtTime === undefined) {\n            throw new Error('Cannot update non-existing data point when historicalUpdate is true');\n        }\n        // if no point data found for the new data item\n        // that means that we need to update scale\n        const affectsTimeScale = pointDataAtTime === undefined;\n        if (pointDataAtTime === undefined) {\n            // the indexes will be sync later\n            pointDataAtTime = createEmptyTimePointData(time);\n            this._private__pointDataByTimePoint.set(this._private__horzScaleBehavior.key(time), pointDataAtTime);\n        }\n        const createPlotRow = getSeriesPlotRowCreator(series._internal_seriesType());\n        const dataToPlotRow = series._internal_customSeriesPlotValuesBuilder();\n        const customWhitespaceChecker = series._internal_customSeriesWhitespaceCheck();\n        const plotRow = createPlotRow(time, pointDataAtTime._internal_index, data, extendedData._internal_originalTime, dataToPlotRow, customWhitespaceChecker);\n        pointDataAtTime._internal_mapping.set(series, plotRow);\n        if (historicalUpdate) {\n            this._private__updateHistoricalSeriesRow(series, plotRow, pointDataAtTime._internal_index);\n        }\n        else {\n            this._private__updateLastSeriesRow(series, plotRow);\n        }\n        const info = {\n            _internal_lastBarUpdatedOrNewBarsAddedToTheRight: isSeriesPlotRow(plotRow),\n            _internal_historicalUpdate: historicalUpdate,\n        };\n        // if point already exist on the time scale - we don't need to make a full update and just make an incremental one\n        if (!affectsTimeScale) {\n            return this._private__getUpdateResponse(series, -1, info);\n        }\n        const newPoint = {\n            timeWeight: 0,\n            time: pointDataAtTime._internal_timePoint,\n            pointData: pointDataAtTime,\n            originalTime: timeScalePointTime(pointDataAtTime._internal_mapping),\n        };\n        const insertIndex = lowerBound(this._private__sortedTimePoints, this._private__horzScaleBehavior.key(newPoint.time), (a, b) => this._private__horzScaleBehavior.key(a.time) < b);\n        // yes, I know that this array is readonly and this change is intended to make it performative\n        // we marked _sortedTimePoints array as readonly to avoid modifying this array anywhere else\n        // but this place is exceptional case due performance reasons, sorry\n        this._private__sortedTimePoints.splice(insertIndex, 0, newPoint);\n        for (let index = insertIndex; index < this._private__sortedTimePoints.length; ++index) {\n            assignIndexToPointData(this._private__sortedTimePoints[index].pointData, index);\n        }\n        this._private__horzScaleBehavior.fillWeightsForPoints(this._private__sortedTimePoints, insertIndex);\n        return this._private__getUpdateResponse(series, insertIndex, info);\n    }\n    _private__updateLastSeriesRow(series, plotRow) {\n        let seriesData = this._private__seriesRowsBySeries.get(series);\n        if (seriesData === undefined) {\n            seriesData = [];\n            this._private__seriesRowsBySeries.set(series, seriesData);\n        }\n        const lastSeriesRow = seriesData.length !== 0 ? seriesData[seriesData.length - 1] : null;\n        if (lastSeriesRow === null || this._private__horzScaleBehavior.key(plotRow._internal_time) > this._private__horzScaleBehavior.key(lastSeriesRow._internal_time)) {\n            if (isSeriesPlotRow(plotRow)) {\n                seriesData.push(plotRow);\n            }\n        }\n        else {\n            if (isSeriesPlotRow(plotRow)) {\n                seriesData[seriesData.length - 1] = plotRow;\n            }\n            else {\n                seriesData.splice(-1, 1);\n            }\n        }\n        this._private__seriesLastTimePoint.set(series, plotRow._internal_time);\n    }\n    _private__updateHistoricalSeriesRow(series, plotRow, pointDataIndex) {\n        const seriesData = this._private__seriesRowsBySeries.get(series);\n        if (seriesData === undefined) {\n            return;\n        }\n        // binary search for actual index in array.\n        const index = lowerBound(seriesData, pointDataIndex, (row, currentIndex) => row._internal_index < currentIndex);\n        if (isSeriesPlotRow(plotRow)) {\n            seriesData[index] = plotRow;\n        }\n        else {\n            seriesData.splice(index, 1);\n        }\n    }\n    _private__setRowsToSeries(series, seriesRows) {\n        if (seriesRows.length !== 0) {\n            this._private__seriesRowsBySeries.set(series, seriesRows.filter(isSeriesPlotRow));\n            this._private__seriesLastTimePoint.set(series, seriesRows[seriesRows.length - 1]._internal_time);\n        }\n        else {\n            this._private__seriesRowsBySeries.delete(series);\n            this._private__seriesLastTimePoint.delete(series);\n        }\n    }\n    _private__cleanupPointsData() {\n        // let's treat all current points as \"potentially removed\"\n        // we could create an array with actually potentially removed points\n        // but most likely this array will be similar to _sortedTimePoints so let's avoid using additional memory\n        // note that we can use _sortedTimePoints here since a point might be removed only it was here previously\n        for (const point of this._private__sortedTimePoints) {\n            if (point.pointData._internal_mapping.size === 0) {\n                this._private__pointDataByTimePoint.delete(this._private__horzScaleBehavior.key(point.time));\n            }\n        }\n    }\n    /**\n     * Sets new time scale and make indexes valid for all series\n     *\n     * @returns The index of the first changed point or `-1` if there is no change.\n     */\n    _private__replaceTimeScalePoints(newTimePoints) {\n        let firstChangedPointIndex = -1;\n        // search the first different point and \"syncing\" time weight by the way\n        for (let index = 0; index < this._private__sortedTimePoints.length && index < newTimePoints.length; ++index) {\n            const oldPoint = this._private__sortedTimePoints[index];\n            const newPoint = newTimePoints[index];\n            if (this._private__horzScaleBehavior.key(oldPoint.time) !== this._private__horzScaleBehavior.key(newPoint.time)) {\n                firstChangedPointIndex = index;\n                break;\n            }\n            // re-assign point's time weight for points if time is the same (and all prior times was the same)\n            newPoint.timeWeight = oldPoint.timeWeight;\n            assignIndexToPointData(newPoint.pointData, index);\n        }\n        if (firstChangedPointIndex === -1 && this._private__sortedTimePoints.length !== newTimePoints.length) {\n            // the common part of the prev and the new points are the same\n            // so the first changed point is the next after the common part\n            firstChangedPointIndex = Math.min(this._private__sortedTimePoints.length, newTimePoints.length);\n        }\n        if (firstChangedPointIndex === -1) {\n            // if no time scale changed, then do nothing\n            return -1;\n        }\n        // if time scale points are changed that means that we need to make full update to all series (with clearing points)\n        // but first we need to synchronize indexes and re-fill time weights\n        for (let index = firstChangedPointIndex; index < newTimePoints.length; ++index) {\n            assignIndexToPointData(newTimePoints[index].pointData, index);\n        }\n        // re-fill time weights for point after the first changed one\n        this._private__horzScaleBehavior.fillWeightsForPoints(newTimePoints, firstChangedPointIndex);\n        this._private__sortedTimePoints = newTimePoints;\n        return firstChangedPointIndex;\n    }\n    _private__getBaseIndex() {\n        if (this._private__seriesRowsBySeries.size === 0) {\n            // if we have no data then 'reset' the base index to null\n            return null;\n        }\n        let baseIndex = 0;\n        this._private__seriesRowsBySeries.forEach((data) => {\n            if (data.length !== 0) {\n                baseIndex = Math.max(baseIndex, data[data.length - 1]._internal_index);\n            }\n        });\n        return baseIndex;\n    }\n    _private__getUpdateResponse(updatedSeries, firstChangedPointIndex, info) {\n        const dataUpdateResponse = {\n            _internal_series: new Map(),\n            _internal_timeScale: {\n                _internal_baseIndex: this._private__getBaseIndex(),\n            },\n        };\n        if (firstChangedPointIndex !== -1) {\n            // TODO: it's possible to make perf improvements by checking what series has data after firstChangedPointIndex\n            // but let's skip for now\n            this._private__seriesRowsBySeries.forEach((data, s) => {\n                dataUpdateResponse._internal_series.set(s, {\n                    _internal_data: data,\n                    _internal_info: s === updatedSeries ? info : undefined,\n                });\n            });\n            // if the series data was set to [] it will have already been removed from _seriesRowBySeries\n            // meaning the forEach above won't add the series to the data update response\n            // so we handle that case here\n            if (!this._private__seriesRowsBySeries.has(updatedSeries)) {\n                dataUpdateResponse._internal_series.set(updatedSeries, { _internal_data: [], _internal_info: info });\n            }\n            dataUpdateResponse._internal_timeScale._internal_points = this._private__sortedTimePoints;\n            dataUpdateResponse._internal_timeScale._internal_firstChangedPointIndex = firstChangedPointIndex;\n        }\n        else {\n            const seriesData = this._private__seriesRowsBySeries.get(updatedSeries);\n            // if no seriesData found that means that we just removed the series\n            dataUpdateResponse._internal_series.set(updatedSeries, { _internal_data: seriesData || [], _internal_info: info });\n        }\n        return dataUpdateResponse;\n    }\n}\nfunction assignIndexToPointData(pointData, index) {\n    // first, nevertheless update index of point data (\"make it valid\")\n    pointData._internal_index = index;\n    // and then we need to sync indexes for all series\n    pointData._internal_mapping.forEach((seriesRow) => {\n        seriesRow._internal_index = index;\n    });\n}\n\nfunction lowerBoundItemsCompare(item, time) {\n    return item._internal_time < time;\n}\nfunction upperBoundItemsCompare(item, time) {\n    return time < item._internal_time;\n}\nfunction visibleTimedValues(items, range, extendedRange) {\n    const firstBar = range._internal_left();\n    const lastBar = range._internal_right();\n    const from = lowerBound(items, firstBar, lowerBoundItemsCompare);\n    const to = upperBound(items, lastBar, upperBoundItemsCompare);\n    if (!extendedRange) {\n        return { from, to };\n    }\n    let extendedFrom = from;\n    let extendedTo = to;\n    if (from > 0 && from < items.length && items[from]._internal_time >= firstBar) {\n        extendedFrom = from - 1;\n    }\n    if (to > 0 && to < items.length && items[to - 1]._internal_time <= lastBar) {\n        extendedTo = to + 1;\n    }\n    return { from: extendedFrom, to: extendedTo };\n}\n\nclass SeriesPaneViewBase {\n    constructor(series, model, extendedVisibleRange) {\n        this._internal__invalidated = true;\n        this._internal__dataInvalidated = true;\n        this._internal__optionsInvalidated = true;\n        this._internal__items = [];\n        this._internal__itemsVisibleRange = null;\n        this._internal__series = series;\n        this._internal__model = model;\n        this._private__extendedVisibleRange = extendedVisibleRange;\n    }\n    _internal_update(updateType) {\n        this._internal__invalidated = true;\n        if (updateType === 'data') {\n            this._internal__dataInvalidated = true;\n        }\n        if (updateType === 'options') {\n            this._internal__optionsInvalidated = true;\n        }\n    }\n    _internal_renderer() {\n        if (!this._internal__series._internal_visible()) {\n            return null;\n        }\n        this._private__makeValid();\n        return this._internal__itemsVisibleRange === null ? null : this._internal__renderer;\n    }\n    _internal__updateOptions() {\n        this._internal__items = this._internal__items.map((item) => ({\n            ...item,\n            ...this._internal__series._internal_barColorer()._internal_barStyle(item._internal_time),\n        }));\n    }\n    _internal__clearVisibleRange() {\n        this._internal__itemsVisibleRange = null;\n    }\n    _private__makeValid() {\n        if (this._internal__dataInvalidated) {\n            this._internal__fillRawPoints();\n            this._internal__dataInvalidated = false;\n        }\n        if (this._internal__optionsInvalidated) {\n            this._internal__updateOptions();\n            this._internal__optionsInvalidated = false;\n        }\n        if (this._internal__invalidated) {\n            this._private__makeValidImpl();\n            this._internal__invalidated = false;\n        }\n    }\n    _private__makeValidImpl() {\n        const priceScale = this._internal__series._internal_priceScale();\n        const timeScale = this._internal__model._internal_timeScale();\n        this._internal__clearVisibleRange();\n        if (timeScale._internal_isEmpty() || priceScale._internal_isEmpty()) {\n            return;\n        }\n        const visibleBars = timeScale._internal_visibleStrictRange();\n        if (visibleBars === null) {\n            return;\n        }\n        if (this._internal__series._internal_bars()._internal_size() === 0) {\n            return;\n        }\n        const firstValue = this._internal__series._internal_firstValue();\n        if (firstValue === null) {\n            return;\n        }\n        this._internal__itemsVisibleRange = visibleTimedValues(this._internal__items, visibleBars, this._private__extendedVisibleRange);\n        this._internal__convertToCoordinates(priceScale, timeScale, firstValue._internal_value);\n        this._internal__prepareRendererData();\n    }\n}\n\nclass CustomSeriesPaneRendererWrapper {\n    constructor(sourceRenderer, priceScale) {\n        this._private__sourceRenderer = sourceRenderer;\n        this._private__priceScale = priceScale;\n    }\n    _internal_draw(target, isHovered, hitTestData) {\n        this._private__sourceRenderer.draw(target, this._private__priceScale, isHovered, hitTestData);\n    }\n}\nclass SeriesCustomPaneView extends SeriesPaneViewBase {\n    constructor(series, model, paneView) {\n        super(series, model, false);\n        this._private__paneView = paneView;\n        this._internal__renderer = new CustomSeriesPaneRendererWrapper(this._private__paneView.renderer(), (price) => {\n            const firstValue = series._internal_firstValue();\n            if (firstValue === null) {\n                return null;\n            }\n            return series._internal_priceScale()._internal_priceToCoordinate(price, firstValue._internal_value);\n        });\n    }\n    _internal_priceValueBuilder(plotRow) {\n        return this._private__paneView.priceValueBuilder(plotRow);\n    }\n    _internal_isWhitespace(data) {\n        return this._private__paneView.isWhitespace(data);\n    }\n    _internal__fillRawPoints() {\n        const colorer = this._internal__series._internal_barColorer();\n        this._internal__items = this._internal__series._internal_bars()._internal_rows()\n            .map((row) => {\n            return {\n                _internal_time: row._internal_index,\n                _internal_x: NaN,\n                ...colorer._internal_barStyle(row._internal_index),\n                _internal_originalData: row._internal_data,\n            };\n        });\n    }\n    _internal__convertToCoordinates(priceScale, timeScale) {\n        timeScale._internal_indexesToCoordinates(this._internal__items, undefinedIfNull(this._internal__itemsVisibleRange));\n    }\n    _internal__prepareRendererData() {\n        this._private__paneView.update({\n            bars: this._internal__items.map(unwrapItemData),\n            barSpacing: this._internal__model._internal_timeScale()._internal_barSpacing(),\n            visibleRange: this._internal__itemsVisibleRange,\n        }, this._internal__series._internal_options());\n    }\n}\nfunction unwrapItemData(item) {\n    return {\n        x: item._internal_x,\n        time: item._internal_time,\n        originalData: item._internal_originalData,\n        barColor: item._internal_barColor,\n    };\n}\n\nconst customStyleDefaults = {\n    color: '#2196f3',\n};\nconst createPaneView$6 = (series, model, customPaneView) => {\n    const paneView = ensure(customPaneView);\n    return new SeriesCustomPaneView(series, model, paneView);\n};\nconst createCustomSeriesDefinition = (paneView) => {\n    const definition = {\n        type: 'Custom',\n        isBuiltIn: false,\n        defaultOptions: { ...customStyleDefaults, ...paneView.defaultOptions() },\n        /**\n         * @internal\n         */\n        _internal_createPaneView: createPaneView$6,\n        _internal_customPaneView: paneView,\n    };\n    return definition;\n};\n\nconst isSeriesDefinition = (value) => {\n    return value._internal_createPaneView !== undefined;\n};\n\nfunction singleValueData(plotRow) {\n    const data = {\n        value: plotRow._internal_value[3 /* PlotRowValueIndex.Close */],\n        time: plotRow._internal_originalTime,\n    };\n    if (plotRow._internal_customValues !== undefined) {\n        data.customValues = plotRow._internal_customValues;\n    }\n    return data;\n}\nfunction lineData(plotRow) {\n    const result = singleValueData(plotRow);\n    if (plotRow._internal_color !== undefined) {\n        result.color = plotRow._internal_color;\n    }\n    return result;\n}\nfunction areaData(plotRow) {\n    const result = singleValueData(plotRow);\n    if (plotRow._internal_lineColor !== undefined) {\n        result.lineColor = plotRow._internal_lineColor;\n    }\n    if (plotRow._internal_topColor !== undefined) {\n        result.topColor = plotRow._internal_topColor;\n    }\n    if (plotRow._internal_bottomColor !== undefined) {\n        result.bottomColor = plotRow._internal_bottomColor;\n    }\n    return result;\n}\nfunction baselineData(plotRow) {\n    const result = singleValueData(plotRow);\n    if (plotRow._internal_topLineColor !== undefined) {\n        result.topLineColor = plotRow._internal_topLineColor;\n    }\n    if (plotRow._internal_bottomLineColor !== undefined) {\n        result.bottomLineColor = plotRow._internal_bottomLineColor;\n    }\n    if (plotRow._internal_topFillColor1 !== undefined) {\n        result.topFillColor1 = plotRow._internal_topFillColor1;\n    }\n    if (plotRow._internal_topFillColor2 !== undefined) {\n        result.topFillColor2 = plotRow._internal_topFillColor2;\n    }\n    if (plotRow._internal_bottomFillColor1 !== undefined) {\n        result.bottomFillColor1 = plotRow._internal_bottomFillColor1;\n    }\n    if (plotRow._internal_bottomFillColor2 !== undefined) {\n        result.bottomFillColor2 = plotRow._internal_bottomFillColor2;\n    }\n    return result;\n}\nfunction ohlcData(plotRow) {\n    const data = {\n        open: plotRow._internal_value[0 /* PlotRowValueIndex.Open */],\n        high: plotRow._internal_value[1 /* PlotRowValueIndex.High */],\n        low: plotRow._internal_value[2 /* PlotRowValueIndex.Low */],\n        close: plotRow._internal_value[3 /* PlotRowValueIndex.Close */],\n        time: plotRow._internal_originalTime,\n    };\n    if (plotRow._internal_customValues !== undefined) {\n        data.customValues = plotRow._internal_customValues;\n    }\n    return data;\n}\nfunction barData(plotRow) {\n    const result = ohlcData(plotRow);\n    if (plotRow._internal_color !== undefined) {\n        result.color = plotRow._internal_color;\n    }\n    return result;\n}\nfunction candlestickData(plotRow) {\n    const result = ohlcData(plotRow);\n    const { _internal_color: color, _internal_borderColor: borderColor, _internal_wickColor: wickColor } = plotRow;\n    if (color !== undefined) {\n        result.color = color;\n    }\n    if (borderColor !== undefined) {\n        result.borderColor = borderColor;\n    }\n    if (wickColor !== undefined) {\n        result.wickColor = wickColor;\n    }\n    return result;\n}\nfunction getSeriesDataCreator(seriesType) {\n    const seriesPlotRowToDataMap = {\n        Area: (areaData),\n        Line: (lineData),\n        Baseline: (baselineData),\n        Histogram: (lineData),\n        Bar: (barData),\n        Candlestick: (candlestickData),\n        Custom: (customData),\n    };\n    return seriesPlotRowToDataMap[seriesType];\n}\nfunction customData(plotRow) {\n    const time = plotRow._internal_originalTime;\n    return {\n        ...plotRow._internal_data,\n        time,\n    };\n}\n\nconst crosshairOptionsDefaults = {\n    vertLine: {\n        color: '#9598A1',\n        width: 1,\n        style: 3 /* LineStyle.LargeDashed */,\n        visible: true,\n        labelVisible: true,\n        labelBackgroundColor: '#131722',\n    },\n    horzLine: {\n        color: '#9598A1',\n        width: 1,\n        style: 3 /* LineStyle.LargeDashed */,\n        visible: true,\n        labelVisible: true,\n        labelBackgroundColor: '#131722',\n    },\n    mode: 1 /* CrosshairMode.Magnet */,\n};\n\nconst gridOptionsDefaults = {\n    vertLines: {\n        color: '#D6DCDE',\n        style: 0 /* LineStyle.Solid */,\n        visible: true,\n    },\n    horzLines: {\n        color: '#D6DCDE',\n        style: 0 /* LineStyle.Solid */,\n        visible: true,\n    },\n};\n\nconst layoutOptionsDefaults = {\n    background: {\n        type: \"solid\" /* ColorType.Solid */,\n        color: '#FFFFFF',\n    },\n    textColor: '#191919',\n    fontSize: 12,\n    fontFamily: defaultFontFamily,\n    panes: {\n        enableResize: true,\n        separatorColor: '#E0E3EB',\n        separatorHoverColor: 'rgba(178, 181, 189, 0.2)',\n    },\n    attributionLogo: true,\n    colorSpace: 'srgb',\n    colorParsers: [],\n};\n\nconst priceScaleOptionsDefaults = {\n    autoScale: true,\n    mode: 0 /* PriceScaleMode.Normal */,\n    invertScale: false,\n    alignLabels: true,\n    borderVisible: true,\n    borderColor: '#2B2B43',\n    entireTextOnly: false,\n    visible: false,\n    ticksVisible: false,\n    scaleMargins: {\n        bottom: 0.1,\n        top: 0.2,\n    },\n    minimumWidth: 0,\n    ensureEdgeTickMarksVisible: false,\n};\n\nconst timeScaleOptionsDefaults = {\n    rightOffset: 0,\n    barSpacing: 6,\n    minBarSpacing: 0.5,\n    maxBarSpacing: 0,\n    fixLeftEdge: false,\n    fixRightEdge: false,\n    lockVisibleTimeRangeOnResize: false,\n    rightBarStaysOnScroll: false,\n    borderVisible: true,\n    borderColor: '#2B2B43',\n    visible: true,\n    timeVisible: false,\n    secondsVisible: true,\n    shiftVisibleRangeOnNewBar: true,\n    allowShiftVisibleRangeOnWhitespaceReplacement: false,\n    ticksVisible: false,\n    uniformDistribution: false,\n    minimumHeight: 0,\n    allowBoldLabels: true,\n    ignoreWhitespaceIndices: false,\n};\n\nfunction chartOptionsDefaults() {\n    return {\n        addDefaultPane: true,\n        width: 0,\n        height: 0,\n        autoSize: false,\n        layout: layoutOptionsDefaults,\n        crosshair: crosshairOptionsDefaults,\n        grid: gridOptionsDefaults,\n        overlayPriceScales: {\n            ...priceScaleOptionsDefaults,\n        },\n        leftPriceScale: {\n            ...priceScaleOptionsDefaults,\n            visible: false,\n        },\n        rightPriceScale: {\n            ...priceScaleOptionsDefaults,\n            visible: true,\n        },\n        timeScale: timeScaleOptionsDefaults,\n        localization: {\n            locale: isRunningOnClientSide ? navigator.language : '',\n            dateFormat: 'dd MMM \\'yy',\n        },\n        handleScroll: {\n            mouseWheel: true,\n            pressedMouseMove: true,\n            horzTouchDrag: true,\n            vertTouchDrag: true,\n        },\n        handleScale: {\n            axisPressedMouseMove: {\n                time: true,\n                price: true,\n            },\n            axisDoubleClickReset: {\n                time: true,\n                price: true,\n            },\n            mouseWheel: true,\n            pinch: true,\n        },\n        kineticScroll: {\n            mouse: false,\n            touch: true,\n        },\n        trackingMode: {\n            exitMode: 1 /* TrackingModeExitMode.OnNextTap */,\n        },\n    };\n}\n\nclass PriceScaleApi {\n    constructor(chartWidget, priceScaleId, paneIndex) {\n        this._private__chartWidget = chartWidget;\n        this._private__priceScaleId = priceScaleId;\n        this._private__paneIndex = paneIndex ?? 0;\n    }\n    applyOptions(options) {\n        this._private__chartWidget._internal_model()._internal_applyPriceScaleOptions(this._private__priceScaleId, options, this._private__paneIndex);\n    }\n    options() {\n        return this._private__priceScale()._internal_options();\n    }\n    width() {\n        if (!isDefaultPriceScale(this._private__priceScaleId)) {\n            return 0;\n        }\n        return this._private__chartWidget._internal_getPriceAxisWidth(this._private__priceScaleId);\n    }\n    setVisibleRange(range) {\n        this.setAutoScale(false);\n        this._private__priceScale()._internal_setCustomPriceRange(new PriceRangeImpl(range.from, range.to));\n    }\n    getVisibleRange() {\n        const range = this._private__priceScale()._internal_priceRange();\n        return range === null ? null : {\n            from: range._internal_minValue(),\n            to: range._internal_maxValue(),\n        };\n    }\n    setAutoScale(on) {\n        this.applyOptions({ autoScale: on });\n    }\n    _private__priceScale() {\n        return ensureNotNull(this._private__chartWidget._internal_model()._internal_findPriceScale(this._private__priceScaleId, this._private__paneIndex))._internal_priceScale;\n    }\n}\n\nclass PaneApi {\n    constructor(chartWidget, seriesApiGetter, pane, chartApi) {\n        this._private__chartWidget = chartWidget;\n        this._private__pane = pane;\n        this._private__seriesApiGetter = seriesApiGetter;\n        this._internal__chartApi = chartApi;\n    }\n    getHeight() {\n        return this._private__pane._internal_height();\n    }\n    setHeight(height) {\n        const chartModel = this._private__chartWidget._internal_model();\n        const paneIndex = chartModel._internal_getPaneIndex(this._private__pane);\n        chartModel._internal_changePanesHeight(paneIndex, height);\n    }\n    getStretchFactor() {\n        return this._private__pane._internal_stretchFactor();\n    }\n    setStretchFactor(stretchFactor) {\n        this._private__pane._internal_setStretchFactor(stretchFactor);\n        this._private__chartWidget._internal_model()._internal_fullUpdate();\n    }\n    paneIndex() {\n        return this._private__chartWidget._internal_model()._internal_getPaneIndex(this._private__pane);\n    }\n    moveTo(paneIndex) {\n        const currentIndex = this.paneIndex();\n        if (currentIndex === paneIndex) {\n            return;\n        }\n        assert(paneIndex >= 0 && paneIndex < this._private__chartWidget._internal_paneWidgets().length, 'Invalid pane index');\n        this._private__chartWidget._internal_model()._internal_movePane(currentIndex, paneIndex);\n    }\n    getSeries() {\n        return this._private__pane._internal_series().map((source) => this._private__seriesApiGetter(source)) ?? [];\n    }\n    getHTMLElement() {\n        const widgets = this._private__chartWidget._internal_paneWidgets();\n        if (!widgets || widgets.length === 0 || !widgets[this.paneIndex()]) {\n            return null;\n        }\n        return widgets[this.paneIndex()]._internal_getElement();\n    }\n    attachPrimitive(primitive) {\n        this._private__pane._internal_attachPrimitive(primitive);\n        if (primitive.attached) {\n            primitive.attached({\n                chart: this._internal__chartApi,\n                requestUpdate: () => this._private__pane._internal_model()._internal_fullUpdate(),\n            });\n        }\n    }\n    detachPrimitive(primitive) {\n        this._private__pane._internal_detachPrimitive(primitive);\n    }\n    priceScale(priceScaleId) {\n        const priceScale = this._private__pane._internal_priceScaleById(priceScaleId);\n        if (priceScale === null) {\n            throw new Error(`Cannot find price scale with id: ${priceScaleId}`);\n        }\n        return new PriceScaleApi(this._private__chartWidget, priceScaleId, this.paneIndex());\n    }\n    setPreserveEmptyPane(preserve) {\n        this._private__pane._internal_setPreserveEmptyPane(preserve);\n    }\n    preserveEmptyPane() {\n        return this._private__pane._internal_preserveEmptyPane();\n    }\n    addCustomSeries(customPaneView, options = {}, paneIndex = 0) {\n        return this._internal__chartApi.addCustomSeries(customPaneView, options, paneIndex);\n    }\n    addSeries(definition, options = {}) {\n        return this._internal__chartApi.addSeries(definition, options, this.paneIndex());\n    }\n}\n\n/// <reference types=\"_build-time-constants\" />\nfunction checkPriceLineOptions(options) {\n    assert(typeof options.price === 'number', `the type of 'price' price line's property must be a number, got '${typeof options.price}'`);\n}\nfunction checkItemsAreOrdered(data, bh, allowDuplicates = false) {\n    if (data.length === 0) {\n        return;\n    }\n    let prevTime = bh.key(data[0].time);\n    for (let i = 1; i < data.length; ++i) {\n        const currentTime = bh.key(data[i].time);\n        const checkResult = allowDuplicates ? prevTime <= currentTime : prevTime < currentTime;\n        assert(checkResult, `data must be asc ordered by time, index=${i}, time=${currentTime}, prev time=${prevTime}`);\n        prevTime = currentTime;\n    }\n}\nfunction checkSeriesValuesType(type, data) {\n    data.forEach(getChecker(type));\n}\nfunction getChecker(type) {\n    switch (type) {\n        case 'Bar':\n        case 'Candlestick':\n            return checkBarItem.bind(null, type);\n        case 'Area':\n        case 'Baseline':\n        case 'Line':\n        case 'Histogram':\n            return checkLineItem.bind(null, type);\n        case 'Custom':\n            return checkCustomItem.bind(null);\n    }\n}\nfunction checkBarItem(type, barItem) {\n    if (!isFulfilledData(barItem)) {\n        return;\n    }\n    ['open', 'high', 'low', 'close'].forEach((key) => {\n        assert(typeof barItem[key] === 'number', `${type} series item data value of ${key} must be a number, got=${typeof barItem[key]}, value=${barItem[key]}`);\n        assert(isSafeValue(barItem[key]), `${type} series item data value of ${key} must be between ${MIN_SAFE_VALUE.toPrecision(16)} and ${MAX_SAFE_VALUE.toPrecision(16)}, got=${typeof barItem[key]}, value=${barItem[key]}`);\n    });\n}\nfunction checkLineItem(type, lineItem) {\n    if (!isFulfilledData(lineItem)) {\n        return;\n    }\n    assert(typeof lineItem.value === 'number', `${type} series item data value must be a number, got=${typeof lineItem.value}, value=${lineItem.value}`);\n    assert(isSafeValue(lineItem.value), `${type} series item data value must be between ${MIN_SAFE_VALUE.toPrecision(16)} and ${MAX_SAFE_VALUE.toPrecision(16)}, got=${typeof lineItem.value}, value=${lineItem.value}`);\n}\nfunction checkCustomItem(\n// type: 'Custom',\n// customItem: SeriesDataItemTypeMap[typeof type]\n) {\n    // Nothing to check yet...\n    return;\n}\nconst MIN_SAFE_VALUE = Number.MIN_SAFE_INTEGER / 100;\nconst MAX_SAFE_VALUE = Number.MAX_SAFE_INTEGER / 100;\nfunction isSafeValue(value) {\n    return value >= MIN_SAFE_VALUE && value <= MAX_SAFE_VALUE;\n}\n\nconst priceLineOptionsDefaults = {\n    color: '#FF0000',\n    price: 0,\n    lineStyle: 2 /* LineStyle.Dashed */,\n    lineWidth: 1,\n    lineVisible: true,\n    axisLabelVisible: true,\n    title: '',\n    axisLabelColor: '',\n    axisLabelTextColor: '',\n};\n\nclass PriceLine {\n    constructor(priceLine) {\n        this._private__priceLine = priceLine;\n    }\n    applyOptions(options) {\n        this._private__priceLine._internal_applyOptions(options);\n    }\n    options() {\n        return this._private__priceLine._internal_options();\n    }\n    _internal_priceLine() {\n        return this._private__priceLine;\n    }\n}\n\nclass SeriesApi {\n    constructor(series, dataUpdatesConsumer, priceScaleApiProvider, chartApi, horzScaleBehavior, paneApiGetter) {\n        this._private__dataChangedDelegate = new Delegate();\n        this._internal__series = series;\n        this._internal__dataUpdatesConsumer = dataUpdatesConsumer;\n        this._private__priceScaleApiProvider = priceScaleApiProvider;\n        this._private__horzScaleBehavior = horzScaleBehavior;\n        this._internal__chartApi = chartApi;\n        this._private__paneApiGetter = paneApiGetter;\n    }\n    _internal_destroy() {\n        this._private__dataChangedDelegate._internal_destroy();\n    }\n    priceFormatter() {\n        return this._internal__series._internal_formatter();\n    }\n    priceToCoordinate(price) {\n        const firstValue = this._internal__series._internal_firstValue();\n        if (firstValue === null) {\n            return null;\n        }\n        return this._internal__series._internal_priceScale()._internal_priceToCoordinate(price, firstValue._internal_value);\n    }\n    coordinateToPrice(coordinate) {\n        const firstValue = this._internal__series._internal_firstValue();\n        if (firstValue === null) {\n            return null;\n        }\n        return this._internal__series._internal_priceScale()._internal_coordinateToPrice(coordinate, firstValue._internal_value);\n    }\n    barsInLogicalRange(range) {\n        if (range === null) {\n            return null;\n        }\n        // we use TimeScaleVisibleRange here to convert LogicalRange to strict range properly\n        const correctedRange = new TimeScaleVisibleRange(new RangeImpl(range.from, range.to))._internal_strictRange();\n        const bars = this._internal__series._internal_bars();\n        if (bars._internal_isEmpty()) {\n            return null;\n        }\n        const dataFirstBarInRange = bars._internal_search(correctedRange._internal_left(), 1 /* MismatchDirection.NearestRight */);\n        const dataLastBarInRange = bars._internal_search(correctedRange._internal_right(), -1 /* MismatchDirection.NearestLeft */);\n        const dataFirstIndex = ensureNotNull(bars._internal_firstIndex());\n        const dataLastIndex = ensureNotNull(bars._internal_lastIndex());\n        // this means that we request data in the data gap\n        // e.g. let's say we have series with data [0..10, 30..60]\n        // and we request bars info in range [15, 25]\n        // thus, dataFirstBarInRange will be with index 30 and dataLastBarInRange with 10\n        if (dataFirstBarInRange !== null && dataLastBarInRange !== null && dataFirstBarInRange._internal_index > dataLastBarInRange._internal_index) {\n            return {\n                barsBefore: range.from - dataFirstIndex,\n                barsAfter: dataLastIndex - range.to,\n            };\n        }\n        const barsBefore = (dataFirstBarInRange === null || dataFirstBarInRange._internal_index === dataFirstIndex)\n            ? range.from - dataFirstIndex\n            : dataFirstBarInRange._internal_index - dataFirstIndex;\n        const barsAfter = (dataLastBarInRange === null || dataLastBarInRange._internal_index === dataLastIndex)\n            ? dataLastIndex - range.to\n            : dataLastIndex - dataLastBarInRange._internal_index;\n        const result = { barsBefore, barsAfter };\n        // actually they can't exist separately\n        if (dataFirstBarInRange !== null && dataLastBarInRange !== null) {\n            result.from = dataFirstBarInRange._internal_originalTime;\n            result.to = dataLastBarInRange._internal_originalTime;\n        }\n        return result;\n    }\n    setData(data) {\n        checkItemsAreOrdered(data, this._private__horzScaleBehavior);\n        checkSeriesValuesType(this._internal__series._internal_seriesType(), data);\n        this._internal__dataUpdatesConsumer._internal_applyNewData(this._internal__series, data);\n        this._private__onDataChanged('full');\n    }\n    update(bar, historicalUpdate = false) {\n        checkSeriesValuesType(this._internal__series._internal_seriesType(), [bar]);\n        this._internal__dataUpdatesConsumer._internal_updateData(this._internal__series, bar, historicalUpdate);\n        this._private__onDataChanged('update');\n    }\n    dataByIndex(logicalIndex, mismatchDirection) {\n        const data = this._internal__series._internal_bars()._internal_search(logicalIndex, mismatchDirection);\n        if (data === null) {\n            // actually it can be a whitespace\n            return null;\n        }\n        const creator = getSeriesDataCreator(this.seriesType());\n        return creator(data);\n    }\n    data() {\n        const seriesCreator = getSeriesDataCreator(this.seriesType());\n        const rows = this._internal__series._internal_bars()._internal_rows();\n        return rows.map((row) => seriesCreator(row));\n    }\n    subscribeDataChanged(handler) {\n        this._private__dataChangedDelegate._internal_subscribe(handler);\n    }\n    unsubscribeDataChanged(handler) {\n        this._private__dataChangedDelegate._internal_unsubscribe(handler);\n    }\n    applyOptions(options) {\n        this._internal__series._internal_applyOptions(options);\n    }\n    options() {\n        return clone(this._internal__series._internal_options());\n    }\n    priceScale() {\n        return this._private__priceScaleApiProvider.priceScale(this._internal__series._internal_priceScale()._internal_id(), this.getPane().paneIndex());\n    }\n    createPriceLine(options) {\n        checkPriceLineOptions(options);\n        const strictOptions = merge(clone(priceLineOptionsDefaults), options);\n        const priceLine = this._internal__series._internal_createPriceLine(strictOptions);\n        return new PriceLine(priceLine);\n    }\n    removePriceLine(line) {\n        this._internal__series._internal_removePriceLine(line._internal_priceLine());\n    }\n    priceLines() {\n        return this._internal__series._internal_priceLines().map((priceLine) => new PriceLine(priceLine));\n    }\n    seriesType() {\n        return this._internal__series._internal_seriesType();\n    }\n    attachPrimitive(primitive) {\n        // at this point we cast the generic to unknown because we\n        // don't want the model to know the types of the API (◑_◑)\n        this._internal__series._internal_attachPrimitive(primitive);\n        if (primitive.attached) {\n            primitive.attached({\n                chart: this._internal__chartApi,\n                series: this,\n                requestUpdate: () => this._internal__series._internal_model()._internal_fullUpdate(),\n                horzScaleBehavior: this._private__horzScaleBehavior,\n            });\n        }\n    }\n    detachPrimitive(primitive) {\n        this._internal__series._internal_detachPrimitive(primitive);\n        if (primitive.detached) {\n            primitive.detached();\n        }\n        this._internal__series._internal_model()._internal_fullUpdate();\n    }\n    getPane() {\n        const series = this._internal__series;\n        const pane = ensureNotNull(this._internal__series._internal_model()._internal_paneForSource(series));\n        return this._private__paneApiGetter(pane);\n    }\n    moveToPane(paneIndex) {\n        this._internal__series._internal_model()._internal_moveSeriesToPane(this._internal__series, paneIndex);\n    }\n    seriesOrder() {\n        const pane = this._internal__series._internal_model()._internal_paneForSource(this._internal__series);\n        if (pane === null) {\n            return -1;\n        }\n        return pane._internal_series().indexOf(this._internal__series);\n    }\n    setSeriesOrder(order) {\n        const pane = this._internal__series._internal_model()._internal_paneForSource(this._internal__series);\n        if (pane === null) {\n            return;\n        }\n        pane._internal_setSeriesOrder(this._internal__series, order);\n    }\n    _private__onDataChanged(scope) {\n        if (this._private__dataChangedDelegate._internal_hasListeners()) {\n            this._private__dataChangedDelegate._internal_fire(scope);\n        }\n    }\n}\n\nclass TimeScaleApi {\n    constructor(model, timeAxisWidget, horzScaleBehavior) {\n        this._private__timeRangeChanged = new Delegate();\n        this._private__logicalRangeChanged = new Delegate();\n        this._private__sizeChanged = new Delegate();\n        this._private__model = model;\n        this._private__timeScale = model._internal_timeScale();\n        this._private__timeAxisWidget = timeAxisWidget;\n        this._private__timeScale._internal_visibleBarsChanged()._internal_subscribe(this._private__onVisibleBarsChanged.bind(this));\n        this._private__timeScale._internal_logicalRangeChanged()._internal_subscribe(this._private__onVisibleLogicalRangeChanged.bind(this));\n        this._private__timeAxisWidget._internal_sizeChanged()._internal_subscribe(this._private__onSizeChanged.bind(this));\n        this._private__horzScaleBehavior = horzScaleBehavior;\n    }\n    _internal_destroy() {\n        this._private__timeScale._internal_visibleBarsChanged()._internal_unsubscribeAll(this);\n        this._private__timeScale._internal_logicalRangeChanged()._internal_unsubscribeAll(this);\n        this._private__timeAxisWidget._internal_sizeChanged()._internal_unsubscribeAll(this);\n        this._private__timeRangeChanged._internal_destroy();\n        this._private__logicalRangeChanged._internal_destroy();\n        this._private__sizeChanged._internal_destroy();\n    }\n    scrollPosition() {\n        return this._private__timeScale._internal_rightOffset();\n    }\n    scrollToPosition(position, animated) {\n        if (!animated) {\n            this._private__model._internal_setRightOffset(position);\n            return;\n        }\n        this._private__timeScale._internal_scrollToOffsetAnimated(position, 1000 /* Constants.AnimationDurationMs */);\n    }\n    scrollToRealTime() {\n        this._private__timeScale._internal_scrollToRealTime();\n    }\n    getVisibleRange() {\n        const timeRange = this._private__timeScale._internal_visibleTimeRange();\n        if (timeRange === null) {\n            return null;\n        }\n        return {\n            from: timeRange.from.originalTime,\n            to: timeRange.to.originalTime,\n        };\n    }\n    setVisibleRange(range) {\n        const convertedRange = {\n            from: this._private__horzScaleBehavior.convertHorzItemToInternal(range.from),\n            to: this._private__horzScaleBehavior.convertHorzItemToInternal(range.to),\n        };\n        const logicalRange = this._private__timeScale._internal_logicalRangeForTimeRange(convertedRange);\n        this._private__model._internal_setTargetLogicalRange(logicalRange);\n    }\n    getVisibleLogicalRange() {\n        const logicalRange = this._private__timeScale._internal_visibleLogicalRange();\n        if (logicalRange === null) {\n            return null;\n        }\n        return {\n            from: logicalRange._internal_left(),\n            to: logicalRange._internal_right(),\n        };\n    }\n    setVisibleLogicalRange(range) {\n        assert(range.from <= range.to, 'The from index cannot be after the to index.');\n        this._private__model._internal_setTargetLogicalRange(range);\n    }\n    resetTimeScale() {\n        this._private__model._internal_resetTimeScale();\n    }\n    fitContent() {\n        this._private__model._internal_fitContent();\n    }\n    logicalToCoordinate(logical) {\n        const timeScale = this._private__model._internal_timeScale();\n        if (timeScale._internal_isEmpty()) {\n            return null;\n        }\n        else {\n            return timeScale._internal_indexToCoordinate(logical);\n        }\n    }\n    coordinateToLogical(x) {\n        if (this._private__timeScale._internal_isEmpty()) {\n            return null;\n        }\n        else {\n            return this._private__timeScale._internal_coordinateToIndex(x);\n        }\n    }\n    timeToIndex(time, findNearest) {\n        const timePoint = this._private__horzScaleBehavior.convertHorzItemToInternal(time);\n        return this._private__timeScale._internal_timeToIndex(timePoint, findNearest);\n    }\n    timeToCoordinate(time) {\n        const timePointIndex = this.timeToIndex(time, false);\n        if (timePointIndex === null) {\n            return null;\n        }\n        return this._private__timeScale._internal_indexToCoordinate(timePointIndex);\n    }\n    coordinateToTime(x) {\n        const timeScale = this._private__model._internal_timeScale();\n        const timePointIndex = timeScale._internal_coordinateToIndex(x);\n        const timePoint = timeScale._internal_indexToTimeScalePoint(timePointIndex);\n        if (timePoint === null) {\n            return null;\n        }\n        return timePoint.originalTime;\n    }\n    width() {\n        return this._private__timeAxisWidget._internal_getSize().width;\n    }\n    height() {\n        return this._private__timeAxisWidget._internal_getSize().height;\n    }\n    subscribeVisibleTimeRangeChange(handler) {\n        this._private__timeRangeChanged._internal_subscribe(handler);\n    }\n    unsubscribeVisibleTimeRangeChange(handler) {\n        this._private__timeRangeChanged._internal_unsubscribe(handler);\n    }\n    subscribeVisibleLogicalRangeChange(handler) {\n        this._private__logicalRangeChanged._internal_subscribe(handler);\n    }\n    unsubscribeVisibleLogicalRangeChange(handler) {\n        this._private__logicalRangeChanged._internal_unsubscribe(handler);\n    }\n    subscribeSizeChange(handler) {\n        this._private__sizeChanged._internal_subscribe(handler);\n    }\n    unsubscribeSizeChange(handler) {\n        this._private__sizeChanged._internal_unsubscribe(handler);\n    }\n    applyOptions(options) {\n        this._private__timeScale._internal_applyOptions(options);\n    }\n    options() {\n        return {\n            ...clone(this._private__timeScale._internal_options()),\n            barSpacing: this._private__timeScale._internal_barSpacing(),\n        };\n    }\n    _private__onVisibleBarsChanged() {\n        if (this._private__timeRangeChanged._internal_hasListeners()) {\n            this._private__timeRangeChanged._internal_fire(this.getVisibleRange());\n        }\n    }\n    _private__onVisibleLogicalRangeChanged() {\n        if (this._private__logicalRangeChanged._internal_hasListeners()) {\n            this._private__logicalRangeChanged._internal_fire(this.getVisibleLogicalRange());\n        }\n    }\n    _private__onSizeChanged(size) {\n        this._private__sizeChanged._internal_fire(size.width, size.height);\n    }\n}\n\n/// <reference types=\"_build-time-constants\" />\nfunction patchPriceFormat(priceFormat) {\n    if (priceFormat === undefined || priceFormat.type === 'custom') {\n        return;\n    }\n    const priceFormatBuiltIn = priceFormat;\n    if (priceFormatBuiltIn.minMove !== undefined && priceFormatBuiltIn.precision === undefined) {\n        priceFormatBuiltIn.precision = precisionByMinMove(priceFormatBuiltIn.minMove);\n    }\n}\nfunction migrateHandleScaleScrollOptions(options) {\n    if (isBoolean(options['handleScale'])) {\n        const handleScale = options['handleScale'];\n        options['handleScale'] = {\n            axisDoubleClickReset: {\n                time: handleScale,\n                price: handleScale,\n            },\n            axisPressedMouseMove: {\n                time: handleScale,\n                price: handleScale,\n            },\n            mouseWheel: handleScale,\n            pinch: handleScale,\n        };\n    }\n    else if (options['handleScale'] !== undefined) {\n        const { axisPressedMouseMove, axisDoubleClickReset } = options['handleScale'];\n        if (isBoolean(axisPressedMouseMove)) {\n            options['handleScale'].axisPressedMouseMove = {\n                time: axisPressedMouseMove,\n                price: axisPressedMouseMove,\n            };\n        }\n        if (isBoolean(axisDoubleClickReset)) {\n            options['handleScale'].axisDoubleClickReset = {\n                time: axisDoubleClickReset,\n                price: axisDoubleClickReset,\n            };\n        }\n    }\n    const handleScroll = options['handleScroll'];\n    if (isBoolean(handleScroll)) {\n        options['handleScroll'] = {\n            horzTouchDrag: handleScroll,\n            vertTouchDrag: handleScroll,\n            mouseWheel: handleScroll,\n            pressedMouseMove: handleScroll,\n        };\n    }\n}\nfunction toInternalOptions(options) {\n    migrateHandleScaleScrollOptions(options);\n    return options;\n}\nclass ChartApi {\n    constructor(container, horzScaleBehavior, options) {\n        this._private__seriesMap = new Map();\n        this._private__seriesMapReversed = new Map();\n        this._private__clickedDelegate = new Delegate();\n        this._private__dblClickedDelegate = new Delegate();\n        this._private__crosshairMovedDelegate = new Delegate();\n        this._private__panes = new WeakMap();\n        this._private__dataLayer = new DataLayer(horzScaleBehavior);\n        const internalOptions = (options === undefined) ?\n            clone(chartOptionsDefaults()) :\n            merge(clone(chartOptionsDefaults()), toInternalOptions(options));\n        this._internal__horzScaleBehavior = horzScaleBehavior;\n        this._private__chartWidget = new ChartWidget(container, internalOptions, horzScaleBehavior);\n        this._private__chartWidget._internal_clicked()._internal_subscribe((paramSupplier) => {\n            if (this._private__clickedDelegate._internal_hasListeners()) {\n                this._private__clickedDelegate._internal_fire(this._private__convertMouseParams(paramSupplier()));\n            }\n        }, this);\n        this._private__chartWidget._internal_dblClicked()._internal_subscribe((paramSupplier) => {\n            if (this._private__dblClickedDelegate._internal_hasListeners()) {\n                this._private__dblClickedDelegate._internal_fire(this._private__convertMouseParams(paramSupplier()));\n            }\n        }, this);\n        this._private__chartWidget._internal_crosshairMoved()._internal_subscribe((paramSupplier) => {\n            if (this._private__crosshairMovedDelegate._internal_hasListeners()) {\n                this._private__crosshairMovedDelegate._internal_fire(this._private__convertMouseParams(paramSupplier()));\n            }\n        }, this);\n        const model = this._private__chartWidget._internal_model();\n        this._private__timeScaleApi = new TimeScaleApi(model, this._private__chartWidget._internal_timeAxisWidget(), this._internal__horzScaleBehavior);\n    }\n    remove() {\n        this._private__chartWidget._internal_clicked()._internal_unsubscribeAll(this);\n        this._private__chartWidget._internal_dblClicked()._internal_unsubscribeAll(this);\n        this._private__chartWidget._internal_crosshairMoved()._internal_unsubscribeAll(this);\n        this._private__timeScaleApi._internal_destroy();\n        this._private__chartWidget._internal_destroy();\n        this._private__seriesMap.clear();\n        this._private__seriesMapReversed.clear();\n        this._private__clickedDelegate._internal_destroy();\n        this._private__dblClickedDelegate._internal_destroy();\n        this._private__crosshairMovedDelegate._internal_destroy();\n        this._private__dataLayer._internal_destroy();\n    }\n    resize(width, height, forceRepaint) {\n        if (this.autoSizeActive()) {\n            // We return early here instead of checking this within the actual _chartWidget.resize method\n            // because this should only apply to external resize requests.\n            warn(`Height and width values ignored because 'autoSize' option is enabled.`);\n            return;\n        }\n        this._private__chartWidget._internal_resize(width, height, forceRepaint);\n    }\n    addCustomSeries(customPaneView, options = {}, paneIndex = 0) {\n        const paneView = ensure(customPaneView);\n        const definition = createCustomSeriesDefinition(paneView);\n        return this._private__addSeriesImpl(definition, options, paneIndex);\n    }\n    addSeries(definition, options = {}, paneIndex = 0) {\n        return this._private__addSeriesImpl(definition, options, paneIndex);\n    }\n    removeSeries(seriesApi) {\n        const series = ensureDefined(this._private__seriesMap.get(seriesApi));\n        const update = this._private__dataLayer._internal_removeSeries(series);\n        const model = this._private__chartWidget._internal_model();\n        model._internal_removeSeries(series);\n        this._private__sendUpdateToChart(update);\n        this._private__seriesMap.delete(seriesApi);\n        this._private__seriesMapReversed.delete(series);\n    }\n    _internal_applyNewData(series, data) {\n        this._private__sendUpdateToChart(this._private__dataLayer._internal_setSeriesData(series, data));\n    }\n    _internal_updateData(series, data, historicalUpdate) {\n        this._private__sendUpdateToChart(this._private__dataLayer._internal_updateSeriesData(series, data, historicalUpdate));\n    }\n    subscribeClick(handler) {\n        this._private__clickedDelegate._internal_subscribe(handler);\n    }\n    unsubscribeClick(handler) {\n        this._private__clickedDelegate._internal_unsubscribe(handler);\n    }\n    subscribeCrosshairMove(handler) {\n        this._private__crosshairMovedDelegate._internal_subscribe(handler);\n    }\n    unsubscribeCrosshairMove(handler) {\n        this._private__crosshairMovedDelegate._internal_unsubscribe(handler);\n    }\n    subscribeDblClick(handler) {\n        this._private__dblClickedDelegate._internal_subscribe(handler);\n    }\n    unsubscribeDblClick(handler) {\n        this._private__dblClickedDelegate._internal_unsubscribe(handler);\n    }\n    priceScale(priceScaleId, paneIndex = 0) {\n        return new PriceScaleApi(this._private__chartWidget, priceScaleId, paneIndex);\n    }\n    timeScale() {\n        return this._private__timeScaleApi;\n    }\n    applyOptions(options) {\n        {\n            const colorSpace = options.layout?.colorSpace;\n            if (colorSpace !== undefined && colorSpace !== this.options().layout.colorSpace) {\n                throw new Error(`colorSpace option should not be changed once the chart has been created.`);\n            }\n            const colorParsers = options.layout?.colorParsers;\n            if (colorParsers !== undefined && colorParsers !== this.options().layout.colorParsers) {\n                throw new Error(`colorParsers option should not be changed once the chart has been created.`);\n            }\n        }\n        this._private__chartWidget._internal_applyOptions(toInternalOptions(options));\n    }\n    options() {\n        return this._private__chartWidget._internal_options();\n    }\n    takeScreenshot() {\n        return this._private__chartWidget._internal_takeScreenshot();\n    }\n    addPane(preserveEmptyPane = false) {\n        const pane = this._private__chartWidget._internal_model()._internal_addPane();\n        pane._internal_setPreserveEmptyPane(preserveEmptyPane);\n        return this._private__getPaneApi(pane);\n    }\n    removePane(index) {\n        this._private__chartWidget._internal_model()._internal_removePane(index);\n    }\n    swapPanes(first, second) {\n        this._private__chartWidget._internal_model()._internal_swapPanes(first, second);\n    }\n    autoSizeActive() {\n        return this._private__chartWidget._internal_autoSizeActive();\n    }\n    chartElement() {\n        return this._private__chartWidget._internal_element();\n    }\n    panes() {\n        return this._private__chartWidget._internal_model()._internal_panes().map((pane) => this._private__getPaneApi(pane));\n    }\n    paneSize(paneIndex = 0) {\n        const size = this._private__chartWidget._internal_paneSize(paneIndex);\n        return {\n            height: size.height,\n            width: size.width,\n        };\n    }\n    setCrosshairPosition(price, horizontalPosition, seriesApi) {\n        const series = this._private__seriesMap.get(seriesApi);\n        if (series === undefined) {\n            return;\n        }\n        const pane = this._private__chartWidget._internal_model()._internal_paneForSource(series);\n        if (pane === null) {\n            return;\n        }\n        this._private__chartWidget._internal_model()._internal_setAndSaveSyntheticPosition(price, horizontalPosition, pane);\n    }\n    clearCrosshairPosition() {\n        this._private__chartWidget._internal_model()._internal_clearCurrentPosition(true);\n    }\n    horzBehaviour() {\n        return this._internal__horzScaleBehavior;\n    }\n    _private__addSeriesImpl(definition, options = {}, paneIndex = 0) {\n        assert(isSeriesDefinition(definition));\n        patchPriceFormat(options.priceFormat);\n        if (definition.type === 'Candlestick') {\n            fillUpDownCandlesticksColors(options);\n        }\n        const strictOptions = merge(clone(seriesOptionsDefaults), clone(definition.defaultOptions), options);\n        const createPaneView = definition._internal_createPaneView;\n        const series = new Series(this._private__chartWidget._internal_model(), definition.type, strictOptions, createPaneView, definition._internal_customPaneView);\n        this._private__chartWidget._internal_model()._internal_addSeriesToPane(series, paneIndex);\n        const res = new SeriesApi(series, this, this, this, this._internal__horzScaleBehavior, (pane) => this._private__getPaneApi(pane));\n        this._private__seriesMap.set(res, series);\n        this._private__seriesMapReversed.set(series, res);\n        return res;\n    }\n    _private__sendUpdateToChart(update) {\n        const model = this._private__chartWidget._internal_model();\n        model._internal_updateTimeScale(update._internal_timeScale._internal_baseIndex, update._internal_timeScale._internal_points, update._internal_timeScale._internal_firstChangedPointIndex);\n        update._internal_series.forEach((value, series) => series._internal_setData(value._internal_data, value._internal_info));\n        model._internal_timeScale()._internal_recalculateIndicesWithData();\n        model._internal_recalculateAllPanes();\n    }\n    _private__mapSeriesToApi(series) {\n        return ensureDefined(this._private__seriesMapReversed.get(series));\n    }\n    _private__convertMouseParams(param) {\n        const seriesData = new Map();\n        param._internal_seriesData.forEach((plotRow, series) => {\n            const seriesType = series._internal_seriesType();\n            const data = getSeriesDataCreator(seriesType)(plotRow);\n            if (seriesType !== 'Custom') {\n                assert(isFulfilledData(data));\n            }\n            else {\n                const customWhitespaceChecker = series._internal_customSeriesWhitespaceCheck();\n                assert(!customWhitespaceChecker || customWhitespaceChecker(data) === false);\n            }\n            seriesData.set(this._private__mapSeriesToApi(series), data);\n        });\n        const hoveredSeries = param._internal_hoveredSeries === undefined ||\n            !this._private__seriesMapReversed.has(param._internal_hoveredSeries)\n            ? undefined\n            : this._private__mapSeriesToApi(param._internal_hoveredSeries);\n        return {\n            time: param._internal_originalTime,\n            logical: param._internal_index,\n            point: param._internal_point,\n            paneIndex: param._internal_paneIndex,\n            hoveredSeries,\n            hoveredObjectId: param._internal_hoveredObject,\n            seriesData,\n            sourceEvent: param._internal_touchMouseEventData,\n        };\n    }\n    _private__getPaneApi(pane) {\n        let result = this._private__panes.get(pane);\n        if (!result) {\n            result = new PaneApi(this._private__chartWidget, (series) => this._private__mapSeriesToApi(series), pane, this);\n            this._private__panes.set(pane, result);\n        }\n        return result;\n    }\n}\n\nfunction fetchHtmlElement(container) {\n    if (isString(container)) {\n        const element = document.getElementById(container);\n        assert(element !== null, `Cannot find element in DOM with id=${container}`);\n        return element;\n    }\n    return container;\n}\n/**\n * This function is the main entry point of the Lightweight Charting Library. If you are using time values\n * for the horizontal scale then it is recommended that you rather use the {@link createChart} function.\n *\n * @template HorzScaleItem - type of points on the horizontal scale\n * @template THorzScaleBehavior - type of horizontal axis strategy that encapsulate all the specific behaviors of the horizontal scale type\n *\n * @param container - ID of HTML element or element itself\n * @param horzScaleBehavior - Horizontal scale behavior\n * @param options - Any subset of options to be applied at start.\n * @returns An interface to the created chart\n */\nfunction createChartEx(container, horzScaleBehavior, options) {\n    const htmlElement = fetchHtmlElement(container);\n    const res = new ChartApi(htmlElement, horzScaleBehavior, options);\n    horzScaleBehavior.setOptions(res.options());\n    return res;\n}\n/**\n * This function is the simplified main entry point of the Lightweight Charting Library with time points for the horizontal scale.\n *\n * @param container - ID of HTML element or element itself\n * @param options - Any subset of options to be applied at start.\n * @returns An interface to the created chart\n */\nfunction createChart(container, options) {\n    return createChartEx(container, new HorzScaleBehaviorTime(), HorzScaleBehaviorTime._internal_applyDefaults(options));\n}\n/**\n * Provides the default implementation of the horizontal scale (time-based) that can be used as a base for extending the horizontal scale with custom behavior.\n * This allows for the introduction of custom functionality without re-implementing the entire {@link IHorzScaleBehavior}&lt;{@link Time}&gt; interface.\n *\n * For further details, refer to the {@link createChartEx} chart constructor method.\n *\n * @returns An uninitialized class implementing the {@link IHorzScaleBehavior}&lt;{@link Time}&gt; interface\n */\nfunction defaultHorzScaleBehavior() {\n    return HorzScaleBehaviorTime;\n}\n\nclass LinePaneViewBase extends SeriesPaneViewBase {\n    constructor(series, model) {\n        super(series, model, true);\n    }\n    _internal__convertToCoordinates(priceScale, timeScale, firstValue) {\n        timeScale._internal_indexesToCoordinates(this._internal__items, undefinedIfNull(this._internal__itemsVisibleRange));\n        priceScale._internal_pointsArrayToCoordinates(this._internal__items, firstValue, undefinedIfNull(this._internal__itemsVisibleRange));\n    }\n    _internal__createRawItemBase(time, price) {\n        return {\n            _internal_time: time,\n            _internal_price: price,\n            _internal_x: NaN,\n            _internal_y: NaN,\n        };\n    }\n    _internal__fillRawPoints() {\n        const colorer = this._internal__series._internal_barColorer();\n        this._internal__items = this._internal__series._internal_bars()._internal_rows().map((row) => {\n            const value = row._internal_value[3 /* PlotRowValueIndex.Close */];\n            return this._internal__createRawItem(row._internal_index, value, colorer);\n        });\n    }\n}\n\nfunction drawSeriesPointMarkers(renderingScope, items, pointMarkersRadius, visibleRange, \n// the values returned by styleGetter are compared using the operator !==,\n// so if styleGetter returns objects, then styleGetter should return the same object for equal styles\nstyleGetter) {\n    if (visibleRange.to - visibleRange.from <= 0) {\n        return;\n    }\n    const { horizontalPixelRatio, verticalPixelRatio, context } = renderingScope;\n    let prevStyle = null;\n    const tickWidth = Math.max(1, Math.floor(horizontalPixelRatio));\n    const correction = (tickWidth % 2) / 2;\n    const radius = pointMarkersRadius * verticalPixelRatio + correction;\n    for (let i = visibleRange.to - 1; i >= visibleRange.from; --i) {\n        const point = items[i];\n        if (point) {\n            const style = styleGetter(renderingScope, point);\n            if (style !== prevStyle) {\n                context.beginPath();\n                if (prevStyle !== null) {\n                    context.fill();\n                }\n                context.fillStyle = style;\n                prevStyle = style;\n            }\n            const centerX = Math.round(point._internal_x * horizontalPixelRatio) + correction; // correct x coordinate only\n            const centerY = point._internal_y * verticalPixelRatio;\n            context.moveTo(centerX, centerY);\n            context.arc(centerX, centerY, radius, 0, Math.PI * 2);\n        }\n    }\n    context.fill();\n}\n\n// eslint-disable-next-line max-params, complexity\nfunction walkLine(renderingScope, items, lineType, visibleRange, barWidth, \n// the values returned by styleGetter are compared using the operator !==,\n// so if styleGetter returns objects, then styleGetter should return the same object for equal styles\nstyleGetter, finishStyledArea) {\n    if (items.length === 0 || visibleRange.from >= items.length || visibleRange.to <= 0) {\n        return;\n    }\n    const { context: ctx, horizontalPixelRatio, verticalPixelRatio } = renderingScope;\n    const firstItem = items[visibleRange.from];\n    let currentStyle = styleGetter(renderingScope, firstItem);\n    let currentStyleFirstItem = firstItem;\n    if (visibleRange.to - visibleRange.from < 2) {\n        const halfBarWidth = barWidth / 2;\n        ctx.beginPath();\n        const item1 = { _internal_x: firstItem._internal_x - halfBarWidth, _internal_y: firstItem._internal_y };\n        const item2 = { _internal_x: firstItem._internal_x + halfBarWidth, _internal_y: firstItem._internal_y };\n        ctx.moveTo(item1._internal_x * horizontalPixelRatio, item1._internal_y * verticalPixelRatio);\n        ctx.lineTo(item2._internal_x * horizontalPixelRatio, item2._internal_y * verticalPixelRatio);\n        finishStyledArea(renderingScope, currentStyle, item1, item2);\n    }\n    else {\n        const changeStyle = (newStyle, currentItem) => {\n            finishStyledArea(renderingScope, currentStyle, currentStyleFirstItem, currentItem);\n            ctx.beginPath();\n            currentStyle = newStyle;\n            currentStyleFirstItem = currentItem;\n        };\n        let currentItem = currentStyleFirstItem;\n        ctx.beginPath();\n        ctx.moveTo(firstItem._internal_x * horizontalPixelRatio, firstItem._internal_y * verticalPixelRatio);\n        for (let i = visibleRange.from + 1; i < visibleRange.to; ++i) {\n            currentItem = items[i];\n            const itemStyle = styleGetter(renderingScope, currentItem);\n            switch (lineType) {\n                case 0 /* LineType.Simple */:\n                    ctx.lineTo(currentItem._internal_x * horizontalPixelRatio, currentItem._internal_y * verticalPixelRatio);\n                    break;\n                case 1 /* LineType.WithSteps */:\n                    ctx.lineTo(currentItem._internal_x * horizontalPixelRatio, items[i - 1]._internal_y * verticalPixelRatio);\n                    if (itemStyle !== currentStyle) {\n                        changeStyle(itemStyle, currentItem);\n                        ctx.lineTo(currentItem._internal_x * horizontalPixelRatio, items[i - 1]._internal_y * verticalPixelRatio);\n                    }\n                    ctx.lineTo(currentItem._internal_x * horizontalPixelRatio, currentItem._internal_y * verticalPixelRatio);\n                    break;\n                case 2 /* LineType.Curved */: {\n                    const [cp1, cp2] = getControlPoints(items, i - 1, i);\n                    ctx.bezierCurveTo(cp1._internal_x * horizontalPixelRatio, cp1._internal_y * verticalPixelRatio, cp2._internal_x * horizontalPixelRatio, cp2._internal_y * verticalPixelRatio, currentItem._internal_x * horizontalPixelRatio, currentItem._internal_y * verticalPixelRatio);\n                    break;\n                }\n            }\n            if (lineType !== 1 /* LineType.WithSteps */ && itemStyle !== currentStyle) {\n                changeStyle(itemStyle, currentItem);\n                ctx.moveTo(currentItem._internal_x * horizontalPixelRatio, currentItem._internal_y * verticalPixelRatio);\n            }\n        }\n        if (currentStyleFirstItem !== currentItem || currentStyleFirstItem === currentItem && lineType === 1 /* LineType.WithSteps */) {\n            finishStyledArea(renderingScope, currentStyle, currentStyleFirstItem, currentItem);\n        }\n    }\n}\nconst curveTension = 6;\nfunction subtract(p1, p2) {\n    return { _internal_x: p1._internal_x - p2._internal_x, _internal_y: p1._internal_y - p2._internal_y };\n}\nfunction add(p1, p2) {\n    return { _internal_x: p1._internal_x + p2._internal_x, _internal_y: p1._internal_y + p2._internal_y };\n}\nfunction divide(p1, n) {\n    return { _internal_x: p1._internal_x / n, _internal_y: p1._internal_y / n };\n}\n/**\n * @returns Two control points that can be used as arguments to {@link CanvasRenderingContext2D.bezierCurveTo} to draw a curved line between `points[fromPointIndex]` and `points[toPointIndex]`.\n */\nfunction getControlPoints(points, fromPointIndex, toPointIndex) {\n    const beforeFromPointIndex = Math.max(0, fromPointIndex - 1);\n    const afterToPointIndex = Math.min(points.length - 1, toPointIndex + 1);\n    const cp1 = add(points[fromPointIndex], divide(subtract(points[toPointIndex], points[beforeFromPointIndex]), curveTension));\n    const cp2 = subtract(points[toPointIndex], divide(subtract(points[afterToPointIndex], points[fromPointIndex]), curveTension));\n    return [cp1, cp2];\n}\n\nfunction finishStyledArea$1(scope, style) {\n    const ctx = scope.context;\n    ctx.strokeStyle = style;\n    ctx.stroke();\n}\nclass PaneRendererLineBase extends BitmapCoordinatesPaneRenderer {\n    constructor() {\n        super(...arguments);\n        this._internal__data = null;\n    }\n    _internal_setData(data) {\n        this._internal__data = data;\n    }\n    _internal__drawImpl(renderingScope) {\n        if (this._internal__data === null) {\n            return;\n        }\n        const { _internal_items: items, _internal_visibleRange: visibleRange, _internal_barWidth: barWidth, _internal_lineType: lineType, _internal_lineWidth: lineWidth, _internal_lineStyle: lineStyle, _internal_pointMarkersRadius: pointMarkersRadius } = this._internal__data;\n        if (visibleRange === null) {\n            return;\n        }\n        const ctx = renderingScope.context;\n        ctx.lineCap = 'butt';\n        ctx.lineWidth = lineWidth * renderingScope.verticalPixelRatio;\n        setLineStyle(ctx, lineStyle);\n        ctx.lineJoin = 'round';\n        const styleGetter = this._internal__strokeStyle.bind(this);\n        if (lineType !== undefined) {\n            walkLine(renderingScope, items, lineType, visibleRange, barWidth, styleGetter, finishStyledArea$1);\n        }\n        if (pointMarkersRadius) {\n            drawSeriesPointMarkers(renderingScope, items, pointMarkersRadius, visibleRange, styleGetter);\n        }\n    }\n}\n\nclass PaneRendererLine extends PaneRendererLineBase {\n    _internal__strokeStyle(renderingScope, item) {\n        return item._internal_lineColor;\n    }\n}\n\nclass SeriesLinePaneView extends LinePaneViewBase {\n    constructor() {\n        super(...arguments);\n        this._internal__renderer = new PaneRendererLine();\n    }\n    _internal__createRawItem(time, price, colorer) {\n        return {\n            ...this._internal__createRawItemBase(time, price),\n            ...colorer._internal_barStyle(time),\n        };\n    }\n    _internal__prepareRendererData() {\n        const options = this._internal__series._internal_options();\n        const data = {\n            _internal_items: this._internal__items,\n            _internal_lineStyle: options.lineStyle,\n            _internal_lineType: options.lineVisible ? options.lineType : undefined,\n            _internal_lineWidth: options.lineWidth,\n            _internal_pointMarkersRadius: options.pointMarkersVisible ? (options.pointMarkersRadius || options.lineWidth / 2 + 2) : undefined,\n            _internal_visibleRange: this._internal__itemsVisibleRange,\n            _internal_barWidth: this._internal__model._internal_timeScale()._internal_barSpacing(),\n        };\n        this._internal__renderer._internal_setData(data);\n    }\n}\n\nconst lineStyleDefaults = {\n    color: '#2196f3',\n    lineStyle: 0 /* LineStyle.Solid */,\n    lineWidth: 3,\n    lineType: 0 /* LineType.Simple */,\n    lineVisible: true,\n    crosshairMarkerVisible: true,\n    crosshairMarkerRadius: 4,\n    crosshairMarkerBorderColor: '',\n    crosshairMarkerBorderWidth: 2,\n    crosshairMarkerBackgroundColor: '',\n    lastPriceAnimation: 0 /* LastPriceAnimationMode.Disabled */,\n    pointMarkersVisible: false,\n};\nconst createPaneView$5 = (series, model) => new SeriesLinePaneView(series, model);\nconst createLineSeries = () => {\n    const definition = {\n        type: 'Line',\n        isBuiltIn: true,\n        defaultOptions: lineStyleDefaults,\n        /**\n         * @internal\n         */\n        _internal_createPaneView: createPaneView$5,\n    };\n    return definition;\n};\nconst lineSeries = createLineSeries();\n\nfunction createDebouncedMicroTaskHandler(callback) {\n    let scheduled = false;\n    return function (...args) {\n        if (!scheduled) {\n            scheduled = true;\n            queueMicrotask(() => {\n                callback(...args);\n                scheduled = false;\n            });\n        }\n    };\n}\nfunction markWithGreaterWeight$1(a, b) {\n    return a.weight > b.weight ? a : b;\n}\nfunction toInternalHorzScaleItem(item) {\n    return item;\n}\nfunction fromInternalHorzScaleItem(item) {\n    return item;\n}\nclass YieldCurveHorzScaleBehavior {\n    constructor() {\n        this._private__pointsChangedDelegate = new Delegate();\n        this._private__invalidateWhitespace = createDebouncedMicroTaskHandler(() => this._private__pointsChangedDelegate._internal_fire(this._private__largestIndex));\n        this._private__largestIndex = 0;\n    }\n    /** Data changes might require that the whitespace be generated again */\n    _internal_whitespaceInvalidated() {\n        return this._private__pointsChangedDelegate;\n    }\n    _internal_destroy() {\n        this._private__pointsChangedDelegate._internal_destroy();\n    }\n    options() {\n        return this._private__options;\n    }\n    setOptions(options) {\n        this._private__options = options;\n    }\n    preprocessData(data) {\n        // No preprocessing needed for yield curve data\n    }\n    updateFormatter(options) {\n        if (!this._private__options) {\n            return;\n        }\n        this._private__options.localization = options;\n    }\n    createConverterToInternalObj(data) {\n        this._private__invalidateWhitespace();\n        return (time) => {\n            if (time > this._private__largestIndex) {\n                this._private__largestIndex = time;\n            }\n            return toInternalHorzScaleItem(time);\n        };\n    }\n    key(internalItem) {\n        return internalItem;\n    }\n    cacheKey(internalItem) {\n        return fromInternalHorzScaleItem(internalItem);\n    }\n    convertHorzItemToInternal(item) {\n        return toInternalHorzScaleItem(item);\n    }\n    formatHorzItem(item) {\n        return this._private__formatTime(item);\n    }\n    formatTickmark(item) {\n        return this._private__formatTime(item.time);\n    }\n    maxTickMarkWeight(marks) {\n        return marks.reduce(markWithGreaterWeight$1, marks[0]).weight;\n    }\n    fillWeightsForPoints(sortedTimePoints, startIndex) {\n        const timeWeight = (time) => {\n            if (time % 120 === 0) {\n                return 10;\n            }\n            if (time % 60 === 0) {\n                return 9;\n            }\n            if (time % 36 === 0) {\n                return 8;\n            }\n            if (time % 12 === 0) {\n                return 7;\n            }\n            if (time % 6 === 0) {\n                return 6;\n            }\n            if (time % 3 === 0) {\n                return 5;\n            }\n            if (time % 1 === 0) {\n                return 4;\n            }\n            return 0;\n        };\n        for (let index = startIndex; index < sortedTimePoints.length; ++index) {\n            sortedTimePoints[index].timeWeight = timeWeight(fromInternalHorzScaleItem(sortedTimePoints[index].time));\n        }\n        this._private__largestIndex = fromInternalHorzScaleItem(sortedTimePoints[sortedTimePoints.length - 1].time);\n        this._private__invalidateWhitespace();\n    }\n    _private__formatTime(months) {\n        if (this._private__options.localization?.timeFormatter) {\n            return this._private__options.localization.timeFormatter(months);\n        }\n        if (months < 12) {\n            return `${months}M`;\n        }\n        const years = Math.floor(months / 12);\n        const remainingMonths = months % 12;\n        if (remainingMonths === 0) {\n            return `${years}Y`;\n        }\n        return `${years}Y${remainingMonths}M`;\n    }\n}\n\nconst yieldChartOptionsDefaults = {\n    baseResolution: 1,\n    minimumTimeRange: 120,\n    startTimeRange: 0,\n};\n\nfunction generateWhitespaceData({ _internal_start: start, _internal_end: end, _internal_resolution: resolution, }) {\n    return Array.from({ length: Math.floor((end - start) / resolution) + 1 }, \n    // eslint-disable-next-line quote-props\n    (item, i) => ({ 'time': start + i * resolution }));\n}\nfunction buildWhitespaceState(options, lastIndex) {\n    return {\n        _internal_start: Math.max(0, options.startTimeRange),\n        _internal_end: Math.max(0, options.minimumTimeRange, lastIndex || 0),\n        _internal_resolution: Math.max(1, options.baseResolution),\n    };\n}\nconst generateWhitespaceHash = ({ _internal_start: start, _internal_end: end, _internal_resolution: resolution, }) => `${start}~${end}~${resolution}`;\nconst defaultOptions = {\n    yieldCurve: yieldChartOptionsDefaults,\n    // and add sensible default options for yield charts which\n    // are different from the usual defaults.\n    timeScale: {\n        ignoreWhitespaceIndices: true,\n    },\n    leftPriceScale: {\n        visible: true,\n    },\n    rightPriceScale: {\n        visible: false,\n    },\n    localization: {\n        priceFormatter: (value) => {\n            return value.toFixed(3) + '%';\n        },\n    },\n};\nconst lineStyleDefaultOptionOverrides = {\n    lastValueVisible: false,\n    priceLineVisible: false,\n};\nclass YieldChartApi extends ChartApi {\n    constructor(container, options) {\n        const fullOptions = merge(defaultOptions, options || {});\n        const horzBehaviour = new YieldCurveHorzScaleBehavior();\n        super(container, horzBehaviour, fullOptions);\n        horzBehaviour.setOptions(this.options());\n        this._initWhitespaceSeries();\n    }\n    addSeries(definition, options = {}, paneIndex = 0) {\n        if (definition.isBuiltIn && ['Area', 'Line'].includes(definition.type) === false) {\n            throw new Error('Yield curve only support Area and Line series');\n        }\n        const optionOverrides = {\n            ...lineStyleDefaultOptionOverrides,\n            ...options,\n        };\n        return super.addSeries(definition, optionOverrides, paneIndex);\n    }\n    _initWhitespaceSeries() {\n        const horzBehaviour = this.horzBehaviour();\n        const whiteSpaceSeries = this.addSeries(lineSeries);\n        let currentWhitespaceHash;\n        function updateWhitespace(lastIndex) {\n            const newWhitespaceState = buildWhitespaceState(horzBehaviour.options().yieldCurve, lastIndex);\n            const newWhitespaceHash = generateWhitespaceHash(newWhitespaceState);\n            if (newWhitespaceHash !== currentWhitespaceHash) {\n                currentWhitespaceHash = newWhitespaceHash;\n                whiteSpaceSeries.setData(generateWhitespaceData(newWhitespaceState));\n            }\n        }\n        updateWhitespace(0);\n        horzBehaviour._internal_whitespaceInvalidated()._internal_subscribe(updateWhitespace);\n    }\n}\n\n/**\n * Creates a yield curve chart with the specified options.\n *\n * A yield curve chart differs from the default chart type\n * in the following ways:\n * - Horizontal scale is linearly spaced, and defined in monthly\n * time duration units\n * - Whitespace is ignored for the crosshair and grid lines\n *\n * @param container - ID of HTML element or element itself\n * @param options - The yield chart options.\n * @returns An interface to the created chart\n */\nfunction createYieldCurveChart(container, options) {\n    const htmlElement = fetchHtmlElement(container);\n    const chartApi = new YieldChartApi(htmlElement, options);\n    return chartApi;\n}\n\nfunction markWithGreaterWeight(a, b) {\n    return a.weight > b.weight ? a : b;\n}\nclass HorzScaleBehaviorPrice {\n    options() {\n        return this._private__options;\n    }\n    setOptions(options) {\n        this._private__options = options;\n    }\n    preprocessData(data) { }\n    updateFormatter(options) {\n        if (!this._private__options) {\n            return;\n        }\n        this._private__options.localization = options;\n    }\n    createConverterToInternalObj(data) {\n        return (price) => price;\n    }\n    key(internalItem) {\n        return internalItem;\n    }\n    cacheKey(internalItem) {\n        return internalItem;\n    }\n    convertHorzItemToInternal(item) {\n        return item;\n    }\n    formatHorzItem(item) {\n        return item.toFixed(this._private__precision());\n    }\n    formatTickmark(item, localizationOptions) {\n        return item.time.toFixed(this._private__precision());\n    }\n    maxTickMarkWeight(marks) {\n        return marks.reduce(markWithGreaterWeight, marks[0]).weight;\n    }\n    fillWeightsForPoints(sortedTimePoints, startIndex) {\n        const priceWeight = (price) => {\n            if (price === Math.ceil(price / 100) * 100) {\n                return 8;\n            }\n            if (price === Math.ceil(price / 50) * 50) {\n                return 7;\n            }\n            if (price === Math.ceil(price / 25) * 25) {\n                return 6;\n            }\n            if (price === Math.ceil(price / 10) * 10) {\n                return 5;\n            }\n            if (price === Math.ceil(price / 5) * 5) {\n                return 4;\n            }\n            if (price === Math.ceil(price)) {\n                return 3;\n            }\n            if (price * 2 === Math.ceil(price * 2)) {\n                return 1;\n            }\n            return 0;\n        };\n        for (let index = startIndex; index < sortedTimePoints.length; ++index) {\n            sortedTimePoints[index].timeWeight = priceWeight(sortedTimePoints[index].time);\n        }\n    }\n    _private__precision() {\n        return this._private__options.localization\n            .precision;\n    }\n}\n\n/**\n * Creates an 'options' chart with price values on the horizontal scale.\n *\n * This function is used to create a specialized chart type where the horizontal scale\n * represents price values instead of time. It's particularly useful for visualizing\n * option chains, price distributions, or any data where price is the primary x-axis metric.\n *\n * @param container - The DOM element or its id where the chart will be rendered.\n * @param options - Optional configuration options for the price chart.\n * @returns An instance of IChartApiBase configured for price-based horizontal scaling.\n */\nfunction createOptionsChart(container, options) {\n    return createChartEx(container, new HorzScaleBehaviorPrice(), options);\n}\n\nfunction finishStyledArea(baseLevelCoordinate, scope, style, areaFirstItem, newAreaFirstItem) {\n    const { context, horizontalPixelRatio, verticalPixelRatio } = scope;\n    context.lineTo(newAreaFirstItem._internal_x * horizontalPixelRatio, baseLevelCoordinate * verticalPixelRatio);\n    context.lineTo(areaFirstItem._internal_x * horizontalPixelRatio, baseLevelCoordinate * verticalPixelRatio);\n    context.closePath();\n    context.fillStyle = style;\n    context.fill();\n}\nclass PaneRendererAreaBase extends BitmapCoordinatesPaneRenderer {\n    constructor() {\n        super(...arguments);\n        this._internal__data = null;\n    }\n    _internal_setData(data) {\n        this._internal__data = data;\n    }\n    _internal__drawImpl(renderingScope) {\n        if (this._internal__data === null) {\n            return;\n        }\n        const { _internal_items: items, _internal_visibleRange: visibleRange, _internal_barWidth: barWidth, _internal_lineWidth: lineWidth, _internal_lineStyle: lineStyle, _internal_lineType: lineType } = this._internal__data;\n        const baseLevelCoordinate = this._internal__data._internal_baseLevelCoordinate ??\n            (this._internal__data._internal_invertFilledArea ? 0 : renderingScope.mediaSize.height);\n        if (visibleRange === null) {\n            return;\n        }\n        const ctx = renderingScope.context;\n        ctx.lineCap = 'butt';\n        ctx.lineJoin = 'round';\n        ctx.lineWidth = lineWidth;\n        setLineStyle(ctx, lineStyle);\n        // walk lines with width=1 to have more accurate gradient's filling\n        ctx.lineWidth = 1;\n        walkLine(renderingScope, items, lineType, visibleRange, barWidth, this._internal__fillStyle.bind(this), finishStyledArea.bind(null, baseLevelCoordinate));\n    }\n}\n\nclass GradientStyleCache {\n    // eslint-disable-next-line complexity\n    _internal_get(scope, params) {\n        const cachedParams = this._private__params;\n        const { _internal_topColor1: topColor1, _internal_topColor2: topColor2, _internal_bottomColor1: bottomColor1, _internal_bottomColor2: bottomColor2, _internal_baseLevelCoordinate: baseLevelCoordinate, _internal_topCoordinate: topCoordinate, _internal_bottomCoordinate: bottomCoordinate, } = params;\n        if (this._private__cachedValue === undefined ||\n            cachedParams === undefined ||\n            cachedParams._internal_topColor1 !== topColor1 ||\n            cachedParams._internal_topColor2 !== topColor2 ||\n            cachedParams._internal_bottomColor1 !== bottomColor1 ||\n            cachedParams._internal_bottomColor2 !== bottomColor2 ||\n            cachedParams._internal_baseLevelCoordinate !== baseLevelCoordinate ||\n            cachedParams._internal_topCoordinate !== topCoordinate ||\n            cachedParams._internal_bottomCoordinate !== bottomCoordinate) {\n            const { verticalPixelRatio } = scope;\n            const multiplier = baseLevelCoordinate || topCoordinate > 0 ? verticalPixelRatio : 1;\n            const top = topCoordinate * multiplier;\n            const bottom = bottomCoordinate === scope.bitmapSize.height ? bottomCoordinate : bottomCoordinate * multiplier;\n            const baseline = (baseLevelCoordinate ?? 0) * multiplier;\n            const gradient = scope.context.createLinearGradient(0, top, 0, bottom);\n            gradient.addColorStop(0, topColor1);\n            if (baseLevelCoordinate !== null && baseLevelCoordinate !== undefined) {\n                const range = bottom - top;\n                const baselineRatio = clamp(((baseline - top) / range), 0, 1);\n                gradient.addColorStop(baselineRatio, topColor2);\n                gradient.addColorStop(baselineRatio, bottomColor1);\n            }\n            gradient.addColorStop(1, bottomColor2);\n            this._private__cachedValue = gradient;\n            this._private__params = params;\n        }\n        return this._private__cachedValue;\n    }\n}\n\nclass PaneRendererBaselineArea extends PaneRendererAreaBase {\n    constructor() {\n        super(...arguments);\n        this._private__fillCache = new GradientStyleCache();\n    }\n    _internal__fillStyle(renderingScope, item) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const data = this._internal__data;\n        return this._private__fillCache._internal_get(renderingScope, {\n            _internal_topColor1: item._internal_topFillColor1,\n            _internal_topColor2: item._internal_topFillColor2,\n            _internal_bottomColor1: item._internal_bottomFillColor1,\n            _internal_bottomColor2: item._internal_bottomFillColor2,\n            _internal_baseLevelCoordinate: data._internal_baseLevelCoordinate,\n            _internal_topCoordinate: data._internal_topCoordinate ?? 0,\n            _internal_bottomCoordinate: data._internal_bottomCoordinate ?? renderingScope.bitmapSize.height,\n        });\n    }\n}\n\nclass PaneRendererBaselineLine extends PaneRendererLineBase {\n    constructor() {\n        super(...arguments);\n        this._private__strokeCache = new GradientStyleCache();\n    }\n    _internal__strokeStyle(renderingScope, item) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const data = this._internal__data;\n        return this._private__strokeCache._internal_get(renderingScope, {\n            _internal_topColor1: item._internal_topLineColor,\n            _internal_topColor2: item._internal_topLineColor,\n            _internal_bottomColor1: item._internal_bottomLineColor,\n            _internal_bottomColor2: item._internal_bottomLineColor,\n            _internal_baseLevelCoordinate: data._internal_baseLevelCoordinate,\n            _internal_topCoordinate: data._internal_topCoordinate ?? 0,\n            _internal_bottomCoordinate: data._internal_bottomCoordinate ?? renderingScope.bitmapSize.height,\n        });\n    }\n}\n\nclass SeriesBaselinePaneView extends LinePaneViewBase {\n    constructor(series, model) {\n        super(series, model);\n        this._internal__renderer = new CompositeRenderer();\n        this._private__baselineAreaRenderer = new PaneRendererBaselineArea();\n        this._private__baselineLineRenderer = new PaneRendererBaselineLine();\n        this._internal__renderer._internal_setRenderers([this._private__baselineAreaRenderer, this._private__baselineLineRenderer]);\n    }\n    _internal__createRawItem(time, price, colorer) {\n        return {\n            ...this._internal__createRawItemBase(time, price),\n            ...colorer._internal_barStyle(time),\n        };\n    }\n    _internal__prepareRendererData() {\n        const firstValue = this._internal__series._internal_firstValue();\n        if (firstValue === null) {\n            return;\n        }\n        const options = this._internal__series._internal_options();\n        const baseLevelCoordinate = this._internal__series._internal_priceScale()._internal_priceToCoordinate(options.baseValue.price, firstValue._internal_value);\n        const barWidth = this._internal__model._internal_timeScale()._internal_barSpacing();\n        if (this._internal__itemsVisibleRange === null || this._internal__items.length === 0) {\n            return;\n        }\n        let topCoordinate;\n        let bottomCoordinate;\n        if (options.relativeGradient) {\n            topCoordinate = this._internal__items[this._internal__itemsVisibleRange.from]._internal_y;\n            bottomCoordinate = this._internal__items[this._internal__itemsVisibleRange.from]._internal_y;\n            for (let i = this._internal__itemsVisibleRange.from; i < this._internal__itemsVisibleRange.to; i++) {\n                const item = this._internal__items[i];\n                if (item._internal_y < topCoordinate) {\n                    topCoordinate = item._internal_y;\n                }\n                if (item._internal_y > bottomCoordinate) {\n                    bottomCoordinate = item._internal_y;\n                }\n            }\n        }\n        this._private__baselineAreaRenderer._internal_setData({\n            _internal_items: this._internal__items,\n            _internal_lineWidth: options.lineWidth,\n            _internal_lineStyle: options.lineStyle,\n            _internal_lineType: options.lineType,\n            _internal_baseLevelCoordinate: baseLevelCoordinate,\n            _internal_topCoordinate: topCoordinate,\n            _internal_bottomCoordinate: bottomCoordinate,\n            _internal_invertFilledArea: false,\n            _internal_visibleRange: this._internal__itemsVisibleRange,\n            _internal_barWidth: barWidth,\n        });\n        this._private__baselineLineRenderer._internal_setData({\n            _internal_items: this._internal__items,\n            _internal_lineWidth: options.lineWidth,\n            _internal_lineStyle: options.lineStyle,\n            _internal_lineType: options.lineVisible ? options.lineType : undefined,\n            _internal_pointMarkersRadius: options.pointMarkersVisible ? (options.pointMarkersRadius || options.lineWidth / 2 + 2) : undefined,\n            _internal_baseLevelCoordinate: baseLevelCoordinate,\n            _internal_topCoordinate: topCoordinate,\n            _internal_bottomCoordinate: bottomCoordinate,\n            _internal_visibleRange: this._internal__itemsVisibleRange,\n            _internal_barWidth: barWidth,\n        });\n    }\n}\n\nconst baselineStyleDefaults = {\n    baseValue: {\n        type: 'price',\n        price: 0,\n    },\n    relativeGradient: false,\n    topFillColor1: 'rgba(38, 166, 154, 0.28)',\n    topFillColor2: 'rgba(38, 166, 154, 0.05)',\n    topLineColor: 'rgba(38, 166, 154, 1)',\n    bottomFillColor1: 'rgba(239, 83, 80, 0.05)',\n    bottomFillColor2: 'rgba(239, 83, 80, 0.28)',\n    bottomLineColor: 'rgba(239, 83, 80, 1)',\n    lineWidth: 3,\n    lineStyle: 0 /* LineStyle.Solid */,\n    lineType: 0 /* LineType.Simple */,\n    lineVisible: true,\n    crosshairMarkerVisible: true,\n    crosshairMarkerRadius: 4,\n    crosshairMarkerBorderColor: '',\n    crosshairMarkerBorderWidth: 2,\n    crosshairMarkerBackgroundColor: '',\n    lastPriceAnimation: 0 /* LastPriceAnimationMode.Disabled */,\n    pointMarkersVisible: false,\n};\nconst createPaneView$4 = (series, model) => new SeriesBaselinePaneView(series, model);\nconst createSeries$4 = () => {\n    const definition = {\n        type: 'Baseline',\n        isBuiltIn: true,\n        defaultOptions: baselineStyleDefaults,\n        /**\n         * @internal\n         */\n        _internal_createPaneView: createPaneView$4,\n    };\n    return definition;\n};\nconst baselineSeries = createSeries$4();\n\nclass PaneRendererArea extends PaneRendererAreaBase {\n    constructor() {\n        super(...arguments);\n        this._private__fillCache = new GradientStyleCache();\n    }\n    _internal__fillStyle(renderingScope, item) {\n        return this._private__fillCache._internal_get(renderingScope, {\n            _internal_topColor1: item._internal_topColor,\n            _internal_topColor2: '',\n            _internal_bottomColor1: '',\n            _internal_bottomColor2: item._internal_bottomColor,\n            _internal_topCoordinate: this._internal__data?._internal_topCoordinate ?? 0,\n            _internal_bottomCoordinate: renderingScope.bitmapSize.height,\n        });\n    }\n}\n\nclass SeriesAreaPaneView extends LinePaneViewBase {\n    constructor(series, model) {\n        super(series, model);\n        this._internal__renderer = new CompositeRenderer();\n        this._private__areaRenderer = new PaneRendererArea();\n        this._private__lineRenderer = new PaneRendererLine();\n        this._internal__renderer._internal_setRenderers([this._private__areaRenderer, this._private__lineRenderer]);\n    }\n    _internal__createRawItem(time, price, colorer) {\n        return {\n            ...this._internal__createRawItemBase(time, price),\n            ...colorer._internal_barStyle(time),\n        };\n    }\n    _internal__prepareRendererData() {\n        const options = this._internal__series._internal_options();\n        if (this._internal__itemsVisibleRange === null || this._internal__items.length === 0) {\n            return;\n        }\n        let topCoordinate;\n        if (options.relativeGradient) {\n            topCoordinate = this._internal__items[this._internal__itemsVisibleRange.from]._internal_y;\n            for (let i = this._internal__itemsVisibleRange.from; i < this._internal__itemsVisibleRange.to; i++) {\n                const item = this._internal__items[i];\n                if (item._internal_y < topCoordinate) {\n                    topCoordinate = item._internal_y;\n                }\n            }\n        }\n        this._private__areaRenderer._internal_setData({\n            _internal_lineType: options.lineType,\n            _internal_items: this._internal__items,\n            _internal_lineStyle: options.lineStyle,\n            _internal_lineWidth: options.lineWidth,\n            _internal_baseLevelCoordinate: null,\n            _internal_topCoordinate: topCoordinate,\n            _internal_invertFilledArea: options.invertFilledArea,\n            _internal_visibleRange: this._internal__itemsVisibleRange,\n            _internal_barWidth: this._internal__model._internal_timeScale()._internal_barSpacing(),\n        });\n        this._private__lineRenderer._internal_setData({\n            _internal_lineType: options.lineVisible ? options.lineType : undefined,\n            _internal_items: this._internal__items,\n            _internal_lineStyle: options.lineStyle,\n            _internal_lineWidth: options.lineWidth,\n            _internal_visibleRange: this._internal__itemsVisibleRange,\n            _internal_barWidth: this._internal__model._internal_timeScale()._internal_barSpacing(),\n            _internal_pointMarkersRadius: options.pointMarkersVisible ? (options.pointMarkersRadius || options.lineWidth / 2 + 2) : undefined,\n        });\n    }\n}\n\nconst areaStyleDefaults = {\n    topColor: 'rgba( 46, 220, 135, 0.4)',\n    bottomColor: 'rgba( 40, 221, 100, 0)',\n    invertFilledArea: false,\n    relativeGradient: false,\n    lineColor: '#33D778',\n    lineStyle: 0 /* LineStyle.Solid */,\n    lineWidth: 3,\n    lineType: 0 /* LineType.Simple */,\n    lineVisible: true,\n    crosshairMarkerVisible: true,\n    crosshairMarkerRadius: 4,\n    crosshairMarkerBorderColor: '',\n    crosshairMarkerBorderWidth: 2,\n    crosshairMarkerBackgroundColor: '',\n    lastPriceAnimation: 0 /* LastPriceAnimationMode.Disabled */,\n    pointMarkersVisible: false,\n};\nconst createPaneView$3 = (series, model) => new SeriesAreaPaneView(series, model);\nconst createSeries$3 = () => {\n    const definition = {\n        type: 'Area',\n        isBuiltIn: true,\n        defaultOptions: areaStyleDefaults,\n        /**\n         * @internal\n         */\n        _internal_createPaneView: createPaneView$3,\n    };\n    return definition;\n};\nconst areaSeries = createSeries$3();\n\nfunction optimalBarWidth(barSpacing, pixelRatio) {\n    return Math.floor(barSpacing * 0.3 * pixelRatio);\n}\nfunction optimalCandlestickWidth(barSpacing, pixelRatio) {\n    const barSpacingSpecialCaseFrom = 2.5;\n    const barSpacingSpecialCaseTo = 4;\n    const barSpacingSpecialCaseCoeff = 3;\n    if (barSpacing >= barSpacingSpecialCaseFrom && barSpacing <= barSpacingSpecialCaseTo) {\n        return Math.floor(barSpacingSpecialCaseCoeff * pixelRatio);\n    }\n    // coeff should be 1 on small barspacing and go to 0.8 while groing bar spacing\n    const barSpacingReducingCoeff = 0.2;\n    const coeff = 1 - barSpacingReducingCoeff * Math.atan(Math.max(barSpacingSpecialCaseTo, barSpacing) - barSpacingSpecialCaseTo) / (Math.PI * 0.5);\n    const res = Math.floor(barSpacing * coeff * pixelRatio);\n    const scaledBarSpacing = Math.floor(barSpacing * pixelRatio);\n    const optimal = Math.min(res, scaledBarSpacing);\n    return Math.max(Math.floor(pixelRatio), optimal);\n}\n\nclass PaneRendererBars extends BitmapCoordinatesPaneRenderer {\n    constructor() {\n        super(...arguments);\n        this._private__data = null;\n        this._private__barWidth = 0;\n        this._private__barLineWidth = 0;\n    }\n    _internal_setData(data) {\n        this._private__data = data;\n    }\n    // eslint-disable-next-line complexity\n    _internal__drawImpl({ context: ctx, horizontalPixelRatio, verticalPixelRatio }) {\n        if (this._private__data === null || this._private__data._internal_bars.length === 0 || this._private__data._internal_visibleRange === null) {\n            return;\n        }\n        this._private__barWidth = this._private__calcBarWidth(horizontalPixelRatio);\n        // grid and crosshair have line width = Math.floor(pixelRatio)\n        // if this value is odd, we have to make bars' width odd\n        // if this value is even, we have to make bars' width even\n        // in order of keeping crosshair-over-bar drawing symmetric\n        if (this._private__barWidth >= 2) {\n            const lineWidth = Math.max(1, Math.floor(horizontalPixelRatio));\n            if ((lineWidth % 2) !== (this._private__barWidth % 2)) {\n                this._private__barWidth--;\n            }\n        }\n        // if scale is compressed, bar could become less than 1 CSS pixel\n        this._private__barLineWidth = this._private__data._internal_thinBars ? Math.min(this._private__barWidth, Math.floor(horizontalPixelRatio)) : this._private__barWidth;\n        let prevColor = null;\n        const drawOpenClose = this._private__barLineWidth <= this._private__barWidth && this._private__data._internal_barSpacing >= Math.floor(1.5 * horizontalPixelRatio);\n        for (let i = this._private__data._internal_visibleRange.from; i < this._private__data._internal_visibleRange.to; ++i) {\n            const bar = this._private__data._internal_bars[i];\n            if (prevColor !== bar._internal_barColor) {\n                ctx.fillStyle = bar._internal_barColor;\n                prevColor = bar._internal_barColor;\n            }\n            const bodyWidthHalf = Math.floor(this._private__barLineWidth * 0.5);\n            const bodyCenter = Math.round(bar._internal_x * horizontalPixelRatio);\n            const bodyLeft = bodyCenter - bodyWidthHalf;\n            const bodyWidth = this._private__barLineWidth;\n            const bodyRight = bodyLeft + bodyWidth - 1;\n            const high = Math.min(bar._internal_highY, bar._internal_lowY);\n            const low = Math.max(bar._internal_highY, bar._internal_lowY);\n            const bodyTop = Math.round(high * verticalPixelRatio) - bodyWidthHalf;\n            const bodyBottom = Math.round(low * verticalPixelRatio) + bodyWidthHalf;\n            const bodyHeight = Math.max((bodyBottom - bodyTop), this._private__barLineWidth);\n            ctx.fillRect(bodyLeft, bodyTop, bodyWidth, bodyHeight);\n            const sideWidth = Math.ceil(this._private__barWidth * 1.5);\n            if (drawOpenClose) {\n                if (this._private__data._internal_openVisible) {\n                    const openLeft = bodyCenter - sideWidth;\n                    let openTop = Math.max(bodyTop, Math.round(bar._internal_openY * verticalPixelRatio) - bodyWidthHalf);\n                    let openBottom = openTop + bodyWidth - 1;\n                    if (openBottom > bodyTop + bodyHeight - 1) {\n                        openBottom = bodyTop + bodyHeight - 1;\n                        openTop = openBottom - bodyWidth + 1;\n                    }\n                    ctx.fillRect(openLeft, openTop, bodyLeft - openLeft, openBottom - openTop + 1);\n                }\n                const closeRight = bodyCenter + sideWidth;\n                let closeTop = Math.max(bodyTop, Math.round(bar._internal_closeY * verticalPixelRatio) - bodyWidthHalf);\n                let closeBottom = closeTop + bodyWidth - 1;\n                if (closeBottom > bodyTop + bodyHeight - 1) {\n                    closeBottom = bodyTop + bodyHeight - 1;\n                    closeTop = closeBottom - bodyWidth + 1;\n                }\n                ctx.fillRect(bodyRight + 1, closeTop, closeRight - bodyRight, closeBottom - closeTop + 1);\n            }\n        }\n    }\n    _private__calcBarWidth(pixelRatio) {\n        const limit = Math.floor(pixelRatio);\n        return Math.max(limit, Math.floor(optimalBarWidth(ensureNotNull(this._private__data)._internal_barSpacing, pixelRatio)));\n    }\n}\n\nclass BarsPaneViewBase extends SeriesPaneViewBase {\n    constructor(series, model) {\n        super(series, model, false);\n    }\n    _internal__convertToCoordinates(priceScale, timeScale, firstValue) {\n        timeScale._internal_indexesToCoordinates(this._internal__items, undefinedIfNull(this._internal__itemsVisibleRange));\n        priceScale._internal_barPricesToCoordinates(this._internal__items, firstValue, undefinedIfNull(this._internal__itemsVisibleRange));\n    }\n    _internal__createDefaultItem(time, bar, colorer) {\n        return {\n            _internal_time: time,\n            _internal_open: bar._internal_value[0 /* PlotRowValueIndex.Open */],\n            _internal_high: bar._internal_value[1 /* PlotRowValueIndex.High */],\n            _internal_low: bar._internal_value[2 /* PlotRowValueIndex.Low */],\n            _internal_close: bar._internal_value[3 /* PlotRowValueIndex.Close */],\n            _internal_x: NaN,\n            _internal_openY: NaN,\n            _internal_highY: NaN,\n            _internal_lowY: NaN,\n            _internal_closeY: NaN,\n        };\n    }\n    _internal__fillRawPoints() {\n        const colorer = this._internal__series._internal_barColorer();\n        this._internal__items = this._internal__series._internal_bars()._internal_rows().map((row) => this._internal__createRawItem(row._internal_index, row, colorer));\n    }\n}\n\nclass SeriesBarsPaneView extends BarsPaneViewBase {\n    constructor() {\n        super(...arguments);\n        this._internal__renderer = new PaneRendererBars();\n    }\n    _internal__createRawItem(time, bar, colorer) {\n        return {\n            ...this._internal__createDefaultItem(time, bar, colorer),\n            ...colorer._internal_barStyle(time),\n        };\n    }\n    _internal__prepareRendererData() {\n        const barStyleProps = this._internal__series._internal_options();\n        this._internal__renderer._internal_setData({\n            _internal_bars: this._internal__items,\n            _internal_barSpacing: this._internal__model._internal_timeScale()._internal_barSpacing(),\n            _internal_openVisible: barStyleProps.openVisible,\n            _internal_thinBars: barStyleProps.thinBars,\n            _internal_visibleRange: this._internal__itemsVisibleRange,\n        });\n    }\n}\n\nconst barStyleDefaults = {\n    upColor: '#26a69a',\n    downColor: '#ef5350',\n    openVisible: true,\n    thinBars: true,\n};\nconst createPaneView$2 = (series, model) => new SeriesBarsPaneView(series, model);\nconst createSeries$2 = () => {\n    const definition = {\n        type: 'Bar',\n        isBuiltIn: true,\n        defaultOptions: barStyleDefaults,\n        /**\n         * @internal\n         */\n        _internal_createPaneView: createPaneView$2,\n    };\n    return definition;\n};\nconst barSeries = createSeries$2();\n\nclass PaneRendererCandlesticks extends BitmapCoordinatesPaneRenderer {\n    constructor() {\n        super(...arguments);\n        this._private__data = null;\n        // scaled with pixelRatio\n        this._private__barWidth = 0;\n    }\n    _internal_setData(data) {\n        this._private__data = data;\n    }\n    _internal__drawImpl(renderingScope) {\n        if (this._private__data === null || this._private__data._internal_bars.length === 0 || this._private__data._internal_visibleRange === null) {\n            return;\n        }\n        const { horizontalPixelRatio } = renderingScope;\n        // now we know pixelRatio and we could calculate barWidth effectively\n        this._private__barWidth = optimalCandlestickWidth(this._private__data._internal_barSpacing, horizontalPixelRatio);\n        // grid and crosshair have line width = Math.floor(pixelRatio)\n        // if this value is odd, we have to make candlesticks' width odd\n        // if this value is even, we have to make candlesticks' width even\n        // in order of keeping crosshair-over-candlesticks drawing symmetric\n        if (this._private__barWidth >= 2) {\n            const wickWidth = Math.floor(horizontalPixelRatio);\n            if ((wickWidth % 2) !== (this._private__barWidth % 2)) {\n                this._private__barWidth--;\n            }\n        }\n        const bars = this._private__data._internal_bars;\n        if (this._private__data._internal_wickVisible) {\n            this._private__drawWicks(renderingScope, bars, this._private__data._internal_visibleRange);\n        }\n        if (this._private__data._internal_borderVisible) {\n            this._private__drawBorder(renderingScope, bars, this._private__data._internal_visibleRange);\n        }\n        const borderWidth = this._private__calculateBorderWidth(horizontalPixelRatio);\n        if (!this._private__data._internal_borderVisible || this._private__barWidth > borderWidth * 2) {\n            this._private__drawCandles(renderingScope, bars, this._private__data._internal_visibleRange);\n        }\n    }\n    _private__drawWicks(renderingScope, bars, visibleRange) {\n        if (this._private__data === null) {\n            return;\n        }\n        const { context: ctx, horizontalPixelRatio, verticalPixelRatio } = renderingScope;\n        let prevWickColor = '';\n        let wickWidth = Math.min(Math.floor(horizontalPixelRatio), Math.floor(this._private__data._internal_barSpacing * horizontalPixelRatio));\n        wickWidth = Math.max(Math.floor(horizontalPixelRatio), Math.min(wickWidth, this._private__barWidth));\n        const wickOffset = Math.floor(wickWidth * 0.5);\n        let prevEdge = null;\n        for (let i = visibleRange.from; i < visibleRange.to; i++) {\n            const bar = bars[i];\n            if (bar._internal_barWickColor !== prevWickColor) {\n                ctx.fillStyle = bar._internal_barWickColor;\n                prevWickColor = bar._internal_barWickColor;\n            }\n            const top = Math.round(Math.min(bar._internal_openY, bar._internal_closeY) * verticalPixelRatio);\n            const bottom = Math.round(Math.max(bar._internal_openY, bar._internal_closeY) * verticalPixelRatio);\n            const high = Math.round(bar._internal_highY * verticalPixelRatio);\n            const low = Math.round(bar._internal_lowY * verticalPixelRatio);\n            const scaledX = Math.round(horizontalPixelRatio * bar._internal_x);\n            let left = scaledX - wickOffset;\n            const right = left + wickWidth - 1;\n            if (prevEdge !== null) {\n                left = Math.max(prevEdge + 1, left);\n                left = Math.min(left, right);\n            }\n            const width = right - left + 1;\n            ctx.fillRect(left, high, width, top - high);\n            ctx.fillRect(left, bottom + 1, width, low - bottom);\n            prevEdge = right;\n        }\n    }\n    _private__calculateBorderWidth(pixelRatio) {\n        let borderWidth = Math.floor(1 /* Constants.BarBorderWidth */ * pixelRatio);\n        if (this._private__barWidth <= 2 * borderWidth) {\n            borderWidth = Math.floor((this._private__barWidth - 1) * 0.5);\n        }\n        const res = Math.max(Math.floor(pixelRatio), borderWidth);\n        if (this._private__barWidth <= res * 2) {\n            // do not draw bodies, restore original value\n            return Math.max(Math.floor(pixelRatio), Math.floor(1 /* Constants.BarBorderWidth */ * pixelRatio));\n        }\n        return res;\n    }\n    _private__drawBorder(renderingScope, bars, visibleRange) {\n        if (this._private__data === null) {\n            return;\n        }\n        const { context: ctx, horizontalPixelRatio, verticalPixelRatio } = renderingScope;\n        let prevBorderColor = '';\n        const borderWidth = this._private__calculateBorderWidth(horizontalPixelRatio);\n        let prevEdge = null;\n        for (let i = visibleRange.from; i < visibleRange.to; i++) {\n            const bar = bars[i];\n            if (bar._internal_barBorderColor !== prevBorderColor) {\n                ctx.fillStyle = bar._internal_barBorderColor;\n                prevBorderColor = bar._internal_barBorderColor;\n            }\n            let left = Math.round(bar._internal_x * horizontalPixelRatio) - Math.floor(this._private__barWidth * 0.5);\n            // this is important to calculate right before patching left\n            const right = left + this._private__barWidth - 1;\n            const top = Math.round(Math.min(bar._internal_openY, bar._internal_closeY) * verticalPixelRatio);\n            const bottom = Math.round(Math.max(bar._internal_openY, bar._internal_closeY) * verticalPixelRatio);\n            if (prevEdge !== null) {\n                left = Math.max(prevEdge + 1, left);\n                left = Math.min(left, right);\n            }\n            if (this._private__data._internal_barSpacing * horizontalPixelRatio > 2 * borderWidth) {\n                fillRectInnerBorder(ctx, left, top, right - left + 1, bottom - top + 1, borderWidth);\n            }\n            else {\n                const width = right - left + 1;\n                ctx.fillRect(left, top, width, bottom - top + 1);\n            }\n            prevEdge = right;\n        }\n    }\n    _private__drawCandles(renderingScope, bars, visibleRange) {\n        if (this._private__data === null) {\n            return;\n        }\n        const { context: ctx, horizontalPixelRatio, verticalPixelRatio } = renderingScope;\n        let prevBarColor = '';\n        const borderWidth = this._private__calculateBorderWidth(horizontalPixelRatio);\n        for (let i = visibleRange.from; i < visibleRange.to; i++) {\n            const bar = bars[i];\n            let top = Math.round(Math.min(bar._internal_openY, bar._internal_closeY) * verticalPixelRatio);\n            let bottom = Math.round(Math.max(bar._internal_openY, bar._internal_closeY) * verticalPixelRatio);\n            let left = Math.round(bar._internal_x * horizontalPixelRatio) - Math.floor(this._private__barWidth * 0.5);\n            let right = left + this._private__barWidth - 1;\n            if (bar._internal_barColor !== prevBarColor) {\n                const barColor = bar._internal_barColor;\n                ctx.fillStyle = barColor;\n                prevBarColor = barColor;\n            }\n            if (this._private__data._internal_borderVisible) {\n                left += borderWidth;\n                top += borderWidth;\n                right -= borderWidth;\n                bottom -= borderWidth;\n            }\n            if (top > bottom) {\n                continue;\n            }\n            ctx.fillRect(left, top, right - left + 1, bottom - top + 1);\n        }\n    }\n}\n\nclass SeriesCandlesticksPaneView extends BarsPaneViewBase {\n    constructor() {\n        super(...arguments);\n        this._internal__renderer = new PaneRendererCandlesticks();\n    }\n    _internal__createRawItem(time, bar, colorer) {\n        return {\n            ...this._internal__createDefaultItem(time, bar, colorer),\n            ...colorer._internal_barStyle(time),\n        };\n    }\n    _internal__prepareRendererData() {\n        const candlestickStyleProps = this._internal__series._internal_options();\n        this._internal__renderer._internal_setData({\n            _internal_bars: this._internal__items,\n            _internal_barSpacing: this._internal__model._internal_timeScale()._internal_barSpacing(),\n            _internal_wickVisible: candlestickStyleProps.wickVisible,\n            _internal_borderVisible: candlestickStyleProps.borderVisible,\n            _internal_visibleRange: this._internal__itemsVisibleRange,\n        });\n    }\n}\n\nconst candlestickStyleDefaults = {\n    upColor: '#26a69a',\n    downColor: '#ef5350',\n    wickVisible: true,\n    borderVisible: true,\n    borderColor: '#378658',\n    borderUpColor: '#26a69a',\n    borderDownColor: '#ef5350',\n    wickColor: '#737375',\n    wickUpColor: '#26a69a',\n    wickDownColor: '#ef5350',\n};\nconst createPaneView$1 = (series, model) => new SeriesCandlesticksPaneView(series, model);\nconst createSeries$1 = () => {\n    const definition = {\n        type: 'Candlestick',\n        isBuiltIn: true,\n        defaultOptions: candlestickStyleDefaults,\n        /**\n         * @internal\n         */\n        _internal_createPaneView: createPaneView$1,\n    };\n    return definition;\n};\nconst candlestickSeries = createSeries$1();\n\nconst showSpacingMinimalBarWidth = 1;\nconst alignToMinimalWidthLimit = 4;\nclass PaneRendererHistogram extends BitmapCoordinatesPaneRenderer {\n    constructor() {\n        super(...arguments);\n        this._private__data = null;\n        this._private__precalculatedCache = [];\n    }\n    _internal_setData(data) {\n        this._private__data = data;\n        this._private__precalculatedCache = [];\n    }\n    _internal__drawImpl({ context: ctx, horizontalPixelRatio, verticalPixelRatio }) {\n        if (this._private__data === null || this._private__data._internal_items.length === 0 || this._private__data._internal_visibleRange === null) {\n            return;\n        }\n        if (!this._private__precalculatedCache.length) {\n            this._private__fillPrecalculatedCache(horizontalPixelRatio);\n        }\n        const tickWidth = Math.max(1, Math.floor(verticalPixelRatio));\n        const histogramBase = Math.round((this._private__data._internal_histogramBase) * verticalPixelRatio);\n        const topHistogramBase = histogramBase - Math.floor(tickWidth / 2);\n        const bottomHistogramBase = topHistogramBase + tickWidth;\n        for (let i = this._private__data._internal_visibleRange.from; i < this._private__data._internal_visibleRange.to; i++) {\n            const item = this._private__data._internal_items[i];\n            const current = this._private__precalculatedCache[i - this._private__data._internal_visibleRange.from];\n            const y = Math.round(item._internal_y * verticalPixelRatio);\n            ctx.fillStyle = item._internal_barColor;\n            let top;\n            let bottom;\n            if (y <= topHistogramBase) {\n                top = y;\n                bottom = bottomHistogramBase;\n            }\n            else {\n                top = topHistogramBase;\n                bottom = y - Math.floor(tickWidth / 2) + tickWidth;\n            }\n            ctx.fillRect(current._internal_left, top, current._internal_right - current._internal_left + 1, bottom - top);\n        }\n    }\n    // eslint-disable-next-line complexity\n    _private__fillPrecalculatedCache(pixelRatio) {\n        if (this._private__data === null || this._private__data._internal_items.length === 0 || this._private__data._internal_visibleRange === null) {\n            this._private__precalculatedCache = [];\n            return;\n        }\n        const spacing = Math.ceil(this._private__data._internal_barSpacing * pixelRatio) <= showSpacingMinimalBarWidth ? 0 : Math.max(1, Math.floor(pixelRatio));\n        const columnWidth = Math.round(this._private__data._internal_barSpacing * pixelRatio) - spacing;\n        this._private__precalculatedCache = new Array(this._private__data._internal_visibleRange.to - this._private__data._internal_visibleRange.from);\n        for (let i = this._private__data._internal_visibleRange.from; i < this._private__data._internal_visibleRange.to; i++) {\n            const item = this._private__data._internal_items[i];\n            // force cast to avoid ensureDefined call\n            const x = Math.round(item._internal_x * pixelRatio);\n            let left;\n            let right;\n            if (columnWidth % 2) {\n                const halfWidth = (columnWidth - 1) / 2;\n                left = x - halfWidth;\n                right = x + halfWidth;\n            }\n            else {\n                // shift pixel to left\n                const halfWidth = columnWidth / 2;\n                left = x - halfWidth;\n                right = x + halfWidth - 1;\n            }\n            this._private__precalculatedCache[i - this._private__data._internal_visibleRange.from] = {\n                _internal_left: left,\n                _internal_right: right,\n                _internal_roundedCenter: x,\n                _internal_center: (item._internal_x * pixelRatio),\n                _internal_time: item._internal_time,\n            };\n        }\n        // correct positions\n        for (let i = this._private__data._internal_visibleRange.from + 1; i < this._private__data._internal_visibleRange.to; i++) {\n            const current = this._private__precalculatedCache[i - this._private__data._internal_visibleRange.from];\n            const prev = this._private__precalculatedCache[i - this._private__data._internal_visibleRange.from - 1];\n            if (current._internal_time !== prev._internal_time + 1) {\n                continue;\n            }\n            if (current._internal_left - prev._internal_right !== (spacing + 1)) {\n                // have to align\n                if (prev._internal_roundedCenter > prev._internal_center) {\n                    // prev wasshifted to left, so add pixel to right\n                    prev._internal_right = current._internal_left - spacing - 1;\n                }\n                else {\n                    // extend current to left\n                    current._internal_left = prev._internal_right + spacing + 1;\n                }\n            }\n        }\n        let minWidth = Math.ceil(this._private__data._internal_barSpacing * pixelRatio);\n        for (let i = this._private__data._internal_visibleRange.from; i < this._private__data._internal_visibleRange.to; i++) {\n            const current = this._private__precalculatedCache[i - this._private__data._internal_visibleRange.from];\n            // this could happen if barspacing < 1\n            if (current._internal_right < current._internal_left) {\n                current._internal_right = current._internal_left;\n            }\n            const width = current._internal_right - current._internal_left + 1;\n            minWidth = Math.min(width, minWidth);\n        }\n        if (spacing > 0 && minWidth < alignToMinimalWidthLimit) {\n            for (let i = this._private__data._internal_visibleRange.from; i < this._private__data._internal_visibleRange.to; i++) {\n                const current = this._private__precalculatedCache[i - this._private__data._internal_visibleRange.from];\n                const width = current._internal_right - current._internal_left + 1;\n                if (width > minWidth) {\n                    if (current._internal_roundedCenter > current._internal_center) {\n                        current._internal_right -= 1;\n                    }\n                    else {\n                        current._internal_left += 1;\n                    }\n                }\n            }\n        }\n    }\n}\n\nclass SeriesHistogramPaneView extends LinePaneViewBase {\n    constructor() {\n        super(...arguments);\n        this._internal__renderer = new PaneRendererHistogram();\n    }\n    _internal__createRawItem(time, price, colorer) {\n        return {\n            ...this._internal__createRawItemBase(time, price),\n            ...colorer._internal_barStyle(time),\n        };\n    }\n    _internal__prepareRendererData() {\n        const data = {\n            _internal_items: this._internal__items,\n            _internal_barSpacing: this._internal__model._internal_timeScale()._internal_barSpacing(),\n            _internal_visibleRange: this._internal__itemsVisibleRange,\n            _internal_histogramBase: this._internal__series._internal_priceScale()._internal_priceToCoordinate(this._internal__series._internal_options().base, ensureNotNull(this._internal__series._internal_firstValue())._internal_value),\n        };\n        this._internal__renderer._internal_setData(data);\n    }\n}\n\nconst histogramStyleDefaults = {\n    color: '#26a69a',\n    base: 0,\n};\nconst createPaneView = (series, model) => new SeriesHistogramPaneView(series, model);\nconst createSeries = () => {\n    const definition = {\n        type: 'Histogram',\n        isBuiltIn: true,\n        defaultOptions: histogramStyleDefaults,\n        /**\n         * @internal\n         */\n        _internal_createPaneView: createPaneView,\n    };\n    return definition;\n};\nconst histogramSeries = createSeries();\n\nclass PanePrimitiveWrapper {\n    constructor(pane, primitive) {\n        this._private__pane = pane;\n        this._private__primitive = primitive;\n        this._private__attach();\n    }\n    detach() {\n        this._private__pane.detachPrimitive(this._private__primitive);\n    }\n    getPane() {\n        return this._private__pane;\n    }\n    applyOptions(options) {\n        this._private__primitive._internal_applyOptions?.(options);\n    }\n    _private__attach() {\n        this._private__pane.attachPrimitive(this._private__primitive);\n    }\n}\n\nconst textWatermarkOptionsDefaults = {\n    visible: true,\n    horzAlign: 'center',\n    vertAlign: 'center',\n    lines: [],\n};\nconst textWatermarkLineOptionsDefaults = {\n    color: 'rgba(0, 0, 0, 0.5)',\n    fontSize: 48,\n    fontFamily: defaultFontFamily,\n    fontStyle: '',\n    text: '',\n};\n\nclass TextWatermarkRenderer {\n    constructor(options) {\n        this._private__metricsCache = new Map();\n        this._private__data = options;\n    }\n    draw(target) {\n        target.useMediaCoordinateSpace((scope) => {\n            if (!this._private__data.visible) {\n                return;\n            }\n            const { context: ctx, mediaSize } = scope;\n            let textHeight = 0;\n            for (const line of this._private__data.lines) {\n                if (line.text.length === 0) {\n                    continue;\n                }\n                ctx.font = line._internal_font;\n                const textWidth = this._private__metrics(ctx, line.text);\n                if (textWidth > mediaSize.width) {\n                    line._internal_zoom = mediaSize.width / textWidth;\n                }\n                else {\n                    line._internal_zoom = 1;\n                }\n                textHeight += line.lineHeight * line._internal_zoom;\n            }\n            let vertOffset = 0;\n            switch (this._private__data.vertAlign) {\n                case 'top':\n                    vertOffset = 0;\n                    break;\n                case 'center':\n                    vertOffset = Math.max((mediaSize.height - textHeight) / 2, 0);\n                    break;\n                case 'bottom':\n                    vertOffset = Math.max(mediaSize.height - textHeight, 0);\n                    break;\n            }\n            for (const line of this._private__data.lines) {\n                ctx.save();\n                ctx.fillStyle = line.color;\n                let horzOffset = 0;\n                switch (this._private__data.horzAlign) {\n                    case 'left':\n                        ctx.textAlign = 'left';\n                        horzOffset = line.lineHeight / 2;\n                        break;\n                    case 'center':\n                        ctx.textAlign = 'center';\n                        horzOffset = mediaSize.width / 2;\n                        break;\n                    case 'right':\n                        ctx.textAlign = 'right';\n                        horzOffset = mediaSize.width - 1 - line.lineHeight / 2;\n                        break;\n                }\n                ctx.translate(horzOffset, vertOffset);\n                ctx.textBaseline = 'top';\n                ctx.font = line._internal_font;\n                ctx.scale(line._internal_zoom, line._internal_zoom);\n                ctx.fillText(line.text, 0, line._internal_vertOffset);\n                ctx.restore();\n                vertOffset += line.lineHeight * line._internal_zoom;\n            }\n        });\n    }\n    _private__metrics(ctx, text) {\n        const fontCache = this._private__fontCache(ctx.font);\n        let result = fontCache.get(text);\n        if (result === undefined) {\n            result = ctx.measureText(text).width;\n            fontCache.set(text, result);\n        }\n        return result;\n    }\n    _private__fontCache(font) {\n        let fontCache = this._private__metricsCache.get(font);\n        if (fontCache === undefined) {\n            fontCache = new Map();\n            this._private__metricsCache.set(font, fontCache);\n        }\n        return fontCache;\n    }\n}\n\nclass TextWatermarkPaneView {\n    constructor(options) {\n        this._private__options = buildRendererOptions$1(options);\n    }\n    _internal_update(options) {\n        this._private__options = buildRendererOptions$1(options);\n    }\n    renderer() {\n        return new TextWatermarkRenderer(this._private__options);\n    }\n}\nfunction buildRendererLineOptions(lineOption) {\n    return {\n        ...lineOption,\n        _internal_font: makeFont(lineOption.fontSize, lineOption.fontFamily, lineOption.fontStyle),\n        lineHeight: lineOption.lineHeight || lineOption.fontSize * 1.2,\n        _internal_vertOffset: 0,\n        _internal_zoom: 0,\n    };\n}\nfunction buildRendererOptions$1(options) {\n    return {\n        ...options,\n        lines: options.lines.map(buildRendererLineOptions),\n    };\n}\n\nfunction mergeLineOptionsWithDefaults(options) {\n    return {\n        ...textWatermarkLineOptionsDefaults,\n        ...options,\n    };\n}\nfunction mergeOptionsWithDefaults$2(options) {\n    return {\n        ...textWatermarkOptionsDefaults,\n        ...options,\n        lines: options.lines?.map(mergeLineOptionsWithDefaults) ?? [],\n    };\n}\nclass TextWatermark {\n    constructor(options) {\n        this._private__options = mergeOptionsWithDefaults$2(options);\n        this._private__paneViews = [new TextWatermarkPaneView(this._private__options)];\n    }\n    updateAllViews() {\n        this._private__paneViews.forEach((pw) => pw._internal_update(this._private__options));\n    }\n    paneViews() {\n        return this._private__paneViews;\n    }\n    attached({ requestUpdate }) {\n        this._internal_requestUpdate = requestUpdate;\n    }\n    detached() {\n        this._internal_requestUpdate = undefined;\n    }\n    _internal_applyOptions(options) {\n        this._private__options = mergeOptionsWithDefaults$2({ ...this._private__options, ...options });\n        if (this._internal_requestUpdate) {\n            this._internal_requestUpdate();\n        }\n    }\n}\n/**\n * Creates an image watermark.\n *\n * @param pane - Target pane.\n * @param options - Watermark options.\n *\n * @returns Image watermark wrapper.\n *\n * @example\n * ```js\n * import { createTextWatermark } from 'lightweight-charts';\n *\n * const firstPane = chart.panes()[0];\n * const textWatermark = createTextWatermark(firstPane, {\n * \t  horzAlign: 'center',\n * \t  vertAlign: 'center',\n * \t  lines: [\n * \t    {\n * \t      text: 'Hello',\n * \t      color: 'rgba(255,0,0,0.5)',\n * \t      fontSize: 100,\n * \t      fontStyle: 'bold',\n * \t    },\n * \t    {\n * \t      text: 'This is a text watermark',\n * \t      color: 'rgba(0,0,255,0.5)',\n * \t      fontSize: 50,\n * \t      fontStyle: 'italic',\n * \t      fontFamily: 'monospace',\n * \t    },\n * \t  ],\n * });\n * // to change options\n * textWatermark.applyOptions({ horzAlign: 'left' });\n * // to remove watermark from the pane\n * textWatermark.detach();\n * ```\n */\nfunction createTextWatermark(pane, options) {\n    return new PanePrimitiveWrapper(pane, new TextWatermark(options));\n}\n\nconst imageWatermarkOptionsDefaults = {\n    alpha: 1,\n    padding: 0,\n};\n\nclass ImageWatermarkRenderer {\n    constructor(data) {\n        this._private__data = data;\n    }\n    draw(target) {\n        target.useMediaCoordinateSpace((scope) => {\n            const ctx = scope.context;\n            const pos = this._private__determinePlacement(this._private__data, scope.mediaSize);\n            if (!pos || !this._private__data._internal_imgElement) {\n                return;\n            }\n            ctx.globalAlpha = this._private__data.alpha ?? 1;\n            ctx.drawImage(this._private__data._internal_imgElement, pos._internal_x, pos._internal_y, pos._internal_width, pos._internal_height);\n        });\n    }\n    _private__determinePlacement(data, paneSize) {\n        const { maxHeight, maxWidth, _internal_imgHeight: imgHeight, _internal_imgWidth: imgWidth, padding } = data;\n        const plotCentreX = Math.round(paneSize.width / 2);\n        const plotCentreY = Math.round(paneSize.height / 2);\n        const paddingSize = padding ?? 0;\n        let availableWidth = paneSize.width - 2 * paddingSize;\n        let availableHeight = paneSize.height - 2 * paddingSize;\n        if (maxHeight) {\n            availableHeight = Math.min(availableHeight, maxHeight);\n        }\n        if (maxWidth) {\n            availableWidth = Math.min(availableWidth, maxWidth);\n        }\n        const scaleX = availableWidth / imgWidth;\n        const scaleY = availableHeight / imgHeight;\n        const scaleToUse = Math.min(scaleX, scaleY);\n        const drawWidth = imgWidth * scaleToUse;\n        const drawHeight = imgHeight * scaleToUse;\n        const x = plotCentreX - 0.5 * drawWidth;\n        const y = plotCentreY - 0.5 * drawHeight;\n        return {\n            _internal_x: x,\n            _internal_y: y,\n            _internal_height: drawHeight,\n            _internal_width: drawWidth,\n        };\n    }\n}\n\nclass ImageWatermarkPaneView {\n    constructor(options) {\n        this._private__image = null;\n        this._private__imageWidth = 0; // don't draw until loaded\n        this._private__imageHeight = 0;\n        this._private__options = options;\n        this._private__rendererOptions = buildRendererOptions(this._private__options, this._private__image, this._private__imageWidth, this._private__imageHeight);\n    }\n    _internal_stateUpdate(state) {\n        if (state._internal_imageWidth !== undefined) {\n            this._private__imageWidth = state._internal_imageWidth;\n        }\n        if (state._internal_imageHeight !== undefined) {\n            this._private__imageHeight = state._internal_imageHeight;\n        }\n        if (state._internal_image !== undefined) {\n            this._private__image = state._internal_image;\n        }\n        this._internal_update();\n    }\n    _internal_optionsUpdate(options) {\n        this._private__options = options;\n        this._internal_update();\n    }\n    zOrder() {\n        return 'bottom';\n    }\n    _internal_update() {\n        this._private__rendererOptions = buildRendererOptions(this._private__options, this._private__image, this._private__imageWidth, this._private__imageHeight);\n    }\n    renderer() {\n        return new ImageWatermarkRenderer(this._private__rendererOptions);\n    }\n}\nfunction buildRendererOptions(options, imgElement, imgWidth, imgHeight) {\n    return {\n        ...options,\n        _internal_imgElement: imgElement,\n        _internal_imgWidth: imgWidth,\n        _internal_imgHeight: imgHeight,\n    };\n}\n\nfunction mergeOptionsWithDefaults$1(options) {\n    return {\n        ...imageWatermarkOptionsDefaults,\n        ...options,\n    };\n}\nclass ImageWatermark {\n    constructor(imageUrl, options) {\n        this._private__imgElement = null;\n        this._private__imageUrl = imageUrl;\n        this._private__options = mergeOptionsWithDefaults$1(options);\n        this._private__paneViews = [new ImageWatermarkPaneView(this._private__options)];\n    }\n    updateAllViews() {\n        this._private__paneViews.forEach((pw) => pw._internal_update());\n    }\n    paneViews() {\n        return this._private__paneViews;\n    }\n    attached(attachedParams) {\n        const { requestUpdate } = attachedParams;\n        this._private__requestUpdate = requestUpdate;\n        this._private__imgElement = new Image();\n        this._private__imgElement.onload = () => {\n            const imageHeight = this._private__imgElement?.naturalHeight ?? 1;\n            const imageWidth = this._private__imgElement?.naturalWidth ?? 1;\n            this._private__paneViews.forEach((pv) => pv._internal_stateUpdate({\n                _internal_imageHeight: imageHeight,\n                _internal_imageWidth: imageWidth,\n                _internal_image: this._private__imgElement,\n            }));\n            if (this._private__requestUpdate) {\n                this._private__requestUpdate();\n            }\n        };\n        this._private__imgElement.src = this._private__imageUrl;\n    }\n    detached() {\n        this._private__requestUpdate = undefined;\n        this._private__imgElement = null;\n    }\n    _internal_applyOptions(options) {\n        this._private__options = mergeOptionsWithDefaults$1({ ...this._private__options, ...options });\n        this._private__updateOptions();\n        if (this._internal_requestUpdate) {\n            this._internal_requestUpdate();\n        }\n    }\n    _internal_requestUpdate() {\n        if (this._private__requestUpdate) {\n            this._private__requestUpdate();\n        }\n    }\n    _private__updateOptions() {\n        this._private__paneViews.forEach((pw) => pw._internal_optionsUpdate(this._private__options));\n    }\n}\n/**\n * Creates an image watermark.\n *\n * @param pane - Target pane.\n * @param imageUrl - Image URL.\n * @param options - Watermark options.\n *\n * @returns Image watermark wrapper.\n *\n * @example\n * ```js\n * import { createImageWatermark } from 'lightweight-charts';\n *\n * const firstPane = chart.panes()[0];\n * const imageWatermark = createImageWatermark(firstPane, '/images/my-image.png', {\n *   alpha: 0.5,\n *   padding: 20,\n * });\n * // to change options\n * imageWatermark.applyOptions({ padding: 10 });\n * // to remove watermark from the pane\n * imageWatermark.detach();\n * ```\n */\nfunction createImageWatermark(pane, imageUrl, options) {\n    return new PanePrimitiveWrapper(pane, new ImageWatermark(imageUrl, options));\n}\n\nclass SeriesPrimitiveAdapter {\n    constructor(series, primitive) {\n        this._internal__series = series;\n        this._internal__primitive = primitive;\n        this._private__attach();\n    }\n    detach() {\n        this._internal__series.detachPrimitive(this._internal__primitive);\n    }\n    getSeries() {\n        return this._internal__series;\n    }\n    applyOptions(options) {\n        if (this._internal__primitive && this._internal__primitive._internal_applyOptions) {\n            this._internal__primitive._internal_applyOptions(options);\n        }\n    }\n    _private__attach() {\n        this._internal__series.attachPrimitive(this._internal__primitive);\n    }\n}\n\nconst seriesMarkerOptionsDefaults = {\n    zOrder: 'normal',\n};\n\nfunction size(barSpacing, coeff) {\n    const result = Math.min(Math.max(barSpacing, 12 /* Constants.MinShapeSize */), 30 /* Constants.MaxShapeSize */) * coeff;\n    return ceiledOdd(result);\n}\nfunction shapeSize(shape, originalSize) {\n    switch (shape) {\n        case 'arrowDown':\n        case 'arrowUp':\n            return size(originalSize, 1);\n        case 'circle':\n            return size(originalSize, 0.8);\n        case 'square':\n            return size(originalSize, 0.7);\n    }\n}\nfunction calculateShapeHeight(barSpacing) {\n    return ceiledEven(size(barSpacing, 1));\n}\nfunction shapeMargin(barSpacing) {\n    return Math.max(size(barSpacing, 0.1), 3 /* Constants.MinShapeMargin */);\n}\nfunction calculateAdjustedMargin(margin, hasSide, hasInBar) {\n    if (hasSide) {\n        return margin;\n    }\n    else if (hasInBar) {\n        return Math.ceil(margin / 2);\n    }\n    return 0;\n}\n\nfunction drawArrow(up, ctx, coords, size) {\n    const arrowSize = shapeSize('arrowUp', size);\n    const halfArrowSize = ((arrowSize - 1) / 2) * coords._internal_pixelRatio;\n    const baseSize = ceiledOdd(size / 2);\n    const halfBaseSize = ((baseSize - 1) / 2) * coords._internal_pixelRatio;\n    ctx.beginPath();\n    if (up) {\n        ctx.moveTo(coords._internal_x - halfArrowSize, coords._internal_y);\n        ctx.lineTo(coords._internal_x, coords._internal_y - halfArrowSize);\n        ctx.lineTo(coords._internal_x + halfArrowSize, coords._internal_y);\n        ctx.lineTo(coords._internal_x + halfBaseSize, coords._internal_y);\n        ctx.lineTo(coords._internal_x + halfBaseSize, coords._internal_y + halfArrowSize);\n        ctx.lineTo(coords._internal_x - halfBaseSize, coords._internal_y + halfArrowSize);\n        ctx.lineTo(coords._internal_x - halfBaseSize, coords._internal_y);\n    }\n    else {\n        ctx.moveTo(coords._internal_x - halfArrowSize, coords._internal_y);\n        ctx.lineTo(coords._internal_x, coords._internal_y + halfArrowSize);\n        ctx.lineTo(coords._internal_x + halfArrowSize, coords._internal_y);\n        ctx.lineTo(coords._internal_x + halfBaseSize, coords._internal_y);\n        ctx.lineTo(coords._internal_x + halfBaseSize, coords._internal_y - halfArrowSize);\n        ctx.lineTo(coords._internal_x - halfBaseSize, coords._internal_y - halfArrowSize);\n        ctx.lineTo(coords._internal_x - halfBaseSize, coords._internal_y);\n    }\n    ctx.fill();\n}\nfunction hitTestArrow(up, centerX, centerY, size, x, y) {\n    const arrowSize = shapeSize('arrowUp', size);\n    const halfArrowSize = (arrowSize - 1) / 2;\n    const baseSize = ceiledOdd(size / 2);\n    const halfBaseSize = (baseSize - 1) / 2;\n    const triangleTolerance = 3;\n    const rectTolerance = 2;\n    const baseLeft = centerX - halfBaseSize - rectTolerance;\n    const baseRight = centerX + halfBaseSize + rectTolerance;\n    const baseTop = up ? centerY : centerY - halfArrowSize;\n    const baseBottom = up ? centerY + halfArrowSize : centerY;\n    if (x >= baseLeft && x <= baseRight &&\n        y >= baseTop - rectTolerance && y <= baseBottom + rectTolerance) {\n        return true;\n    }\n    const isInTriangleBounds = () => {\n        const headLeft = centerX - halfArrowSize - triangleTolerance;\n        const headRight = centerX + halfArrowSize + triangleTolerance;\n        const headTop = up ? centerY - halfArrowSize - triangleTolerance : centerY;\n        const headBottom = up ? centerY : centerY + halfArrowSize + triangleTolerance;\n        if (x < headLeft || x > headRight ||\n            y < headTop || y > headBottom) {\n            return false;\n        }\n        const dx = Math.abs(x - centerX);\n        const dy = up\n            ? Math.abs(y - centerY) // up arrow\n            : Math.abs(y - centerY); // down arrow\n        return dy + triangleTolerance >= dx / 2;\n    };\n    return isInTriangleBounds();\n}\n\nfunction drawCircle(ctx, coords, size) {\n    const circleSize = shapeSize('circle', size);\n    const halfSize = (circleSize - 1) / 2;\n    ctx.beginPath();\n    ctx.arc(coords._internal_x, coords._internal_y, halfSize * coords._internal_pixelRatio, 0, 2 * Math.PI, false);\n    ctx.fill();\n}\nfunction hitTestCircle(centerX, centerY, size, x, y) {\n    const circleSize = shapeSize('circle', size);\n    const tolerance = 2 + circleSize / 2;\n    const xOffset = centerX - x;\n    const yOffset = centerY - y;\n    const dist = Math.sqrt(xOffset * xOffset + yOffset * yOffset);\n    return dist <= tolerance;\n}\n\nfunction drawSquare(ctx, coords, size) {\n    const squareSize = shapeSize('square', size);\n    const halfSize = ((squareSize - 1) * coords._internal_pixelRatio) / 2;\n    const left = coords._internal_x - halfSize;\n    const top = coords._internal_y - halfSize;\n    ctx.fillRect(left, top, squareSize * coords._internal_pixelRatio, squareSize * coords._internal_pixelRatio);\n}\nfunction hitTestSquare(centerX, centerY, size, x, y) {\n    const squareSize = shapeSize('square', size);\n    const halfSize = (squareSize - 1) / 2;\n    const left = centerX - halfSize;\n    const top = centerY - halfSize;\n    return x >= left && x <= left + squareSize &&\n        y >= top && y <= top + squareSize;\n}\n\nfunction drawText(ctx, text, x, y, horizontalPixelRatio, verticalPixelRatio) {\n    ctx.save();\n    ctx.scale(horizontalPixelRatio, verticalPixelRatio);\n    ctx.fillText(text, x, y);\n    ctx.restore();\n}\nfunction hitTestText(textX, textY, textWidth, textHeight, x, y) {\n    const halfHeight = textHeight / 2;\n    return x >= textX && x <= textX + textWidth &&\n        y >= textY - halfHeight && y <= textY + halfHeight;\n}\n\nclass SeriesMarkersRenderer {\n    constructor() {\n        this._private__data = null;\n        this._private__textWidthCache = new TextWidthCache();\n        this._private__fontSize = -1;\n        this._private__fontFamily = '';\n        this._private__font = '';\n        this._private__zOrder = 'normal';\n    }\n    _internal_setData(data) {\n        this._private__data = data;\n    }\n    _internal_setParams(fontSize, fontFamily, zOrder) {\n        if (this._private__fontSize !== fontSize || this._private__fontFamily !== fontFamily) {\n            this._private__fontSize = fontSize;\n            this._private__fontFamily = fontFamily;\n            this._private__font = makeFont(fontSize, fontFamily);\n            this._private__textWidthCache._internal_reset();\n        }\n        this._private__zOrder = zOrder;\n    }\n    _internal_hitTest(x, y) {\n        if (this._private__data === null || this._private__data._internal_visibleRange === null) {\n            return null;\n        }\n        for (let i = this._private__data._internal_visibleRange.from; i < this._private__data._internal_visibleRange.to; i++) {\n            const item = this._private__data._internal_items[i];\n            if (item && hitTestItem(item, x, y)) {\n                return {\n                    zOrder: 'normal',\n                    externalId: item._internal_externalId ?? '',\n                };\n            }\n        }\n        return null;\n    }\n    draw(target) {\n        if (this._private__zOrder === 'aboveSeries') {\n            return;\n        }\n        target.useBitmapCoordinateSpace((scope) => {\n            this._internal__drawImpl(scope);\n        });\n    }\n    drawBackground(target) {\n        if (this._private__zOrder !== 'aboveSeries') {\n            return;\n        }\n        target.useBitmapCoordinateSpace((scope) => {\n            this._internal__drawImpl(scope);\n        });\n    }\n    _internal__drawImpl({ context: ctx, horizontalPixelRatio, verticalPixelRatio }) {\n        if (this._private__data === null || this._private__data._internal_visibleRange === null) {\n            return;\n        }\n        ctx.textBaseline = 'middle';\n        ctx.font = this._private__font;\n        for (let index = this._private__data._internal_visibleRange.from; index < this._private__data._internal_visibleRange.to; index++) {\n            const item = this._private__data._internal_items[index];\n            if (item._internal_text !== undefined) {\n                item._internal_text._internal_width = this._private__textWidthCache._internal_measureText(ctx, item._internal_text._internal_content);\n                item._internal_text._internal_height = this._private__fontSize;\n                item._internal_text._internal_x = item._internal_x - item._internal_text._internal_width / 2;\n            }\n            drawItem(item, ctx, horizontalPixelRatio, verticalPixelRatio);\n        }\n    }\n}\nfunction bitmapShapeItemCoordinates(item, horizontalPixelRatio, verticalPixelRatio) {\n    const tickWidth = Math.max(1, Math.floor(horizontalPixelRatio));\n    const correction = (tickWidth % 2) / 2;\n    return {\n        _internal_x: Math.round(item._internal_x * horizontalPixelRatio) + correction,\n        _internal_y: item._internal_y * verticalPixelRatio,\n        _internal_pixelRatio: horizontalPixelRatio,\n    };\n}\nfunction drawItem(item, ctx, horizontalPixelRatio, verticalPixelRatio) {\n    ctx.fillStyle = item._internal_color;\n    if (item._internal_text !== undefined) {\n        drawText(ctx, item._internal_text._internal_content, item._internal_text._internal_x, item._internal_text._internal_y, horizontalPixelRatio, verticalPixelRatio);\n    }\n    drawShape(item, ctx, bitmapShapeItemCoordinates(item, horizontalPixelRatio, verticalPixelRatio));\n}\nfunction drawShape(item, ctx, coordinates) {\n    if (item._internal_size === 0) {\n        return;\n    }\n    switch (item._internal_shape) {\n        case 'arrowDown':\n            drawArrow(false, ctx, coordinates, item._internal_size);\n            return;\n        case 'arrowUp':\n            drawArrow(true, ctx, coordinates, item._internal_size);\n            return;\n        case 'circle':\n            drawCircle(ctx, coordinates, item._internal_size);\n            return;\n        case 'square':\n            drawSquare(ctx, coordinates, item._internal_size);\n            return;\n    }\n    ensureNever(item._internal_shape);\n}\nfunction hitTestItem(item, x, y) {\n    if (item._internal_text !== undefined && hitTestText(item._internal_text._internal_x, item._internal_text._internal_y, item._internal_text._internal_width, item._internal_text._internal_height, x, y)) {\n        return true;\n    }\n    return hitTestShape(item, x, y);\n}\nfunction hitTestShape(item, x, y) {\n    if (item._internal_size === 0) {\n        return false;\n    }\n    switch (item._internal_shape) {\n        case 'arrowDown':\n            return hitTestArrow(true, item._internal_x, item._internal_y, item._internal_size, x, y);\n        case 'arrowUp':\n            return hitTestArrow(false, item._internal_x, item._internal_y, item._internal_size, x, y);\n        case 'circle':\n            return hitTestCircle(item._internal_x, item._internal_y, item._internal_size, x, y);\n        case 'square':\n            return hitTestSquare(item._internal_x, item._internal_y, item._internal_size, x, y);\n    }\n}\n\nfunction isPriceMarker(position) {\n    return position === 'atPriceTop' || position === 'atPriceBottom' || position === 'atPriceMiddle';\n}\nfunction getPrice(seriesData, marker) {\n    if (isPriceMarker(marker.position) && marker.price !== undefined) {\n        return marker.price;\n    }\n    if (isValueData(seriesData)) {\n        return seriesData.value;\n    }\n    if (isOhlcData(seriesData)) {\n        if (marker.position === 'inBar') {\n            return seriesData.close;\n        }\n        if (marker.position === 'aboveBar') {\n            return seriesData.high;\n        }\n        if (marker.position === 'belowBar') {\n            return seriesData.low;\n        }\n    }\n    return;\n}\n// eslint-disable-next-line max-params, complexity\nfunction fillSizeAndY(rendererItem, marker, seriesData, offsets, textHeight, shapeMargin, series, chart) {\n    const price = getPrice(seriesData, marker);\n    if (price === undefined) {\n        return;\n    }\n    const ignoreOffset = isPriceMarker(marker.position);\n    const timeScale = chart.timeScale();\n    const sizeMultiplier = isNumber(marker.size) ? Math.max(marker.size, 0) : 1;\n    const shapeSize = calculateShapeHeight(timeScale.options().barSpacing) * sizeMultiplier;\n    const halfSize = shapeSize / 2;\n    rendererItem._internal_size = shapeSize;\n    const position = marker.position;\n    switch (position) {\n        case 'inBar':\n        case 'atPriceMiddle': {\n            rendererItem._internal_y = ensureNotNull(series.priceToCoordinate(price));\n            if (rendererItem._internal_text !== undefined) {\n                rendererItem._internal_text._internal_y = rendererItem._internal_y + halfSize + shapeMargin + textHeight * (0.5 + 0.1 /* Constants.TextMargin */);\n            }\n            return;\n        }\n        case 'aboveBar':\n        case 'atPriceTop': {\n            const offset = ignoreOffset ? 0 : offsets._internal_aboveBar;\n            rendererItem._internal_y = (ensureNotNull(series.priceToCoordinate(price)) - halfSize - offset);\n            if (rendererItem._internal_text !== undefined) {\n                rendererItem._internal_text._internal_y = rendererItem._internal_y - halfSize - textHeight * (0.5 + 0.1 /* Constants.TextMargin */);\n                offsets._internal_aboveBar += textHeight * (1 + 2 * 0.1 /* Constants.TextMargin */);\n            }\n            if (!ignoreOffset) {\n                offsets._internal_aboveBar += shapeSize + shapeMargin;\n            }\n            return;\n        }\n        case 'belowBar':\n        case 'atPriceBottom': {\n            const offset = ignoreOffset ? 0 : offsets._internal_belowBar;\n            rendererItem._internal_y = (ensureNotNull(series.priceToCoordinate(price)) + halfSize + offset);\n            if (rendererItem._internal_text !== undefined) {\n                rendererItem._internal_text._internal_y = (rendererItem._internal_y + halfSize + shapeMargin + textHeight * (0.5 + 0.1 /* Constants.TextMargin */));\n                offsets._internal_belowBar += textHeight * (1 + 2 * 0.1 /* Constants.TextMargin */);\n            }\n            if (!ignoreOffset) {\n                offsets._internal_belowBar += shapeSize + shapeMargin;\n            }\n            return;\n        }\n    }\n}\nfunction isValueData(data) {\n    // eslint-disable-next-line no-restricted-syntax\n    return 'value' in data && typeof data.value === 'number';\n}\nfunction isOhlcData(data) {\n    // eslint-disable-next-line no-restricted-syntax\n    return 'open' in data && 'high' in data && 'low' in data && 'close' in data;\n}\nclass SeriesMarkersPaneView {\n    constructor(series, chart, options) {\n        this._private__markers = [];\n        this._private__invalidated = true;\n        this._private__dataInvalidated = true;\n        this._private__renderer = new SeriesMarkersRenderer();\n        this._private__series = series;\n        this._private__chart = chart;\n        this._private__data = {\n            _internal_items: [],\n            _internal_visibleRange: null,\n        };\n        this._private__options = options;\n    }\n    renderer() {\n        if (!this._private__series.options().visible) {\n            return null;\n        }\n        if (this._private__invalidated) {\n            this._internal__makeValid();\n        }\n        const layout = this._private__chart.options()['layout'];\n        this._private__renderer._internal_setParams(layout.fontSize, layout.fontFamily, this._private__options.zOrder);\n        this._private__renderer._internal_setData(this._private__data);\n        return this._private__renderer;\n    }\n    _internal_setMarkers(markers) {\n        this._private__markers = markers;\n        this._internal_update('data');\n    }\n    _internal_update(updateType) {\n        this._private__invalidated = true;\n        if (updateType === 'data') {\n            this._private__dataInvalidated = true;\n        }\n    }\n    _internal_updateOptions(options) {\n        this._private__invalidated = true;\n        this._private__options = options;\n    }\n    zOrder() {\n        return this._private__options.zOrder === 'aboveSeries' ? 'top' : this._private__options.zOrder;\n    }\n    _internal__makeValid() {\n        const timeScale = this._private__chart.timeScale();\n        const seriesMarkers = this._private__markers;\n        if (this._private__dataInvalidated) {\n            this._private__data._internal_items = seriesMarkers.map((marker) => ({\n                _internal_time: marker.time,\n                _internal_x: 0,\n                _internal_y: 0,\n                _internal_size: 0,\n                _internal_shape: marker.shape,\n                _internal_color: marker.color,\n                _internal_externalId: marker.id,\n                _internal_internalId: marker._internal_internalId,\n                _internal_text: undefined,\n            }));\n            this._private__dataInvalidated = false;\n        }\n        const layoutOptions = this._private__chart.options()['layout'];\n        this._private__data._internal_visibleRange = null;\n        const visibleBars = timeScale.getVisibleLogicalRange();\n        if (visibleBars === null) {\n            return;\n        }\n        const visibleBarsRange = new RangeImpl(Math.floor(visibleBars.from), Math.ceil(visibleBars.to));\n        const firstValue = this._private__series.data()[0];\n        if (firstValue === null) {\n            return;\n        }\n        if (this._private__data._internal_items.length === 0) {\n            return;\n        }\n        let prevTimeIndex = NaN;\n        const shapeMargin$1 = shapeMargin(timeScale.options().barSpacing);\n        const offsets = {\n            _internal_aboveBar: shapeMargin$1,\n            _internal_belowBar: shapeMargin$1,\n        };\n        this._private__data._internal_visibleRange = visibleTimedValues(this._private__data._internal_items, visibleBarsRange, true);\n        for (let index = this._private__data._internal_visibleRange.from; index < this._private__data._internal_visibleRange.to; index++) {\n            const marker = seriesMarkers[index];\n            if (marker.time !== prevTimeIndex) {\n                // new bar, reset stack counter\n                offsets._internal_aboveBar = shapeMargin$1;\n                offsets._internal_belowBar = shapeMargin$1;\n                prevTimeIndex = marker.time;\n            }\n            const rendererItem = this._private__data._internal_items[index];\n            rendererItem._internal_x = ensureNotNull(timeScale.logicalToCoordinate(marker.time));\n            if (marker.text !== undefined && marker.text.length > 0) {\n                rendererItem._internal_text = {\n                    _internal_content: marker.text,\n                    _internal_x: 0,\n                    _internal_y: 0,\n                    _internal_width: 0,\n                    _internal_height: 0,\n                };\n            }\n            const dataAt = this._private__series.dataByIndex(marker.time, 0 /* MismatchDirection.None */);\n            if (dataAt === null) {\n                continue;\n            }\n            fillSizeAndY(rendererItem, marker, dataAt, offsets, layoutOptions.fontSize, shapeMargin$1, this._private__series, this._private__chart);\n        }\n        this._private__invalidated = false;\n    }\n}\n\nfunction mergeOptionsWithDefaults(options) {\n    return {\n        ...seriesMarkerOptionsDefaults,\n        ...options,\n    };\n}\nclass SeriesMarkersPrimitive {\n    constructor(options) {\n        this._private__paneView = null;\n        this._private__markers = [];\n        this._private__indexedMarkers = [];\n        this._private__dataChangedHandler = null;\n        this._private__series = null;\n        this._private__chart = null;\n        this._private__autoScaleMarginsInvalidated = true;\n        this._private__autoScaleMargins = null;\n        this._private__markersPositions = null;\n        this._private__cachedBarSpacing = null;\n        this._private__recalculationRequired = true;\n        this._private__options = mergeOptionsWithDefaults(options);\n    }\n    attached(param) {\n        this._private__recalculateMarkers();\n        this._private__chart = param.chart;\n        this._private__series = param.series;\n        this._private__paneView = new SeriesMarkersPaneView(this._private__series, ensureNotNull(this._private__chart), this._private__options);\n        this._private__requestUpdate = param.requestUpdate;\n        this._private__series.subscribeDataChanged((scope) => this._private__onDataChanged(scope));\n        this._private__recalculationRequired = true;\n        this._internal_requestUpdate();\n    }\n    _internal_requestUpdate() {\n        if (this._private__requestUpdate) {\n            this._private__requestUpdate();\n        }\n    }\n    detached() {\n        if (this._private__series && this._private__dataChangedHandler) {\n            this._private__series.unsubscribeDataChanged(this._private__dataChangedHandler);\n        }\n        this._private__chart = null;\n        this._private__series = null;\n        this._private__paneView = null;\n        this._private__dataChangedHandler = null;\n    }\n    _internal_setMarkers(markers) {\n        this._private__recalculationRequired = true;\n        this._private__markers = markers;\n        this._private__recalculateMarkers();\n        this._private__autoScaleMarginsInvalidated = true;\n        this._private__markersPositions = null;\n        this._internal_requestUpdate();\n    }\n    _internal_markers() {\n        return this._private__markers;\n    }\n    paneViews() {\n        return this._private__paneView ? [this._private__paneView] : [];\n    }\n    updateAllViews() {\n        this._private__updateAllViews();\n    }\n    hitTest(x, y) {\n        if (this._private__paneView) {\n            return this._private__paneView.renderer()?._internal_hitTest(x, y) ?? null;\n        }\n        return null;\n    }\n    autoscaleInfo(startTimePoint, endTimePoint) {\n        if (this._private__paneView) {\n            const margins = this._private__getAutoScaleMargins();\n            if (margins) {\n                return {\n                    priceRange: null,\n                    margins: margins,\n                };\n            }\n        }\n        return null;\n    }\n    _internal_applyOptions(options) {\n        this._private__options = mergeOptionsWithDefaults({ ...this._private__options, ...options });\n        if (this._internal_requestUpdate) {\n            this._internal_requestUpdate();\n        }\n    }\n    _private__getAutoScaleMargins() {\n        const chart = ensureNotNull(this._private__chart);\n        const barSpacing = chart.timeScale().options().barSpacing;\n        if (this._private__autoScaleMarginsInvalidated || barSpacing !== this._private__cachedBarSpacing) {\n            this._private__cachedBarSpacing = barSpacing;\n            if (this._private__markers.length > 0) {\n                const shapeMargin$1 = shapeMargin(barSpacing);\n                const marginValue = calculateShapeHeight(barSpacing) * 1.5 + shapeMargin$1 * 2;\n                const positions = this._private__getMarkerPositions();\n                this._private__autoScaleMargins = {\n                    above: calculateAdjustedMargin(marginValue, positions.aboveBar, positions.inBar),\n                    below: calculateAdjustedMargin(marginValue, positions.belowBar, positions.inBar),\n                };\n            }\n            else {\n                this._private__autoScaleMargins = null;\n            }\n            this._private__autoScaleMarginsInvalidated = false;\n        }\n        return this._private__autoScaleMargins;\n    }\n    _private__getMarkerPositions() {\n        if (this._private__markersPositions === null) {\n            this._private__markersPositions = this._private__markers.reduce((acc, marker) => {\n                if (!acc[marker.position]) {\n                    acc[marker.position] = true;\n                }\n                return acc;\n            }, {\n                inBar: false,\n                aboveBar: false,\n                belowBar: false,\n                atPriceTop: false,\n                atPriceBottom: false,\n                atPriceMiddle: false,\n            });\n        }\n        return this._private__markersPositions;\n    }\n    _private__recalculateMarkers() {\n        if (!this._private__recalculationRequired || !this._private__chart || !this._private__series) {\n            return;\n        }\n        const timeScale = this._private__chart.timeScale();\n        const seriesData = this._private__series?.data();\n        if (timeScale.getVisibleLogicalRange() == null || !this._private__series || seriesData.length === 0) {\n            this._private__indexedMarkers = [];\n            return;\n        }\n        const firstDataIndex = timeScale.timeToIndex(ensureNotNull(seriesData[0].time), true);\n        this._private__indexedMarkers = this._private__markers.map((marker, index) => {\n            const timePointIndex = timeScale.timeToIndex(marker.time, true);\n            const searchMode = timePointIndex < firstDataIndex ? 1 /* MismatchDirection.NearestRight */ : -1 /* MismatchDirection.NearestLeft */;\n            const seriesDataByIndex = ensureNotNull(this._private__series).dataByIndex(timePointIndex, searchMode);\n            const finalIndex = timeScale.timeToIndex(ensureNotNull(seriesDataByIndex).time, false);\n            // You must explicitly define the types so that the minification build processes the field names correctly\n            const baseMarker = {\n                time: finalIndex,\n                position: marker.position,\n                shape: marker.shape,\n                color: marker.color,\n                id: marker.id,\n                _internal_internalId: index,\n                text: marker.text,\n                size: marker.size,\n                price: marker.price,\n                _internal_originalTime: marker.time,\n            };\n            if (marker.position === 'atPriceTop' ||\n                marker.position === 'atPriceBottom' ||\n                marker.position === 'atPriceMiddle') {\n                if (marker.price === undefined) {\n                    throw new Error(`Price is required for position ${marker.position}`);\n                }\n                return {\n                    ...baseMarker,\n                    position: marker.position, // TypeScript knows this is SeriesMarkerPricePosition\n                    price: marker.price,\n                };\n            }\n            else {\n                return {\n                    ...baseMarker,\n                    position: marker.position, // TypeScript knows this is SeriesMarkerBarPosition\n                    price: marker.price, // Optional for bar positions\n                };\n            }\n        });\n        this._private__recalculationRequired = false;\n    }\n    _private__updateAllViews(updateType) {\n        if (this._private__paneView) {\n            this._private__recalculateMarkers();\n            this._private__paneView._internal_setMarkers(this._private__indexedMarkers);\n            this._private__paneView._internal_updateOptions(this._private__options);\n            this._private__paneView._internal_update(updateType);\n        }\n    }\n    _private__onDataChanged(scope) {\n        this._private__recalculationRequired = true;\n        this._internal_requestUpdate();\n    }\n}\n\nclass SeriesMarkersPrimitiveWrapper extends SeriesPrimitiveAdapter {\n    constructor(series, primitive, markers) {\n        super(series, primitive);\n        if (markers) {\n            this.setMarkers(markers);\n        }\n    }\n    setMarkers(markers) {\n        this._internal__primitive._internal_setMarkers(markers);\n    }\n    markers() {\n        return this._internal__primitive._internal_markers();\n    }\n}\n/**\n * A function to create a series markers primitive.\n *\n * @param series - The series to which the primitive will be attached.\n *\n * @param markers - An array of markers to be displayed on the series.\n *\n * @param options - Options for the series markers plugin.\n *\n * @example\n * ```js\n * import { createSeriesMarkers } from 'lightweight-charts';\n *\n *\tconst seriesMarkers = createSeriesMarkers(\n *\t\tseries,\n *\t\t[\n *\t\t\t{\n *\t\t\t\tcolor: 'green',\n *\t\t\t\tposition: 'inBar',\n * \t\t\t\tshape: 'arrowDown',\n *\t\t\t\ttime: 1556880900,\n *\t\t\t},\n *\t\t]\n *\t);\n *  // and then you can modify the markers\n *  // set it to empty array to remove all markers\n *  seriesMarkers.setMarkers([]);\n *\n *  // `seriesMarkers.markers()` returns current markers\n * ```\n */\nfunction createSeriesMarkers(series, markers, options) {\n    const wrapper = new SeriesMarkersPrimitiveWrapper(series, new SeriesMarkersPrimitive(options ?? {}));\n    if (markers) {\n        wrapper.setMarkers(markers);\n    }\n    return wrapper;\n}\n\nclass ExpiringMarkerManager {\n    constructor(updateCallback) {\n        this._private__markers = new Map();\n        this._private__updateCallback = updateCallback;\n    }\n    _internal_setMarker(marker, key, timeout) {\n        this._internal_clearMarker(key);\n        if (timeout !== undefined) {\n            const timeoutId = window.setTimeout(() => {\n                this._private__markers.delete(key);\n                this._private__triggerUpdate();\n            }, timeout);\n            const markerWithTimeout = {\n                ...marker,\n                _internal_timeoutId: timeoutId,\n                _internal_expiresAt: Date.now() + timeout,\n            };\n            this._private__markers.set(key, markerWithTimeout);\n        }\n        else {\n            // For markers without timeout, we set timeoutId and expiresAt to undefined\n            this._private__markers.set(key, {\n                ...marker,\n                _internal_timeoutId: undefined,\n                _internal_expiresAt: undefined,\n            });\n        }\n        this._private__triggerUpdate();\n    }\n    _internal_clearMarker(key) {\n        const marker = this._private__markers.get(key);\n        if (marker && marker._internal_timeoutId !== undefined) {\n            window.clearTimeout(marker._internal_timeoutId);\n        }\n        this._private__markers.delete(key);\n        this._private__triggerUpdate();\n    }\n    _internal_clearAllMarkers() {\n        for (const [point] of this._private__markers) {\n            this._internal_clearMarker(point);\n        }\n    }\n    _internal_getMarkers() {\n        const now = Date.now();\n        const activeMarkers = [];\n        for (const [time, marker] of this._private__markers) {\n            if (!marker._internal_expiresAt || marker._internal_expiresAt > now) {\n                activeMarkers.push({ time: marker.time, sign: marker.sign, value: marker.value });\n            }\n            else {\n                this._internal_clearMarker(time);\n            }\n        }\n        return activeMarkers;\n    }\n    _internal_setUpdateCallback(callback) {\n        this._private__updateCallback = callback;\n    }\n    _private__triggerUpdate() {\n        if (this._private__updateCallback) {\n            this._private__updateCallback();\n        }\n    }\n}\n\nconst upDownMarkersPluginOptionDefaults = {\n    positiveColor: '#22AB94',\n    negativeColor: '#F7525F',\n    updateVisibilityDuration: 5000,\n};\n\nclass MarkersPrimitiveRenderer {\n    constructor(data, neutralColor, negativeColor, positiveColor) {\n        this._private__data = data;\n        this._private__neutralColor = neutralColor;\n        this._private__negativeColor = negativeColor;\n        this._private__positiveColor = positiveColor;\n    }\n    draw(target) {\n        target.useBitmapCoordinateSpace((scope) => {\n            const ctx = scope.context;\n            const tickWidth = Math.max(1, Math.floor(scope.horizontalPixelRatio));\n            const correction = (tickWidth % 2) / 2;\n            const rad = 4 /* Constants.Radius */ * scope.verticalPixelRatio + correction;\n            this._private__data.forEach((item) => {\n                const centreX = Math.round(item._internal_x * scope.horizontalPixelRatio) + correction;\n                ctx.beginPath();\n                const color = this._private__getColor(item._internal_sign);\n                ctx.fillStyle = color;\n                ctx.arc(centreX, item._internal_y * scope.verticalPixelRatio, rad, 0, 2 * Math.PI, false);\n                ctx.fill();\n                if (item._internal_sign) {\n                    ctx.strokeStyle = color;\n                    ctx.lineWidth = Math.floor(2 /* Constants.ArrowLineWidth */ * scope.horizontalPixelRatio);\n                    ctx.beginPath();\n                    ctx.moveTo((item._internal_x - 4.7 /* Constants.ArrowSize */) * scope.horizontalPixelRatio + correction, (item._internal_y - 7 /* Constants.ArrowOffset */ * item._internal_sign) *\n                        scope.verticalPixelRatio);\n                    ctx.lineTo(item._internal_x * scope.horizontalPixelRatio + correction, (item._internal_y -\n                        7 /* Constants.ArrowOffset */ * item._internal_sign -\n                        7 /* Constants.ArrowOffset */ * item._internal_sign * 0.5 /* Constants.VerticalScale */) *\n                        scope.verticalPixelRatio);\n                    ctx.lineTo((item._internal_x + 4.7 /* Constants.ArrowSize */) * scope.horizontalPixelRatio + correction, (item._internal_y - 7 /* Constants.ArrowOffset */ * item._internal_sign) *\n                        scope.verticalPixelRatio);\n                    ctx.stroke();\n                }\n            });\n        });\n    }\n    _private__getColor(sign) {\n        if (sign === 0) {\n            return this._private__neutralColor;\n        }\n        return sign > 0 ? this._private__positiveColor : this._private__negativeColor;\n    }\n}\n\nfunction isAreaStyleOptions(opts, seriesType) {\n    return seriesType === 'Area';\n}\nfunction getNeutralColor(opts, seriesType) {\n    if (isAreaStyleOptions(opts, seriesType)) {\n        return opts.lineColor;\n    }\n    return opts.color;\n}\nclass MarkersPrimitivePaneView {\n    constructor(series, timeScale, options) {\n        this._private__data = [];\n        this._private__series = series;\n        this._private__timeScale = timeScale;\n        this._private__options = options;\n    }\n    _internal_update(markers) {\n        this._private__data = markers.map((marker) => {\n            const y = this._private__series.priceToCoordinate(marker.value);\n            if (y === null) {\n                return null;\n            }\n            const x = ensureNotNull(this._private__timeScale.timeToCoordinate(marker.time));\n            return {\n                _internal_x: x,\n                _internal_y: y,\n                _internal_sign: marker.sign,\n            };\n        })\n            .filter(notNull);\n    }\n    renderer() {\n        const options = this._private__series.options();\n        const seriesType = this._private__series.seriesType();\n        const neutralColor = getNeutralColor(options, seriesType);\n        return new MarkersPrimitiveRenderer(this._private__data, neutralColor, this._private__options.negativeColor, this._private__options.positiveColor);\n    }\n}\n\nfunction isLineData(item, type) {\n    return type === 'Line' || type === 'Area';\n}\nclass UpDownMarkersPrimitive {\n    constructor(options) {\n        this._private__chart = undefined;\n        this._private__series = undefined;\n        this._private__paneViews = [];\n        this._private__horzScaleBehavior = null;\n        this._private__managedDataPoints = new Map();\n        this._private__markersManager = new ExpiringMarkerManager(() => this._internal_requestUpdate());\n        this._private__options = {\n            ...upDownMarkersPluginOptionDefaults,\n            ...options,\n        };\n    }\n    _internal_applyOptions(options) {\n        this._private__options = {\n            ...this._private__options,\n            ...options,\n        };\n        this._internal_requestUpdate();\n    }\n    _internal_setMarkers(markers) {\n        this._private__markersManager._internal_clearAllMarkers();\n        const horzBehaviour = this._private__horzScaleBehavior;\n        if (!horzBehaviour) {\n            return;\n        }\n        markers.forEach((marker) => {\n            this._private__markersManager._internal_setMarker(marker, horzBehaviour.key(marker.time));\n        });\n    }\n    _internal_markers() {\n        return this._private__markersManager._internal_getMarkers();\n    }\n    _internal_requestUpdate() {\n        this._private__requestUpdate?.();\n    }\n    attached(params) {\n        const { chart, series, requestUpdate, horzScaleBehavior, } = params;\n        this._private__chart = chart;\n        this._private__series = series;\n        this._private__horzScaleBehavior = horzScaleBehavior;\n        const seriesType = this._private__series.seriesType();\n        if (seriesType !== 'Area' && seriesType !== 'Line') {\n            throw new Error('UpDownMarkersPrimitive is only supported for Area and Line series types');\n        }\n        this._private__paneViews = [\n            new MarkersPrimitivePaneView(this._private__series, this._private__chart.timeScale(), this._private__options),\n        ];\n        this._private__requestUpdate = requestUpdate;\n        this._internal_requestUpdate();\n    }\n    detached() {\n        this._private__chart = undefined;\n        this._private__series = undefined;\n        this._private__requestUpdate = undefined;\n    }\n    _internal_chart() {\n        return ensureDefined(this._private__chart);\n    }\n    _internal_series() {\n        return ensureDefined(this._private__series);\n    }\n    updateAllViews() {\n        this._private__paneViews.forEach((pw) => pw._internal_update(this._internal_markers()));\n    }\n    paneViews() {\n        return this._private__paneViews;\n    }\n    _internal_setData(data) {\n        if (!this._private__series) {\n            throw new Error('Primitive not attached to series');\n        }\n        const seriesType = this._private__series.seriesType();\n        this._private__managedDataPoints.clear();\n        const horzBehaviour = this._private__horzScaleBehavior;\n        if (horzBehaviour) {\n            data.forEach((d) => {\n                if (isFulfilledData(d) && isLineData(d, seriesType)) {\n                    this._private__managedDataPoints.set(horzBehaviour.key(d.time), d.value);\n                }\n            });\n        }\n        ensureDefined(this._private__series).setData(data);\n    }\n    _internal_update(data, historicalUpdate) {\n        if (!this._private__series || !this._private__horzScaleBehavior) {\n            throw new Error('Primitive not attached to series');\n        }\n        const seriesType = this._private__series.seriesType();\n        const horzKey = this._private__horzScaleBehavior.key(data.time);\n        if (isWhitespaceData(data)) {\n            this._private__managedDataPoints.delete(horzKey);\n        }\n        if (isFulfilledData(data) && isLineData(data, seriesType)) {\n            const existingPrice = this._private__managedDataPoints.get(horzKey);\n            if (existingPrice) {\n                this._private__markersManager._internal_setMarker({\n                    time: data.time,\n                    value: data.value,\n                    sign: getSign(data.value, existingPrice),\n                }, horzKey, this._private__options.updateVisibilityDuration);\n            }\n        }\n        ensureDefined(this._private__series).update(data, historicalUpdate);\n    }\n    _internal_clearMarkers() {\n        this._private__markersManager._internal_clearAllMarkers();\n    }\n}\nfunction getSign(newValue, oldValue) {\n    if (newValue === oldValue) {\n        return 0;\n    }\n    return newValue - oldValue > 0 ? 1 : -1;\n}\n\nclass SeriesUpDownMarkerPrimitiveWrapper extends SeriesPrimitiveAdapter {\n    setData(data) {\n        return this._internal__primitive._internal_setData(data);\n    }\n    update(data, historicalUpdate) {\n        return this._internal__primitive._internal_update(data, historicalUpdate);\n    }\n    markers() {\n        return this._internal__primitive._internal_markers();\n    }\n    setMarkers(markers) {\n        return this._internal__primitive._internal_setMarkers(markers);\n    }\n    clearMarkers() {\n        return this._internal__primitive._internal_clearMarkers();\n    }\n}\n/**\n * Creates and attaches the Series Up Down Markers Plugin.\n *\n * @param series - Series to which attach the Up Down Markers Plugin\n * @param options - options for the Up Down Markers Plugin\n *\n * @returns Api for Series Up Down Marker Plugin. {@link ISeriesUpDownMarkerPluginApi}\n *\n * @example\n * ```js\n * import { createUpDownMarkers, createChart, LineSeries } from 'lightweight-charts';\n *\n * const chart = createChart('container');\n * const lineSeries = chart.addSeries(LineSeries);\n * const upDownMarkers = createUpDownMarkers(lineSeries, {\n *     positiveColor: '#22AB94',\n *     negativeColor: '#F7525F',\n *     updateVisibilityDuration: 5000,\n * });\n * // to add some data\n * upDownMarkers.setData(\n *     [\n *         { time: '2020-02-02', value: 12.34 },\n *         //... more line series data\n *     ]\n * );\n * // ... Update some values\n * upDownMarkers.update({ time: '2020-02-02', value: 13.54 }, true);\n * // to remove plugin from the series\n * upDownMarkers.detach();\n * ```\n */\nfunction createUpDownMarkers(series, options = {}) {\n    const wrapper = new SeriesUpDownMarkerPrimitiveWrapper(series, new UpDownMarkersPrimitive(options));\n    return wrapper;\n}\n\n/// <reference types=\"_build-time-constants\" />\nconst customSeriesDefaultOptions = {\n    ...seriesOptionsDefaults,\n    ...customStyleDefaults$1,\n};\n/**\n * Returns the current version as a string. For example `'3.3.0'`.\n */\nfunction version() {\n    return \"5.0.8\";\n}\n\nexport { areaSeries as AreaSeries, barSeries as BarSeries, baselineSeries as BaselineSeries, candlestickSeries as CandlestickSeries, ColorType, CrosshairMode, histogramSeries as HistogramSeries, LastPriceAnimationMode, lineSeries as LineSeries, LineStyle, LineType, MismatchDirection, PriceLineSource, PriceScaleMode, TickMarkType, TrackingModeExitMode, createChart, createChartEx, createImageWatermark, createOptionsChart, createSeriesMarkers, createTextWatermark, createUpDownMarkers, createYieldCurveChart, customSeriesDefaultOptions, defaultHorzScaleBehavior, isBusinessDay, isUTCTimestamp, version };\n"],"names":["EventEmitter","effect","computed","CommonModule","FormsModule","createChart","ColorType","CandlestickSeries","DropdownComponent","ButtonComponent","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtwoWayListener","LightweightChartComponent_Conditional_7_Template_ui_dropdown_ngModelChange_0_listener","$event","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵtwoWayBindingSet","selectedCredentialId","ɵɵresetView","ɵɵlistener","onCredentialChange","LightweightChartComponent_Conditional_7_Template_ui_dropdown_ngModelChange_1_listener","selectedMarketType","onMarketTypeChange","ɵɵproperty","credentialOptions","ɵɵtwoWayProperty","ɵɵadvance","marketTypeOptions","LightweightChartComponent_Conditional_8_Template_ui_dropdown_ngModelChange_0_listener","_r3","currentSymbol","onSymbolSelect","symbolOptions","isLoadingSymbols","LightweightChartComponent_Conditional_9_Template_input_ngModelChange_1_listener","_r4","LightweightChartComponent_Conditional_9_Template_input_keyup_enter_1_listener","updateSymbol","LightweightChartComponent_Conditional_9_Template_ui_button_clicked_2_listener","translate","ɵɵtextInterpolate1","ɵɵelement","ɵɵtextInterpolate","LightweightChartComponent_Conditional_12_Template_ui_button_clicked_6_listener","_r5","retry","error","ɵɵtextInterpolate5","gridConfig","gridCount","ɵɵpipeBind2","lowerBound","upperBound","LightweightChartComponent","constructor","themeService","bybitService","translationService","symbol","initialData","chartHeight","showCredentialSelector","showSymbolSelector","showMarketTypeSelector","showEnvironmentBadge","environment","symbolChange","credentialChange","marketTypeChange","value","label","chart","candlestickSeries","gridLines","loading","connectionStatus","connectionStatusText","showVolume","showGrid","chartType","currentTheme","isDark","updateChartTheme","getWebSocketConnectionState","subscribe","status","key","ngOnInit","ngAfterViewInit","setTimeout","initializeChart","ngOnDestroy","dataSubscription","unsubscribe","getSymbolForApi","unsubscribeFromRealtimeKline","remove","console","log","chartContainer","nativeElement","container","clientWidth","clientHeight","style","width","height","layout","background","type","Solid","color","textColor","grid","vertLines","horzLines","crosshair","mode","rightPriceScale","borderColor","timeScale","timeVisible","secondsVisible","addSeries","upColor","downColor","borderVisible","wickUpColor","wickDownColor","loadMarketData","seriesError","message","addGridLines","setupResizeHandler","applyOptions","isFirstLoad","getRealTimeKlineData","next","data","length","slice","Error","formattedData","map","item","time","parseInt","open","high","low","close","setData","fitContent","lastCandle","Date","toISOString","update","loadFallbackData","getKlineData","apiSymbol","replace","endsWith","loadData","forEach","line","removePriceLine","e","warn","priceStep","i","price","priceLine","createPriceLine","lineWidth","lineStyle","axisLabelVisible","title","push","lineError","resizeObserver","ResizeObserver","entries","contentRect","observe","trim","oldSymbol","emit","credentialId","marketType","toggleGrid","toggleTheme","updateGridConfig","config","ɵɵdirectiveInject","i1","ThemeService","i2","BybitService","i3","TranslationService","selectors","viewQuery","LightweightChartComponent_Query","rf","ctx","ɵɵtemplate","LightweightChartComponent_Conditional_5_Template","LightweightChartComponent_Conditional_7_Template","LightweightChartComponent_Conditional_8_Template","LightweightChartComponent_Conditional_9_Template","LightweightChartComponent_Conditional_11_Template","LightweightChartComponent_Conditional_12_Template","LightweightChartComponent_Conditional_19_Template","ɵɵclassProp","ɵɵconditional","ɵɵstyleProp","i4","DecimalPipe","i5","DefaultValueAccessor","NgControlStatus","NgModel","styles","forwardRef","signal","NG_VALUE_ACCESSOR","tmp_2_0","ctx_r0","selectedOption","icon","DropdownComponent_Conditional_3_Conditional_1_Template","tmp_1_0","placeholder","DropdownComponent_Conditional_7_Template_button_click_0_listener","_r2","clearSelection","DropdownComponent_Conditional_8_Conditional_1_Template_input_ngModelChange_1_listener","searchQuery","onSearchChange","DropdownComponent_Conditional_8_Conditional_1_Template_input_keydown_1_listener","onKeyDown","searchPlaceholder","option_r5","DropdownComponent_Conditional_8_Conditional_4_For_1_Template_div_click_0_listener","$implicit","selectOption","DropdownComponent_Conditional_8_Conditional_4_For_1_Template_div_mouseenter_0_listener","ɵ$index_41_r6","$index","onOptionHover","DropdownComponent_Conditional_8_Conditional_4_For_1_Conditional_1_Template","isSelected","isHighlighted","disabled","ɵɵrepeaterCreate","DropdownComponent_Conditional_8_Conditional_4_For_1_Template","_forTrack0","ɵɵrepeater","filteredOptions","DropdownComponent_Conditional_8_Conditional_1_Template","DropdownComponent_Conditional_8_Conditional_3_Template","DropdownComponent_Conditional_8_Conditional_4_Template","searchable","elementRef","options","size","selectionChange","isOpen","selectedValue","highlightedIndex","query","toLowerCase","filter","option","includes","find","opt","onChange","onTouched","onCleanup","clickHandler","event","contains","target","document","addEventListener","removeEventListener","writeValue","set","registerOnChange","fn","registerOnTouched","setDisabledState","isDisabled","toggle","searchInput","focus","filtered","preventDefault","nextIndex","Math","min","scrollToHighlighted","prevIndex","max","highlighted","highlightedEl","querySelector","scrollIntoView","block","behavior","index","stopPropagation","ElementRef","DropdownComponent_Query","provide","useExisting","multi","ɵɵStandaloneFeature","decls","vars","consts","template","DropdownComponent_Template","DropdownComponent_Template_button_click_1_listener","DropdownComponent_Template_button_keydown_1_listener","DropdownComponent_Conditional_3_Template","DropdownComponent_Conditional_4_Template","DropdownComponent_Conditional_7_Template","DropdownComponent_Conditional_8_Template","option_r2","SelectComponent","fullWidth","multiple","touched","onSelectionChange","selectedOptions","Array","from","onBlur","getSelectClasses","classes","join","getWrapperClasses","optionValue","isArray","inputs","standalone","features","ɵɵProvidersFeature","SelectComponent_Template","SelectComponent_label_1_Template","SelectComponent_Template_select_change_3_listener","SelectComponent_Template_select_blur_3_listener","SelectComponent_option_4_Template","SelectComponent_option_5_Template","SelectComponent_div_9_Template","ɵɵclassMap","NgForOf","NgIf","BehaviorSubject","Observable","Subject","timer","EMPTY","webSocket","catchError","takeUntil","BybitWebSocketService","WS_URLS","mainnet","testnet","currentEnvironment","socket$","destroy$","connectionState$","klineData$","tickerData$","orderbookData$","tradeData$","subscriptions","Map","dataCache","stopPing","disconnect","complete","getConnectionState","asObservable","setEnvironment","normalizedEnv","closed","activeSubscriptions","getActiveSubscriptions","connect","getCurrentEnvironment","wsUrl","url","openObserver","startPing","closeObserver","pipe","handleMessage","clear","subscribeToKline","interval","topic","subscriptionKey","has","state","sendSubscription","observable","get","observer","subscription","err","unsubscribeFromKline","sendUnsubscription","subject","delete","subscribeMessage","op","args","unsubscribeMessage","success","undefined","conn_id","dataLength","timestamp","ts","startsWith","JSON","stringify","substring","handleKlineData","handleTickerData","handleOrderbookData","handleTradeData","topicParts","split","keys","klineDataArray","klineData","candlestick","floor","start","parseFloat","volume","confirmed","confirm","isConnected","ping","pingTimer","subscribeToTicker","subscribeToOrderbook","depth","subscribeToTrades","rawData","tickerData","lastPrice","highPrice24h","lowPrice24h","prevPrice24h","volume24h","turnover24h","price24hPcnt","usdIndexPrice","change24h","orderbookData","bids","asks","bestBid","bestAsk","spread","tradesArray","rawTrade","tradeData","execId","side","isBlockTrade","unsubscribeFromTicker","unsubscribeFromOrderbook","unsubscribeFromTrades","getCachedData","clearCache","factory","ɵfac","providedIn","of","combineLatest","timeout","take","switchMap","http","webSocketService","baseUrl","limit","params","category","toString","response","transformBybitData","handleError","getSymbols","retCode","result","list","retMsg","timestampMs","timestampSeconds","originalTimestamp","sortedData","sort","a","b","uniqueData","arr","finalData","rest","current","previous","generateFallbackData","currentPrice","getBasePrice","date","setDate","getDate","volatility","dailyRange","random","closeVariation","round","basePrices","checkApiHealth","initialData$","realtimeUpdates$","dataSubject","newCandle","currentData","updatedData","updateCandlestickData","subjectSubscription","subscribeToRealtimeKline","isWebSocketConnected","lastCandleTime","newCandleTime","shift","convertIntervalFormat","intervalMap","subscribeToRealtimeTicker","subscribeToRealtimeOrderbook","subscribeToRealtimeTrades","unsubscribeFromRealtimeTicker","unsubscribeFromRealtimeOrderbook","unsubscribeFromRealtimeTrades","getCachedWebSocketData","clearWebSocketCache","getComprehensiveMarketStream","kline","ticker","orderbook","now","setWebSocketEnvironment","getWebSocketEnvironment","ɵɵinject","HttpClient","dateTimestampProvider","Scheduler","schedulerActionCtor","schedule","work","delay","AnonymousSubject","Subscriber","Subscription","ReplaySubject","DEFAULT_WEBSOCKET_CONFIG","deserializer","parse","serializer","WEBSOCKETSUBJECT_INVALID_ERROR_OBJECT","WebSocketSubject","urlConfigOrSource","destination","_socket","source","_config","Object","assign","_output","hasOwnProperty","WebSocketCtor","WebSocket","lift","operator","sock","_resetState","multiplex","subMsg","unsubMsg","messageFilter","self","x","_connectSocket","protocol","binaryType","socket","readyState","onopen","evt","queue","create","send","closingObserver","code","reason","TypeError","add","onerror","onclose","wasClean","onmessage","_subscribe","subscriber","observers","async","asyncScheduler","isScheduler","isValidDate","dueTime","intervalOrScheduler","scheduler","intervalDuration","due","n","operate","innerFrom","createErrorClass","createOperatorSubscriber","executeSchedule","TimeoutError","_super","TimeoutErrorImpl","info","name","schedulerArg","first","each","with","_with","timeoutErrorFactory","meta","originalSourceSubscription","timerSubscription","lastValue","seen","startTimer","Action","intervalProvider","arrRemove","AsyncAction","pending","_a","id","recycleAsyncId","requestAsyncId","_id","setInterval","flush","bind","_scheduler","clearInterval","execute","_execute","_delay","errored","errorValue","actions","AsyncScheduler","SchedulerAction","_active","action","handler","delegate","handle","isNaN","equalSizes","createObservable","createDevicePixelRatioObservable","DevicePixelContentBoxBinding","canvasElement","transformBitmapSize","_canvasElement","_bitmapSizeChangedListeners","_suggestedBitmapSize","_suggestedBitmapSizeChangedListeners","_devicePixelRatioObservable","_canvasElementResizeObserver","_canvasElementClientSize","_transformBitmapSize","_allowResizeObserver","allowResizeObserver","_chooseAndInitObserver","prototype","dispose","_b","defineProperty","enumerable","configurable","resizeCanvasElement","clientSize","concat","_invalidateBitmapSize","subscribeBitmapSizeChanged","listener","unsubscribeBitmapSizeChanged","l","subscribeSuggestedBitmapSizeChanged","unsubscribeSuggestedBitmapSizeChanged","applySuggestedBitmapSize","oldSuggestedSize","_resizeBitmap","_emitSuggestedBitmapSizeChanged","newSize","oldSize","bitmapSize","_emitBitmapSizeChanged","_this","call","_suggestNewBitmapSize","finalNewSize","newSuggestedSize","_initDevicePixelRatioObservable","isDevicePixelContentBoxSupported","then","isSupported","_initResizeObserver","win","canvasElementWindow","ratio","devicePixelRatio","canvasRects","getClientRects","predictedBitmapSize","entry","devicePixelContentBoxSize","entrySize","inlineSize","blockSize","box","bindTo","transform","ownerDocument","defaultView","Promise","resolve","ro","every","body","catch","canvasRect","left","top","CanvasRenderingTarget2D","context","mediaSize","_mediaSize","_bitmapSize","_context","useMediaCoordinateSpace","f","save","setTransform","scale","_horizontalPixelRatio","_verticalPixelRatio","restore","useBitmapCoordinateSpace","horizontalPixelRatio","verticalPixelRatio","createCanvasRenderingTarget2D","binding","contextOptions","canvasElementClientSize","getContext","tryCreateCanvasRenderingTarget2D","_resolutionListener","_onResolutionChanged","_resolutionMediaQueryList","_observers","_window","_installResolutionListener","_uninstallResolutionListener","o","dppx","matchMedia","addListener","removeListener","_reinstallResolutionListener","bindCanvasElementBitmapSizeTo","second","size$1","customStyleDefaults$1","seriesOptionsDefaults","visible","lastValueVisible","priceLineVisible","priceLineSource","priceLineWidth","priceLineColor","priceLineStyle","baseLineVisible","baseLineWidth","baseLineColor","baseLineStyle","priceFormat","precision","minMove","LineType","LineStyle","setLineStyle","dashPatterns","dashPattern","setLineDash","drawHorizontalLine","y","right","beginPath","correction","moveTo","lineTo","stroke","drawVerticalLine","bottom","strokeInPixel","drawFunction","assert","condition","ensureDefined","ensureNotNull","ensure","ensureNever","Delegate","_private__listeners","_internal_subscribe","callback","linkedObject","singleshot","_internal_callback","_internal_linkedObject","_internal_singleshot","_internal_unsubscribe","findIndex","splice","_internal_unsubscribeAll","_internal_fire","param1","param2","param3","listenersSnapshot","_internal_hasListeners","_internal_destroy","merge","dst","sources","src","isNumber","isFinite","isInteger","isString","isBoolean","clone","object","c","p","v","notNull","t","undefinedIfNull","defaultFontFamily","makeFont","family","PriceAxisRendererOptionsProvider","chartModel","_private__rendererOptions","_internal_borderSize","_internal_tickLength","_internal_fontSize","NaN","_internal_font","_internal_fontFamily","_internal_color","_internal_paneBackgroundColor","_internal_paddingBottom","_internal_paddingInner","_internal_paddingOuter","_internal_paddingTop","_internal_baselineOffset","_private__chartModel","_internal_options","rendererOptions","currentFontSize","_private__fontSize","currentFontFamily","_private__fontFamily","_private__textColor","_private__paneBackgroundColor","_internal_backgroundTopColor","fontSize","fontFamily","normalizeRgbComponent","component","normalizeAlphaComponent","rgbaToGrayscale","rgbValue","redComponentGrayscaleWeight","greenComponentGrayscaleWeight","blueComponentGrayscaleWeight","getRgbStringViaBrowser","element","createElement","display","appendChild","window","getComputedStyle","removeChild","ColorParser","customParsers","initialCache","_private__rgbaCache","_private__customParsers","_internal_applyAlpha","alpha","originRgba","_private__parseColor","originAlpha","_internal_generateContrastColors","rgba","_internal_background","_internal_foreground","_internal_colorStringToGrayscale","_internal_gradientColorAtPercent","topColor","bottomColor","percent","topR","topG","topB","topA","bottomR","bottomG","bottomB","bottomA","resultRgba","cached","match","parser","CompositeRenderer","_private__renderers","_internal_setRenderers","renderers","_internal_draw","isHovered","hitTestData","r","BitmapCoordinatesPaneRenderer","scope","_internal__drawImpl","PaneRendererMarks","arguments","_internal__data","_internal_setData","_internal_visibleRange","visibleRange","tickWidth","draw","radiusMedia","to","point","_internal_items","centerX","_internal_x","centerY","_internal_y","radius","arc","PI","fill","_internal_lineWidth","fillStyle","_internal_backColor","_internal_radius","_internal_lineColor","createEmptyMarkerData","_internal_time","_internal_price","rangeForSinglePoint","CrosshairMarksPaneView","pane","_private__compositeRenderer","_private__markersRenderers","_private__markersData","_private__invalidated","_private__crosshair","_private__pane","_internal_update","updateType","_private__createMarkerRenderersIfNeeded","_internal_renderer","_private__updateImpl","serieses","_internal_orderedSources","res","forceHidden","_internal_visible","_internal_orderedSeries","timePointIndex","_internal_appliedIndex","_internal_timeScale","s","seriesData","_internal_markerDataAtIndex","firstValue","_internal_firstValue","_internal_backgroundColor","_internal_borderWidth","_internal_priceScale","_internal_priceToCoordinate","_internal_value","_internal_borderColor","_internal_backgroundColorAtYPercentFromTop","_internal_height","_internal_indexToCoordinate","CrosshairRenderer","_private__data","vertLinesVisible","_internal_vertLine","horzLinesVisible","_internal_horzLine","lineCap","strokeStyle","_internal_lineStyle","CrosshairPaneView","_private__rendererData","_private__renderer","_private__source","crosshairOptions","_internal_model","_internal_horzLineVisible","_internal_vertLineVisible","horzLine","vertLine","_internal_appliedX","_internal_appliedY","fillRectInnerBorder","borderWidth","fillRect","clearRect","w","h","clearColor","globalCompositeOperation","changeBorderRadius","borderRadius","offset","drawRoundRect","radii","roundRect","arcTo","drawRoundRectWithBorder","backgroundColor","outerBorderRadius","halfBorderWidth","closePath","clearRectWithGradient","gradient","createLinearGradient","addColorStop","PriceAxisViewRenderer","commonData","_private__commonData","useSecondLine","textWidthCache","align","_internal_text","geometry","font","geom","_private__calculateGeometry","gb","_internal_bitmap","_internal_alignRight","_internal_xOutside","_internal_yTop","_internal_totalWidth","_internal_totalHeight","_internal_horzBorder","_internal_xInside","_internal_tickVisible","_internal_yMid","_internal_xTick","_internal_tickHeight","_internal_borderVisible","_internal_right","_internal_yBottom","gm","_internal_media","textAlign","textBaseline","fillText","_internal_xText","_internal_textMidCorrection","tickSize","_internal_moveTextToInvisibleTick","horzBorder","_internal_separatorVisible","paddingTop","_internal_additionalPaddingTop","paddingBottom","_internal_additionalPaddingBottom","paddingInner","paddingOuter","text","actualTextHeight","textMidCorrection","_internal_yMidCorrection","textWidth","ceil","_internal_measureText","totalHeight","totalWidth","tickHeightBitmap","totalHeightBitmap","horzBorderBitmap","totalWidthBitmap","tickSizeBitmap","yMid","_internal_fixedCoordinate","_internal_coordinate","yMidBitmap","yTopBitmap","yBottomBitmap","alignRight","xInside","xInsideBitmap","xOutsideBitmap","xTickBitmap","xText","PriceAxisView","ctor","_private__commonRendererData","_private__axisRendererData","_private__paneRendererData","_private__axisRenderer","_private__paneRenderer","_private__updateRendererDataIfNeeded","_internal_getFixedCoordinate","_internal_setFixedCoordinate","_internal_isVisible","_internal_isAxisLabelVisible","priceScale","ticksVisible","_internal_paneRenderer","_internal__updateRendererData","CrosshairPriceAxisView","valueProvider","_private__priceScale","_private__valueProvider","axisRendererData","paneRendererData","commonRendererData","labelVisible","_internal_isEmpty","colors","_internal_colorParser","labelBackgroundColor","additionalPadding","_internal_formatPrice","optimizationReplacementRe","radius$1","TimeAxisViewRenderer","_internal_widthCache","horzMargin","_internal_paddingHorizontal","labelWidth","labelWidthHalf","timeScaleWidth","_internal_width","coordinate","x1","abs","x2","y1","y2","x1scaled","y1scaled","x2scaled","y2scaled","radiusScaled","tickX","tickTop","tickBottom","tickOffset","yText","textYCorrection","CrosshairTimeAxisView","model","_private__model","currentTime","_internal_indexToTimeScalePoint","_internal_formatDateTime","DataSource","_internal__priceScale","_private__zorder","_internal_zorder","_internal_setZorder","zorder","_internal_setPriceScale","_internal_labelPaneViews","_internal_timeAxisViews","CrosshairMode","Crosshair","_private__price","_private__index","_private__visible","_private__priceAxisViews","_private__subscribed","_private__crosshairPaneViewCache","WeakMap","_private__markersPaneViewCache","_private__x","_private__y","_private__originX","_private__originY","_private__options","valuePriceProvider","rawPriceProvider","rawCoordinateProvider","rawPrice","_internal_defaultPriceScale","_internal_coordinateToPrice","valueTimeProvider","rawIndexProvider","_internal_indexToTime","Number","_private__currentPosPriceProvider","currentPosTimeProvider","_private__timeAxisView","_internal_saveOriginCoord","_internal_clearOriginCoord","_internal_originCoordX","_internal_originCoordY","_internal_setPosition","_private__tryToUpdateViews","_internal_clearPosition","_private__setIndexToLastSeriesBarIndex","_internal_updateAllViews","_internal_paneViews","crosshairPaneView","markersPaneView","_internal_priceAxisViews","views","_private__createPriceAxisViewOnDemand","_internal_pane","_internal_panes","_private__priceScaleByPane","_private__tryToUpdateData","newIndex","newPrice","newPane","oldX","oldY","oldPrice","oldIndex","oldPane","lastIndexes","_internal_serieses","_internal_bars","_internal_lastIndex","lastBarIndex","view","isDefaultPriceScale","priceScaleId","mergePaneInvalidation","beforeValue","newValue","level","_internal_level","autoScale","_internal_autoScale","InvalidateMask","globalLevel","_private__invalidatedPanes","_private__timeScaleInvalidations","_private__globalLevel","_internal_invalidatePane","paneIndex","invalidation","prevValue","_internal_fullInvalidation","_internal_invalidateForPane","paneInvalidation","_internal_setFitContent","_internal_stopTimeScaleAnimation","_internal_type","_internal_applyRange","range","_internal_setTimeScaleAnimation","animation","_private__removeTimeScaleAnimation","_internal_resetTimeScale","_internal_setBarSpacing","barSpacing","_internal_setRightOffset","_internal_timeScaleInvalidations","_internal_merge","other","tsInvalidation","_private__applyTimeScaleInvalidation","_internal_light","_internal_full","inv","FormatterBase","formatTickmarks","prices","format","formatterOptions","_internal_decimalSign","numberToStringWithLeadingZero","dummyString","PriceFormatter","_private__minMove","_private__calculateDecimal","sign","_private__formatAsDecimal","_internal__fractionalLength","base","intPart","fracString","fracLength","fracPart","toFixed","PercentageFormatter","VolumeFormatter","_private__precision","vol","_private__formatNumber","pow","String","p1","defaultReplacementRe","TextWidthCache","_private__actualSize","_private__usageTick","_private__oldestTick","_private__tick2Labels","_private__cache","_private__maxSize","_internal_reset","_private__getMetrics","metrics","actualBoundingBoxAscent","actualBoundingBoxDescent","re","cacheString","_internal_metrics","oldestValue","measureText","_internal_tick","PanePriceAxisViewRenderer","_private__priceAxisViewRenderer","_private__align","_private__textWidthCache","_internal_setParams","priceAxisViewRenderer","PanePriceAxisView","priceAxisView","dataSource","_private__priceAxisView","_private__dataSource","_internal_paneForSource","_internal_isOverlay","_internal_defaultVisiblePriceScale","position","_internal_priceScalePosition","_internal_priceAxisRendererOptions","HorizontalLineRenderer","_internal_hitTest","itemY","_internal_externalId","externalId","_internal_hitTestData","SeriesHorizontalLinePaneView","series","_internal__lineRendererData","_internal__lineRenderer","_internal__series","_internal__model","_internal__updateImpl","SeriesHorizontalBaseLinePaneView","_internal_mode","seriesOptions","SeriesLastPriceAnimationRenderer","_internal_data","_internal_center","_internal_seriesLineColor","centerPointRadius","_internal_seriesLineWidth","_internal_fillColor","_internal_strokeColor","animationStagesData","_internal_start","_internal_end","_internal_startRadius","_internal_endRadius","_internal_startFillAlpha","_internal_endFillAlpha","_internal_startStrokeAlpha","_internal_endStrokeAlpha","stage","startRadius","endRadius","SeriesLastPriceAnimationPaneView","_private__stageInvalidated","_private__startTime","performance","_private__endTime","_private__series","_internal_onDataCleared","_internal_onNewRealtimeDataReceived","lastPriceAnimation","timeToAnimationEnd","_internal_invalidateStage","_internal_animationActive","_private__updateRendererDataStage","_internal_visibleStrictRange","_internal_lastValueData","_internal_noData","_internal_contains","_internal_index","lastValuePoint","seriesLineColor","seriesLineWidth","_private__animationData","_private__duration","rendererData","_private__color","startAlpha","endAlpha","durationSinceStart","lineColor","globalStage","currentStageData","stageData","subStage","SeriesPriceLinePaneView","lastValueData","_internal_priceLineColor","SeriesPriceAxisView","showSeriesLastValue","showSymbolLabel","_internal_title","showPriceAndPercentage","seriesLastValueMode","_internal__axisText","_internal__paneText","lastValueColor","_internal_isPercentage","_internal_formattedPriceAbsolute","_internal_formattedPricePercentage","computeFiniteResult","method","valueOne","valueTwo","fallback","firstFinite","secondFinite","PriceRangeImpl","minValue","maxValue","_private__minValue","_private__maxValue","_internal_equals","pr","_internal_clone","_internal_minValue","_internal_maxValue","_internal_length","anotherRange","Infinity","_internal_scaleAroundCenter","coeff","delta","center","maxDelta","minDelta","_internal_shift","_internal_toRaw","_internal_fromRaw","raw","AutoscaleInfoImpl","priceRange","margins","_private__priceRange","_private__margins","_internal_priceRange","_internal_margins","CustomPriceLinePaneView","_private__priceLine","lineOptions","lineVisible","_internal_yCoord","CustomPriceLinePriceAxisView","showPaneLabel","_private__formatPrice","axisLabelColor","axisLabelTextColor","CustomPriceLine","_private__priceLineView","_private__panePriceAxisView","_internal_applyOptions","_internal_lightUpdate","_internal_paneView","_internal_labelPaneView","_internal_priceAxisView","PriceDataSource","barStyleFnMap","Bar","findBar","barStyle","barIndex","precomputedBars","currentBar","isUp","_internal_barColor","Candlestick","candlestickStyle","borderUpColor","borderDownColor","_internal_barBorderColor","_internal_barWickColor","_internal_wickColor","Custom","customStyle","Area","areaStyle","_internal_topColor","_internal_bottomColor","Baseline","baselineStyle","isAboveBaseline","baseValue","topLineColor","bottomLineColor","_internal_topLineColor","_internal_bottomLineColor","_internal_topFillColor1","topFillColor1","_internal_topFillColor2","topFillColor2","_internal_bottomFillColor1","bottomFillColor1","_internal_bottomFillColor2","bottomFillColor2","Line","Histogram","histogramStyle","SeriesBarColorer","_private__findBar","_internal_valueAt","_private__styleGetter","_internal_seriesType","_internal_barStyle","boundCompare","lower","compare","count","count2","mid","MismatchDirection","CHUNK_SIZE","PlotList","_private__items","_private__minMaxCache","_private__rowSearchCache","_private__indices","_internal_last","_internal_size","_internal_firstIndex","_private__indexAt","_private__search","_internal_search","searchMode","pos","_private__valueAt","_internal_rows","_internal_minMaxOnRangeCached","end","plots","plot","plotMinMax","_private__minMaxOnRangeCachedImpl","mergeMinMax","plotRows","plotRow","_internal_indices","exactPos","_private__bsearch","_private__searchNearestLeft","_private__searchNearestRight","nearestLeftPos","_private__lowerbound","nearestRightPos","_private__upperbound","_private__plotMinMax","startIndex","endIndexExclusive","plotIndex","values","_internal_min","_internal_max","firstIndex","lastIndex","cachedLow","cachedHigh","endIndex","minMaxCache","chunkIndex","chunkMinMax","chunkStart","chunkEnd","createSeriesPlotList","PrimitiveRendererWrapper","baseRenderer","_private__baseRenderer","_internal_drawBackground","drawBackground","PrimitivePaneViewWrapper","paneView","_private__paneView","renderer","_internal_base","_internal_wrapper","wrapper","_internal_zOrder","zOrder","PrimitiveWrapper","primitive","_private__paneViewsCache","_internal__primitive","_internal_primitive","updateAllViews","paneViews","pw","hitTest","PanePrimitiveWrapper$1","PanePrimitiveWrapper","SeriesPrimitiveRendererWrapper","SeriesPrimitivePaneViewWrapper","getAxisViewData","baseView","fixedCoordinate","backColor","tickVisible","SeriesPrimitiveTimeAxisViewWrapper","_private__baseView","_private__timeScale","SeriesPrimitivePriceAxisViewWrapper","SeriesPrimitiveWrapper","_private__timeAxisViewsCache","_private__priceAxisViewsCache","_private__priceAxisPaneViewsCache","_private__timeAxisPaneViewsCache","timeAxisViews","aw","priceAxisViews","_internal_priceAxisPaneViews","priceAxisPaneViews","_internal_timeAxisPaneViews","timeAxisPaneViews","_internal_autoscaleInfo","startTimePoint","endTimePoint","autoscaleInfo","extractPrimitivePaneViews","primitives","extractor","primitivePaneViewsExtractor","primitivePricePaneViewsExtractor","primitiveTimePaneViewsExtractor","lineBasedSeries","Series","seriesType","createPaneView","customPaneView","_private__customPriceLines","_private__baseHorizontalLineView","_private__lastPriceAnimationPaneView","_private__barColorerCache","_private__animationTimeoutId","_private__primitives","_private__seriesType","_private__recreateFormatter","clearTimeout","lastBarColor","globalLast","noDataRes","visibleBars","bar","lastBar","endBar","barColorer","_internal_barColorer","_internal_formatPriceAbsolute","_internal_formatPricePercentage","targetPriceScaleId","_internal_moveSeriesToScale","_internal_fullUpdate","_internal_updateSource","_internal_updateCrosshair","updateInfo","_internal_lastBarUpdatedOrNewBarsAddedToTheRight","sourcePane","_internal_recalculatePane","_internal_createPriceLine","_internal_removePriceLine","indexOf","_internal_priceLines","_internal_firstBar","_internal_timePoint","_internal_left","_internal_dataAt","_internal_open","_internal_high","_internal_low","_internal_close","_internal_topPaneViews","animationPaneView","_internal_cursorUpdate","unshift","_private__isOverlay","priceLineViews","_internal_bottomPaneViews","_private__extractPaneViews","_internal_pricePaneViews","_internal_timePaneViews","_internal_primitiveHitTest","customPriceLine","autoscaleInfoProvider","_private__autoscaleInfoImpl","_internal_minMove","_internal_formatter","_private__formatter","getValue","crosshairMarkerVisible","_private__markerRadius","_private__markerBorderColor","_private__markerBorderWidth","_private__markerBackgroundColor","_internal_attachPrimitive","_internal_detachPrimitive","_internal_customSeriesPlotValuesBuilder","_internal_priceValueBuilder","_internal_customSeriesWhitespaceCheck","_internal_isWhitespace","_internal_fulfilledIndices","_internal_id","barsMinMax","rangeWithBase","primitiveAutoscale","primitiveRange","crosshairMarkerRadius","crosshairMarkerBorderColor","crosshairMarkerBorderWidth","crosshairMarkerBackgroundColor","formatter","tickmarksFormatter","_internal_updateFormatter","magnetPlotRowKeys","magnetOHLCPlotRowKeys","Magnet","_internal_align","defaultPriceScale","_internal_dataSources","ds","candidates","reduce","acc","ps","bars","firstPrice","plotRowKeys","nearest","clamp","minVal","maxVal","isBaseDecimal","greaterOrEqual","epsilon","equal","ceiledEven","ceiled","ceiledOdd","GridRenderer","_internal_vertLinesVisible","_internal_vertLinesColor","_internal_vertLineStyle","timeMark","_internal_timeMarks","_internal_coord","_internal_horzLinesVisible","_internal_horzLinesColor","_internal_horzLineStyle","priceMark","_internal_priceMarks","GridPaneView","gridOptions","_internal_marks","tm","coord","Grid","defLogFormula","_internal_logicalOffset","_internal_coordOffset","fromPercent","toPercent","toPercentRange","minPercent","maxPercent","fromIndexedTo100","toIndexedTo100","toIndexedTo100Range","toLog","logFormula","m","log10","fromLog","logical","convertPriceRangeToLog","canConvertPriceRangeFromLog","convertPriceRangeFromLog","logFormulaForPriceRange","diff","digits","logicalOffset","coordOffset","logFormulasAreSame","f1","f2","PriceTickSpanCalculator","integralDividers","_private__base","_private__integralDividers","_private__fractionalDividers","baseRest","_internal_tickSpan","maxTickSpan","minMovement","resultTickSpan","resultTickSpanLargerMinMovement","resultTickSpanLargerMaxTickSpan","resultTickSpanLarger1","haveToContinue","TICK_DENSITY","PriceTickMarkBuilder","coordinateToLogicalFunc","logicalToCoordinateFunc","_private__marks","_private__coordinateToLogicalFunc","_private__logicalToCoordinateFunc","scaleHeight","markHeight","_private__tickMarkHeight","spanCalculator1","spanCalculator2","spanCalculator3","spans","_internal_rebuildTickMarks","extraTopBottomMargin","entireTextOnly","_private__fontHeight","minCoord","maxCoord","span","_private__updateMarks","_internal_hasVisibleEdgeMarks","_private__shouldApplyEdgeMarks","padding","_internal_getEdgeMarksPadding","_private__applyEdgeMarks","logicals","mark","_internal_logical","labels","_internal_formatLogicalTickmarks","_internal_label","marks","mod","prevCoord","targetIndex","_internal_formatLogical","_internal_isLog","minPadding","maxPadding","topMark","_private__computeBoundaryPriceMark","bottomMark","spanPx","pop","avgPadding","value1","value2","valueSpan","roundedValue","roundedCoord","_internal_getLogFormula","sortSources","s1","s2","PriceScaleMode","percentageFormatter","defaultPriceFormatter","PriceScale","layoutOptions","localizationOptions","colorParser","_private__height","_private__internalHeightCache","_private__priceRangeSnapshot","_private__invalidatedForRange","_internal_isValid","_internal_visibleBars","_private__isCustomPriceRange","_private__marginAbove","_private__marginBelow","_private__onMarksChanged","_private__modeChanged","_private__dataSources","_private__formatterSource","_private__cachedOrderedSources","_private__marksCache","_private__scaleStartPoint","_private__scrollStartPoint","_private__logFormula","_private__id","_private__layoutOptions","_private__localizationOptions","_private__colorParser","_private__markBuilder","_private__coordinateToLogical","_private__logicalToCoordinate","_internal_setMode","scaleMargins","_private__invalidateInternalHeightCache","_internal_isAutoScale","_internal_isCustomPriceRange","_internal_isIndexedTo100","_internal_isInverted","invertScale","newMode","oldMode","_internal_setPriceRange","modeChanged","_private__onIsInvertedChanged","_internal_modeChanged","_internal_setHeight","_internal_internalHeight","_private__topMarginPx","_private__bottomMarginPx","_private__makeSureItIsValid","newPriceRange","isForceSetValue","oldPriceRange","_internal_setCustomPriceRange","_private__toggleCustomPriceRange","_internal_invertedCoordinate","_internal_pointsArrayToCoordinates","points","bh","ih","isInverted","hmm","fromIndex","toIndex","transformFn","_private__getCoordinateTransformer","invCoordinate","_internal_barPricesToCoordinates","pricesList","openLogical","highLogical","lowLogical","closeLogical","_internal_openY","_internal_highY","_internal_lowY","_internal_closeY","_internal_logicalToPrice","_internal_addDataSource","_internal_invalidateSourcesCache","_internal_removeDataSource","firstValueIsNull","_internal_firstValueIsNull","_internal_onMarksChanged","_internal_startScale","_internal_scaleTo","scaleCoeff","_internal_endScale","_internal_startScroll","_internal_scrollTo","priceUnitsPerPixel","pixelDelta","priceDelta","_internal_endScroll","_private__formatPercentage","_private__formatPercentageTickmarks","_private__formatTickmarks","_internal_sourcesForAutoScale","_internal_recalculatePriceRange","ensureEdgeTickMarksVisible","_private__recalculatePriceRangeImpl","marginAbove","marginBelow","autoScaleInfo","sourceRange","above","below","formatterSource","extendValue","rawRange","newLogFormula","rawSnapshot","_private__formatValue","fallbackFormatter","_private__formatValues","priceFormatter","tickmarksPriceFormatter","percentage","percentages","tickmarksPercentageFormatter","isSeries","DEFAULT_STRETCH_FACTOR","MIN_PANE_HEIGHT","Pane","_private__overlaySourcesByScaleId","_private__width","_private__stretchFactor","_private__preserveEmptyPane","_private__destroyed","_private__grid","_private__leftPriceScale","_private__createPriceScale","leftPriceScale","_private__rightPriceScale","_private__onPriceScaleModeChanged","_internal_applyScaleOptions","localization","overlayPriceScales","sourceArrays","_internal_priceScaleById","_internal_priceScalesOptionsChanged","detached","_internal_stretchFactor","_internal_setStretchFactor","factor","_internal_setWidth","_internal_updateAllSources","_internal_setPreserveEmptyPane","preserve","_internal_preserveEmptyPane","_internal_series","targetScaleId","keepSourcesOrder","_private__insertDataSource","keepSourceOrder","overlaySources","overlayIndex","_internal_recalculatePriceScale","_internal_leftPriceScale","_internal_rightPriceScale","_internal_startScalePrice","_internal_scalePriceTo","_internal_endScalePrice","_internal_startScrollPrice","_internal_scrollPriceTo","_internal_endScrollPrice","_private__recalculatePriceScaleImpl","_internal_resetPriceScale","_internal_momentaryAutoScale","_internal_recalculate","_internal_setSeriesOrder","order","_internal_onDestroyed","_internal_grid","_internal_primitives","sourceForAutoScale","actualOptions","comparePrimitiveZOrder","reference","findBestPrimitiveHitTest","bestPrimitiveHit","bestHitSource","primitiveHitResults","hitResult","_internal_hit","_internal_source","convertPrimitiveHitResult","primitiveHit","_internal_object","_internal_cursorStyle","cursorStyle","hitTestPaneView","_internal_view","isDataSource","hitTestPane","isBackground","sourceResult","FormattedLabelsCache","horzScaleBehavior","_private__format","_private__horzScaleBehavior","_internal_format","tickMark","cacheKey","tick","_internal_string","str","RangeImpl","_private__left","_private__right","_internal_count","areRangesEqual","TickMarks","_private__marksByWeight","_private__uniformDistribution","_internal_setUniformDistribution","val","_internal_setTimeScalePoints","newPoints","firstChangedPointIndex","_private__removeMarksSinceIndex","marksForWeight","timeWeight","weight","originalTime","_internal_build","spacing","maxWidth","checkIndicesForData","indicesWithDataMap","indicesWithDataId","maxIndexesPerMark","_internal_maxIndexesPerMark","_internal_indicesWithDataId","_internal_checkIndicesForData","_private__buildMarksImpl","sinceIndex","weightsToClear","canBeIncluded","prevMarks","prevMarksLength","prevMarksPointer","currentWeight","currentWeightLength","rightIndex","leftIndex","currentIndex","lastMark","TimeScaleVisibleRange","logicalRange","_private__logicalRange","_internal_strictRange","_internal_logicalRange","_internal_invalid","defaultTickMarkMaxCharacterLength","markWithGreaterWeight$2","TimeScale","_private__baseIndexOrNull","_private__points","_private__tickMarks","_private__formattedByWeight","_private__visibleRange","_private__visibleRangeInvalidated","_private__visibleBarsChanged","_private__logicalRangeChanged","_private__optionsApplied","_private__commonTransitionStartState","_private__timeMarksCache","_private__indicesWithData","_private__indicesWithDataUpdateId","_private__labels","_private__rightOffset","rightOffset","_private__barSpacing","_private__updateDateTimeFormatter","uniformDistribution","_internal_recalculateIndicesWithData","_internal_applyLocalizationOptions","_private__invalidateTickMarks","fixLeftEdge","_private__doFixLeftEdge","fixRightEdge","_private__doFixRightEdge","minBarSpacing","maxBarSpacing","ignoreWhitespaceIndices","_internal_timeToIndex","findNearest","_internal_hasPoints","_private__updateVisibleRange","_internal_visibleLogicalRange","_internal_visibleTimeRange","_internal_timeRangeForLogicalRange","_private__firstIndex","_private__lastIndex","_internal_logicalRangeForTimeRange","newWidth","previousVisibleRange","oldWidth","lockVisibleTimeRangeOnResize","newBarSpacing","_private__correctBarSpacing","_private__correctOffset","baseIndex","_internal_baseIndex","deltaFromRight","_internal_indexesToCoordinates","indexFrom","indexTo","_internal_coordinateToIndex","considerIgnoreWhitespace","_private__coordinateToFloatIndex","_private__shouldConsiderIndex","_private__findNearestIndexWithData","_internal_recalculateAllPanes","_internal_barSpacing","_private__setBarSpacing","_internal_rightOffset","pixelsPer8Characters","pixelsPerCharacter","maxLabelWidth","tickMarkMaxCharacterLength","indexPerLabel","firstBar","items","earliestIndexOfSecondLabel","indexOfSecondLastLabel","isAllScalingAndScrollingDisabled","_private__isAllScalingAndScrollingDisabled","isLeftEdgeFixed","isRightEdgeFixed","_private__formatLabel","needAlignCoordinate","_internal_restoreDefault","_internal_setBaseIndex","_internal_zoom","zoomPoint","floatIndexAtZoomPoint","rightBarStaysOnScroll","_private__saveCommonTransitionsStartState","startLengthFromRight","currentLengthFromRight","_private__clearCommonTransitionsStartState","shiftInLogical","_internal_scrollToRealTime","_internal_scrollToOffsetAnimated","animationDuration","RangeError","animationStart","_internal_finished","_internal_getPosition","animationProgress","finishAnimation","_internal_visibleBarsChanged","_internal_logicalRangeChanged","_internal_optionsApplied","_internal_setVisibleRange","_internal_fitContent","last","_internal_setLogicalRange","barRange","timeScalePoint","timeFormatter","formatHorzItem","handleScroll","handleScale","horzTouchDrag","mouseWheel","pressedMouseMove","vertTouchDrag","axisDoubleClickReset","axisPressedMouseMove","pinch","_private__rightOffsetForCoordinate","oldBarSpacing","_private__resetTimeMarksCache","_private__setVisibleRange","newBarsLength","rightBorder","leftBorder","_private__minBarSpacing","_private__maxBarSpacing","minRightOffset","_private__minRightOffset","maxRightOffset","_private__maxRightOffset","barsEstimation","_private__formatLabelImpl","formatTickmark","newVisibleRange","oldVisibleRange","updateFormatter","leftEdgeOffset","gen","testNearestIntegers","maxIndex","num","rounded","isRoundedDown","TrackingModeExitMode","isPanePrimitive","ChartModel","invalidateHandler","_private__panes","_private__serieses","_private__hoveredSource","_private__priceScalesOptionsChanged","_private__crosshairMoved","_private__gradientColorsCache","_private__invalidateHandler","colorParsers","_private__rendererOptionsProvider","_private__magnet","addDefaultPane","_private__getOrCreatePane","_private__backgroundTopColor","_private__getBackgroundColor","_private__backgroundBottomColor","_private__invalidate","_private__invalidationMaskForSource","_internal_hoveredSource","_internal_setHoveredSource","prevSource","_internal_applyPriceScaleOptions","_internal_findPriceScale","_internal_crosshairSource","_internal_crosshairMoved","_internal_setPaneHeight","_internal_removePane","_internal_changePanesHeight","targetPane","totalStretch","maxPaneHeight","pixelStretchFactor","oldHeight","otherPanesChange","panesCount","newPaneHeight","newStretchFactor","_internal_swapPanes","firstPane","secondPane","_internal_movePane","paneToMove","_private__paneInvalidationMask","_internal_startScaleTime","_internal_zoomTime","pointX","_internal_scrollChart","_internal_startScrollTime","_internal_scrollTimeTo","_internal_endScrollTime","_internal_scaleTimeTo","_internal_endScaleTime","_internal_setAndSaveCurrentPosition","skipEvent","_internal_setAndSaveSyntheticPosition","horizontalPosition","_internal_clearCurrentPosition","_internal_updateTimeScale","newBaseIndex","oldFirstTime","newFirstTime","currentBaseIndex","isLastSeriesBarVisible","isLeftBarShiftToLeft","isSeriesPointsAdded","isSeriesPointsAddedToRight","allowShiftWhenReplacingWhitespace","allowShiftVisibleRangeOnWhitespaceReplacement","replacedExistingWhitespace","needShiftVisibleRangeOnNewBar","shiftVisibleRangeOnNewBar","compensationShift","_internal_rendererOptionsProvider","_internal_addSeriesToPane","_private__addSeriesToPane","_internal_removeSeries","seriesIndex","paneImpl","_private__cleanupIfPaneIsEmpty","mask","_internal_setTargetLogicalRange","_internal_defaultVisiblePriceScaleId","_internal_moveSeriesToPane","newPaneIndex","fromPaneIndex","_private__seriesPaneIndex","previousPane","_internal_backgroundBottomColor","_internal_colors","cachedValue","_internal_getPaneIndex","_internal_addPane","_private__addPane","idx","invalidateType","fillUpDownCandlesticksColors","wickColor","LastPriceAnimationMode","precisionByMinMove","fractPart","PriceLineSource","isBusinessDay","isUTCTimestamp","TickMarkType","getMonth","getUTCMonth","getDay","getUTCDate","getYear","getUTCFullYear","dd","MMMM","locale","toLocaleString","month","MMM","MM","yy","yyyy","formatDate","DateFormatter","dateFormat","_private__dateFormat","_private__locale","TimeFormatter","_private__formatStr","getUTCHours","getUTCMinutes","getUTCSeconds","defaultParams","_internal_dateFormat","_internal_timeFormat","_internal_dateTimeSeparator","_internal_locale","DateTimeFormatter","formatterParams","_private__dateFormatter","_private__timeFormatter","_private__separator","dateTime","defaultTickMarkFormatter","timePoint","tickMarkType","formatOptions","year","day","hour12","hour","minute","_internal_businessDay","_internal_timestamp","UTC","localDateFromUtc","getUTCMilliseconds","hours","minutes","seconds","intradayWeightDivisors","_internal_divisor","_internal_weight","weightByTime","currentDate","prevDate","getTime","cast","fillWeightsForPoints","sortedTimePoints","prevTime","totalTimeDiff","currentPoint","averageTimeDiff","approxPrevDate","businessDayConverter","businessDay","stringToBusinessDay","timestampConverter","selectTimeConverter","validDateRegex","convertTime","test","d","convertStringToBusinessDay","convertStringsToBusinessDays","weightToTickMarkType","HorzScaleBehaviorTime","setOptions","preprocessData","createConverterToInternalObj","convertHorzItemToInternal","_private__dateTimeFormatter","tp","tickMarkFormatter","tickMarkString","maxTickMarkWeight","tickMarks","maxWeight","_internal_applyDefaults","isRunningOnClientSide","isFF","navigator","userAgent","isIOS","platform","isChrome","chrome","isWindows","userAgentData","isChromiumBased","brands","some","brand","msg","suggestChartSize","originalSize","integerWidth","integerHeight","suggestTimeScaleHeight","originalHeight","suggestPriceScaleWidth","originalWidth","preventScrollByWheelClick","el","button","MouseEventHandler","_private__clickCount","_private__clickTimeoutId","_private__clickPosition","NEGATIVE_INFINITY","POSITIVE_INFINITY","_private__tapCount","_private__tapTimeoutId","_private__tapPosition","_private__longTapTimeoutId","_private__longTapActive","_private__mouseMoveStartPosition","_private__touchMoveStartPosition","_private__touchMoveExceededManhattanDistance","_private__cancelClick","_private__cancelTap","_private__unsubscribeOutsideMouseEvents","_private__unsubscribeOutsideTouchEvents","_private__unsubscribeMobileSafariEvents","_private__unsubscribeMousemove","_private__unsubscribeRootMouseEvents","_private__unsubscribeRootTouchEvents","_private__startPinchMiddlePoint","_private__startPinchDistance","_private__pinchPrevented","_private__preventTouchDragProcess","_private__mousePressed","_private__lastTouchEventTimeStamp","_private__activeTouchId","_private__acceptMouseLeave","_private__onFirefoxOutsideMouseUp","mouseUpEvent","_private__mouseUpHandler","_private__onMobileSafariDoubleClick","dblClickEvent","_private__firesTouchEvents","compatEvent","_private__makeCompatEvent","_internal_manhattanDistance","manhattanDistance","_private__touchMouseMoveWithDownInfo","getPosition","_private__processTouchEvent","_private__handler","_internal_doubleTapEvent","_private__resetTapTimeout","_private__processMouseEvent","_internal_mouseDoubleClickEvent","_private__resetClickTimeout","_private__target","_private__init","_private__clearLongTapTimeout","_private__mouseEnterHandler","enterEvent","boundMouseMoveHandler","_private__mouseMoveHandler","_internal_mouseEnterEvent","moveEvent","_internal_mouseMoveEvent","_private__touchMoveHandler","touch","touchWithId","changedTouches","eventTimeStamp","moveInfo","_internal_xOffset","xOffset","_internal_yOffset","yOffset","correctedXOffset","isVertDrag","_internal_treatVertTouchDragAsPageScroll","isHorzDrag","_internal_treatHorzTouchDragAsPageScroll","_internal_touchMoveEvent","_private__mouseMoveWithDownHandler","_internal_pressedMouseMoveEvent","currentPosition","startPosition","_private__touchEndHandler","touchEndEvent","touches","_internal_touchEndEvent","_internal_tapEvent","rootElement","documentElement","_internal_mouseUpEvent","_internal_mouseClickEvent","_private__touchStartHandler","downEvent","identifier","boundTouchMoveWithDownHandler","boundTouchEndHandler","passive","_private__longTapHandler","_internal_touchStartEvent","_private__mouseDownHandler","boundMouseMoveWithDownHandler","boundMouseUpHandler","_internal_mouseDownEvent","doc","outsideHandler","_internal_mouseDownOutsideEvent","composed","composedPath","_private__mouseLeaveHandler","_private__initPinch","_internal_pinchStartEvent","_internal_pinchEvent","_internal_pinchEndEvent","_private__checkPinchState","currentDistance","getDistance","_private__stopPinch","_private__startPinch","getBoundingClientRect","clientX","clientY","_internal_mouseLeaveEvent","_internal_longTapEvent","sourceCapabilities","firesTouchEvents","eventLike","pageX","pageY","screenX","screenY","localX","localY","ctrlKey","altKey","shiftKey","metaKey","_internal_isTouch","_internal_srcType","_internal_target","_internal_preventDefault","p2","xDiff","yDiff","sqrt","cancelable","timeStamp","PaneSeparator","chartWidget","topPaneIndex","bottomPaneIndex","_private__handle","_private__mouseEventHandler","_private__resizeEnabled","_private__resizeInfo","_private__chartWidget","_private__topPane","_internal_paneWidgets","_private__bottomPane","_private__rowElement","_private__cell","margin","setAttribute","_private__updateBorderColor","panes","enableResize","_private__addResizableHandle","_internal_getElement","_internal_getSize","_internal_getBitmapSize","_internal_drawBitmap","separatorColor","_internal_backgroundElement","_internal_element","backgroundElement","bgStyle","zIndex","cursor","handlers","_private__mouseOverEvent","_private__mouseLeaveEvent","_private__mouseDownEvent","_private__pressedMouseMoveEvent","_private__mouseUpEvent","separatorHoverColor","_internal_state","minPaneStretch","_internal_startY","_internal_prevStretchTopPane","_internal_maxPaneStretch","_internal_totalStretch","_internal_pixelStretchFactor","_internal_minPaneStretch","resizeInfo","deltaY","deltaStretchFactor","upperPaneNewStretch","distanceBetweenPoints","pos1","pos2","_internal_position","speedPxPerMSec","maxSpeed","speed","durationMSec","dumpingCoeff","lnDumpingCoeff","KineticAnimation","minSpeed","_private__position1","_private__position2","_private__position3","_private__position4","_private__animationStartPosition","_private__durationMsecs","_private__speedPxPerMsec","_private__minSpeed","_private__maxSpeed","_private__dumpingCoeff","_internal_addPosition","totalDistance","speed1","distance1","speedItems","distanceItems","speed2","distance2","speed3","distance3","resultSpeed","durationMsecs","_private__progressDuration","progress","svg","css","AttributionLogoWidget","_private__element","_private__cssElement","_private__theme","_private__container","_private__chart","_private__render","_internal_removeElement","_private__shouldUpdate","_private__shouldBeVisible","_private__themeToUse","attributionLogo","_private__getUTMSource","URL","location","href","hostname","pathname","innerText","innerHTML","toggleAttribute","createBoundCanvas","parentElement","canvas","releaseCanvas","drawForeground","drawSourceViews","paneViewsGetter","drawRendererFn","hasPriceScale","buildPriceAxisViewsGetter","psId","recalculateOverlapping","direction","currentGroupStart","initLabelHeight","spaceBeforeCurrentGroup","prev","prevFixedCoordinate","overlap","edgePoint","outOfViewport","desiredGroupShift","possibleShift","k","priceScaleCrosshairLabelVisible","PriceAxisWidget","rendererOptionsProvider","_private__size","_private__mousedown","_private__widthCache","_private__font","_private__prevOptimalWidth","_private__isSettingSize","_private__canvasSuggestedBitmapSizeChangedHandler","_internal_chart","_private__topCanvasSuggestedBitmapSizeChangedHandler","_private__isLeft","_private__sourcePaneViews","_private__sourceTopPaneViews","_private__sourceBottomPaneViews","overflow","_private__canvasBinding","_private__topCanvasBinding","topCanvas","_private__mouseDownOutsideEvent","_private__mouseDoubleClickEvent","_private__mouseEnterEvent","_internal_rendererOptions","isFontChanged","_internal_optimalWidth","tickMarkMaxWidth","colorSpace","_private__baseFont","_private__backLabels","j","topValue","bottomValue","resultTickMarksMaxWidth","_internal_setSize","_internal_getWidth","_internal_paint","canvasOptions","_private__alignLabels","_private__drawBackground","_private__drawBorder","_internal_drawAdditionalSources","_private__drawTickMarks","_private__drawBackLabels","topTarget","_private__drawCrosshairLabel","drawImage","_private__setCursor","addViewsForSources","borderSize","priceScaleOptions","tickMarkLeftX","tickHeight","tickLength","rect","textLeftX","yMidCorrections","orderedSources","paneState","isDefault","centerSource","updateForSources","sourceViews","alignLabels","_private__fixLabelOverlap","halfHeight","sourceBottomPaneViews$1","sourcePaneViews$1","sourceLabelPaneViews","sourceTopPaneViews$1","PaneWidget","_private__leftPriceAxisWidget","_private__rightPriceAxisWidget","_private__attributionLogoWidget","_private__startScrollingPos","_private__isScrolling","_private__clicked","_private__dblClicked","_private__prevPinchScale","_private__longTap","_private__startTrackPoint","_private__exitTrackingModeOnNextTry","_private__initCrosshairPosition","_private__scrollXAnimation","_private__state","_private__onStateDestroyed","_private__paneCell","paneWrapper","_private__leftAxisCell","_private__rightAxisCell","_internal_updatePriceAxisWidgetsStates","_internal_setState","_private__recreatePriceAxisWidgets","_internal_updatePriceAxisWidgets","stretchFactor","_private__onMouseEvent","_private__setCrosshairPosition","_private__mouseTouchDownEvent","_private__fireClickedDelegate","_private__fireMouseClickDelegate","_private__pressedMouseTouchMoveEvent","_private__endScroll","_private__startTrackingMode","_private__clearCrosshairPosition","_internal_clicked","_internal_dblClicked","middlePoint","zoomScale","origPoint","newX","newY","trackingMode","exitMode","_private__tryExitTrackingMode","_internal_setPriceAxisSize","priceAxisWidget","_internal_recalculatePriceScales","_private__drawSources","_private__drawGrid","_private__drawCrosshair","_internal_leftPriceAxisWidget","_internal_rightPriceAxisWidget","_private__drawSourceImpl","panePrimitives","panePrimitive","drawFn","hoveredSource","objecId","leftAxisVisible","rightAxisVisible","_private__preventScroll","_private__correctXCoord","_private__correctYCoord","startTrackPoint","crossHairPosition","startAnimationTime","activeElement","blur","selection","getSelection","removeAllRanges","chartOptions","scrollOptions","kineticScrollOptions","kineticScroll","_internal_localX","_internal_localY","mouse","PriceAxisStub","_private__borderVisible","_private__bottomColor","horzBorderSize","vertBorderSize","buildTimeAxisViewsGetter","sourcePaneViews","sourceTopPaneViews","sourceBottomPaneViews","TimeAxisWidget","_private__leftStub","_private__rightStub","_private__mouseDown","_private__sizeChanged","_private__leftStubCell","_private__rightStubCell","_private__dv","_private__recreateStubs","_internal_leftStub","_internal_rightStub","_internal_sizeChanged","_internal_setSizes","timeAxisSize","leftStubWidth","rightStubWidth","_internal_optimalHeight","_private__getRendererOptions","_internal_labelBottomOffset","_private__drawAdditionalSources","_private__drawLabels","axisViewsGetter","_private__lineColor","tickLen","_private__alignTickMarkLabelCoordinate","allowBoldLabels","_private__baseBoldFont","labelText","leftTextCoordinate","newFont","borderVisibleGetter","bottomColorGetter","windowsChrome","ChartWidget","_private__paneWidgets","_private__paneSeparators","_private__drawRafId","_private__leftPriceAxisWidth","_private__rightPriceAxisWidth","_private__invalidateMask","_private__drawPlanned","_private__observer","_private__cursorStyleOverride","classList","disableSelection","_private__tableElement","_private__onWheelBound","_private__onMousewheel","shouldSubscribeMouseWheel","_private__setMouseWheelEventListener","_private__onPaneWidgetCrosshairMoved","_private__timeAxisWidget","usedObserver","autoSize","_private__installObserver","containerRect","_internal_resize","_private__syncGuiWithModel","_private__updateTimeAxisVisibility","_internal_timeAxisWidget","cancelAnimationFrame","paneWidget","paneSeparator","_private__destroySeparator","_private__uninstallObserver","forceRepaint","sizeHint","heightStr","widthStr","_private__drawImpl","invalidateMask","currentlyHasMouseWheelListener","shouldHaveMouseWheelListener","_private__applyPanesOptions","_private__applyAutoSizeOptions","_internal_takeScreenshot","screeshotBitmapSize","_private__traverseLayout","screenshotCanvas","_internal_getPriceAxisWidth","_private__isLeftAxisVisible","_private__isRightAxisVisible","_internal_autoSizeActive","_internal_setCursorStyle","setProperty","removeProperty","_internal_getCursorOverrideStyle","_internal_paneSize","separator","drawPriceAxises","targetX","targetY","separatorBitmapSize","leftAxisBitmapWidth","firstPaneBitmapWidth","rightAxisBitmapWidth","drawStub","stub","timeAxisBitmapSize","_private__adjustSizeImpl","leftPriceAxisWidth","rightPriceAxisWidth","minimumWidth","paneWidth","separatorCount","separatorHeight","separatorsHeight","timeAxisVisible","timeAxisHeight","minimumHeight","otherWidgetHeight","totalPaneHeight","stretchPixels","accumulatedHeight","pixelRatio","paneHeight","calculatePaneHeight","_private__determineWheelSpeedAdjustment","deltaMode","DOM_DELTA_PAGE","DOM_DELTA_LINE","deltaX","scrollSpeedAdjustment","scrollPosition","invalidationType","_private__updateGui","_private__applyMomentaryAutoScale","_private__applyTimeScaleInvalidations","requestAnimationFrame","targetPaneWidgetsCount","actualPaneWidgetsCount","_private__onPaneWidgetClicked","_private__onPaneWidgetDblClicked","insertBefore","_private__getMouseEventParamsImpl","clientTime","hoveredSeries","hoveredObject","_private__getPaneIndex","_internal_originalTime","_internal_point","_internal_paneIndex","_internal_hoveredSeries","_internal_seriesData","_internal_hoveredObject","_internal_touchMouseEventData","crosshairPane","containerEntry","userSelect","webkitUserSelect","msUserSelect","MozUserSelect","webkitTapHighlightColor","Boolean","isWhitespaceData","isFulfilledData","isFulfilledBarData","isFulfilledLineData","getColoredLineBasedSeriesPlotRow","getAreaSeriesPlotRow","getBaselineSeriesPlotRow","getBarSeriesPlotRow","getCandlestickSeriesPlotRow","getCustomSeriesPlotRow","dataToPlotRow","excludedTime","isSeriesPlotRow","row","wrapCustomValues","customValues","_internal_customValues","isWhitespaceDataWithCustomCheck","customIsWhitespace","wrapWhitespaceData","createPlotRowFn","getSeriesPlotRowCreator","seriesPlotRowFnMap","createEmptyTimePointData","_internal_mapping","seriesRowsFirstAndLastTime","seriesRows","_internal_firstTime","_internal_lastTime","seriesUpdateInfo","prevSeriesRows","firstAndLastTime","prevFirstAndLastTime","_internal_historicalUpdate","timeScalePointTime","mergedPointData","saveOriginalTime","DataLayer","_private__pointDataByTimePoint","_private__seriesRowsBySeries","_private__seriesLastTimePoint","_private__sortedTimePoints","_internal_setSeriesData","needCleanupPoints","isTimeScaleAffected","pointData","originalTimes","timeConverter","createPlotRow","customWhitespaceChecker","horzItemKey","timePointData","_private__cleanupPointsData","_private__setRowsToSeries","newTimeScalePoints","t1","t2","_private__replaceTimeScalePoints","_private__getUpdateResponse","_internal_updateSeriesData","historicalUpdate","extendedData","lastSeriesTime","pointDataAtTime","affectsTimeScale","_private__updateHistoricalSeriesRow","_private__updateLastSeriesRow","newPoint","insertIndex","assignIndexToPointData","lastSeriesRow","pointDataIndex","newTimePoints","oldPoint","_private__getBaseIndex","updatedSeries","dataUpdateResponse","_internal_info","_internal_points","_internal_firstChangedPointIndex","seriesRow","lowerBoundItemsCompare","upperBoundItemsCompare","visibleTimedValues","extendedRange","extendedFrom","extendedTo","SeriesPaneViewBase","extendedVisibleRange","_internal__invalidated","_internal__dataInvalidated","_internal__optionsInvalidated","_internal__items","_internal__itemsVisibleRange","_private__extendedVisibleRange","_private__makeValid","_internal__renderer","_internal__updateOptions","_internal__clearVisibleRange","_internal__fillRawPoints","_private__makeValidImpl","_internal__convertToCoordinates","_internal__prepareRendererData","CustomSeriesPaneRendererWrapper","sourceRenderer","_private__sourceRenderer","SeriesCustomPaneView","priceValueBuilder","isWhitespace","colorer","_internal_originalData","unwrapItemData","originalData","barColor","customStyleDefaults","createPaneView$6","createCustomSeriesDefinition","definition","isBuiltIn","defaultOptions","_internal_createPaneView","_internal_customPaneView","isSeriesDefinition","singleValueData","lineData","areaData","baselineData","ohlcData","barData","candlestickData","getSeriesDataCreator","seriesPlotRowToDataMap","customData","crosshairOptionsDefaults","gridOptionsDefaults","layoutOptionsDefaults","priceScaleOptionsDefaults","timeScaleOptionsDefaults","chartOptionsDefaults","language","PriceScaleApi","_private__priceScaleId","_private__paneIndex","setVisibleRange","setAutoScale","getVisibleRange","on","PaneApi","seriesApiGetter","chartApi","_private__seriesApiGetter","_internal__chartApi","getHeight","setHeight","getStretchFactor","setStretchFactor","getSeries","getHTMLElement","widgets","attachPrimitive","attached","requestUpdate","detachPrimitive","setPreserveEmptyPane","preserveEmptyPane","addCustomSeries","checkPriceLineOptions","checkItemsAreOrdered","allowDuplicates","checkResult","checkSeriesValuesType","getChecker","checkBarItem","checkLineItem","checkCustomItem","barItem","isSafeValue","MIN_SAFE_VALUE","toPrecision","MAX_SAFE_VALUE","lineItem","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","priceLineOptionsDefaults","PriceLine","_internal_priceLine","SeriesApi","dataUpdatesConsumer","priceScaleApiProvider","paneApiGetter","_private__dataChangedDelegate","_internal__dataUpdatesConsumer","_private__priceScaleApiProvider","_private__paneApiGetter","priceToCoordinate","coordinateToPrice","barsInLogicalRange","correctedRange","dataFirstBarInRange","dataLastBarInRange","dataFirstIndex","dataLastIndex","barsBefore","barsAfter","_internal_applyNewData","_private__onDataChanged","_internal_updateData","dataByIndex","logicalIndex","mismatchDirection","creator","seriesCreator","rows","subscribeDataChanged","unsubscribeDataChanged","getPane","strictOptions","priceLines","moveToPane","seriesOrder","setSeriesOrder","TimeScaleApi","timeAxisWidget","_private__timeRangeChanged","_private__onVisibleBarsChanged","_private__onVisibleLogicalRangeChanged","_private__onSizeChanged","scrollToPosition","animated","scrollToRealTime","timeRange","convertedRange","getVisibleLogicalRange","setVisibleLogicalRange","resetTimeScale","logicalToCoordinate","coordinateToLogical","timeToIndex","timeToCoordinate","coordinateToTime","subscribeVisibleTimeRangeChange","unsubscribeVisibleTimeRangeChange","subscribeVisibleLogicalRangeChange","unsubscribeVisibleLogicalRangeChange","subscribeSizeChange","unsubscribeSizeChange","patchPriceFormat","priceFormatBuiltIn","migrateHandleScaleScrollOptions","toInternalOptions","ChartApi","_private__seriesMap","_private__seriesMapReversed","_private__clickedDelegate","_private__dblClickedDelegate","_private__crosshairMovedDelegate","_private__dataLayer","internalOptions","_internal__horzScaleBehavior","paramSupplier","_private__convertMouseParams","_private__timeScaleApi","resize","autoSizeActive","_private__addSeriesImpl","removeSeries","seriesApi","_private__sendUpdateToChart","subscribeClick","unsubscribeClick","subscribeCrosshairMove","unsubscribeCrosshairMove","subscribeDblClick","unsubscribeDblClick","takeScreenshot","addPane","_private__getPaneApi","removePane","swapPanes","chartElement","paneSize","setCrosshairPosition","clearCrosshairPosition","horzBehaviour","_private__mapSeriesToApi","param","hoveredObjectId","sourceEvent","fetchHtmlElement","getElementById","createChartEx","htmlElement","defaultHorzScaleBehavior","LinePaneViewBase","_internal__createRawItemBase","_internal__createRawItem","drawSeriesPointMarkers","renderingScope","pointMarkersRadius","styleGetter","prevStyle","walkLine","lineType","barWidth","finishStyledArea","firstItem","currentStyle","currentStyleFirstItem","halfBarWidth","item1","item2","changeStyle","newStyle","currentItem","itemStyle","cp1","cp2","getControlPoints","bezierCurveTo","curveTension","subtract","divide","fromPointIndex","toPointIndex","beforeFromPointIndex","afterToPointIndex","finishStyledArea$1","PaneRendererLineBase","_internal_barWidth","_internal_lineType","_internal_pointMarkersRadius","lineJoin","_internal__strokeStyle","PaneRendererLine","SeriesLinePaneView","pointMarkersVisible","lineStyleDefaults","createPaneView$5","createLineSeries","lineSeries","createDebouncedMicroTaskHandler","scheduled","queueMicrotask","markWithGreaterWeight$1","toInternalHorzScaleItem","fromInternalHorzScaleItem","YieldCurveHorzScaleBehavior","_private__pointsChangedDelegate","_private__invalidateWhitespace","_private__largestIndex","_internal_whitespaceInvalidated","internalItem","_private__formatTime","months","years","remainingMonths","yieldChartOptionsDefaults","baseResolution","minimumTimeRange","startTimeRange","generateWhitespaceData","_internal_resolution","resolution","buildWhitespaceState","generateWhitespaceHash","yieldCurve","lineStyleDefaultOptionOverrides","YieldChartApi","fullOptions","_initWhitespaceSeries","optionOverrides","whiteSpaceSeries","currentWhitespaceHash","updateWhitespace","newWhitespaceState","newWhitespaceHash","createYieldCurveChart","markWithGreaterWeight","HorzScaleBehaviorPrice","priceWeight","createOptionsChart","baseLevelCoordinate","areaFirstItem","newAreaFirstItem","PaneRendererAreaBase","_internal_baseLevelCoordinate","_internal_invertFilledArea","_internal__fillStyle","GradientStyleCache","_internal_get","cachedParams","_private__params","_internal_topColor1","topColor1","_internal_topColor2","topColor2","_internal_bottomColor1","bottomColor1","_internal_bottomColor2","bottomColor2","_internal_topCoordinate","topCoordinate","_internal_bottomCoordinate","bottomCoordinate","_private__cachedValue","multiplier","baseline","baselineRatio","PaneRendererBaselineArea","_private__fillCache","PaneRendererBaselineLine","_private__strokeCache","SeriesBaselinePaneView","_private__baselineAreaRenderer","_private__baselineLineRenderer","relativeGradient","baselineStyleDefaults","createPaneView$4","createSeries$4","baselineSeries","PaneRendererArea","SeriesAreaPaneView","_private__areaRenderer","_private__lineRenderer","invertFilledArea","areaStyleDefaults","createPaneView$3","createSeries$3","areaSeries","optimalBarWidth","optimalCandlestickWidth","barSpacingSpecialCaseFrom","barSpacingSpecialCaseTo","barSpacingSpecialCaseCoeff","barSpacingReducingCoeff","atan","scaledBarSpacing","optimal","PaneRendererBars","_private__barWidth","_private__barLineWidth","_private__calcBarWidth","_internal_thinBars","prevColor","drawOpenClose","bodyWidthHalf","bodyCenter","bodyLeft","bodyWidth","bodyRight","bodyTop","bodyBottom","bodyHeight","sideWidth","_internal_openVisible","openLeft","openTop","openBottom","closeRight","closeTop","closeBottom","BarsPaneViewBase","_internal__createDefaultItem","SeriesBarsPaneView","barStyleProps","openVisible","thinBars","barStyleDefaults","createPaneView$2","createSeries$2","barSeries","PaneRendererCandlesticks","wickWidth","_internal_wickVisible","_private__drawWicks","_private__calculateBorderWidth","_private__drawCandles","prevWickColor","wickOffset","prevEdge","scaledX","prevBorderColor","prevBarColor","SeriesCandlesticksPaneView","candlestickStyleProps","wickVisible","candlestickStyleDefaults","createPaneView$1","createSeries$1","showSpacingMinimalBarWidth","alignToMinimalWidthLimit","PaneRendererHistogram","_private__precalculatedCache","_private__fillPrecalculatedCache","histogramBase","_internal_histogramBase","topHistogramBase","bottomHistogramBase","columnWidth","halfWidth","_internal_roundedCenter","minWidth","SeriesHistogramPaneView","histogramStyleDefaults","createSeries","histogramSeries","_private__primitive","_private__attach","detach","textWatermarkOptionsDefaults","horzAlign","vertAlign","lines","textWatermarkLineOptionsDefaults","fontStyle","TextWatermarkRenderer","_private__metricsCache","textHeight","_private__metrics","lineHeight","vertOffset","horzOffset","_internal_vertOffset","fontCache","_private__fontCache","TextWatermarkPaneView","buildRendererOptions$1","buildRendererLineOptions","lineOption","mergeLineOptionsWithDefaults","mergeOptionsWithDefaults$2","TextWatermark","_private__paneViews","_internal_requestUpdate","createTextWatermark","imageWatermarkOptionsDefaults","ImageWatermarkRenderer","_private__determinePlacement","_internal_imgElement","globalAlpha","maxHeight","_internal_imgHeight","imgHeight","_internal_imgWidth","imgWidth","plotCentreX","plotCentreY","paddingSize","availableWidth","availableHeight","scaleX","scaleY","scaleToUse","drawWidth","drawHeight","ImageWatermarkPaneView","_private__image","_private__imageWidth","_private__imageHeight","buildRendererOptions","_internal_stateUpdate","_internal_imageWidth","_internal_imageHeight","_internal_image","_internal_optionsUpdate","imgElement","mergeOptionsWithDefaults$1","ImageWatermark","imageUrl","_private__imgElement","_private__imageUrl","attachedParams","_private__requestUpdate","Image","onload","imageHeight","naturalHeight","imageWidth","naturalWidth","pv","_private__updateOptions","createImageWatermark","SeriesPrimitiveAdapter","seriesMarkerOptionsDefaults","shapeSize","shape","calculateShapeHeight","shapeMargin","calculateAdjustedMargin","hasSide","hasInBar","drawArrow","up","coords","arrowSize","halfArrowSize","_internal_pixelRatio","baseSize","halfBaseSize","hitTestArrow","triangleTolerance","rectTolerance","baseLeft","baseRight","baseTop","baseBottom","isInTriangleBounds","headLeft","headRight","headTop","headBottom","dx","dy","drawCircle","circleSize","halfSize","hitTestCircle","tolerance","dist","drawSquare","squareSize","hitTestSquare","drawText","hitTestText","textX","textY","SeriesMarkersRenderer","_private__zOrder","hitTestItem","_internal_content","drawItem","bitmapShapeItemCoordinates","drawShape","coordinates","_internal_shape","hitTestShape","isPriceMarker","getPrice","marker","isValueData","isOhlcData","fillSizeAndY","rendererItem","offsets","ignoreOffset","sizeMultiplier","_internal_aboveBar","_internal_belowBar","SeriesMarkersPaneView","_private__markers","_private__dataInvalidated","_internal__makeValid","_internal_setMarkers","markers","_internal_updateOptions","seriesMarkers","_internal_internalId","visibleBarsRange","prevTimeIndex","shapeMargin$1","dataAt","mergeOptionsWithDefaults","SeriesMarkersPrimitive","_private__indexedMarkers","_private__dataChangedHandler","_private__autoScaleMarginsInvalidated","_private__autoScaleMargins","_private__markersPositions","_private__cachedBarSpacing","_private__recalculationRequired","_private__recalculateMarkers","_internal_markers","_private__updateAllViews","_private__getAutoScaleMargins","marginValue","positions","_private__getMarkerPositions","aboveBar","inBar","belowBar","atPriceTop","atPriceBottom","atPriceMiddle","firstDataIndex","seriesDataByIndex","finalIndex","baseMarker","SeriesMarkersPrimitiveWrapper","setMarkers","createSeriesMarkers","ExpiringMarkerManager","updateCallback","_private__updateCallback","_internal_setMarker","_internal_clearMarker","timeoutId","_private__triggerUpdate","markerWithTimeout","_internal_timeoutId","_internal_expiresAt","_internal_clearAllMarkers","_internal_getMarkers","activeMarkers","_internal_setUpdateCallback","upDownMarkersPluginOptionDefaults","positiveColor","negativeColor","updateVisibilityDuration","MarkersPrimitiveRenderer","neutralColor","_private__neutralColor","_private__negativeColor","_private__positiveColor","rad","centreX","_private__getColor","_internal_sign","isAreaStyleOptions","opts","getNeutralColor","MarkersPrimitivePaneView","isLineData","UpDownMarkersPrimitive","_private__managedDataPoints","_private__markersManager","horzKey","existingPrice","getSign","_internal_clearMarkers","oldValue","SeriesUpDownMarkerPrimitiveWrapper","clearMarkers","createUpDownMarkers","customSeriesDefaultOptions","version","AreaSeries","BarSeries","BaselineSeries","HistogramSeries","LineSeries"],"sourceRoot":"webpack:///","x_google_ignoreList":[8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]}