# Binance Funding Trigger Strategy - –ü–æ—Å—ñ–±–Ω–∏–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

## üéØ –©–æ —Ü–µ?

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è –¥–ª—è –∑–∞—Ä–æ–±—ñ—Ç–∫—É –Ω–∞ –ø–æ—Å—Ç-—Ñ–∞–Ω–¥—ñ–Ω–≥–æ–≤–∏—Ö –ø–∞–¥—ñ–Ω–Ω—è—Ö —Ü—ñ–Ω–∏ –Ω–∞ Binance Futures.

### –Ø–∫ –ø—Ä–∞—Ü—é—î:

```
1. –í—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ –º–∞–ª—É LONG –ø–æ–∑–∏—Ü—ñ—é (5 USDT) –∑–∞ 10 —Å–µ–∫—É–Ω–¥ –¥–æ –≤–∏–ø–ª–∞—Ç–∏ —Ñ–∞–Ω–¥—ñ–Ω–≥—É
   ‚Üì
2. –ß–µ–∫–∞—î–º–æ WebSocket –µ–≤–µ–Ω—Ç: ACCOUNT_UPDATE –∑ m="FUNDING_FEE"
   ‚Üì
3. –ú–∏—Ç—Ç—î–≤–æ –≤—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ SHORT (100 USDT) - –ª–æ–≤–∏–º–æ –ø–∞–¥—ñ–Ω–Ω—è —Ü—ñ–Ω–∏
   ‚Üì
4. –ó–∞–∫—Ä–∏–≤–∞—î–º–æ LONG —Ç—Ä–∏–≥–µ—Ä-–ø–æ–∑–∏—Ü—ñ—é
   ‚Üì
5. –ú–æ–Ω—ñ—Ç–æ—Ä–∏–º–æ —Ü—ñ–Ω—É, –≤–∏—Ö–æ–¥–∏–º–æ –ø—Ä–∏ —Ä–µ–≤–µ—Ä—Å—ñ –∞–±–æ —á–µ—Ä–µ–∑ 6 —Å–µ–∫—É–Ω–¥
   ‚Üì
6. –ü—Ä–æ—Ñ—ñ—Ç! üí∞
```

## üìã –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

### 1. Binance Futures API –∫–ª—é—á—ñ

–ü–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ API –∫–ª—é—á—ñ –≤ Binance Futures –∑ –ø—Ä–∞–≤–∞–º–∏:
- ‚úÖ Enable Futures
- ‚úÖ Enable Reading
- ‚úÖ Enable Spot & Margin Trading
- ‚ùå Enable Withdrawals (–ù–ï –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–ª—è –±–µ–∑–ø–µ–∫–∏)

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è `.env`

–î–æ–¥–∞–π—Ç–µ –≤ —Ñ–∞–π–ª `backend/.env`:

```bash
BINANCE_API_KEY=your_api_key_here
BINANCE_API_SECRET=your_api_secret_here
```

### 3. –ë–∞–ª–∞–Ω—Å

–ú—ñ–Ω—ñ–º—É–º **110 USDT** –Ω–∞ Binance Futures —Ä–∞—Ö—É–Ω–∫—É:
- 5 USDT –¥–ª—è LONG —Ç—Ä–∏–≥–µ—Ä–∞
- 100 USDT –¥–ª—è SHORT –ø–æ–∑–∏—Ü—ñ—ó
- 5 USDT –∑–∞–ø–∞—Å –Ω–∞ –∫–æ–º—ñ—Å—ñ—ó —Ç–∞ slippage

## üöÄ –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏

### –ö—Ä–æ–∫ 1: –î—ñ–∑–Ω–∞—Ç–∏—Å—å —á–∞—Å –Ω–∞—Å—Ç—É–ø–Ω–æ—ó –≤–∏–ø–ª–∞—Ç–∏ —Ñ–∞–Ω–¥—ñ–Ω–≥—É

–ù–∞ Binance Futures —Ñ–∞–Ω–¥—ñ–Ω–≥ –≤–∏–ø–ª–∞—á—É—î—Ç—å—Å—è **–∫–æ–∂–Ω—ñ 8 –≥–æ–¥–∏–Ω** –æ:
- 00:00 UTC
- 08:00 UTC
- 16:00 UTC

### –ö—Ä–æ–∫ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é

```bash
cd backend
npx tsx test-binance-funding-trigger.ts
```

### –ö—Ä–æ–∫ 3: –ß–µ–∫–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
1. –†–æ–∑—Ä–∞—Ö—É—î –Ω–∞—Å—Ç—É–ø–Ω–∏–π —á–∞—Å –≤–∏–ø–ª–∞—Ç–∏
2. –ü–æ—á–µ–∫–∞—î –¥–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç—É
3. –í—ñ–¥–∫—Ä–∏—î LONG —Ç—Ä–∏–≥–µ—Ä
4. –î–µ—Ç–µ–∫—Ç—É—î –≤–∏–ø–ª–∞—Ç—É —Ñ–∞–Ω–¥—ñ–Ω–≥—É
5. –í–∏–∫–æ–Ω–∞—î —Ç—Ä–µ–π–¥ (SHORT)
6. –ü–æ–∫–∞–∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

## üìä –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–≤–æ–¥—É

```
üöÄ STARTING BINANCE FUNDING TRIGGER STRATEGY
=======================================================================
‚úÖ Binance service initialized
‚úÖ ListenKey created: XY...
‚úÖ User Data Stream connected

‚è≥ Waiting 285.3s until entry time...

üìç OPENING LONG TRIGGER POSITION
=======================================================================
   Current Price: 95234.50
   Quantity: 0.052
‚úÖ LONG trigger opened!
   Order ID: 12345678
   Entry Price: 95234.50

üëÄ MONITORING FOR FUNDING PAYMENT...

‚ö°‚ö°‚ö° FUNDING PAYMENT DETECTED!
   Time: 2025-01-18T08:00:00.125Z
   Funding Amount: -0.047632 USDT
   Detection Latency: 125ms

üéØ OPENING SHORT POSITION
=======================================================================
‚úÖ SHORT opened in 78ms
   Order ID: 12345679
   Entry Price: 95230.20

üßπ CLOSING LONG TRIGGER POSITION
‚úÖ LONG closed in 156ms
   Order ID: 12345680

üëÄ MONITORING FOR EXIT SIGNAL
=======================================================================

üéØ EXIT SIGNAL: Price reversal detected
   Current Price: 94087.30
   Elapsed: 4.82s

‚úÖ SHORT CLOSED
   Order ID: 12345681
   Exit Price: 94085.75

üí∞ TRADE RESULTS
=======================================================================
   Entry Price: 95230.20
   Exit Price: 94085.75
   Price Change: -1.2015%
   Gross Profit: +1.2015%
   Funding Cost: -0.0476%
   Net Profit: +1.1539%
   Hold Time: 4.82s

‚úÖ PROFITABLE TRADE! üéØüí∞
```

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤

–ú–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –≤ —Ñ–∞–π–ª—ñ `test-binance-funding-trigger.ts`:

```typescript
const strategy = new BinanceFundingTriggerService({
  symbol: 'BTCUSDT',           // –ó–º—ñ–Ω–∏—Ç–∏ —Å–∏–º–≤–æ–ª
  fundingTime: nextFunding,
  triggerPositionUsdt: 5,      // –†–æ–∑–º—ñ—Ä LONG —Ç—Ä–∏–≥–µ—Ä–∞
  mainPositionUsdt: 100,       // –†–æ–∑–º—ñ—Ä SHORT –ø–æ–∑–∏—Ü—ñ—ó
  maxHoldTimeSeconds: 6,       // –ú–∞–∫—Å. —á–∞—Å —É—Ç—Ä–∏–º–∞–Ω–Ω—è SHORT
  apiKey,
  apiSecret,
});
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:

- **triggerPositionUsdt**: 5-10 USDT (–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–ª—è –¥–µ—Ç–µ–∫—Ü—ñ—ó)
- **mainPositionUsdt**: 50-500 USDT (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –±–∞–ª–∞–Ω—Å—É)
- **maxHoldTimeSeconds**: 5-8 —Å–µ–∫—É–Ω–¥ (–±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ –∞–Ω–∞–ª—ñ–∑—ñ)

## üìà –û—á—ñ–∫—É–≤–∞–Ω–∞ –ø—Ä–∏–±—É—Ç–∫–æ–≤—ñ—Å—Ç—å

–ù–∞ –æ—Å–Ω–æ–≤—ñ –∞–Ω–∞–ª—ñ–∑—É GATEIO RESOLV/USDT:

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–Ω—è |
|---------|----------|
| –ü–∞–¥—ñ–Ω–Ω—è —Ü—ñ–Ω–∏ | -1.42% |
| –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –ø–∞–¥—ñ–Ω–Ω—è | ~5 —Å–µ–∫—É–Ω–¥ |
| –ß–∞—Å —Ä–µ–∞–∫—Ü—ñ—ó | 130-155ms |
| Slippage | ~0.05-0.1% |
| –ö–æ–º—ñ—Å—ñ—ó Binance | ~0.04% (maker/taker) |
| **–û—á—ñ–∫—É–≤–∞–Ω–∏–π –ø—Ä–æ—Ñ—ñ—Ç** | **~0.8-1.2% –∑–∞ —Ç—Ä–µ–π–¥** |

### –©–æ–¥–µ–Ω–Ω–∞ –ø—Ä–∏–±—É—Ç–∫–æ–≤—ñ—Å—Ç—å (3 —Ç—Ä–µ–π–¥–∏ –Ω–∞ –¥–µ–Ω—å):

```
1 —Ç—Ä–µ–π–¥ = +1.0% –ø—Ä–∏–±—É—Ç–∫—É
3 —Ç—Ä–µ–π–¥–∏/–¥–µ–Ω—å = +3.0% / –¥–µ–Ω—å
3.0% * 365 –¥–Ω—ñ–≤ = +1095% —Ä—ñ—á–Ω–∏—Ö (APY)

–ó —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º 50% win rate:
–†–µ–∞–ª—å–Ω–∞ APY: ~300-500%
```

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤—ñ –∑–∞—É–≤–∞–∂–µ–Ω–Ω—è

### –†–∏–∑–∏–∫–∏:

1. **–ù–µ –≤—Å—ñ —Ñ–∞–Ω–¥—ñ–Ω–≥–∏ –º–∞—é—Ç—å –ø–∞–¥—ñ–Ω–Ω—è** - —ñ–Ω–æ–¥—ñ —Ü—ñ–Ω–∞ –º–æ–∂–µ –π—Ç–∏ –≤–≥–æ—Ä—É
2. **Slippage** - –≤ –ø–µ—Ä—ñ–æ–¥–∏ –Ω–∏–∑—å–∫–æ—ó –ª—ñ–∫–≤—ñ–¥–Ω–æ—Å—Ç—ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –≥—ñ—Ä—à—ñ —Ü—ñ–Ω–∏ –≤—Ö–æ–¥—É/–≤–∏—Ö–æ–¥—É
3. **–ó–∞—Ç—Ä–∏–º–∫–∏ WebSocket** - —è–∫—â–æ –∑–∞—Ç—Ä–∏–º–∫–∞ >200ms, –ø—Ä–∏–±—É—Ç–∫–æ–≤—ñ—Å—Ç—å –∑–Ω–∏–∂—É—î—Ç—å—Å—è
4. **–ö–æ–º—ñ—Å—ñ—ó** - –≤—Ä–∞—Ö–æ–≤—É—é—Ç—å—Å—è –≤ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∞—Ö, –∞–ª–µ –º–æ–∂—É—Ç—å –≤–∞—Ä—ñ—é–≤–∞—Ç–∏—Å—è

### –ë–µ–∑–ø–µ–∫–∞:

‚úÖ **–©–û –†–û–ë–ò–¢–¨ –°–¢–†–ê–¢–ï–ì–Ü–Ø:**
- –í—ñ–¥–∫—Ä–∏–≤–∞—î/–∑–∞–∫—Ä–∏–≤–∞—î –ø–æ–∑–∏—Ü—ñ—ó —á–µ—Ä–µ–∑ API
- –ú–æ–Ω—ñ—Ç–æ—Ä–∏—Ç—å WebSocket –ø–æ–¥—ñ—ó
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏—Ö–æ–¥–∏—Ç—å –∑ –ø–æ–∑–∏—Ü—ñ–π

‚ùå **–©–û –ù–ï –†–û–ë–ò–¢–¨:**
- –ù–ï –≤–∏–≤–æ–¥–∏—Ç—å –∫–æ—à—Ç–∏ (withdrawal –ù–ï –ø–æ—Ç—Ä—ñ–±–µ–Ω)
- –ù–ï –∑–º—ñ–Ω—é—î –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–∞—Ö—É–Ω–∫—É
- –ù–ï —Ç–æ—Ä–≥—É—î –±–µ–∑ –≤–∞—à–æ–≥–æ –¥–æ–∑–≤–æ–ª—É

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:

1. **–¢–µ—Å—Ç—É–π—Ç–µ —Å–ø–æ—á–∞—Ç–∫—É –∑ –º–∞–ª–∏–º–∏ —Å—É–º–∞–º–∏** (50-100 USDT)
2. **–ú–æ–Ω—ñ—Ç–æ—Ä—Ç–µ –ø–µ—Ä—à—ñ 5-10 —Ç—Ä–µ–π–¥—ñ–≤** –æ—Å–æ–±–∏—Å—Ç–æ
3. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ IP whitelist** –≤ Binance API settings
4. **–ó–∞–ø—É—Å–∫–∞–π—Ç–µ –Ω–∞ VPS** –∑ –Ω–∏–∑—å–∫–æ—é –ª–∞—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—é –¥–æ Binance
5. **–ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –±–∞–ª–∞–Ω—Å** –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç—Ä–µ–π–¥—É

## üîß Troubleshooting

### –ü–æ–º–∏–ª–∫–∞: "Missing Binance API credentials"

**–†—ñ—à–µ–Ω–Ω—è**: –î–æ–¥–∞–π—Ç–µ `BINANCE_API_KEY` —Ç–∞ `BINANCE_API_SECRET` –≤ `.env`

### –ü–æ–º–∏–ª–∫–∞: "Failed to create listenKey"

**–†—ñ—à–µ–Ω–Ω—è**: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ API key –º–∞—î –ø—Ä–∞–≤–∞ "Enable Futures" —Ç–∞ "Enable Spot & Margin Trading"

### –ü–æ–º–∏–ª–∫–∞: "Insufficient balance"

**–†—ñ—à–µ–Ω–Ω—è**: –ü–æ–ø–æ–≤–Ω—ñ—Ç—å Binance Futures —Ä–∞—Ö—É–Ω–æ–∫ –º—ñ–Ω—ñ–º—É–º –Ω–∞ 110 USDT

### WebSocket –Ω–µ –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è

**–†—ñ—à–µ–Ω–Ω—è**:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç –∑'—î–¥–Ω–∞–Ω–Ω—è
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ firewall (–ø–æ—Ä—Ç 443 –º–∞—î –±—É—Ç–∏ –≤—ñ–¥–∫—Ä–∏—Ç–∏–π)
3. –°–ø—Ä–æ–±—É–π—Ç–µ VPN, —è–∫—â–æ Binance –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π —É –≤–∞—à—ñ–π –∫—Ä–∞—ó–Ω—ñ

### "Timeout: No funding payment detected"

**–†—ñ—à–µ–Ω–Ω—è**:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —á–∞—Å –Ω–∞ –∫–æ–º–ø'—é—Ç–µ—Ä—ñ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–∏–π
2. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é –º—ñ–Ω—ñ–º—É–º –∑–∞ 2 —Ö–≤–∏–ª–∏–Ω–∏ –¥–æ –≤–∏–ø–ª–∞—Ç–∏
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ funding time –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π (00:00, 08:00, –∞–±–æ 16:00 UTC)

## üìö –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

- [WEBSOCKET-POSITION-STRUCTURES.md](./WEBSOCKET-POSITION-STRUCTURES.md) - –î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è WebSocket API
- [analyze-pre-funding-drop.ts](./analyze-pre-funding-drop.ts) - –ê–Ω–∞–ª—ñ–∑ pre-funding –ø–∞–¥—ñ–Ω—å
- [analyze-short-after-funding.ts](./analyze-short-after-funding.ts) - –ê–Ω–∞–ª—ñ–∑ post-funding —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó

## ü§ù –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º–∏:

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤—Å—ñ –ø–µ—Ä–µ–¥—É–º–æ–≤–∏
2. –ü–æ–¥–∏–≤—ñ—Ç—å—Å—è –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—ñ
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –±–∞–ª–∞–Ω—Å –Ω–∞ Binance
4. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ API –∫–ª—é—á—ñ –≤–∞–ª—ñ–¥–Ω—ñ

---

**‚ö†Ô∏è DISCLAIMER**: –¢–æ—Ä–≥—ñ–≤–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞–º–∏ –Ω–µ—Å–µ –≤–∏—Å–æ–∫—ñ —Ä–∏–∑–∏–∫–∏. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ü—é —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é –Ω–∞ —Å–≤—ñ–π –≤–ª–∞—Å–Ω–∏–π —Ä–∏–∑–∏–∫. –ê–≤—Ç–æ—Ä –Ω–µ –Ω–µ—Å–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ –∑–∞ –∑–±–∏—Ç–∫–∏.
