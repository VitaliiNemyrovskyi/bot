        // Fallback: Poll for data every 5 seconds if WebSocket is not available
        intervalId = setInterval(async () => {
          try {
            const ticker = await bybitService.getTicker('linear', symbol);
            if (ticker && ticker.length > 0) {
              const tickerData = ticker[0];
              if (!tickerData) return;
              
              send({
                type: 'ticker',
                symbol: tickerData.symbol,
                price: parseFloat(tickerData.lastPrice),
                volume: parseFloat(tickerData.volume24h),
                change24h: parseFloat(tickerData.price24hPcnt),
                bid: parseFloat(tickerData.bid1Price),
                ask: parseFloat(tickerData.ask1Price),
                high24h: parseFloat(tickerData.highPrice24h),
                low24h: parseFloat(tickerData.lowPrice24h),
                timestamp: Date.now()
              });
            }
          } catch (error) {
            console.error('Error fetching ticker data:', error);
            send({
              type: 'error',
              message: 'Failed to fetch ticker data',
